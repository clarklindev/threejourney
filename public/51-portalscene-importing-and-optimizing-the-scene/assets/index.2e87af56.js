(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const _ of h.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&i(_)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerpolicy&&(h.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?h.credentials="include":l.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.16.1
 * @author George Michael Brower
 * @license MIT
 */class ri{constructor(e,n,i,l,h="div"){this.parent=e,this.object=n,this.property=i,this._disabled=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(l),this.$name=document.createElement("div"),this.$name.classList.add("name"),ri.nextNameID=ri.nextNameID||0,this.$name.id=`lil-gui-name-${++ri.nextNameID}`,this.$widget=document.createElement(h),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}options(e){const n=this.parent.add(this.object,this.property,e);return n.name(this._name),this.destroy(),n}min(e){return this}max(e){return this}step(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Eu extends ri{constructor(e,n,i){super(e,n,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function ca(C){let e,n;return(e=C.match(/(#|0x)?([a-f0-9]{6})/i))?n=e[2]:(e=C.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=C.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),n?"#"+n:!1}const xu={isPrimitive:!0,match:C=>typeof C=="string",fromHexString:ca,toHexString:ca},mr={isPrimitive:!0,match:C=>typeof C=="number",fromHexString:C=>parseInt(C.substring(1),16),toHexString:C=>"#"+C.toString(16).padStart(6,0)},Su={isPrimitive:!1,match:Array.isArray,fromHexString(C,e,n=1){const i=mr.fromHexString(C);e[0]=(i>>16&255)/255*n,e[1]=(i>>8&255)/255*n,e[2]=(i&255)/255*n},toHexString([C,e,n],i=1){i=255/i;const l=C*i<<16^e*i<<8^n*i<<0;return mr.toHexString(l)}},bu={isPrimitive:!1,match:C=>Object(C)===C,fromHexString(C,e,n=1){const i=mr.fromHexString(C);e.r=(i>>16&255)/255*n,e.g=(i>>8&255)/255*n,e.b=(i&255)/255*n},toHexString({r:C,g:e,b:n},i=1){i=255/i;const l=C*i<<16^e*i<<8^n*i<<0;return mr.toHexString(l)}},Au=[xu,mr,Su,bu];function Cu(C){return Au.find(e=>e.match(C))}class yu extends ri{constructor(e,n,i,l){super(e,n,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=Cu(this.initialValue),this._rgbScale=l,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const h=ca(this.$text.value);h&&this._setValueFromHexString(h)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const n=this._format.fromHexString(e);this.setValue(n)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class yo extends ri{constructor(e,n,i){super(e,n,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",l=>{l.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class wu extends ri{constructor(e,n,i,l,h,_){super(e,n,i,"number"),this._initInput(),this.min(l),this.max(h);const g=_!==void 0;this.step(g?_:this._getImplicitStep(),g),this.updateDisplay()}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,n=!0){return this._step=e,this._stepExplicit=n,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let n=(e-this._min)/(this._max-this._min);n=Math.max(0,Math.min(n,1)),this.$fill.style.width=n*100+"%"}return this._inputFocused||(this.$input.value=e),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=()=>{const t=parseFloat(this.$input.value);isNaN(t)||this.setValue(this._clamp(t))},n=t=>{const c=parseFloat(this.$input.value);isNaN(c)||(this._snapClampSetValue(c+t),this.$input.value=this.getValue())},i=t=>{t.code==="Enter"&&this.$input.blur(),t.code==="ArrowUp"&&(t.preventDefault(),n(this._step*this._arrowKeyMultiplier(t))),t.code==="ArrowDown"&&(t.preventDefault(),n(this._step*this._arrowKeyMultiplier(t)*-1))},l=t=>{this._inputFocused&&(t.preventDefault(),n(this._step*this._normalizeMouseWheel(t)))};let h=!1,_,g,u,f,M;const a=5,E=t=>{_=t.clientX,g=u=t.clientY,h=!0,f=this.getValue(),M=0,window.addEventListener("mousemove",p),window.addEventListener("mouseup",d)},p=t=>{if(h){const c=t.clientX-_,m=t.clientY-g;Math.abs(m)>a?(t.preventDefault(),this.$input.blur(),h=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(c)>a&&d()}if(!h){const c=t.clientY-u;M-=c*this._step*this._arrowKeyMultiplier(t),f+M>this._max?M=this._max-f:f+M<this._min&&(M=this._min-f),this._snapClampSetValue(f+M)}u=t.clientY},d=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",d)},s=()=>{this._inputFocused=!0},r=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",e),this.$input.addEventListener("keydown",i),this.$input.addEventListener("wheel",l,{passive:!1}),this.$input.addEventListener("mousedown",E),this.$input.addEventListener("focus",s),this.$input.addEventListener("blur",r)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=(t,c,m,v,x)=>(t-c)/(m-c)*(x-v)+v,n=t=>{const c=this.$slider.getBoundingClientRect();let m=e(t,c.left,c.right,this._min,this._max);this._snapClampSetValue(m)},i=t=>{this._setDraggingStyle(!0),n(t.clientX),window.addEventListener("mousemove",l),window.addEventListener("mouseup",h)},l=t=>{n(t.clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",h)};let _=!1,g,u;const f=t=>{t.preventDefault(),this._setDraggingStyle(!0),n(t.touches[0].clientX),_=!1},M=t=>{t.touches.length>1||(this._hasScrollBar?(g=t.touches[0].clientX,u=t.touches[0].clientY,_=!0):f(t),window.addEventListener("touchmove",a),window.addEventListener("touchend",E))},a=t=>{if(_){const c=t.touches[0].clientX-g,m=t.touches[0].clientY-u;Math.abs(c)>Math.abs(m)?f(t):(window.removeEventListener("touchmove",a),window.removeEventListener("touchend",E))}else t.preventDefault(),n(t.touches[0].clientX)},E=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",a),window.removeEventListener("touchend",E)},p=this._callOnFinishChange.bind(this),d=400;let s;const r=t=>{if(Math.abs(t.deltaX)<Math.abs(t.deltaY)&&this._hasScrollBar)return;t.preventDefault();const m=this._normalizeMouseWheel(t)*this._step;this._snapClampSetValue(this.getValue()+m),this.$input.value=this.getValue(),clearTimeout(s),s=setTimeout(p,d)};this.$slider.addEventListener("mousedown",i),this.$slider.addEventListener("touchstart",M,{passive:!1}),this.$slider.addEventListener("wheel",r,{passive:!1})}_setDraggingStyle(e,n="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${n}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:n,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(n=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),n+-i}_arrowKeyMultiplier(e){let n=this._stepExplicit?1:10;return e.shiftKey?n*=10:e.altKey&&(n/=10),n}_snap(e){const n=Math.round(e/this._step)*this._step;return parseFloat(n.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class Tu extends ri{constructor(e,n,i,l){super(e,n,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(l)?l:Object.values(l),this._names=Array.isArray(l)?l:Object.keys(l),this._names.forEach(h=>{const _=document.createElement("option");_.innerHTML=h,this.$select.appendChild(_)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),n=this._values.indexOf(e);return this.$select.selectedIndex=n,this.$display.innerHTML=n===-1?e:this._names[n],this}}class Ru extends ri{constructor(e,n,i){super(e,n,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",l=>{l.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const Mu=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "\u2195";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "\u25BE";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "\u25B8";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "\u2713";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function Lu(C){const e=document.createElement("style");e.innerHTML=C;const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(e,n):document.head.appendChild(e)}let za=!1;class Aa{constructor({parent:e,autoPlace:n=e===void 0,container:i,width:l,title:h="Controls",injectStyles:_=!0,touchStyles:g=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",u=>{(u.code==="Enter"||u.code==="Space")&&(u.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(h),g&&this.domElement.classList.add("allow-touch-styles"),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),!za&&_&&(Lu(Mu),za=!0),i?i.appendChild(this.domElement):n&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),l&&this.domElement.style.setProperty("--width",l+"px"),this.domElement.addEventListener("keydown",u=>u.stopPropagation()),this.domElement.addEventListener("keyup",u=>u.stopPropagation())}add(e,n,i,l,h){if(Object(i)===i)return new Tu(this,e,n,i);const _=e[n];switch(typeof _){case"number":return new wu(this,e,n,i,l,h);case"boolean":return new Eu(this,e,n);case"string":return new Ru(this,e,n);case"function":return new yo(this,e,n)}console.error(`gui.add failed
	property:`,n,`
	object:`,e,`
	value:`,_)}addColor(e,n,i=1){return new yu(this,e,n,i)}addFolder(e){return new Aa({parent:this,title:e})}load(e,n=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof yo||i._name in e.controllers&&i.load(e.controllers[i._name])}),n&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){const n={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof yo)){if(i._name in n.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);n.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in n.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);n.folders[i._title]=i.save()}),n}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const n=this.$children.clientHeight;this.$children.style.height=n+"px",this.domElement.classList.add("transition");const i=h=>{h.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const l=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=l+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(i=>i.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(n=>{e=e.concat(n.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(n=>{e=e.concat(n.foldersRecursive())}),e}}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ca="143",ps={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},gs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Iu=0,Xa=1,Fu=2,Fc=1,Nu=2,ur=3,Ds=0,Kn=1,Gi=2,Pu=1,$i=0,Ns=1,Ka=2,ja=3,qa=4,Du=5,Is=100,Ou=101,Bu=102,Ya=103,Za=104,ku=200,Uu=201,$u=202,Gu=203,Nc=204,Pc=205,Wu=206,Vu=207,Hu=208,zu=209,Xu=210,Ku=0,ju=1,qu=2,ua=3,Yu=4,Zu=5,Ju=6,Qu=7,Dc=0,eh=1,th=2,Ei=0,nh=1,ih=2,sh=3,rh=4,oh=5,Oc=300,Os=301,Bs=302,ha=303,da=304,xo=306,ks=1e3,Dn=1001,_o=1002,on=1003,fa=1004,ma=1005,yn=1006,Bc=1007,Hs=1008,ss=1009,ah=1010,lh=1011,kc=1012,ch=1013,Ji=1014,Ui=1015,pr=1016,uh=1017,hh=1018,Ps=1020,dh=1021,fh=1022,Xn=1023,mh=1024,ph=1025,ts=1026,Us=1027,gh=1028,_h=1029,vh=1030,Eh=1031,xh=1033,wo=33776,To=33777,Ro=33778,Mo=33779,Ja=35840,Qa=35841,el=35842,tl=35843,Sh=36196,nl=37492,il=37496,sl=37808,rl=37809,ol=37810,al=37811,ll=37812,cl=37813,ul=37814,hl=37815,dl=37816,fl=37817,ml=37818,pl=37819,gl=37820,_l=37821,vl=36492,gr=2300,$s=2301,Lo=2302,El=2400,xl=2401,Sl=2402,bh=2500,Ah=1,Uc=2,rs=3e3,Bt=3001,Ch=3200,yh=3201,ya=0,wh=1,zn="srgb",Qi="srgb-linear",Io=7680,Th=519,pa=35044,bl="300 es",ga=1035;class cs{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const l=this._listeners[e];if(l!==void 0){const h=l.indexOf(n);h!==-1&&l.splice(h,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const l=i.slice(0);for(let h=0,_=l.length;h<_;h++)l[h].call(this,e);e.target=null}}}const un=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Al=1234567;const dr=Math.PI/180,_r=180/Math.PI;function jn(){const C=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(un[C&255]+un[C>>8&255]+un[C>>16&255]+un[C>>24&255]+"-"+un[e&255]+un[e>>8&255]+"-"+un[e>>16&15|64]+un[e>>24&255]+"-"+un[n&63|128]+un[n>>8&255]+"-"+un[n>>16&255]+un[n>>24&255]+un[i&255]+un[i>>8&255]+un[i>>16&255]+un[i>>24&255]).toLowerCase()}function dn(C,e,n){return Math.max(e,Math.min(n,C))}function wa(C,e){return(C%e+e)%e}function Rh(C,e,n,i,l){return i+(C-e)*(l-i)/(n-e)}function Mh(C,e,n){return C!==e?(n-C)/(e-C):0}function fr(C,e,n){return(1-n)*C+n*e}function Lh(C,e,n,i){return fr(C,e,1-Math.exp(-n*i))}function Ih(C,e=1){return e-Math.abs(wa(C,e*2)-e)}function Fh(C,e,n){return C<=e?0:C>=n?1:(C=(C-e)/(n-e),C*C*(3-2*C))}function Nh(C,e,n){return C<=e?0:C>=n?1:(C=(C-e)/(n-e),C*C*C*(C*(C*6-15)+10))}function Ph(C,e){return C+Math.floor(Math.random()*(e-C+1))}function Dh(C,e){return C+Math.random()*(e-C)}function Oh(C){return C*(.5-Math.random())}function Bh(C){C!==void 0&&(Al=C);let e=Al+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function kh(C){return C*dr}function Uh(C){return C*_r}function _a(C){return(C&C-1)===0&&C!==0}function $c(C){return Math.pow(2,Math.ceil(Math.log(C)/Math.LN2))}function vo(C){return Math.pow(2,Math.floor(Math.log(C)/Math.LN2))}function $h(C,e,n,i,l){const h=Math.cos,_=Math.sin,g=h(n/2),u=_(n/2),f=h((e+i)/2),M=_((e+i)/2),a=h((e-i)/2),E=_((e-i)/2),p=h((i-e)/2),d=_((i-e)/2);switch(l){case"XYX":C.set(g*M,u*a,u*E,g*f);break;case"YZY":C.set(u*E,g*M,u*a,g*f);break;case"ZXZ":C.set(u*a,u*E,g*M,g*f);break;case"XZX":C.set(g*M,u*d,u*p,g*f);break;case"YXY":C.set(u*p,g*M,u*d,g*f);break;case"ZYZ":C.set(u*d,u*p,g*M,g*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+l)}}function Gh(C,e){switch(e.constructor){case Float32Array:return C;case Uint16Array:return C/65535;case Uint8Array:return C/255;case Int16Array:return Math.max(C/32767,-1);case Int8Array:return Math.max(C/127,-1);default:throw new Error("Invalid component type.")}}function Wh(C,e){switch(e.constructor){case Float32Array:return C;case Uint16Array:return Math.round(C*65535);case Uint8Array:return Math.round(C*255);case Int16Array:return Math.round(C*32767);case Int8Array:return Math.round(C*127);default:throw new Error("Invalid component type.")}}var Vh=Object.freeze({__proto__:null,DEG2RAD:dr,RAD2DEG:_r,generateUUID:jn,clamp:dn,euclideanModulo:wa,mapLinear:Rh,inverseLerp:Mh,lerp:fr,damp:Lh,pingpong:Ih,smoothstep:Fh,smootherstep:Nh,randInt:Ph,randFloat:Dh,randFloatSpread:Oh,seededRandom:Bh,degToRad:kh,radToDeg:Uh,isPowerOfTwo:_a,ceilPowerOfTwo:$c,floorPowerOfTwo:vo,setQuaternionFromProperEuler:$h,normalize:Wh,denormalize:Gh});class ct{constructor(e=0,n=0){ct.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,l=e.elements;return this.x=l[0]*n+l[3]*i+l[6],this.y=l[1]*n+l[4]*i+l[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),l=Math.sin(n),h=this.x-e.x,_=this.y-e.y;return this.x=h*i-_*l+e.x,this.y=h*l+_*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class On{constructor(){On.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,i,l,h,_,g,u,f){const M=this.elements;return M[0]=e,M[1]=l,M[2]=g,M[3]=n,M[4]=h,M[5]=u,M[6]=i,M[7]=_,M[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,l=n.elements,h=this.elements,_=i[0],g=i[3],u=i[6],f=i[1],M=i[4],a=i[7],E=i[2],p=i[5],d=i[8],s=l[0],r=l[3],t=l[6],c=l[1],m=l[4],v=l[7],x=l[2],w=l[5],R=l[8];return h[0]=_*s+g*c+u*x,h[3]=_*r+g*m+u*w,h[6]=_*t+g*v+u*R,h[1]=f*s+M*c+a*x,h[4]=f*r+M*m+a*w,h[7]=f*t+M*v+a*R,h[2]=E*s+p*c+d*x,h[5]=E*r+p*m+d*w,h[8]=E*t+p*v+d*R,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],l=e[2],h=e[3],_=e[4],g=e[5],u=e[6],f=e[7],M=e[8];return n*_*M-n*g*f-i*h*M+i*g*u+l*h*f-l*_*u}invert(){const e=this.elements,n=e[0],i=e[1],l=e[2],h=e[3],_=e[4],g=e[5],u=e[6],f=e[7],M=e[8],a=M*_-g*f,E=g*u-M*h,p=f*h-_*u,d=n*a+i*E+l*p;if(d===0)return this.set(0,0,0,0,0,0,0,0,0);const s=1/d;return e[0]=a*s,e[1]=(l*f-M*i)*s,e[2]=(g*i-l*_)*s,e[3]=E*s,e[4]=(M*n-l*u)*s,e[5]=(l*h-g*n)*s,e[6]=p*s,e[7]=(i*u-f*n)*s,e[8]=(_*n-i*h)*s,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,l,h,_,g){const u=Math.cos(h),f=Math.sin(h);return this.set(i*u,i*f,-i*(u*_+f*g)+_+e,-l*f,l*u,-l*(-f*_+u*g)+g+n,0,0,1),this}scale(e,n){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),l=this.elements,h=l[0],_=l[3],g=l[6],u=l[1],f=l[4],M=l[7];return l[0]=n*h+i*u,l[3]=n*_+i*f,l[6]=n*g+i*M,l[1]=-i*h+n*u,l[4]=-i*_+n*f,l[7]=-i*g+n*M,this}translate(e,n){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(e){const n=this.elements,i=e.elements;for(let l=0;l<9;l++)if(n[l]!==i[l])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function Gc(C){for(let e=C.length-1;e>=0;--e)if(C[e]>65535)return!0;return!1}function vr(C){return document.createElementNS("http://www.w3.org/1999/xhtml",C)}function ns(C){return C<.04045?C*.0773993808:Math.pow(C*.9478672986+.0521327014,2.4)}function po(C){return C<.0031308?C*12.92:1.055*Math.pow(C,.41666)-.055}const Fo={[zn]:{[Qi]:ns},[Qi]:{[zn]:po}},Gn={legacyMode:!0,get workingColorSpace(){return Qi},set workingColorSpace(C){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(C,e,n){if(this.legacyMode||e===n||!e||!n)return C;if(Fo[e]&&Fo[e][n]!==void 0){const i=Fo[e][n];return C.r=i(C.r),C.g=i(C.g),C.b=i(C.b),C}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(C,e){return this.convert(C,this.workingColorSpace,e)},toWorkingColorSpace:function(C,e){return this.convert(C,e,this.workingColorSpace)}},Wc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qt={r:0,g:0,b:0},Wn={h:0,s:0,l:0},Hr={h:0,s:0,l:0};function No(C,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?C+(e-C)*6*n:n<1/2?e:n<2/3?C+(e-C)*6*(2/3-n):C}function zr(C,e){return e.r=C.r,e.g=C.g,e.b=C.b,e}class dt{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=zn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Gn.toWorkingColorSpace(this,n),this}setRGB(e,n,i,l=Qi){return this.r=e,this.g=n,this.b=i,Gn.toWorkingColorSpace(this,l),this}setHSL(e,n,i,l=Qi){if(e=wa(e,1),n=dn(n,0,1),i=dn(i,0,1),n===0)this.r=this.g=this.b=i;else{const h=i<=.5?i*(1+n):i+n-i*n,_=2*i-h;this.r=No(_,h,e+1/3),this.g=No(_,h,e),this.b=No(_,h,e-1/3)}return Gn.toWorkingColorSpace(this,l),this}setStyle(e,n=zn){function i(h){h!==void 0&&parseFloat(h)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let l;if(l=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let h;const _=l[1],g=l[2];switch(_){case"rgb":case"rgba":if(h=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(255,parseInt(h[1],10))/255,this.g=Math.min(255,parseInt(h[2],10))/255,this.b=Math.min(255,parseInt(h[3],10))/255,Gn.toWorkingColorSpace(this,n),i(h[4]),this;if(h=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(100,parseInt(h[1],10))/100,this.g=Math.min(100,parseInt(h[2],10))/100,this.b=Math.min(100,parseInt(h[3],10))/100,Gn.toWorkingColorSpace(this,n),i(h[4]),this;break;case"hsl":case"hsla":if(h=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g)){const u=parseFloat(h[1])/360,f=parseInt(h[2],10)/100,M=parseInt(h[3],10)/100;return i(h[4]),this.setHSL(u,f,M,n)}break}}else if(l=/^\#([A-Fa-f\d]+)$/.exec(e)){const h=l[1],_=h.length;if(_===3)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,Gn.toWorkingColorSpace(this,n),this;if(_===6)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,Gn.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=zn){const i=Wc[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ns(e.r),this.g=ns(e.g),this.b=ns(e.b),this}copyLinearToSRGB(e){return this.r=po(e.r),this.g=po(e.g),this.b=po(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=zn){return Gn.fromWorkingColorSpace(zr(this,Qt),e),dn(Qt.r*255,0,255)<<16^dn(Qt.g*255,0,255)<<8^dn(Qt.b*255,0,255)<<0}getHexString(e=zn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Qi){Gn.fromWorkingColorSpace(zr(this,Qt),n);const i=Qt.r,l=Qt.g,h=Qt.b,_=Math.max(i,l,h),g=Math.min(i,l,h);let u,f;const M=(g+_)/2;if(g===_)u=0,f=0;else{const a=_-g;switch(f=M<=.5?a/(_+g):a/(2-_-g),_){case i:u=(l-h)/a+(l<h?6:0);break;case l:u=(h-i)/a+2;break;case h:u=(i-l)/a+4;break}u/=6}return e.h=u,e.s=f,e.l=M,e}getRGB(e,n=Qi){return Gn.fromWorkingColorSpace(zr(this,Qt),n),e.r=Qt.r,e.g=Qt.g,e.b=Qt.b,e}getStyle(e=zn){return Gn.fromWorkingColorSpace(zr(this,Qt),e),e!==zn?`color(${e} ${Qt.r} ${Qt.g} ${Qt.b})`:`rgb(${Qt.r*255|0},${Qt.g*255|0},${Qt.b*255|0})`}offsetHSL(e,n,i){return this.getHSL(Wn),Wn.h+=e,Wn.s+=n,Wn.l+=i,this.setHSL(Wn.h,Wn.s,Wn.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Wn),e.getHSL(Hr);const i=fr(Wn.h,Hr.h,n),l=fr(Wn.s,Hr.s,n),h=fr(Wn.l,Hr.l,n);return this.setHSL(i,l,h),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}dt.NAMES=Wc;let _s;class Vc{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{_s===void 0&&(_s=vr("canvas")),_s.width=e.width,_s.height=e.height;const i=_s.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=_s}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=vr("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const l=i.getImageData(0,0,e.width,e.height),h=l.data;for(let _=0;_<h.length;_++)h[_]=ns(h[_]/255)*255;return i.putImageData(l,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(ns(n[i]/255)*255):n[i]=ns(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Hc{constructor(e=null){this.isSource=!0,this.uuid=jn(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},l=this.data;if(l!==null){let h;if(Array.isArray(l)){h=[];for(let _=0,g=l.length;_<g;_++)l[_].isDataTexture?h.push(Po(l[_].image)):h.push(Po(l[_]))}else h=Po(l);i.url=h}return n||(e.images[this.uuid]=i),i}}function Po(C){return typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&C instanceof ImageBitmap?Vc.getDataURL(C):C.data?{data:Array.from(C.data),width:C.width,height:C.height,type:C.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Hh=0;class vn extends cs{constructor(e=vn.DEFAULT_IMAGE,n=vn.DEFAULT_MAPPING,i=Dn,l=Dn,h=yn,_=Hs,g=Xn,u=ss,f=1,M=rs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Hh++}),this.uuid=jn(),this.name="",this.source=new Hc(e),this.mipmaps=[],this.mapping=n,this.wrapS=i,this.wrapT=l,this.magFilter=h,this.minFilter=_,this.anisotropy=f,this.format=g,this.internalFormat=null,this.type=u,this.offset=new ct(0,0),this.repeat=new ct(1,1),this.center=new ct(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new On,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=M,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Oc)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ks:e.x=e.x-Math.floor(e.x);break;case Dn:e.x=e.x<0?0:1;break;case _o:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ks:e.y=e.y-Math.floor(e.y);break;case Dn:e.y=e.y<0?0:1;break;case _o:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}vn.DEFAULT_IMAGE=null;vn.DEFAULT_MAPPING=Oc;class Ut{constructor(e=0,n=0,i=0,l=1){Ut.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=l}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,l){return this.x=e,this.y=n,this.z=i,this.w=l,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,l=this.z,h=this.w,_=e.elements;return this.x=_[0]*n+_[4]*i+_[8]*l+_[12]*h,this.y=_[1]*n+_[5]*i+_[9]*l+_[13]*h,this.z=_[2]*n+_[6]*i+_[10]*l+_[14]*h,this.w=_[3]*n+_[7]*i+_[11]*l+_[15]*h,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,l,h;const u=e.elements,f=u[0],M=u[4],a=u[8],E=u[1],p=u[5],d=u[9],s=u[2],r=u[6],t=u[10];if(Math.abs(M-E)<.01&&Math.abs(a-s)<.01&&Math.abs(d-r)<.01){if(Math.abs(M+E)<.1&&Math.abs(a+s)<.1&&Math.abs(d+r)<.1&&Math.abs(f+p+t-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const m=(f+1)/2,v=(p+1)/2,x=(t+1)/2,w=(M+E)/4,R=(a+s)/4,S=(d+r)/4;return m>v&&m>x?m<.01?(i=0,l=.707106781,h=.707106781):(i=Math.sqrt(m),l=w/i,h=R/i):v>x?v<.01?(i=.707106781,l=0,h=.707106781):(l=Math.sqrt(v),i=w/l,h=S/l):x<.01?(i=.707106781,l=.707106781,h=0):(h=Math.sqrt(x),i=R/h,l=S/h),this.set(i,l,h,n),this}let c=Math.sqrt((r-d)*(r-d)+(a-s)*(a-s)+(E-M)*(E-M));return Math.abs(c)<.001&&(c=1),this.x=(r-d)/c,this.y=(a-s)/c,this.z=(E-M)/c,this.w=Math.acos((f+p+t-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class os extends cs{constructor(e,n,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Ut(0,0,e,n),this.scissorTest=!1,this.viewport=new Ut(0,0,e,n);const l={width:e,height:n,depth:1};this.texture=new vn(l,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:yn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Hc(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zc extends vn{constructor(e=null,n=1,i=1,l=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:l},this.magFilter=on,this.minFilter=on,this.wrapR=Dn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class zh extends vn{constructor(e=null,n=1,i=1,l=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:l},this.magFilter=on,this.minFilter=on,this.wrapR=Dn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Si{constructor(e=0,n=0,i=0,l=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=l}static slerpFlat(e,n,i,l,h,_,g){let u=i[l+0],f=i[l+1],M=i[l+2],a=i[l+3];const E=h[_+0],p=h[_+1],d=h[_+2],s=h[_+3];if(g===0){e[n+0]=u,e[n+1]=f,e[n+2]=M,e[n+3]=a;return}if(g===1){e[n+0]=E,e[n+1]=p,e[n+2]=d,e[n+3]=s;return}if(a!==s||u!==E||f!==p||M!==d){let r=1-g;const t=u*E+f*p+M*d+a*s,c=t>=0?1:-1,m=1-t*t;if(m>Number.EPSILON){const x=Math.sqrt(m),w=Math.atan2(x,t*c);r=Math.sin(r*w)/x,g=Math.sin(g*w)/x}const v=g*c;if(u=u*r+E*v,f=f*r+p*v,M=M*r+d*v,a=a*r+s*v,r===1-g){const x=1/Math.sqrt(u*u+f*f+M*M+a*a);u*=x,f*=x,M*=x,a*=x}}e[n]=u,e[n+1]=f,e[n+2]=M,e[n+3]=a}static multiplyQuaternionsFlat(e,n,i,l,h,_){const g=i[l],u=i[l+1],f=i[l+2],M=i[l+3],a=h[_],E=h[_+1],p=h[_+2],d=h[_+3];return e[n]=g*d+M*a+u*p-f*E,e[n+1]=u*d+M*E+f*a-g*p,e[n+2]=f*d+M*p+g*E-u*a,e[n+3]=M*d-g*a-u*E-f*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,l){return this._x=e,this._y=n,this._z=i,this._w=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,l=e._y,h=e._z,_=e._order,g=Math.cos,u=Math.sin,f=g(i/2),M=g(l/2),a=g(h/2),E=u(i/2),p=u(l/2),d=u(h/2);switch(_){case"XYZ":this._x=E*M*a+f*p*d,this._y=f*p*a-E*M*d,this._z=f*M*d+E*p*a,this._w=f*M*a-E*p*d;break;case"YXZ":this._x=E*M*a+f*p*d,this._y=f*p*a-E*M*d,this._z=f*M*d-E*p*a,this._w=f*M*a+E*p*d;break;case"ZXY":this._x=E*M*a-f*p*d,this._y=f*p*a+E*M*d,this._z=f*M*d+E*p*a,this._w=f*M*a-E*p*d;break;case"ZYX":this._x=E*M*a-f*p*d,this._y=f*p*a+E*M*d,this._z=f*M*d-E*p*a,this._w=f*M*a+E*p*d;break;case"YZX":this._x=E*M*a+f*p*d,this._y=f*p*a+E*M*d,this._z=f*M*d-E*p*a,this._w=f*M*a-E*p*d;break;case"XZY":this._x=E*M*a-f*p*d,this._y=f*p*a-E*M*d,this._z=f*M*d+E*p*a,this._w=f*M*a+E*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+_)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,l=Math.sin(i);return this._x=e.x*l,this._y=e.y*l,this._z=e.z*l,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],l=n[4],h=n[8],_=n[1],g=n[5],u=n[9],f=n[2],M=n[6],a=n[10],E=i+g+a;if(E>0){const p=.5/Math.sqrt(E+1);this._w=.25/p,this._x=(M-u)*p,this._y=(h-f)*p,this._z=(_-l)*p}else if(i>g&&i>a){const p=2*Math.sqrt(1+i-g-a);this._w=(M-u)/p,this._x=.25*p,this._y=(l+_)/p,this._z=(h+f)/p}else if(g>a){const p=2*Math.sqrt(1+g-i-a);this._w=(h-f)/p,this._x=(l+_)/p,this._y=.25*p,this._z=(u+M)/p}else{const p=2*Math.sqrt(1+a-i-g);this._w=(_-l)/p,this._x=(h+f)/p,this._y=(u+M)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(dn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const l=Math.min(1,n/i);return this.slerp(e,l),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,l=e._y,h=e._z,_=e._w,g=n._x,u=n._y,f=n._z,M=n._w;return this._x=i*M+_*g+l*f-h*u,this._y=l*M+_*u+h*g-i*f,this._z=h*M+_*f+i*u-l*g,this._w=_*M-i*g-l*u-h*f,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,l=this._y,h=this._z,_=this._w;let g=_*e._w+i*e._x+l*e._y+h*e._z;if(g<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,g=-g):this.copy(e),g>=1)return this._w=_,this._x=i,this._y=l,this._z=h,this;const u=1-g*g;if(u<=Number.EPSILON){const p=1-n;return this._w=p*_+n*this._w,this._x=p*i+n*this._x,this._y=p*l+n*this._y,this._z=p*h+n*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(u),M=Math.atan2(f,g),a=Math.sin((1-n)*M)/f,E=Math.sin(n*M)/f;return this._w=_*a+this._w*E,this._x=i*a+this._x*E,this._y=l*a+this._y*E,this._z=h*a+this._z*E,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),l=2*Math.PI*Math.random(),h=2*Math.PI*Math.random();return this.set(n*Math.cos(l),i*Math.sin(h),i*Math.cos(h),n*Math.sin(l))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,n=0,i=0){ce.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(Cl.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Cl.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,l=this.z,h=e.elements;return this.x=h[0]*n+h[3]*i+h[6]*l,this.y=h[1]*n+h[4]*i+h[7]*l,this.z=h[2]*n+h[5]*i+h[8]*l,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,l=this.z,h=e.elements,_=1/(h[3]*n+h[7]*i+h[11]*l+h[15]);return this.x=(h[0]*n+h[4]*i+h[8]*l+h[12])*_,this.y=(h[1]*n+h[5]*i+h[9]*l+h[13])*_,this.z=(h[2]*n+h[6]*i+h[10]*l+h[14])*_,this}applyQuaternion(e){const n=this.x,i=this.y,l=this.z,h=e.x,_=e.y,g=e.z,u=e.w,f=u*n+_*l-g*i,M=u*i+g*n-h*l,a=u*l+h*i-_*n,E=-h*n-_*i-g*l;return this.x=f*u+E*-h+M*-g-a*-_,this.y=M*u+E*-_+a*-h-f*-g,this.z=a*u+E*-g+f*-_-M*-h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,l=this.z,h=e.elements;return this.x=h[0]*n+h[4]*i+h[8]*l,this.y=h[1]*n+h[5]*i+h[9]*l,this.z=h[2]*n+h[6]*i+h[10]*l,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,l=e.y,h=e.z,_=n.x,g=n.y,u=n.z;return this.x=l*u-h*g,this.y=h*_-i*u,this.z=i*g-l*_,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Do.copy(this).projectOnVector(e),this.sub(Do)}reflect(e){return this.sub(Do.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(dn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,l=this.z-e.z;return n*n+i*i+l*l}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const l=Math.sin(n)*e;return this.x=l*Math.sin(i),this.y=Math.cos(n)*e,this.z=l*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),l=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=l,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Do=new ce,Cl=new Si;class zs{constructor(e=new ce(1/0,1/0,1/0),n=new ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,l=1/0,h=-1/0,_=-1/0,g=-1/0;for(let u=0,f=e.length;u<f;u+=3){const M=e[u],a=e[u+1],E=e[u+2];M<n&&(n=M),a<i&&(i=a),E<l&&(l=E),M>h&&(h=M),a>_&&(_=a),E>g&&(g=E)}return this.min.set(n,i,l),this.max.set(h,_,g),this}setFromBufferAttribute(e){let n=1/0,i=1/0,l=1/0,h=-1/0,_=-1/0,g=-1/0;for(let u=0,f=e.count;u<f;u++){const M=e.getX(u),a=e.getY(u),E=e.getZ(u);M<n&&(n=M),a<i&&(i=a),E<l&&(l=E),M>h&&(h=M),a>_&&(_=a),E>g&&(g=E)}return this.min.set(n,i,l),this.max.set(h,_,g),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=zi.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(n&&i.attributes!=null&&i.attributes.position!==void 0){const h=i.attributes.position;for(let _=0,g=h.count;_<g;_++)zi.fromBufferAttribute(h,_).applyMatrix4(e.matrixWorld),this.expandByPoint(zi)}else i.boundingBox===null&&i.computeBoundingBox(),Oo.copy(i.boundingBox),Oo.applyMatrix4(e.matrixWorld),this.union(Oo);const l=e.children;for(let h=0,_=l.length;h<_;h++)this.expandByObject(l[h],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,zi),zi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(sr),Xr.subVectors(this.max,sr),vs.subVectors(e.a,sr),Es.subVectors(e.b,sr),xs.subVectors(e.c,sr),Li.subVectors(Es,vs),Ii.subVectors(xs,Es),Xi.subVectors(vs,xs);let n=[0,-Li.z,Li.y,0,-Ii.z,Ii.y,0,-Xi.z,Xi.y,Li.z,0,-Li.x,Ii.z,0,-Ii.x,Xi.z,0,-Xi.x,-Li.y,Li.x,0,-Ii.y,Ii.x,0,-Xi.y,Xi.x,0];return!Bo(n,vs,Es,xs,Xr)||(n=[1,0,0,0,1,0,0,0,1],!Bo(n,vs,Es,xs,Xr))?!1:(Kr.crossVectors(Li,Ii),n=[Kr.x,Kr.y,Kr.z],Bo(n,vs,Es,xs,Xr))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return zi.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(zi).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(hi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hi),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hi=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],zi=new ce,Oo=new zs,vs=new ce,Es=new ce,xs=new ce,Li=new ce,Ii=new ce,Xi=new ce,sr=new ce,Xr=new ce,Kr=new ce,Ki=new ce;function Bo(C,e,n,i,l){for(let h=0,_=C.length-3;h<=_;h+=3){Ki.fromArray(C,h);const g=l.x*Math.abs(Ki.x)+l.y*Math.abs(Ki.y)+l.z*Math.abs(Ki.z),u=e.dot(Ki),f=n.dot(Ki),M=i.dot(Ki);if(Math.max(-Math.max(u,f,M),Math.min(u,f,M))>g)return!1}return!0}const Xh=new zs,yl=new ce,jr=new ce,ko=new ce;class Xs{constructor(e=new ce,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):Xh.setFromPoints(e).getCenter(i);let l=0;for(let h=0,_=e.length;h<_;h++)l=Math.max(l,i.distanceToSquared(e[h]));return this.radius=Math.sqrt(l),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){ko.subVectors(e,this.center);const n=ko.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),l=(i-this.radius)*.5;this.center.add(ko.multiplyScalar(l/i)),this.radius+=l}return this}union(e){return this.center.equals(e.center)===!0?jr.set(0,0,1).multiplyScalar(e.radius):jr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(yl.copy(e.center).add(jr)),this.expandByPoint(yl.copy(e.center).sub(jr)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const di=new ce,Uo=new ce,qr=new ce,Fi=new ce,$o=new ce,Yr=new ce,Go=new ce;class Ta{constructor(e=new ce,n=new ce(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,di)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=di.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(di.copy(this.direction).multiplyScalar(n).add(this.origin),di.distanceToSquared(e))}distanceSqToSegment(e,n,i,l){Uo.copy(e).add(n).multiplyScalar(.5),qr.copy(n).sub(e).normalize(),Fi.copy(this.origin).sub(Uo);const h=e.distanceTo(n)*.5,_=-this.direction.dot(qr),g=Fi.dot(this.direction),u=-Fi.dot(qr),f=Fi.lengthSq(),M=Math.abs(1-_*_);let a,E,p,d;if(M>0)if(a=_*u-g,E=_*g-u,d=h*M,a>=0)if(E>=-d)if(E<=d){const s=1/M;a*=s,E*=s,p=a*(a+_*E+2*g)+E*(_*a+E+2*u)+f}else E=h,a=Math.max(0,-(_*E+g)),p=-a*a+E*(E+2*u)+f;else E=-h,a=Math.max(0,-(_*E+g)),p=-a*a+E*(E+2*u)+f;else E<=-d?(a=Math.max(0,-(-_*h+g)),E=a>0?-h:Math.min(Math.max(-h,-u),h),p=-a*a+E*(E+2*u)+f):E<=d?(a=0,E=Math.min(Math.max(-h,-u),h),p=E*(E+2*u)+f):(a=Math.max(0,-(_*h+g)),E=a>0?h:Math.min(Math.max(-h,-u),h),p=-a*a+E*(E+2*u)+f);else E=_>0?-h:h,a=Math.max(0,-(_*E+g)),p=-a*a+E*(E+2*u)+f;return i&&i.copy(this.direction).multiplyScalar(a).add(this.origin),l&&l.copy(qr).multiplyScalar(E).add(Uo),p}intersectSphere(e,n){di.subVectors(e.center,this.origin);const i=di.dot(this.direction),l=di.dot(di)-i*i,h=e.radius*e.radius;if(l>h)return null;const _=Math.sqrt(h-l),g=i-_,u=i+_;return g<0&&u<0?null:g<0?this.at(u,n):this.at(g,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,l,h,_,g,u;const f=1/this.direction.x,M=1/this.direction.y,a=1/this.direction.z,E=this.origin;return f>=0?(i=(e.min.x-E.x)*f,l=(e.max.x-E.x)*f):(i=(e.max.x-E.x)*f,l=(e.min.x-E.x)*f),M>=0?(h=(e.min.y-E.y)*M,_=(e.max.y-E.y)*M):(h=(e.max.y-E.y)*M,_=(e.min.y-E.y)*M),i>_||h>l||((h>i||i!==i)&&(i=h),(_<l||l!==l)&&(l=_),a>=0?(g=(e.min.z-E.z)*a,u=(e.max.z-E.z)*a):(g=(e.max.z-E.z)*a,u=(e.min.z-E.z)*a),i>u||g>l)||((g>i||i!==i)&&(i=g),(u<l||l!==l)&&(l=u),l<0)?null:this.at(i>=0?i:l,n)}intersectsBox(e){return this.intersectBox(e,di)!==null}intersectTriangle(e,n,i,l,h){$o.subVectors(n,e),Yr.subVectors(i,e),Go.crossVectors($o,Yr);let _=this.direction.dot(Go),g;if(_>0){if(l)return null;g=1}else if(_<0)g=-1,_=-_;else return null;Fi.subVectors(this.origin,e);const u=g*this.direction.dot(Yr.crossVectors(Fi,Yr));if(u<0)return null;const f=g*this.direction.dot($o.cross(Fi));if(f<0||u+f>_)return null;const M=-g*Fi.dot(Go);return M<0?null:this.at(M/_,h)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class It{constructor(){It.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,l,h,_,g,u,f,M,a,E,p,d,s,r){const t=this.elements;return t[0]=e,t[4]=n,t[8]=i,t[12]=l,t[1]=h,t[5]=_,t[9]=g,t[13]=u,t[2]=f,t[6]=M,t[10]=a,t[14]=E,t[3]=p,t[7]=d,t[11]=s,t[15]=r,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new It().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,l=1/Ss.setFromMatrixColumn(e,0).length(),h=1/Ss.setFromMatrixColumn(e,1).length(),_=1/Ss.setFromMatrixColumn(e,2).length();return n[0]=i[0]*l,n[1]=i[1]*l,n[2]=i[2]*l,n[3]=0,n[4]=i[4]*h,n[5]=i[5]*h,n[6]=i[6]*h,n[7]=0,n[8]=i[8]*_,n[9]=i[9]*_,n[10]=i[10]*_,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,l=e.y,h=e.z,_=Math.cos(i),g=Math.sin(i),u=Math.cos(l),f=Math.sin(l),M=Math.cos(h),a=Math.sin(h);if(e.order==="XYZ"){const E=_*M,p=_*a,d=g*M,s=g*a;n[0]=u*M,n[4]=-u*a,n[8]=f,n[1]=p+d*f,n[5]=E-s*f,n[9]=-g*u,n[2]=s-E*f,n[6]=d+p*f,n[10]=_*u}else if(e.order==="YXZ"){const E=u*M,p=u*a,d=f*M,s=f*a;n[0]=E+s*g,n[4]=d*g-p,n[8]=_*f,n[1]=_*a,n[5]=_*M,n[9]=-g,n[2]=p*g-d,n[6]=s+E*g,n[10]=_*u}else if(e.order==="ZXY"){const E=u*M,p=u*a,d=f*M,s=f*a;n[0]=E-s*g,n[4]=-_*a,n[8]=d+p*g,n[1]=p+d*g,n[5]=_*M,n[9]=s-E*g,n[2]=-_*f,n[6]=g,n[10]=_*u}else if(e.order==="ZYX"){const E=_*M,p=_*a,d=g*M,s=g*a;n[0]=u*M,n[4]=d*f-p,n[8]=E*f+s,n[1]=u*a,n[5]=s*f+E,n[9]=p*f-d,n[2]=-f,n[6]=g*u,n[10]=_*u}else if(e.order==="YZX"){const E=_*u,p=_*f,d=g*u,s=g*f;n[0]=u*M,n[4]=s-E*a,n[8]=d*a+p,n[1]=a,n[5]=_*M,n[9]=-g*M,n[2]=-f*M,n[6]=p*a+d,n[10]=E-s*a}else if(e.order==="XZY"){const E=_*u,p=_*f,d=g*u,s=g*f;n[0]=u*M,n[4]=-a,n[8]=f*M,n[1]=E*a+s,n[5]=_*M,n[9]=p*a-d,n[2]=d*a-p,n[6]=g*M,n[10]=s*a+E}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Kh,e,jh)}lookAt(e,n,i){const l=this.elements;return Mn.subVectors(e,n),Mn.lengthSq()===0&&(Mn.z=1),Mn.normalize(),Ni.crossVectors(i,Mn),Ni.lengthSq()===0&&(Math.abs(i.z)===1?Mn.x+=1e-4:Mn.z+=1e-4,Mn.normalize(),Ni.crossVectors(i,Mn)),Ni.normalize(),Zr.crossVectors(Mn,Ni),l[0]=Ni.x,l[4]=Zr.x,l[8]=Mn.x,l[1]=Ni.y,l[5]=Zr.y,l[9]=Mn.y,l[2]=Ni.z,l[6]=Zr.z,l[10]=Mn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,l=n.elements,h=this.elements,_=i[0],g=i[4],u=i[8],f=i[12],M=i[1],a=i[5],E=i[9],p=i[13],d=i[2],s=i[6],r=i[10],t=i[14],c=i[3],m=i[7],v=i[11],x=i[15],w=l[0],R=l[4],S=l[8],L=l[12],A=l[1],y=l[5],P=l[9],B=l[13],T=l[2],I=l[6],D=l[10],k=l[14],U=l[3],G=l[7],H=l[11],se=l[15];return h[0]=_*w+g*A+u*T+f*U,h[4]=_*R+g*y+u*I+f*G,h[8]=_*S+g*P+u*D+f*H,h[12]=_*L+g*B+u*k+f*se,h[1]=M*w+a*A+E*T+p*U,h[5]=M*R+a*y+E*I+p*G,h[9]=M*S+a*P+E*D+p*H,h[13]=M*L+a*B+E*k+p*se,h[2]=d*w+s*A+r*T+t*U,h[6]=d*R+s*y+r*I+t*G,h[10]=d*S+s*P+r*D+t*H,h[14]=d*L+s*B+r*k+t*se,h[3]=c*w+m*A+v*T+x*U,h[7]=c*R+m*y+v*I+x*G,h[11]=c*S+m*P+v*D+x*H,h[15]=c*L+m*B+v*k+x*se,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],l=e[8],h=e[12],_=e[1],g=e[5],u=e[9],f=e[13],M=e[2],a=e[6],E=e[10],p=e[14],d=e[3],s=e[7],r=e[11],t=e[15];return d*(+h*u*a-l*f*a-h*g*E+i*f*E+l*g*p-i*u*p)+s*(+n*u*p-n*f*E+h*_*E-l*_*p+l*f*M-h*u*M)+r*(+n*f*a-n*g*p-h*_*a+i*_*p+h*g*M-i*f*M)+t*(-l*g*M-n*u*a+n*g*E+l*_*a-i*_*E+i*u*M)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const l=this.elements;return e.isVector3?(l[12]=e.x,l[13]=e.y,l[14]=e.z):(l[12]=e,l[13]=n,l[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],l=e[2],h=e[3],_=e[4],g=e[5],u=e[6],f=e[7],M=e[8],a=e[9],E=e[10],p=e[11],d=e[12],s=e[13],r=e[14],t=e[15],c=a*r*f-s*E*f+s*u*p-g*r*p-a*u*t+g*E*t,m=d*E*f-M*r*f-d*u*p+_*r*p+M*u*t-_*E*t,v=M*s*f-d*a*f+d*g*p-_*s*p-M*g*t+_*a*t,x=d*a*u-M*s*u-d*g*E+_*s*E+M*g*r-_*a*r,w=n*c+i*m+l*v+h*x;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/w;return e[0]=c*R,e[1]=(s*E*h-a*r*h-s*l*p+i*r*p+a*l*t-i*E*t)*R,e[2]=(g*r*h-s*u*h+s*l*f-i*r*f-g*l*t+i*u*t)*R,e[3]=(a*u*h-g*E*h-a*l*f+i*E*f+g*l*p-i*u*p)*R,e[4]=m*R,e[5]=(M*r*h-d*E*h+d*l*p-n*r*p-M*l*t+n*E*t)*R,e[6]=(d*u*h-_*r*h-d*l*f+n*r*f+_*l*t-n*u*t)*R,e[7]=(_*E*h-M*u*h+M*l*f-n*E*f-_*l*p+n*u*p)*R,e[8]=v*R,e[9]=(d*a*h-M*s*h-d*i*p+n*s*p+M*i*t-n*a*t)*R,e[10]=(_*s*h-d*g*h+d*i*f-n*s*f-_*i*t+n*g*t)*R,e[11]=(M*g*h-_*a*h-M*i*f+n*a*f+_*i*p-n*g*p)*R,e[12]=x*R,e[13]=(M*s*l-d*a*l+d*i*E-n*s*E-M*i*r+n*a*r)*R,e[14]=(d*g*l-_*s*l-d*i*u+n*s*u+_*i*r-n*g*r)*R,e[15]=(_*a*l-M*g*l+M*i*u-n*a*u-_*i*E+n*g*E)*R,this}scale(e){const n=this.elements,i=e.x,l=e.y,h=e.z;return n[0]*=i,n[4]*=l,n[8]*=h,n[1]*=i,n[5]*=l,n[9]*=h,n[2]*=i,n[6]*=l,n[10]*=h,n[3]*=i,n[7]*=l,n[11]*=h,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],l=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,l))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),l=Math.sin(n),h=1-i,_=e.x,g=e.y,u=e.z,f=h*_,M=h*g;return this.set(f*_+i,f*g-l*u,f*u+l*g,0,f*g+l*u,M*g+i,M*u-l*_,0,f*u-l*g,M*u+l*_,h*u*u+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,l,h,_){return this.set(1,i,h,0,e,1,_,0,n,l,1,0,0,0,0,1),this}compose(e,n,i){const l=this.elements,h=n._x,_=n._y,g=n._z,u=n._w,f=h+h,M=_+_,a=g+g,E=h*f,p=h*M,d=h*a,s=_*M,r=_*a,t=g*a,c=u*f,m=u*M,v=u*a,x=i.x,w=i.y,R=i.z;return l[0]=(1-(s+t))*x,l[1]=(p+v)*x,l[2]=(d-m)*x,l[3]=0,l[4]=(p-v)*w,l[5]=(1-(E+t))*w,l[6]=(r+c)*w,l[7]=0,l[8]=(d+m)*R,l[9]=(r-c)*R,l[10]=(1-(E+s))*R,l[11]=0,l[12]=e.x,l[13]=e.y,l[14]=e.z,l[15]=1,this}decompose(e,n,i){const l=this.elements;let h=Ss.set(l[0],l[1],l[2]).length();const _=Ss.set(l[4],l[5],l[6]).length(),g=Ss.set(l[8],l[9],l[10]).length();this.determinant()<0&&(h=-h),e.x=l[12],e.y=l[13],e.z=l[14],Vn.copy(this);const f=1/h,M=1/_,a=1/g;return Vn.elements[0]*=f,Vn.elements[1]*=f,Vn.elements[2]*=f,Vn.elements[4]*=M,Vn.elements[5]*=M,Vn.elements[6]*=M,Vn.elements[8]*=a,Vn.elements[9]*=a,Vn.elements[10]*=a,n.setFromRotationMatrix(Vn),i.x=h,i.y=_,i.z=g,this}makePerspective(e,n,i,l,h,_){const g=this.elements,u=2*h/(n-e),f=2*h/(i-l),M=(n+e)/(n-e),a=(i+l)/(i-l),E=-(_+h)/(_-h),p=-2*_*h/(_-h);return g[0]=u,g[4]=0,g[8]=M,g[12]=0,g[1]=0,g[5]=f,g[9]=a,g[13]=0,g[2]=0,g[6]=0,g[10]=E,g[14]=p,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(e,n,i,l,h,_){const g=this.elements,u=1/(n-e),f=1/(i-l),M=1/(_-h),a=(n+e)*u,E=(i+l)*f,p=(_+h)*M;return g[0]=2*u,g[4]=0,g[8]=0,g[12]=-a,g[1]=0,g[5]=2*f,g[9]=0,g[13]=-E,g[2]=0,g[6]=0,g[10]=-2*M,g[14]=-p,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let l=0;l<16;l++)if(n[l]!==i[l])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Ss=new ce,Vn=new It,Kh=new ce(0,0,0),jh=new ce(1,1,1),Ni=new ce,Zr=new ce,Mn=new ce,wl=new It,Tl=new Si;class br{constructor(e=0,n=0,i=0,l=br.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=l}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,l=this._order){return this._x=e,this._y=n,this._z=i,this._order=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const l=e.elements,h=l[0],_=l[4],g=l[8],u=l[1],f=l[5],M=l[9],a=l[2],E=l[6],p=l[10];switch(n){case"XYZ":this._y=Math.asin(dn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-M,p),this._z=Math.atan2(-_,h)):(this._x=Math.atan2(E,f),this._z=0);break;case"YXZ":this._x=Math.asin(-dn(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(g,p),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-a,h),this._z=0);break;case"ZXY":this._x=Math.asin(dn(E,-1,1)),Math.abs(E)<.9999999?(this._y=Math.atan2(-a,p),this._z=Math.atan2(-_,f)):(this._y=0,this._z=Math.atan2(u,h));break;case"ZYX":this._y=Math.asin(-dn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(E,p),this._z=Math.atan2(u,h)):(this._x=0,this._z=Math.atan2(-_,f));break;case"YZX":this._z=Math.asin(dn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-M,f),this._y=Math.atan2(-a,h)):(this._x=0,this._y=Math.atan2(g,p));break;case"XZY":this._z=Math.asin(-dn(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(E,f),this._y=Math.atan2(g,h)):(this._x=Math.atan2(-M,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return wl.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wl,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Tl.setFromEuler(this),this.setFromQuaternion(Tl,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}br.DefaultOrder="XYZ";br.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Xc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let qh=0;const Rl=new ce,bs=new Si,fi=new It,Jr=new ce,rr=new ce,Yh=new ce,Zh=new Si,Ml=new ce(1,0,0),Ll=new ce(0,1,0),Il=new ce(0,0,1),Jh={type:"added"},Fl={type:"removed"};class Yt extends cs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qh++}),this.uuid=jn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yt.DefaultUp.clone();const e=new ce,n=new br,i=new Si,l=new ce(1,1,1);function h(){i.setFromEuler(n,!1)}function _(){n.setFromQuaternion(i,void 0,!1)}n._onChange(h),i._onChange(_),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:l},modelViewMatrix:{value:new It},normalMatrix:{value:new On}}),this.matrix=new It,this.matrixWorld=new It,this.matrixAutoUpdate=Yt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Xc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return bs.setFromAxisAngle(e,n),this.quaternion.multiply(bs),this}rotateOnWorldAxis(e,n){return bs.setFromAxisAngle(e,n),this.quaternion.premultiply(bs),this}rotateX(e){return this.rotateOnAxis(Ml,e)}rotateY(e){return this.rotateOnAxis(Ll,e)}rotateZ(e){return this.rotateOnAxis(Il,e)}translateOnAxis(e,n){return Rl.copy(e).applyQuaternion(this.quaternion),this.position.add(Rl.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Ml,e)}translateY(e){return this.translateOnAxis(Ll,e)}translateZ(e){return this.translateOnAxis(Il,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(fi.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?Jr.copy(e):Jr.set(e,n,i);const l=this.parent;this.updateWorldMatrix(!0,!1),rr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fi.lookAt(rr,Jr,this.up):fi.lookAt(Jr,rr,this.up),this.quaternion.setFromRotationMatrix(fi),l&&(fi.extractRotation(l.matrixWorld),bs.setFromRotationMatrix(fi),this.quaternion.premultiply(bs.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Jh)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Fl)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(Fl)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),fi.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),fi.multiply(e.parent.matrixWorld)),e.applyMatrix4(fi),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,l=this.children.length;i<l;i++){const _=this.children[i].getObjectByProperty(e,n);if(_!==void 0)return _}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rr,e,Yh),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rr,Zh,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,l=n.length;i<l;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,l=n.length;i<l;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,l=n.length;i<l;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const l=this.children;for(let h=0,_=l.length;h<_;h++)l[h].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const l={};l.uuid=this.uuid,l.type=this.type,this.name!==""&&(l.name=this.name),this.castShadow===!0&&(l.castShadow=!0),this.receiveShadow===!0&&(l.receiveShadow=!0),this.visible===!1&&(l.visible=!1),this.frustumCulled===!1&&(l.frustumCulled=!1),this.renderOrder!==0&&(l.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(l.userData=this.userData),l.layers=this.layers.mask,l.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(l.matrixAutoUpdate=!1),this.isInstancedMesh&&(l.type="InstancedMesh",l.count=this.count,l.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(l.instanceColor=this.instanceColor.toJSON()));function h(g,u){return g[u.uuid]===void 0&&(g[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?l.background=this.background.toJSON():this.background.isTexture&&(l.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(l.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){l.geometry=h(e.geometries,this.geometry);const g=this.geometry.parameters;if(g!==void 0&&g.shapes!==void 0){const u=g.shapes;if(Array.isArray(u))for(let f=0,M=u.length;f<M;f++){const a=u[f];h(e.shapes,a)}else h(e.shapes,u)}}if(this.isSkinnedMesh&&(l.bindMode=this.bindMode,l.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(h(e.skeletons,this.skeleton),l.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const g=[];for(let u=0,f=this.material.length;u<f;u++)g.push(h(e.materials,this.material[u]));l.material=g}else l.material=h(e.materials,this.material);if(this.children.length>0){l.children=[];for(let g=0;g<this.children.length;g++)l.children.push(this.children[g].toJSON(e).object)}if(this.animations.length>0){l.animations=[];for(let g=0;g<this.animations.length;g++){const u=this.animations[g];l.animations.push(h(e.animations,u))}}if(n){const g=_(e.geometries),u=_(e.materials),f=_(e.textures),M=_(e.images),a=_(e.shapes),E=_(e.skeletons),p=_(e.animations),d=_(e.nodes);g.length>0&&(i.geometries=g),u.length>0&&(i.materials=u),f.length>0&&(i.textures=f),M.length>0&&(i.images=M),a.length>0&&(i.shapes=a),E.length>0&&(i.skeletons=E),p.length>0&&(i.animations=p),d.length>0&&(i.nodes=d)}return i.object=l,i;function _(g){const u=[];for(const f in g){const M=g[f];delete M.metadata,u.push(M)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const l=e.children[i];this.add(l.clone())}return this}}Yt.DefaultUp=new ce(0,1,0);Yt.DefaultMatrixAutoUpdate=!0;const Hn=new ce,mi=new ce,Wo=new ce,pi=new ce,As=new ce,Cs=new ce,Nl=new ce,Vo=new ce,Ho=new ce,zo=new ce;class vi{constructor(e=new ce,n=new ce,i=new ce){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,l){l.subVectors(i,n),Hn.subVectors(e,n),l.cross(Hn);const h=l.lengthSq();return h>0?l.multiplyScalar(1/Math.sqrt(h)):l.set(0,0,0)}static getBarycoord(e,n,i,l,h){Hn.subVectors(l,n),mi.subVectors(i,n),Wo.subVectors(e,n);const _=Hn.dot(Hn),g=Hn.dot(mi),u=Hn.dot(Wo),f=mi.dot(mi),M=mi.dot(Wo),a=_*f-g*g;if(a===0)return h.set(-2,-1,-1);const E=1/a,p=(f*u-g*M)*E,d=(_*M-g*u)*E;return h.set(1-p-d,d,p)}static containsPoint(e,n,i,l){return this.getBarycoord(e,n,i,l,pi),pi.x>=0&&pi.y>=0&&pi.x+pi.y<=1}static getUV(e,n,i,l,h,_,g,u){return this.getBarycoord(e,n,i,l,pi),u.set(0,0),u.addScaledVector(h,pi.x),u.addScaledVector(_,pi.y),u.addScaledVector(g,pi.z),u}static isFrontFacing(e,n,i,l){return Hn.subVectors(i,n),mi.subVectors(e,n),Hn.cross(mi).dot(l)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,l){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[l]),this}setFromAttributeAndIndices(e,n,i,l){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,l),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Hn.subVectors(this.c,this.b),mi.subVectors(this.a,this.b),Hn.cross(mi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return vi.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,l,h){return vi.getUV(e,this.a,this.b,this.c,n,i,l,h)}containsPoint(e){return vi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,l=this.b,h=this.c;let _,g;As.subVectors(l,i),Cs.subVectors(h,i),Vo.subVectors(e,i);const u=As.dot(Vo),f=Cs.dot(Vo);if(u<=0&&f<=0)return n.copy(i);Ho.subVectors(e,l);const M=As.dot(Ho),a=Cs.dot(Ho);if(M>=0&&a<=M)return n.copy(l);const E=u*a-M*f;if(E<=0&&u>=0&&M<=0)return _=u/(u-M),n.copy(i).addScaledVector(As,_);zo.subVectors(e,h);const p=As.dot(zo),d=Cs.dot(zo);if(d>=0&&p<=d)return n.copy(h);const s=p*f-u*d;if(s<=0&&f>=0&&d<=0)return g=f/(f-d),n.copy(i).addScaledVector(Cs,g);const r=M*d-p*a;if(r<=0&&a-M>=0&&p-d>=0)return Nl.subVectors(h,l),g=(a-M)/(a-M+(p-d)),n.copy(l).addScaledVector(Nl,g);const t=1/(r+s+E);return _=s*t,g=E*t,n.copy(i).addScaledVector(As,_).addScaledVector(Cs,g)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Qh=0;class oi extends cs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Qh++}),this.uuid=jn(),this.name="",this.type="Material",this.blending=Ns,this.side=Ds,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Nc,this.blendDst=Pc,this.blendEquation=Is,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ua,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Th,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Io,this.stencilZFail=Io,this.stencilZPass=Io,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}if(n==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===Pu;continue}const l=this[n];if(l===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}l&&l.isColor?l.set(i):l&&l.isVector3&&i&&i.isVector3?l.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ns&&(i.blending=this.blending),this.side!==Ds&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function l(h){const _=[];for(const g in h){const u=h[g];delete u.metadata,_.push(u)}return _}if(n){const h=l(e.textures),_=l(e.images);h.length>0&&(i.textures=h),_.length>0&&(i.images=_)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const l=n.length;i=new Array(l);for(let h=0;h!==l;++h)i[h]=n[h].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ii extends oi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Dc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qt=new ce,Qr=new ct;class _n{constructor(e,n,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i===!0,this.usage=pa,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let l=0,h=this.itemSize;l<h;l++)this.array[e+l]=n.array[i+l];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const n=this.array;let i=0;for(let l=0,h=e.length;l<h;l++){let _=e[l];_===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",l),_=new dt),n[i++]=_.r,n[i++]=_.g,n[i++]=_.b}return this}copyVector2sArray(e){const n=this.array;let i=0;for(let l=0,h=e.length;l<h;l++){let _=e[l];_===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",l),_=new ct),n[i++]=_.x,n[i++]=_.y}return this}copyVector3sArray(e){const n=this.array;let i=0;for(let l=0,h=e.length;l<h;l++){let _=e[l];_===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",l),_=new ce),n[i++]=_.x,n[i++]=_.y,n[i++]=_.z}return this}copyVector4sArray(e){const n=this.array;let i=0;for(let l=0,h=e.length;l<h;l++){let _=e[l];_===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",l),_=new Ut),n[i++]=_.x,n[i++]=_.y,n[i++]=_.z,n[i++]=_.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)Qr.fromBufferAttribute(this,n),Qr.applyMatrix3(e),this.setXY(n,Qr.x,Qr.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)qt.fromBufferAttribute(this,n),qt.applyMatrix3(e),this.setXYZ(n,qt.x,qt.y,qt.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)qt.fromBufferAttribute(this,n),qt.applyMatrix4(e),this.setXYZ(n,qt.x,qt.y,qt.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)qt.fromBufferAttribute(this,n),qt.applyNormalMatrix(e),this.setXYZ(n,qt.x,qt.y,qt.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)qt.fromBufferAttribute(this,n),qt.transformDirection(e),this.setXYZ(n,qt.x,qt.y,qt.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){return this.array[e*this.itemSize]}setX(e,n){return this.array[e*this.itemSize]=n,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,n){return this.array[e*this.itemSize+1]=n,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,n){return this.array[e*this.itemSize+2]=n,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,n){return this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,l){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=l,this}setXYZW(e,n,i,l,h){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=l,this.array[e+3]=h,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==pa&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Kc extends _n{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class jc extends _n{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class xi extends _n{constructor(e,n,i){super(new Float32Array(e),n,i)}}let ed=0;const Pn=new It,Xo=new Yt,ys=new ce,Ln=new zs,or=new zs,tn=new ce;class qn extends cs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ed++}),this.uuid=jn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Gc(e)?jc:Kc)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const h=new On().getNormalMatrix(e);i.applyNormalMatrix(h),i.needsUpdate=!0}const l=this.attributes.tangent;return l!==void 0&&(l.transformDirection(e),l.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Pn.makeRotationFromQuaternion(e),this.applyMatrix4(Pn),this}rotateX(e){return Pn.makeRotationX(e),this.applyMatrix4(Pn),this}rotateY(e){return Pn.makeRotationY(e),this.applyMatrix4(Pn),this}rotateZ(e){return Pn.makeRotationZ(e),this.applyMatrix4(Pn),this}translate(e,n,i){return Pn.makeTranslation(e,n,i),this.applyMatrix4(Pn),this}scale(e,n,i){return Pn.makeScale(e,n,i),this.applyMatrix4(Pn),this}lookAt(e){return Xo.lookAt(e),Xo.updateMatrix(),this.applyMatrix4(Xo.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ys).negate(),this.translate(ys.x,ys.y,ys.z),this}setFromPoints(e){const n=[];for(let i=0,l=e.length;i<l;i++){const h=e[i];n.push(h.x,h.y,h.z||0)}return this.setAttribute("position",new xi(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zs);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,l=n.length;i<l;i++){const h=n[i];Ln.setFromBufferAttribute(h),this.morphTargetsRelative?(tn.addVectors(this.boundingBox.min,Ln.min),this.boundingBox.expandByPoint(tn),tn.addVectors(this.boundingBox.max,Ln.max),this.boundingBox.expandByPoint(tn)):(this.boundingBox.expandByPoint(Ln.min),this.boundingBox.expandByPoint(Ln.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xs);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ce,1/0);return}if(e){const i=this.boundingSphere.center;if(Ln.setFromBufferAttribute(e),n)for(let h=0,_=n.length;h<_;h++){const g=n[h];or.setFromBufferAttribute(g),this.morphTargetsRelative?(tn.addVectors(Ln.min,or.min),Ln.expandByPoint(tn),tn.addVectors(Ln.max,or.max),Ln.expandByPoint(tn)):(Ln.expandByPoint(or.min),Ln.expandByPoint(or.max))}Ln.getCenter(i);let l=0;for(let h=0,_=e.count;h<_;h++)tn.fromBufferAttribute(e,h),l=Math.max(l,i.distanceToSquared(tn));if(n)for(let h=0,_=n.length;h<_;h++){const g=n[h],u=this.morphTargetsRelative;for(let f=0,M=g.count;f<M;f++)tn.fromBufferAttribute(g,f),u&&(ys.fromBufferAttribute(e,f),tn.add(ys)),l=Math.max(l,i.distanceToSquared(tn))}this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,l=n.position.array,h=n.normal.array,_=n.uv.array,g=l.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _n(new Float32Array(4*g),4));const u=this.getAttribute("tangent").array,f=[],M=[];for(let A=0;A<g;A++)f[A]=new ce,M[A]=new ce;const a=new ce,E=new ce,p=new ce,d=new ct,s=new ct,r=new ct,t=new ce,c=new ce;function m(A,y,P){a.fromArray(l,A*3),E.fromArray(l,y*3),p.fromArray(l,P*3),d.fromArray(_,A*2),s.fromArray(_,y*2),r.fromArray(_,P*2),E.sub(a),p.sub(a),s.sub(d),r.sub(d);const B=1/(s.x*r.y-r.x*s.y);!isFinite(B)||(t.copy(E).multiplyScalar(r.y).addScaledVector(p,-s.y).multiplyScalar(B),c.copy(p).multiplyScalar(s.x).addScaledVector(E,-r.x).multiplyScalar(B),f[A].add(t),f[y].add(t),f[P].add(t),M[A].add(c),M[y].add(c),M[P].add(c))}let v=this.groups;v.length===0&&(v=[{start:0,count:i.length}]);for(let A=0,y=v.length;A<y;++A){const P=v[A],B=P.start,T=P.count;for(let I=B,D=B+T;I<D;I+=3)m(i[I+0],i[I+1],i[I+2])}const x=new ce,w=new ce,R=new ce,S=new ce;function L(A){R.fromArray(h,A*3),S.copy(R);const y=f[A];x.copy(y),x.sub(R.multiplyScalar(R.dot(y))).normalize(),w.crossVectors(S,y);const B=w.dot(M[A])<0?-1:1;u[A*4]=x.x,u[A*4+1]=x.y,u[A*4+2]=x.z,u[A*4+3]=B}for(let A=0,y=v.length;A<y;++A){const P=v[A],B=P.start,T=P.count;for(let I=B,D=B+T;I<D;I+=3)L(i[I+0]),L(i[I+1]),L(i[I+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new _n(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let E=0,p=i.count;E<p;E++)i.setXYZ(E,0,0,0);const l=new ce,h=new ce,_=new ce,g=new ce,u=new ce,f=new ce,M=new ce,a=new ce;if(e)for(let E=0,p=e.count;E<p;E+=3){const d=e.getX(E+0),s=e.getX(E+1),r=e.getX(E+2);l.fromBufferAttribute(n,d),h.fromBufferAttribute(n,s),_.fromBufferAttribute(n,r),M.subVectors(_,h),a.subVectors(l,h),M.cross(a),g.fromBufferAttribute(i,d),u.fromBufferAttribute(i,s),f.fromBufferAttribute(i,r),g.add(M),u.add(M),f.add(M),i.setXYZ(d,g.x,g.y,g.z),i.setXYZ(s,u.x,u.y,u.z),i.setXYZ(r,f.x,f.y,f.z)}else for(let E=0,p=n.count;E<p;E+=3)l.fromBufferAttribute(n,E+0),h.fromBufferAttribute(n,E+1),_.fromBufferAttribute(n,E+2),M.subVectors(_,h),a.subVectors(l,h),M.cross(a),i.setXYZ(E+0,M.x,M.y,M.z),i.setXYZ(E+1,M.x,M.y,M.z),i.setXYZ(E+2,M.x,M.y,M.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,n){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}n===void 0&&(n=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const l in i){if(e.attributes[l]===void 0)continue;const _=i[l].array,g=e.attributes[l],u=g.array,f=g.itemSize*n,M=Math.min(u.length,_.length-f);for(let a=0,E=f;a<M;a++,E++)_[E]=u[a]}return this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)tn.fromBufferAttribute(e,n),tn.normalize(),e.setXYZ(n,tn.x,tn.y,tn.z)}toNonIndexed(){function e(g,u){const f=g.array,M=g.itemSize,a=g.normalized,E=new f.constructor(u.length*M);let p=0,d=0;for(let s=0,r=u.length;s<r;s++){g.isInterleavedBufferAttribute?p=u[s]*g.data.stride+g.offset:p=u[s]*M;for(let t=0;t<M;t++)E[d++]=f[p++]}return new _n(E,M,a)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new qn,i=this.index.array,l=this.attributes;for(const g in l){const u=l[g],f=e(u,i);n.setAttribute(g,f)}const h=this.morphAttributes;for(const g in h){const u=[],f=h[g];for(let M=0,a=f.length;M<a;M++){const E=f[M],p=e(E,i);u.push(p)}n.morphAttributes[g]=u}n.morphTargetsRelative=this.morphTargetsRelative;const _=this.groups;for(let g=0,u=_.length;g<u;g++){const f=_[g];n.addGroup(f.start,f.count,f.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const u in i){const f=i[u];e.data.attributes[u]=f.toJSON(e.data)}const l={};let h=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],M=[];for(let a=0,E=f.length;a<E;a++){const p=f[a];M.push(p.toJSON(e.data))}M.length>0&&(l[u]=M,h=!0)}h&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);const _=this.groups;_.length>0&&(e.data.groups=JSON.parse(JSON.stringify(_)));const g=this.boundingSphere;return g!==null&&(e.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const l=e.attributes;for(const f in l){const M=l[f];this.setAttribute(f,M.clone(n))}const h=e.morphAttributes;for(const f in h){const M=[],a=h[f];for(let E=0,p=a.length;E<p;E++)M.push(a[E].clone(n));this.morphAttributes[f]=M}this.morphTargetsRelative=e.morphTargetsRelative;const _=e.groups;for(let f=0,M=_.length;f<M;f++){const a=_[f];this.addGroup(a.start,a.count,a.materialIndex)}const g=e.boundingBox;g!==null&&(this.boundingBox=g.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Pl=new It,ws=new Ta,Ko=new Xs,Pi=new ce,Di=new ce,Oi=new ce,jo=new ce,qo=new ce,Yo=new ce,eo=new ce,to=new ce,no=new ce,io=new ct,so=new ct,ro=new ct,Zo=new ce,oo=new ce;class si extends Yt{constructor(e=new qn,n=new ii){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const l=n[i[0]];if(l!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,_=l.length;h<_;h++){const g=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=h}}}}raycast(e,n){const i=this.geometry,l=this.material,h=this.matrixWorld;if(l===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Ko.copy(i.boundingSphere),Ko.applyMatrix4(h),e.ray.intersectsSphere(Ko)===!1)||(Pl.copy(h).invert(),ws.copy(e.ray).applyMatrix4(Pl),i.boundingBox!==null&&ws.intersectsBox(i.boundingBox)===!1))return;let _;const g=i.index,u=i.attributes.position,f=i.morphAttributes.position,M=i.morphTargetsRelative,a=i.attributes.uv,E=i.attributes.uv2,p=i.groups,d=i.drawRange;if(g!==null)if(Array.isArray(l))for(let s=0,r=p.length;s<r;s++){const t=p[s],c=l[t.materialIndex],m=Math.max(t.start,d.start),v=Math.min(g.count,Math.min(t.start+t.count,d.start+d.count));for(let x=m,w=v;x<w;x+=3){const R=g.getX(x),S=g.getX(x+1),L=g.getX(x+2);_=ao(this,c,e,ws,u,f,M,a,E,R,S,L),_&&(_.faceIndex=Math.floor(x/3),_.face.materialIndex=t.materialIndex,n.push(_))}}else{const s=Math.max(0,d.start),r=Math.min(g.count,d.start+d.count);for(let t=s,c=r;t<c;t+=3){const m=g.getX(t),v=g.getX(t+1),x=g.getX(t+2);_=ao(this,l,e,ws,u,f,M,a,E,m,v,x),_&&(_.faceIndex=Math.floor(t/3),n.push(_))}}else if(u!==void 0)if(Array.isArray(l))for(let s=0,r=p.length;s<r;s++){const t=p[s],c=l[t.materialIndex],m=Math.max(t.start,d.start),v=Math.min(u.count,Math.min(t.start+t.count,d.start+d.count));for(let x=m,w=v;x<w;x+=3){const R=x,S=x+1,L=x+2;_=ao(this,c,e,ws,u,f,M,a,E,R,S,L),_&&(_.faceIndex=Math.floor(x/3),_.face.materialIndex=t.materialIndex,n.push(_))}}else{const s=Math.max(0,d.start),r=Math.min(u.count,d.start+d.count);for(let t=s,c=r;t<c;t+=3){const m=t,v=t+1,x=t+2;_=ao(this,l,e,ws,u,f,M,a,E,m,v,x),_&&(_.faceIndex=Math.floor(t/3),n.push(_))}}}}function td(C,e,n,i,l,h,_,g){let u;if(e.side===Kn?u=i.intersectTriangle(_,h,l,!0,g):u=i.intersectTriangle(l,h,_,e.side!==Gi,g),u===null)return null;oo.copy(g),oo.applyMatrix4(C.matrixWorld);const f=n.ray.origin.distanceTo(oo);return f<n.near||f>n.far?null:{distance:f,point:oo.clone(),object:C}}function ao(C,e,n,i,l,h,_,g,u,f,M,a){Pi.fromBufferAttribute(l,f),Di.fromBufferAttribute(l,M),Oi.fromBufferAttribute(l,a);const E=C.morphTargetInfluences;if(h&&E){eo.set(0,0,0),to.set(0,0,0),no.set(0,0,0);for(let d=0,s=h.length;d<s;d++){const r=E[d],t=h[d];r!==0&&(jo.fromBufferAttribute(t,f),qo.fromBufferAttribute(t,M),Yo.fromBufferAttribute(t,a),_?(eo.addScaledVector(jo,r),to.addScaledVector(qo,r),no.addScaledVector(Yo,r)):(eo.addScaledVector(jo.sub(Pi),r),to.addScaledVector(qo.sub(Di),r),no.addScaledVector(Yo.sub(Oi),r)))}Pi.add(eo),Di.add(to),Oi.add(no)}C.isSkinnedMesh&&(C.boneTransform(f,Pi),C.boneTransform(M,Di),C.boneTransform(a,Oi));const p=td(C,e,n,i,Pi,Di,Oi,Zo);if(p){g&&(io.fromBufferAttribute(g,f),so.fromBufferAttribute(g,M),ro.fromBufferAttribute(g,a),p.uv=vi.getUV(Zo,Pi,Di,Oi,io,so,ro,new ct)),u&&(io.fromBufferAttribute(u,f),so.fromBufferAttribute(u,M),ro.fromBufferAttribute(u,a),p.uv2=vi.getUV(Zo,Pi,Di,Oi,io,so,ro,new ct));const d={a:f,b:M,c:a,normal:new ce,materialIndex:0};vi.getNormal(Pi,Di,Oi,d.normal),p.face=d}return p}class Ar extends qn{constructor(e=1,n=1,i=1,l=1,h=1,_=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:l,heightSegments:h,depthSegments:_};const g=this;l=Math.floor(l),h=Math.floor(h),_=Math.floor(_);const u=[],f=[],M=[],a=[];let E=0,p=0;d("z","y","x",-1,-1,i,n,e,_,h,0),d("z","y","x",1,-1,i,n,-e,_,h,1),d("x","z","y",1,1,e,i,n,l,_,2),d("x","z","y",1,-1,e,i,-n,l,_,3),d("x","y","z",1,-1,e,n,i,l,h,4),d("x","y","z",-1,-1,e,n,-i,l,h,5),this.setIndex(u),this.setAttribute("position",new xi(f,3)),this.setAttribute("normal",new xi(M,3)),this.setAttribute("uv",new xi(a,2));function d(s,r,t,c,m,v,x,w,R,S,L){const A=v/R,y=x/S,P=v/2,B=x/2,T=w/2,I=R+1,D=S+1;let k=0,U=0;const G=new ce;for(let H=0;H<D;H++){const se=H*y-B;for(let ee=0;ee<I;ee++){const Z=ee*A-P;G[s]=Z*c,G[r]=se*m,G[t]=T,f.push(G.x,G.y,G.z),G[s]=0,G[r]=0,G[t]=w>0?1:-1,M.push(G.x,G.y,G.z),a.push(ee/R),a.push(1-H/S),k+=1}}for(let H=0;H<S;H++)for(let se=0;se<R;se++){const ee=E+se+I*H,Z=E+se+I*(H+1),ne=E+(se+1)+I*(H+1),W=E+(se+1)+I*H;u.push(ee,Z,W),u.push(Z,ne,W),U+=6}g.addGroup(p,U,L),p+=U,E+=k}}static fromJSON(e){return new Ar(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Gs(C){const e={};for(const n in C){e[n]={};for(const i in C[n]){const l=C[n][i];l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?e[n][i]=l.clone():Array.isArray(l)?e[n][i]=l.slice():e[n][i]=l}}return e}function hn(C){const e={};for(let n=0;n<C.length;n++){const i=Gs(C[n]);for(const l in i)e[l]=i[l]}return e}function nd(C){const e=[];for(let n=0;n<C.length;n++)e.push(C[n].clone());return e}const id={clone:Gs,merge:hn};var sd=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,rd=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class as extends oi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=sd,this.fragmentShader=rd,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Gs(e.uniforms),this.uniformsGroups=nd(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const l in this.uniforms){const _=this.uniforms[l].value;_&&_.isTexture?n.uniforms[l]={type:"t",value:_.toJSON(e).uuid}:_&&_.isColor?n.uniforms[l]={type:"c",value:_.getHex()}:_&&_.isVector2?n.uniforms[l]={type:"v2",value:_.toArray()}:_&&_.isVector3?n.uniforms[l]={type:"v3",value:_.toArray()}:_&&_.isVector4?n.uniforms[l]={type:"v4",value:_.toArray()}:_&&_.isMatrix3?n.uniforms[l]={type:"m3",value:_.toArray()}:_&&_.isMatrix4?n.uniforms[l]={type:"m4",value:_.toArray()}:n.uniforms[l]={value:_}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const i={};for(const l in this.extensions)this.extensions[l]===!0&&(i[l]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class qc extends Yt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new It,this.projectionMatrix=new It,this.projectionMatrixInverse=new It}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class gn extends qc{constructor(e=50,n=1,i=.1,l=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=l,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=_r*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(dr*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return _r*2*Math.atan(Math.tan(dr*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,l,h,_){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=l,this.view.width=h,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(dr*.5*this.fov)/this.zoom,i=2*n,l=this.aspect*i,h=-.5*l;const _=this.view;if(this.view!==null&&this.view.enabled){const u=_.fullWidth,f=_.fullHeight;h+=_.offsetX*l/u,n-=_.offsetY*i/f,l*=_.width/u,i*=_.height/f}const g=this.filmOffset;g!==0&&(h+=e*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+l,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Ts=90,Rs=1;class od extends Yt{constructor(e,n,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const l=new gn(Ts,Rs,e,n);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ce(1,0,0)),this.add(l);const h=new gn(Ts,Rs,e,n);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new ce(-1,0,0)),this.add(h);const _=new gn(Ts,Rs,e,n);_.layers=this.layers,_.up.set(0,0,1),_.lookAt(new ce(0,1,0)),this.add(_);const g=new gn(Ts,Rs,e,n);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(new ce(0,-1,0)),this.add(g);const u=new gn(Ts,Rs,e,n);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new ce(0,0,1)),this.add(u);const f=new gn(Ts,Rs,e,n);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new ce(0,0,-1)),this.add(f)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[l,h,_,g,u,f]=this.children,M=e.getRenderTarget(),a=e.toneMapping,E=e.xr.enabled;e.toneMapping=Ei,e.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,l),e.setRenderTarget(i,1),e.render(n,h),e.setRenderTarget(i,2),e.render(n,_),e.setRenderTarget(i,3),e.render(n,g),e.setRenderTarget(i,4),e.render(n,u),i.texture.generateMipmaps=p,e.setRenderTarget(i,5),e.render(n,f),e.setRenderTarget(M),e.toneMapping=a,e.xr.enabled=E,i.texture.needsPMREMUpdate=!0}}class Yc extends vn{constructor(e,n,i,l,h,_,g,u,f,M){e=e!==void 0?e:[],n=n!==void 0?n:Os,super(e,n,i,l,h,_,g,u,f,M),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ad extends os{constructor(e,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},l=[i,i,i,i,i,i];this.texture=new Yc(l,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:yn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},l=new Ar(5,5,5),h=new as({name:"CubemapFromEquirect",uniforms:Gs(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Kn,blending:$i});h.uniforms.tEquirect.value=n;const _=new si(l,h),g=n.minFilter;return n.minFilter===Hs&&(n.minFilter=yn),new od(1,10,this).update(e,_),n.minFilter=g,_.geometry.dispose(),_.material.dispose(),this}clear(e,n,i,l){const h=e.getRenderTarget();for(let _=0;_<6;_++)e.setRenderTarget(this,_),e.clear(n,i,l);e.setRenderTarget(h)}}const Jo=new ce,ld=new ce,cd=new On;class ji{constructor(e=new ce(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,l){return this.normal.set(e,n,i),this.constant=l,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const l=Jo.subVectors(i,n).cross(ld.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(l,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const i=e.delta(Jo),l=this.normal.dot(i);if(l===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const h=-(e.start.dot(this.normal)+this.constant)/l;return h<0||h>1?null:n.copy(i).multiplyScalar(h).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||cd.getNormalMatrix(e),l=this.coplanarPoint(Jo).applyMatrix4(e),h=this.normal.applyMatrix3(i).normalize();return this.constant=-l.dot(h),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ms=new Xs,lo=new ce;class Ra{constructor(e=new ji,n=new ji,i=new ji,l=new ji,h=new ji,_=new ji){this.planes=[e,n,i,l,h,_]}set(e,n,i,l,h,_){const g=this.planes;return g[0].copy(e),g[1].copy(n),g[2].copy(i),g[3].copy(l),g[4].copy(h),g[5].copy(_),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,l=i[0],h=i[1],_=i[2],g=i[3],u=i[4],f=i[5],M=i[6],a=i[7],E=i[8],p=i[9],d=i[10],s=i[11],r=i[12],t=i[13],c=i[14],m=i[15];return n[0].setComponents(g-l,a-u,s-E,m-r).normalize(),n[1].setComponents(g+l,a+u,s+E,m+r).normalize(),n[2].setComponents(g+h,a+f,s+p,m+t).normalize(),n[3].setComponents(g-h,a-f,s-p,m-t).normalize(),n[4].setComponents(g-_,a-M,s-d,m-c).normalize(),n[5].setComponents(g+_,a+M,s+d,m+c).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),Ms.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ms)}intersectsSprite(e){return Ms.center.set(0,0,0),Ms.radius=.7071067811865476,Ms.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ms)}intersectsSphere(e){const n=this.planes,i=e.center,l=-e.radius;for(let h=0;h<6;h++)if(n[h].distanceToPoint(i)<l)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const l=n[i];if(lo.x=l.normal.x>0?e.max.x:e.min.x,lo.y=l.normal.y>0?e.max.y:e.min.y,lo.z=l.normal.z>0?e.max.z:e.min.z,l.distanceToPoint(lo)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Zc(){let C=null,e=!1,n=null,i=null;function l(h,_){n(h,_),i=C.requestAnimationFrame(l)}return{start:function(){e!==!0&&n!==null&&(i=C.requestAnimationFrame(l),e=!0)},stop:function(){C.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(h){n=h},setContext:function(h){C=h}}}function ud(C,e){const n=e.isWebGL2,i=new WeakMap;function l(f,M){const a=f.array,E=f.usage,p=C.createBuffer();C.bindBuffer(M,p),C.bufferData(M,a,E),f.onUploadCallback();let d;if(a instanceof Float32Array)d=5126;else if(a instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(n)d=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else d=5123;else if(a instanceof Int16Array)d=5122;else if(a instanceof Uint32Array)d=5125;else if(a instanceof Int32Array)d=5124;else if(a instanceof Int8Array)d=5120;else if(a instanceof Uint8Array)d=5121;else if(a instanceof Uint8ClampedArray)d=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);return{buffer:p,type:d,bytesPerElement:a.BYTES_PER_ELEMENT,version:f.version}}function h(f,M,a){const E=M.array,p=M.updateRange;C.bindBuffer(a,f),p.count===-1?C.bufferSubData(a,0,E):(n?C.bufferSubData(a,p.offset*E.BYTES_PER_ELEMENT,E,p.offset,p.count):C.bufferSubData(a,p.offset*E.BYTES_PER_ELEMENT,E.subarray(p.offset,p.offset+p.count)),p.count=-1)}function _(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function g(f){f.isInterleavedBufferAttribute&&(f=f.data);const M=i.get(f);M&&(C.deleteBuffer(M.buffer),i.delete(f))}function u(f,M){if(f.isGLBufferAttribute){const E=i.get(f);(!E||E.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const a=i.get(f);a===void 0?i.set(f,l(f,M)):a.version<f.version&&(h(a.buffer,f,M),a.version=f.version)}return{get:_,remove:g,update:u}}class Ma extends qn{constructor(e=1,n=1,i=1,l=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:l};const h=e/2,_=n/2,g=Math.floor(i),u=Math.floor(l),f=g+1,M=u+1,a=e/g,E=n/u,p=[],d=[],s=[],r=[];for(let t=0;t<M;t++){const c=t*E-_;for(let m=0;m<f;m++){const v=m*a-h;d.push(v,-c,0),s.push(0,0,1),r.push(m/g),r.push(1-t/u)}}for(let t=0;t<u;t++)for(let c=0;c<g;c++){const m=c+f*t,v=c+f*(t+1),x=c+1+f*(t+1),w=c+1+f*t;p.push(m,v,w),p.push(v,x,w)}this.setIndex(p),this.setAttribute("position",new xi(d,3)),this.setAttribute("normal",new xi(s,3)),this.setAttribute("uv",new xi(r,2))}static fromJSON(e){return new Ma(e.width,e.height,e.widthSegments,e.heightSegments)}}var hd=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,dd=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,fd=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,md=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,pd=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,gd=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_d="vec3 transformed = vec3( position );",vd=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Ed=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,xd=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Sd=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,bd=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Ad=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Cd=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,yd=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,wd=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Td=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Rd=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Md=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Ld=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Id=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Fd=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Nd=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Pd=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Dd=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Od=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Bd="gl_FragColor = linearToOutputTexel( gl_FragColor );",kd=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Ud=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$d=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Gd=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Wd=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Vd=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Hd=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,zd=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Xd=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Kd=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,jd=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,qd=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Yd=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Zd=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Jd=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Qd=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,ef=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,tf=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,nf=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sf=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,rf=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,of=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,af=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lf=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,cf=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,uf=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,hf=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,df=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,ff=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,mf=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,pf=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,gf=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_f=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vf=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ef=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,xf=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Sf=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,bf=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Af=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Cf=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,yf=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,wf=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Tf=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Rf=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Mf=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Lf=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,If=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Ff=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Nf=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Pf=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Df=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Of=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Bf=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,kf=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Uf=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$f=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Gf=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Wf=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Vf=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Hf=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,zf=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Xf=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Kf=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,jf=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,qf=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Yf=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Zf=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Jf=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Qf=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,em=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,tm=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,nm=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,im=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,sm=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,rm=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,om=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,am=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,lm=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const cm=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,um=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,hm=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dm=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,fm=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,mm=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,pm=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,gm=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,_m=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,vm=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Em=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xm=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Sm=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,bm=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Am=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Cm=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ym=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,wm=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tm=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Rm=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Mm=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lm=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Im=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Fm=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nm=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Pm=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dm=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Om=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Bm=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,km=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Um=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$m=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,At={alphamap_fragment:hd,alphamap_pars_fragment:dd,alphatest_fragment:fd,alphatest_pars_fragment:md,aomap_fragment:pd,aomap_pars_fragment:gd,begin_vertex:_d,beginnormal_vertex:vd,bsdfs:Ed,iridescence_fragment:xd,bumpmap_pars_fragment:Sd,clipping_planes_fragment:bd,clipping_planes_pars_fragment:Ad,clipping_planes_pars_vertex:Cd,clipping_planes_vertex:yd,color_fragment:wd,color_pars_fragment:Td,color_pars_vertex:Rd,color_vertex:Md,common:Ld,cube_uv_reflection_fragment:Id,defaultnormal_vertex:Fd,displacementmap_pars_vertex:Nd,displacementmap_vertex:Pd,emissivemap_fragment:Dd,emissivemap_pars_fragment:Od,encodings_fragment:Bd,encodings_pars_fragment:kd,envmap_fragment:Ud,envmap_common_pars_fragment:$d,envmap_pars_fragment:Gd,envmap_pars_vertex:Wd,envmap_physical_pars_fragment:Qd,envmap_vertex:Vd,fog_vertex:Hd,fog_pars_vertex:zd,fog_fragment:Xd,fog_pars_fragment:Kd,gradientmap_pars_fragment:jd,lightmap_fragment:qd,lightmap_pars_fragment:Yd,lights_lambert_vertex:Zd,lights_pars_begin:Jd,lights_toon_fragment:ef,lights_toon_pars_fragment:tf,lights_phong_fragment:nf,lights_phong_pars_fragment:sf,lights_physical_fragment:rf,lights_physical_pars_fragment:of,lights_fragment_begin:af,lights_fragment_maps:lf,lights_fragment_end:cf,logdepthbuf_fragment:uf,logdepthbuf_pars_fragment:hf,logdepthbuf_pars_vertex:df,logdepthbuf_vertex:ff,map_fragment:mf,map_pars_fragment:pf,map_particle_fragment:gf,map_particle_pars_fragment:_f,metalnessmap_fragment:vf,metalnessmap_pars_fragment:Ef,morphcolor_vertex:xf,morphnormal_vertex:Sf,morphtarget_pars_vertex:bf,morphtarget_vertex:Af,normal_fragment_begin:Cf,normal_fragment_maps:yf,normal_pars_fragment:wf,normal_pars_vertex:Tf,normal_vertex:Rf,normalmap_pars_fragment:Mf,clearcoat_normal_fragment_begin:Lf,clearcoat_normal_fragment_maps:If,clearcoat_pars_fragment:Ff,iridescence_pars_fragment:Nf,output_fragment:Pf,packing:Df,premultiplied_alpha_fragment:Of,project_vertex:Bf,dithering_fragment:kf,dithering_pars_fragment:Uf,roughnessmap_fragment:$f,roughnessmap_pars_fragment:Gf,shadowmap_pars_fragment:Wf,shadowmap_pars_vertex:Vf,shadowmap_vertex:Hf,shadowmask_pars_fragment:zf,skinbase_vertex:Xf,skinning_pars_vertex:Kf,skinning_vertex:jf,skinnormal_vertex:qf,specularmap_fragment:Yf,specularmap_pars_fragment:Zf,tonemapping_fragment:Jf,tonemapping_pars_fragment:Qf,transmission_fragment:em,transmission_pars_fragment:tm,uv_pars_fragment:nm,uv_pars_vertex:im,uv_vertex:sm,uv2_pars_fragment:rm,uv2_pars_vertex:om,uv2_vertex:am,worldpos_vertex:lm,background_vert:cm,background_frag:um,cube_vert:hm,cube_frag:dm,depth_vert:fm,depth_frag:mm,distanceRGBA_vert:pm,distanceRGBA_frag:gm,equirect_vert:_m,equirect_frag:vm,linedashed_vert:Em,linedashed_frag:xm,meshbasic_vert:Sm,meshbasic_frag:bm,meshlambert_vert:Am,meshlambert_frag:Cm,meshmatcap_vert:ym,meshmatcap_frag:wm,meshnormal_vert:Tm,meshnormal_frag:Rm,meshphong_vert:Mm,meshphong_frag:Lm,meshphysical_vert:Im,meshphysical_frag:Fm,meshtoon_vert:Nm,meshtoon_frag:Pm,points_vert:Dm,points_frag:Om,shadow_vert:Bm,shadow_frag:km,sprite_vert:Um,sprite_frag:$m},He={common:{diffuse:{value:new dt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new On},uv2Transform:{value:new On},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ct(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new On}},sprite:{diffuse:{value:new dt(16777215)},opacity:{value:1},center:{value:new ct(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new On}}},ti={basic:{uniforms:hn([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.fog]),vertexShader:At.meshbasic_vert,fragmentShader:At.meshbasic_frag},lambert:{uniforms:hn([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.fog,He.lights,{emissive:{value:new dt(0)}}]),vertexShader:At.meshlambert_vert,fragmentShader:At.meshlambert_frag},phong:{uniforms:hn([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.fog,He.lights,{emissive:{value:new dt(0)},specular:{value:new dt(1118481)},shininess:{value:30}}]),vertexShader:At.meshphong_vert,fragmentShader:At.meshphong_frag},standard:{uniforms:hn([He.common,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.roughnessmap,He.metalnessmap,He.fog,He.lights,{emissive:{value:new dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag},toon:{uniforms:hn([He.common,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.gradientmap,He.fog,He.lights,{emissive:{value:new dt(0)}}]),vertexShader:At.meshtoon_vert,fragmentShader:At.meshtoon_frag},matcap:{uniforms:hn([He.common,He.bumpmap,He.normalmap,He.displacementmap,He.fog,{matcap:{value:null}}]),vertexShader:At.meshmatcap_vert,fragmentShader:At.meshmatcap_frag},points:{uniforms:hn([He.points,He.fog]),vertexShader:At.points_vert,fragmentShader:At.points_frag},dashed:{uniforms:hn([He.common,He.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:At.linedashed_vert,fragmentShader:At.linedashed_frag},depth:{uniforms:hn([He.common,He.displacementmap]),vertexShader:At.depth_vert,fragmentShader:At.depth_frag},normal:{uniforms:hn([He.common,He.bumpmap,He.normalmap,He.displacementmap,{opacity:{value:1}}]),vertexShader:At.meshnormal_vert,fragmentShader:At.meshnormal_frag},sprite:{uniforms:hn([He.sprite,He.fog]),vertexShader:At.sprite_vert,fragmentShader:At.sprite_frag},background:{uniforms:{uvTransform:{value:new On},t2D:{value:null}},vertexShader:At.background_vert,fragmentShader:At.background_frag},cube:{uniforms:hn([He.envmap,{opacity:{value:1}}]),vertexShader:At.cube_vert,fragmentShader:At.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:At.equirect_vert,fragmentShader:At.equirect_frag},distanceRGBA:{uniforms:hn([He.common,He.displacementmap,{referencePosition:{value:new ce},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:At.distanceRGBA_vert,fragmentShader:At.distanceRGBA_frag},shadow:{uniforms:hn([He.lights,He.fog,{color:{value:new dt(0)},opacity:{value:1}}]),vertexShader:At.shadow_vert,fragmentShader:At.shadow_frag}};ti.physical={uniforms:hn([ti.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ct(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new dt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ct},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new dt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new dt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag};function Gm(C,e,n,i,l,h){const _=new dt(0);let g=l===!0?0:1,u,f,M=null,a=0,E=null;function p(s,r){let t=!1,c=r.isScene===!0?r.background:null;c&&c.isTexture&&(c=e.get(c));const m=C.xr,v=m.getSession&&m.getSession();v&&v.environmentBlendMode==="additive"&&(c=null),c===null?d(_,g):c&&c.isColor&&(d(c,1),t=!0),(C.autoClear||t)&&C.clear(C.autoClearColor,C.autoClearDepth,C.autoClearStencil),c&&(c.isCubeTexture||c.mapping===xo)?(f===void 0&&(f=new si(new Ar(1,1,1),new as({name:"BackgroundCubeMaterial",uniforms:Gs(ti.cube.uniforms),vertexShader:ti.cube.vertexShader,fragmentShader:ti.cube.fragmentShader,side:Kn,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(x,w,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),f.material.uniforms.envMap.value=c,f.material.uniforms.flipEnvMap.value=c.isCubeTexture&&c.isRenderTargetTexture===!1?-1:1,(M!==c||a!==c.version||E!==C.toneMapping)&&(f.material.needsUpdate=!0,M=c,a=c.version,E=C.toneMapping),f.layers.enableAll(),s.unshift(f,f.geometry,f.material,0,0,null)):c&&c.isTexture&&(u===void 0&&(u=new si(new Ma(2,2),new as({name:"BackgroundMaterial",uniforms:Gs(ti.background.uniforms),vertexShader:ti.background.vertexShader,fragmentShader:ti.background.fragmentShader,side:Ds,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=c,c.matrixAutoUpdate===!0&&c.updateMatrix(),u.material.uniforms.uvTransform.value.copy(c.matrix),(M!==c||a!==c.version||E!==C.toneMapping)&&(u.material.needsUpdate=!0,M=c,a=c.version,E=C.toneMapping),u.layers.enableAll(),s.unshift(u,u.geometry,u.material,0,0,null))}function d(s,r){n.buffers.color.setClear(s.r,s.g,s.b,r,h)}return{getClearColor:function(){return _},setClearColor:function(s,r=1){_.set(s),g=r,d(_,g)},getClearAlpha:function(){return g},setClearAlpha:function(s){g=s,d(_,g)},render:p}}function Wm(C,e,n,i){const l=C.getParameter(34921),h=i.isWebGL2?null:e.get("OES_vertex_array_object"),_=i.isWebGL2||h!==null,g={},u=r(null);let f=u,M=!1;function a(T,I,D,k,U){let G=!1;if(_){const H=s(k,D,I);f!==H&&(f=H,p(f.object)),G=t(T,k,D,U),G&&c(T,k,D,U)}else{const H=I.wireframe===!0;(f.geometry!==k.id||f.program!==D.id||f.wireframe!==H)&&(f.geometry=k.id,f.program=D.id,f.wireframe=H,G=!0)}U!==null&&n.update(U,34963),(G||M)&&(M=!1,S(T,I,D,k),U!==null&&C.bindBuffer(34963,n.get(U).buffer))}function E(){return i.isWebGL2?C.createVertexArray():h.createVertexArrayOES()}function p(T){return i.isWebGL2?C.bindVertexArray(T):h.bindVertexArrayOES(T)}function d(T){return i.isWebGL2?C.deleteVertexArray(T):h.deleteVertexArrayOES(T)}function s(T,I,D){const k=D.wireframe===!0;let U=g[T.id];U===void 0&&(U={},g[T.id]=U);let G=U[I.id];G===void 0&&(G={},U[I.id]=G);let H=G[k];return H===void 0&&(H=r(E()),G[k]=H),H}function r(T){const I=[],D=[],k=[];for(let U=0;U<l;U++)I[U]=0,D[U]=0,k[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:D,attributeDivisors:k,object:T,attributes:{},index:null}}function t(T,I,D,k){const U=f.attributes,G=I.attributes;let H=0;const se=D.getAttributes();for(const ee in se)if(se[ee].location>=0){const ne=U[ee];let W=G[ee];if(W===void 0&&(ee==="instanceMatrix"&&T.instanceMatrix&&(W=T.instanceMatrix),ee==="instanceColor"&&T.instanceColor&&(W=T.instanceColor)),ne===void 0||ne.attribute!==W||W&&ne.data!==W.data)return!0;H++}return f.attributesNum!==H||f.index!==k}function c(T,I,D,k){const U={},G=I.attributes;let H=0;const se=D.getAttributes();for(const ee in se)if(se[ee].location>=0){let ne=G[ee];ne===void 0&&(ee==="instanceMatrix"&&T.instanceMatrix&&(ne=T.instanceMatrix),ee==="instanceColor"&&T.instanceColor&&(ne=T.instanceColor));const W={};W.attribute=ne,ne&&ne.data&&(W.data=ne.data),U[ee]=W,H++}f.attributes=U,f.attributesNum=H,f.index=k}function m(){const T=f.newAttributes;for(let I=0,D=T.length;I<D;I++)T[I]=0}function v(T){x(T,0)}function x(T,I){const D=f.newAttributes,k=f.enabledAttributes,U=f.attributeDivisors;D[T]=1,k[T]===0&&(C.enableVertexAttribArray(T),k[T]=1),U[T]!==I&&((i.isWebGL2?C:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](T,I),U[T]=I)}function w(){const T=f.newAttributes,I=f.enabledAttributes;for(let D=0,k=I.length;D<k;D++)I[D]!==T[D]&&(C.disableVertexAttribArray(D),I[D]=0)}function R(T,I,D,k,U,G){i.isWebGL2===!0&&(D===5124||D===5125)?C.vertexAttribIPointer(T,I,D,U,G):C.vertexAttribPointer(T,I,D,k,U,G)}function S(T,I,D,k){if(i.isWebGL2===!1&&(T.isInstancedMesh||k.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;m();const U=k.attributes,G=D.getAttributes(),H=I.defaultAttributeValues;for(const se in G){const ee=G[se];if(ee.location>=0){let Z=U[se];if(Z===void 0&&(se==="instanceMatrix"&&T.instanceMatrix&&(Z=T.instanceMatrix),se==="instanceColor"&&T.instanceColor&&(Z=T.instanceColor)),Z!==void 0){const ne=Z.normalized,W=Z.itemSize,K=n.get(Z);if(K===void 0)continue;const re=K.buffer,oe=K.type,de=K.bytesPerElement;if(Z.isInterleavedBufferAttribute){const ue=Z.data,Be=ue.stride,Ge=Z.offset;if(ue.isInstancedInterleavedBuffer){for(let ke=0;ke<ee.locationSize;ke++)x(ee.location+ke,ue.meshPerAttribute);T.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let ke=0;ke<ee.locationSize;ke++)v(ee.location+ke);C.bindBuffer(34962,re);for(let ke=0;ke<ee.locationSize;ke++)R(ee.location+ke,W/ee.locationSize,oe,ne,Be*de,(Ge+W/ee.locationSize*ke)*de)}else{if(Z.isInstancedBufferAttribute){for(let ue=0;ue<ee.locationSize;ue++)x(ee.location+ue,Z.meshPerAttribute);T.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let ue=0;ue<ee.locationSize;ue++)v(ee.location+ue);C.bindBuffer(34962,re);for(let ue=0;ue<ee.locationSize;ue++)R(ee.location+ue,W/ee.locationSize,oe,ne,W*de,W/ee.locationSize*ue*de)}}else if(H!==void 0){const ne=H[se];if(ne!==void 0)switch(ne.length){case 2:C.vertexAttrib2fv(ee.location,ne);break;case 3:C.vertexAttrib3fv(ee.location,ne);break;case 4:C.vertexAttrib4fv(ee.location,ne);break;default:C.vertexAttrib1fv(ee.location,ne)}}}}w()}function L(){P();for(const T in g){const I=g[T];for(const D in I){const k=I[D];for(const U in k)d(k[U].object),delete k[U];delete I[D]}delete g[T]}}function A(T){if(g[T.id]===void 0)return;const I=g[T.id];for(const D in I){const k=I[D];for(const U in k)d(k[U].object),delete k[U];delete I[D]}delete g[T.id]}function y(T){for(const I in g){const D=g[I];if(D[T.id]===void 0)continue;const k=D[T.id];for(const U in k)d(k[U].object),delete k[U];delete D[T.id]}}function P(){B(),M=!0,f!==u&&(f=u,p(f.object))}function B(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:a,reset:P,resetDefaultState:B,dispose:L,releaseStatesOfGeometry:A,releaseStatesOfProgram:y,initAttributes:m,enableAttribute:v,disableUnusedAttributes:w}}function Vm(C,e,n,i){const l=i.isWebGL2;let h;function _(f){h=f}function g(f,M){C.drawArrays(h,f,M),n.update(M,h,1)}function u(f,M,a){if(a===0)return;let E,p;if(l)E=C,p="drawArraysInstanced";else if(E=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",E===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[p](h,f,M,a),n.update(M,h,a)}this.setMode=_,this.render=g,this.renderInstances=u}function Hm(C,e,n){let i;function l(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=C.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function h(R){if(R==="highp"){if(C.getShaderPrecisionFormat(35633,36338).precision>0&&C.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return R==="mediump"&&C.getShaderPrecisionFormat(35633,36337).precision>0&&C.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const _=typeof WebGL2RenderingContext<"u"&&C instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&C instanceof WebGL2ComputeRenderingContext;let g=n.precision!==void 0?n.precision:"highp";const u=h(g);u!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",u,"instead."),g=u);const f=_||e.has("WEBGL_draw_buffers"),M=n.logarithmicDepthBuffer===!0,a=C.getParameter(34930),E=C.getParameter(35660),p=C.getParameter(3379),d=C.getParameter(34076),s=C.getParameter(34921),r=C.getParameter(36347),t=C.getParameter(36348),c=C.getParameter(36349),m=E>0,v=_||e.has("OES_texture_float"),x=m&&v,w=_?C.getParameter(36183):0;return{isWebGL2:_,drawBuffers:f,getMaxAnisotropy:l,getMaxPrecision:h,precision:g,logarithmicDepthBuffer:M,maxTextures:a,maxVertexTextures:E,maxTextureSize:p,maxCubemapSize:d,maxAttributes:s,maxVertexUniforms:r,maxVaryings:t,maxFragmentUniforms:c,vertexTextures:m,floatFragmentTextures:v,floatVertexTextures:x,maxSamples:w}}function zm(C){const e=this;let n=null,i=0,l=!1,h=!1;const _=new ji,g=new On,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(a,E,p){const d=a.length!==0||E||i!==0||l;return l=E,n=M(a,p,0),i=a.length,d},this.beginShadows=function(){h=!0,M(null)},this.endShadows=function(){h=!1,f()},this.setState=function(a,E,p){const d=a.clippingPlanes,s=a.clipIntersection,r=a.clipShadows,t=C.get(a);if(!l||d===null||d.length===0||h&&!r)h?M(null):f();else{const c=h?0:i,m=c*4;let v=t.clippingState||null;u.value=v,v=M(d,E,m,p);for(let x=0;x!==m;++x)v[x]=n[x];t.clippingState=v,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=c}};function f(){u.value!==n&&(u.value=n,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function M(a,E,p,d){const s=a!==null?a.length:0;let r=null;if(s!==0){if(r=u.value,d!==!0||r===null){const t=p+s*4,c=E.matrixWorldInverse;g.getNormalMatrix(c),(r===null||r.length<t)&&(r=new Float32Array(t));for(let m=0,v=p;m!==s;++m,v+=4)_.copy(a[m]).applyMatrix4(c,g),_.normal.toArray(r,v),r[v+3]=_.constant}u.value=r,u.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,r}}function Xm(C){let e=new WeakMap;function n(_,g){return g===ha?_.mapping=Os:g===da&&(_.mapping=Bs),_}function i(_){if(_&&_.isTexture&&_.isRenderTargetTexture===!1){const g=_.mapping;if(g===ha||g===da)if(e.has(_)){const u=e.get(_).texture;return n(u,_.mapping)}else{const u=_.image;if(u&&u.height>0){const f=new ad(u.height/2);return f.fromEquirectangularTexture(C,_),e.set(_,f),_.addEventListener("dispose",l),n(f.texture,_.mapping)}else return null}}return _}function l(_){const g=_.target;g.removeEventListener("dispose",l);const u=e.get(g);u!==void 0&&(e.delete(g),u.dispose())}function h(){e=new WeakMap}return{get:i,dispose:h}}class La extends qc{constructor(e=-1,n=1,i=1,l=-1,h=.1,_=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=l,this.near=h,this.far=_,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,l,h,_){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=l,this.view.width=h,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let h=i-e,_=i+e,g=l+n,u=l-n;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,M=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=f*this.view.offsetX,_=h+f*this.view.width,g-=M*this.view.offsetY,u=g-M*this.view.height}this.projectionMatrix.makeOrthographic(h,_,g,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Fs=4,Dl=[.125,.215,.35,.446,.526,.582],Zi=20,Qo=new La,Ol=new dt;let ea=null;const qi=(1+Math.sqrt(5))/2,Ls=1/qi,Bl=[new ce(1,1,1),new ce(-1,1,1),new ce(1,1,-1),new ce(-1,1,-1),new ce(0,qi,Ls),new ce(0,qi,-Ls),new ce(Ls,0,qi),new ce(-Ls,0,qi),new ce(qi,Ls,0),new ce(-qi,Ls,0)];class kl{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,l=100){ea=this._renderer.getRenderTarget(),this._setSize(256);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(e,i,l,h),n>0&&this._blur(h,0,0,n),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Gl(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$l(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ea),e.scissorTest=!1,co(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Os||e.mapping===Bs?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ea=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:yn,minFilter:yn,generateMipmaps:!1,type:pr,format:Xn,encoding:rs,depthBuffer:!1},l=Ul(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ul(e,n,i);const{_lodMax:h}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Km(h)),this._blurMaterial=jm(h,e,n)}return l}_compileMaterial(e){const n=new si(this._lodPlanes[0],e);this._renderer.compile(n,Qo)}_sceneToCubeUV(e,n,i,l){const g=new gn(90,1,n,i),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],M=this._renderer,a=M.autoClear,E=M.toneMapping;M.getClearColor(Ol),M.toneMapping=Ei,M.autoClear=!1;const p=new ii({name:"PMREM.Background",side:Kn,depthWrite:!1,depthTest:!1}),d=new si(new Ar,p);let s=!1;const r=e.background;r?r.isColor&&(p.color.copy(r),e.background=null,s=!0):(p.color.copy(Ol),s=!0);for(let t=0;t<6;t++){const c=t%3;c===0?(g.up.set(0,u[t],0),g.lookAt(f[t],0,0)):c===1?(g.up.set(0,0,u[t]),g.lookAt(0,f[t],0)):(g.up.set(0,u[t],0),g.lookAt(0,0,f[t]));const m=this._cubeSize;co(l,c*m,t>2?m:0,m,m),M.setRenderTarget(l),s&&M.render(d,g),M.render(e,g)}d.geometry.dispose(),d.material.dispose(),M.toneMapping=E,M.autoClear=a,e.background=r}_textureToCubeUV(e,n){const i=this._renderer,l=e.mapping===Os||e.mapping===Bs;l?(this._cubemapMaterial===null&&(this._cubemapMaterial=Gl()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$l());const h=l?this._cubemapMaterial:this._equirectMaterial,_=new si(this._lodPlanes[0],h),g=h.uniforms;g.envMap.value=e;const u=this._cubeSize;co(n,0,0,3*u,2*u),i.setRenderTarget(n),i.render(_,Qo)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let l=1;l<this._lodPlanes.length;l++){const h=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]),_=Bl[(l-1)%Bl.length];this._blur(e,l-1,l,h,_)}n.autoClear=i}_blur(e,n,i,l,h){const _=this._pingPongRenderTarget;this._halfBlur(e,_,n,i,l,"latitudinal",h),this._halfBlur(_,e,i,i,l,"longitudinal",h)}_halfBlur(e,n,i,l,h,_,g){const u=this._renderer,f=this._blurMaterial;_!=="latitudinal"&&_!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const M=3,a=new si(this._lodPlanes[l],f),E=f.uniforms,p=this._sizeLods[i]-1,d=isFinite(h)?Math.PI/(2*p):2*Math.PI/(2*Zi-1),s=h/d,r=isFinite(h)?1+Math.floor(M*s):Zi;r>Zi&&console.warn(`sigmaRadians, ${h}, is too large and will clip, as it requested ${r} samples when the maximum is set to ${Zi}`);const t=[];let c=0;for(let R=0;R<Zi;++R){const S=R/s,L=Math.exp(-S*S/2);t.push(L),R===0?c+=L:R<r&&(c+=2*L)}for(let R=0;R<t.length;R++)t[R]=t[R]/c;E.envMap.value=e.texture,E.samples.value=r,E.weights.value=t,E.latitudinal.value=_==="latitudinal",g&&(E.poleAxis.value=g);const{_lodMax:m}=this;E.dTheta.value=d,E.mipInt.value=m-i;const v=this._sizeLods[l],x=3*v*(l>m-Fs?l-m+Fs:0),w=4*(this._cubeSize-v);co(n,x,w,3*v,2*v),u.setRenderTarget(n),u.render(a,Qo)}}function Km(C){const e=[],n=[],i=[];let l=C;const h=C-Fs+1+Dl.length;for(let _=0;_<h;_++){const g=Math.pow(2,l);n.push(g);let u=1/g;_>C-Fs?u=Dl[_-C+Fs-1]:_===0&&(u=0),i.push(u);const f=1/(g-2),M=-f,a=1+f,E=[M,M,a,M,a,a,M,M,a,a,M,a],p=6,d=6,s=3,r=2,t=1,c=new Float32Array(s*d*p),m=new Float32Array(r*d*p),v=new Float32Array(t*d*p);for(let w=0;w<p;w++){const R=w%3*2/3-1,S=w>2?0:-1,L=[R,S,0,R+2/3,S,0,R+2/3,S+1,0,R,S,0,R+2/3,S+1,0,R,S+1,0];c.set(L,s*d*w),m.set(E,r*d*w);const A=[w,w,w,w,w,w];v.set(A,t*d*w)}const x=new qn;x.setAttribute("position",new _n(c,s)),x.setAttribute("uv",new _n(m,r)),x.setAttribute("faceIndex",new _n(v,t)),e.push(x),l>Fs&&l--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function Ul(C,e,n){const i=new os(C,e,n);return i.texture.mapping=xo,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function co(C,e,n,i,l){C.viewport.set(e,n,i,l),C.scissor.set(e,n,i,l)}function jm(C,e,n){const i=new Float32Array(Zi),l=new ce(0,1,0);return new as({name:"SphericalGaussianBlur",defines:{n:Zi,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${C}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:Ia(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$i,depthTest:!1,depthWrite:!1})}function $l(){return new as({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ia(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$i,depthTest:!1,depthWrite:!1})}function Gl(){return new as({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ia(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$i,depthTest:!1,depthWrite:!1})}function Ia(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function qm(C){let e=new WeakMap,n=null;function i(g){if(g&&g.isTexture){const u=g.mapping,f=u===ha||u===da,M=u===Os||u===Bs;if(f||M)if(g.isRenderTargetTexture&&g.needsPMREMUpdate===!0){g.needsPMREMUpdate=!1;let a=e.get(g);return n===null&&(n=new kl(C)),a=f?n.fromEquirectangular(g,a):n.fromCubemap(g,a),e.set(g,a),a.texture}else{if(e.has(g))return e.get(g).texture;{const a=g.image;if(f&&a&&a.height>0||M&&a&&l(a)){n===null&&(n=new kl(C));const E=f?n.fromEquirectangular(g):n.fromCubemap(g);return e.set(g,E),g.addEventListener("dispose",h),E.texture}else return null}}}return g}function l(g){let u=0;const f=6;for(let M=0;M<f;M++)g[M]!==void 0&&u++;return u===f}function h(g){const u=g.target;u.removeEventListener("dispose",h);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function _(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:_}}function Ym(C){const e={};function n(i){if(e[i]!==void 0)return e[i];let l;switch(i){case"WEBGL_depth_texture":l=C.getExtension("WEBGL_depth_texture")||C.getExtension("MOZ_WEBGL_depth_texture")||C.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":l=C.getExtension("EXT_texture_filter_anisotropic")||C.getExtension("MOZ_EXT_texture_filter_anisotropic")||C.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":l=C.getExtension("WEBGL_compressed_texture_s3tc")||C.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||C.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":l=C.getExtension("WEBGL_compressed_texture_pvrtc")||C.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:l=C.getExtension(i)}return e[i]=l,l}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const l=n(i);return l===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),l}}}function Zm(C,e,n,i){const l={},h=new WeakMap;function _(a){const E=a.target;E.index!==null&&e.remove(E.index);for(const d in E.attributes)e.remove(E.attributes[d]);E.removeEventListener("dispose",_),delete l[E.id];const p=h.get(E);p&&(e.remove(p),h.delete(E)),i.releaseStatesOfGeometry(E),E.isInstancedBufferGeometry===!0&&delete E._maxInstanceCount,n.memory.geometries--}function g(a,E){return l[E.id]===!0||(E.addEventListener("dispose",_),l[E.id]=!0,n.memory.geometries++),E}function u(a){const E=a.attributes;for(const d in E)e.update(E[d],34962);const p=a.morphAttributes;for(const d in p){const s=p[d];for(let r=0,t=s.length;r<t;r++)e.update(s[r],34962)}}function f(a){const E=[],p=a.index,d=a.attributes.position;let s=0;if(p!==null){const c=p.array;s=p.version;for(let m=0,v=c.length;m<v;m+=3){const x=c[m+0],w=c[m+1],R=c[m+2];E.push(x,w,w,R,R,x)}}else{const c=d.array;s=d.version;for(let m=0,v=c.length/3-1;m<v;m+=3){const x=m+0,w=m+1,R=m+2;E.push(x,w,w,R,R,x)}}const r=new(Gc(E)?jc:Kc)(E,1);r.version=s;const t=h.get(a);t&&e.remove(t),h.set(a,r)}function M(a){const E=h.get(a);if(E){const p=a.index;p!==null&&E.version<p.version&&f(a)}else f(a);return h.get(a)}return{get:g,update:u,getWireframeAttribute:M}}function Jm(C,e,n,i){const l=i.isWebGL2;let h;function _(E){h=E}let g,u;function f(E){g=E.type,u=E.bytesPerElement}function M(E,p){C.drawElements(h,p,g,E*u),n.update(p,h,1)}function a(E,p,d){if(d===0)return;let s,r;if(l)s=C,r="drawElementsInstanced";else if(s=e.get("ANGLE_instanced_arrays"),r="drawElementsInstancedANGLE",s===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}s[r](h,p,g,E*u,d),n.update(p,h,d)}this.setMode=_,this.setIndex=f,this.render=M,this.renderInstances=a}function Qm(C){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(h,_,g){switch(n.calls++,_){case 4:n.triangles+=g*(h/3);break;case 1:n.lines+=g*(h/2);break;case 3:n.lines+=g*(h-1);break;case 2:n.lines+=g*h;break;case 0:n.points+=g*h;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",_);break}}function l(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:l,update:i}}function ep(C,e){return C[0]-e[0]}function tp(C,e){return Math.abs(e[1])-Math.abs(C[1])}function ta(C,e){let n=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?n=127:i instanceof Uint8Array?n=255:i instanceof Uint16Array?n=65535:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),C.divideScalar(n)}function np(C,e,n){const i={},l=new Float32Array(8),h=new WeakMap,_=new Ut,g=[];for(let f=0;f<8;f++)g[f]=[f,0];function u(f,M,a,E){const p=f.morphTargetInfluences;if(e.isWebGL2===!0){const s=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,r=s!==void 0?s.length:0;let t=h.get(M);if(t===void 0||t.count!==r){let D=function(){T.dispose(),h.delete(M),M.removeEventListener("dispose",D)};var d=D;t!==void 0&&t.texture.dispose();const v=M.morphAttributes.position!==void 0,x=M.morphAttributes.normal!==void 0,w=M.morphAttributes.color!==void 0,R=M.morphAttributes.position||[],S=M.morphAttributes.normal||[],L=M.morphAttributes.color||[];let A=0;v===!0&&(A=1),x===!0&&(A=2),w===!0&&(A=3);let y=M.attributes.position.count*A,P=1;y>e.maxTextureSize&&(P=Math.ceil(y/e.maxTextureSize),y=e.maxTextureSize);const B=new Float32Array(y*P*4*r),T=new zc(B,y,P,r);T.type=Ui,T.needsUpdate=!0;const I=A*4;for(let k=0;k<r;k++){const U=R[k],G=S[k],H=L[k],se=y*P*4*k;for(let ee=0;ee<U.count;ee++){const Z=ee*I;v===!0&&(_.fromBufferAttribute(U,ee),U.normalized===!0&&ta(_,U),B[se+Z+0]=_.x,B[se+Z+1]=_.y,B[se+Z+2]=_.z,B[se+Z+3]=0),x===!0&&(_.fromBufferAttribute(G,ee),G.normalized===!0&&ta(_,G),B[se+Z+4]=_.x,B[se+Z+5]=_.y,B[se+Z+6]=_.z,B[se+Z+7]=0),w===!0&&(_.fromBufferAttribute(H,ee),H.normalized===!0&&ta(_,H),B[se+Z+8]=_.x,B[se+Z+9]=_.y,B[se+Z+10]=_.z,B[se+Z+11]=H.itemSize===4?_.w:1)}}t={count:r,texture:T,size:new ct(y,P)},h.set(M,t),M.addEventListener("dispose",D)}let c=0;for(let v=0;v<p.length;v++)c+=p[v];const m=M.morphTargetsRelative?1:1-c;E.getUniforms().setValue(C,"morphTargetBaseInfluence",m),E.getUniforms().setValue(C,"morphTargetInfluences",p),E.getUniforms().setValue(C,"morphTargetsTexture",t.texture,n),E.getUniforms().setValue(C,"morphTargetsTextureSize",t.size)}else{const s=p===void 0?0:p.length;let r=i[M.id];if(r===void 0||r.length!==s){r=[];for(let x=0;x<s;x++)r[x]=[x,0];i[M.id]=r}for(let x=0;x<s;x++){const w=r[x];w[0]=x,w[1]=p[x]}r.sort(tp);for(let x=0;x<8;x++)x<s&&r[x][1]?(g[x][0]=r[x][0],g[x][1]=r[x][1]):(g[x][0]=Number.MAX_SAFE_INTEGER,g[x][1]=0);g.sort(ep);const t=M.morphAttributes.position,c=M.morphAttributes.normal;let m=0;for(let x=0;x<8;x++){const w=g[x],R=w[0],S=w[1];R!==Number.MAX_SAFE_INTEGER&&S?(t&&M.getAttribute("morphTarget"+x)!==t[R]&&M.setAttribute("morphTarget"+x,t[R]),c&&M.getAttribute("morphNormal"+x)!==c[R]&&M.setAttribute("morphNormal"+x,c[R]),l[x]=S,m+=S):(t&&M.hasAttribute("morphTarget"+x)===!0&&M.deleteAttribute("morphTarget"+x),c&&M.hasAttribute("morphNormal"+x)===!0&&M.deleteAttribute("morphNormal"+x),l[x]=0)}const v=M.morphTargetsRelative?1:1-m;E.getUniforms().setValue(C,"morphTargetBaseInfluence",v),E.getUniforms().setValue(C,"morphTargetInfluences",l)}}return{update:u}}function ip(C,e,n,i){let l=new WeakMap;function h(u){const f=i.render.frame,M=u.geometry,a=e.get(u,M);return l.get(a)!==f&&(e.update(a),l.set(a,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",g)===!1&&u.addEventListener("dispose",g),n.update(u.instanceMatrix,34962),u.instanceColor!==null&&n.update(u.instanceColor,34962)),a}function _(){l=new WeakMap}function g(u){const f=u.target;f.removeEventListener("dispose",g),n.remove(f.instanceMatrix),f.instanceColor!==null&&n.remove(f.instanceColor)}return{update:h,dispose:_}}const Jc=new vn,Qc=new zc,eu=new zh,tu=new Yc,Wl=[],Vl=[],Hl=new Float32Array(16),zl=new Float32Array(9),Xl=new Float32Array(4);function Ks(C,e,n){const i=C[0];if(i<=0||i>0)return C;const l=e*n;let h=Wl[l];if(h===void 0&&(h=new Float32Array(l),Wl[l]=h),e!==0){i.toArray(h,0);for(let _=1,g=0;_!==e;++_)g+=n,C[_].toArray(h,g)}return h}function En(C,e){if(C.length!==e.length)return!1;for(let n=0,i=C.length;n<i;n++)if(C[n]!==e[n])return!1;return!0}function xn(C,e){for(let n=0,i=e.length;n<i;n++)C[n]=e[n]}function So(C,e){let n=Vl[e];n===void 0&&(n=new Int32Array(e),Vl[e]=n);for(let i=0;i!==e;++i)n[i]=C.allocateTextureUnit();return n}function sp(C,e){const n=this.cache;n[0]!==e&&(C.uniform1f(this.addr,e),n[0]=e)}function rp(C,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(C.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(En(n,e))return;C.uniform2fv(this.addr,e),xn(n,e)}}function op(C,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(C.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(C.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(En(n,e))return;C.uniform3fv(this.addr,e),xn(n,e)}}function ap(C,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(C.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(En(n,e))return;C.uniform4fv(this.addr,e),xn(n,e)}}function lp(C,e){const n=this.cache,i=e.elements;if(i===void 0){if(En(n,e))return;C.uniformMatrix2fv(this.addr,!1,e),xn(n,e)}else{if(En(n,i))return;Xl.set(i),C.uniformMatrix2fv(this.addr,!1,Xl),xn(n,i)}}function cp(C,e){const n=this.cache,i=e.elements;if(i===void 0){if(En(n,e))return;C.uniformMatrix3fv(this.addr,!1,e),xn(n,e)}else{if(En(n,i))return;zl.set(i),C.uniformMatrix3fv(this.addr,!1,zl),xn(n,i)}}function up(C,e){const n=this.cache,i=e.elements;if(i===void 0){if(En(n,e))return;C.uniformMatrix4fv(this.addr,!1,e),xn(n,e)}else{if(En(n,i))return;Hl.set(i),C.uniformMatrix4fv(this.addr,!1,Hl),xn(n,i)}}function hp(C,e){const n=this.cache;n[0]!==e&&(C.uniform1i(this.addr,e),n[0]=e)}function dp(C,e){const n=this.cache;En(n,e)||(C.uniform2iv(this.addr,e),xn(n,e))}function fp(C,e){const n=this.cache;En(n,e)||(C.uniform3iv(this.addr,e),xn(n,e))}function mp(C,e){const n=this.cache;En(n,e)||(C.uniform4iv(this.addr,e),xn(n,e))}function pp(C,e){const n=this.cache;n[0]!==e&&(C.uniform1ui(this.addr,e),n[0]=e)}function gp(C,e){const n=this.cache;En(n,e)||(C.uniform2uiv(this.addr,e),xn(n,e))}function _p(C,e){const n=this.cache;En(n,e)||(C.uniform3uiv(this.addr,e),xn(n,e))}function vp(C,e){const n=this.cache;En(n,e)||(C.uniform4uiv(this.addr,e),xn(n,e))}function Ep(C,e,n){const i=this.cache,l=n.allocateTextureUnit();i[0]!==l&&(C.uniform1i(this.addr,l),i[0]=l),n.setTexture2D(e||Jc,l)}function xp(C,e,n){const i=this.cache,l=n.allocateTextureUnit();i[0]!==l&&(C.uniform1i(this.addr,l),i[0]=l),n.setTexture3D(e||eu,l)}function Sp(C,e,n){const i=this.cache,l=n.allocateTextureUnit();i[0]!==l&&(C.uniform1i(this.addr,l),i[0]=l),n.setTextureCube(e||tu,l)}function bp(C,e,n){const i=this.cache,l=n.allocateTextureUnit();i[0]!==l&&(C.uniform1i(this.addr,l),i[0]=l),n.setTexture2DArray(e||Qc,l)}function Ap(C){switch(C){case 5126:return sp;case 35664:return rp;case 35665:return op;case 35666:return ap;case 35674:return lp;case 35675:return cp;case 35676:return up;case 5124:case 35670:return hp;case 35667:case 35671:return dp;case 35668:case 35672:return fp;case 35669:case 35673:return mp;case 5125:return pp;case 36294:return gp;case 36295:return _p;case 36296:return vp;case 35678:case 36198:case 36298:case 36306:case 35682:return Ep;case 35679:case 36299:case 36307:return xp;case 35680:case 36300:case 36308:case 36293:return Sp;case 36289:case 36303:case 36311:case 36292:return bp}}function Cp(C,e){C.uniform1fv(this.addr,e)}function yp(C,e){const n=Ks(e,this.size,2);C.uniform2fv(this.addr,n)}function wp(C,e){const n=Ks(e,this.size,3);C.uniform3fv(this.addr,n)}function Tp(C,e){const n=Ks(e,this.size,4);C.uniform4fv(this.addr,n)}function Rp(C,e){const n=Ks(e,this.size,4);C.uniformMatrix2fv(this.addr,!1,n)}function Mp(C,e){const n=Ks(e,this.size,9);C.uniformMatrix3fv(this.addr,!1,n)}function Lp(C,e){const n=Ks(e,this.size,16);C.uniformMatrix4fv(this.addr,!1,n)}function Ip(C,e){C.uniform1iv(this.addr,e)}function Fp(C,e){C.uniform2iv(this.addr,e)}function Np(C,e){C.uniform3iv(this.addr,e)}function Pp(C,e){C.uniform4iv(this.addr,e)}function Dp(C,e){C.uniform1uiv(this.addr,e)}function Op(C,e){C.uniform2uiv(this.addr,e)}function Bp(C,e){C.uniform3uiv(this.addr,e)}function kp(C,e){C.uniform4uiv(this.addr,e)}function Up(C,e,n){const i=e.length,l=So(n,i);C.uniform1iv(this.addr,l);for(let h=0;h!==i;++h)n.setTexture2D(e[h]||Jc,l[h])}function $p(C,e,n){const i=e.length,l=So(n,i);C.uniform1iv(this.addr,l);for(let h=0;h!==i;++h)n.setTexture3D(e[h]||eu,l[h])}function Gp(C,e,n){const i=e.length,l=So(n,i);C.uniform1iv(this.addr,l);for(let h=0;h!==i;++h)n.setTextureCube(e[h]||tu,l[h])}function Wp(C,e,n){const i=e.length,l=So(n,i);C.uniform1iv(this.addr,l);for(let h=0;h!==i;++h)n.setTexture2DArray(e[h]||Qc,l[h])}function Vp(C){switch(C){case 5126:return Cp;case 35664:return yp;case 35665:return wp;case 35666:return Tp;case 35674:return Rp;case 35675:return Mp;case 35676:return Lp;case 5124:case 35670:return Ip;case 35667:case 35671:return Fp;case 35668:case 35672:return Np;case 35669:case 35673:return Pp;case 5125:return Dp;case 36294:return Op;case 36295:return Bp;case 36296:return kp;case 35678:case 36198:case 36298:case 36306:case 35682:return Up;case 35679:case 36299:case 36307:return $p;case 35680:case 36300:case 36308:case 36293:return Gp;case 36289:case 36303:case 36311:case 36292:return Wp}}class Hp{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=Ap(n.type)}}class zp{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=Vp(n.type)}}class Xp{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const l=this.seq;for(let h=0,_=l.length;h!==_;++h){const g=l[h];g.setValue(e,n[g.id],i)}}}const na=/(\w+)(\])?(\[|\.)?/g;function Kl(C,e){C.seq.push(e),C.map[e.id]=e}function Kp(C,e,n){const i=C.name,l=i.length;for(na.lastIndex=0;;){const h=na.exec(i),_=na.lastIndex;let g=h[1];const u=h[2]==="]",f=h[3];if(u&&(g=g|0),f===void 0||f==="["&&_+2===l){Kl(n,f===void 0?new Hp(g,C,e):new zp(g,C,e));break}else{let a=n.map[g];a===void 0&&(a=new Xp(g),Kl(n,a)),n=a}}}class go{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,35718);for(let l=0;l<i;++l){const h=e.getActiveUniform(n,l),_=e.getUniformLocation(n,h.name);Kp(h,_,this)}}setValue(e,n,i,l){const h=this.map[n];h!==void 0&&h.setValue(e,i,l)}setOptional(e,n,i){const l=n[i];l!==void 0&&this.setValue(e,i,l)}static upload(e,n,i,l){for(let h=0,_=n.length;h!==_;++h){const g=n[h],u=i[g.id];u.needsUpdate!==!1&&g.setValue(e,u.value,l)}}static seqWithValue(e,n){const i=[];for(let l=0,h=e.length;l!==h;++l){const _=e[l];_.id in n&&i.push(_)}return i}}function jl(C,e,n){const i=C.createShader(e);return C.shaderSource(i,n),C.compileShader(i),i}let jp=0;function qp(C,e){const n=C.split(`
`),i=[],l=Math.max(e-6,0),h=Math.min(e+6,n.length);for(let _=l;_<h;_++){const g=_+1;i.push(`${g===e?">":" "} ${g}: ${n[_]}`)}return i.join(`
`)}function Yp(C){switch(C){case rs:return["Linear","( value )"];case Bt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",C),["Linear","( value )"]}}function ql(C,e,n){const i=C.getShaderParameter(e,35713),l=C.getShaderInfoLog(e).trim();if(i&&l==="")return"";const h=/ERROR: 0:(\d+)/.exec(l);if(h){const _=parseInt(h[1]);return n.toUpperCase()+`

`+l+`

`+qp(C.getShaderSource(e),_)}else return l}function Zp(C,e){const n=Yp(e);return"vec4 "+C+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Jp(C,e){let n;switch(e){case nh:n="Linear";break;case ih:n="Reinhard";break;case sh:n="OptimizedCineon";break;case rh:n="ACESFilmic";break;case oh:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+C+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Qp(C){return[C.extensionDerivatives||!!C.envMapCubeUVHeight||C.bumpMap||C.tangentSpaceNormalMap||C.clearcoatNormalMap||C.flatShading||C.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(C.extensionFragDepth||C.logarithmicDepthBuffer)&&C.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",C.extensionDrawBuffers&&C.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(C.extensionShaderTextureLOD||C.envMap||C.transmission)&&C.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(hr).join(`
`)}function eg(C){const e=[];for(const n in C){const i=C[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function tg(C,e){const n={},i=C.getProgramParameter(e,35721);for(let l=0;l<i;l++){const h=C.getActiveAttrib(e,l),_=h.name;let g=1;h.type===35674&&(g=2),h.type===35675&&(g=3),h.type===35676&&(g=4),n[_]={type:h.type,location:C.getAttribLocation(e,_),locationSize:g}}return n}function hr(C){return C!==""}function Yl(C,e){return C.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Zl(C,e){return C.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ng=/^[ \t]*#include +<([\w\d./]+)>/gm;function va(C){return C.replace(ng,ig)}function ig(C,e){const n=At[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return va(n)}const sg=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,rg=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Jl(C){return C.replace(rg,nu).replace(sg,og)}function og(C,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),nu(C,e,n,i)}function nu(C,e,n,i){let l="";for(let h=parseInt(e);h<parseInt(n);h++)l+=i.replace(/\[\s*i\s*\]/g,"[ "+h+" ]").replace(/UNROLLED_LOOP_INDEX/g,h);return l}function Ql(C){let e="precision "+C.precision+` float;
precision `+C.precision+" int;";return C.precision==="highp"?e+=`
#define HIGH_PRECISION`:C.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:C.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function ag(C){let e="SHADOWMAP_TYPE_BASIC";return C.shadowMapType===Fc?e="SHADOWMAP_TYPE_PCF":C.shadowMapType===Nu?e="SHADOWMAP_TYPE_PCF_SOFT":C.shadowMapType===ur&&(e="SHADOWMAP_TYPE_VSM"),e}function lg(C){let e="ENVMAP_TYPE_CUBE";if(C.envMap)switch(C.envMapMode){case Os:case Bs:e="ENVMAP_TYPE_CUBE";break;case xo:e="ENVMAP_TYPE_CUBE_UV";break}return e}function cg(C){let e="ENVMAP_MODE_REFLECTION";if(C.envMap)switch(C.envMapMode){case Bs:e="ENVMAP_MODE_REFRACTION";break}return e}function ug(C){let e="ENVMAP_BLENDING_NONE";if(C.envMap)switch(C.combine){case Dc:e="ENVMAP_BLENDING_MULTIPLY";break;case eh:e="ENVMAP_BLENDING_MIX";break;case th:e="ENVMAP_BLENDING_ADD";break}return e}function hg(C){const e=C.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function dg(C,e,n,i){const l=C.getContext(),h=n.defines;let _=n.vertexShader,g=n.fragmentShader;const u=ag(n),f=lg(n),M=cg(n),a=ug(n),E=hg(n),p=n.isWebGL2?"":Qp(n),d=eg(h),s=l.createProgram();let r,t,c=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(r=[d].filter(hr).join(`
`),r.length>0&&(r+=`
`),t=[p,d].filter(hr).join(`
`),t.length>0&&(t+=`
`)):(r=[Ql(n),"#define SHADER_NAME "+n.shaderName,d,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+M:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(hr).join(`
`),t=[p,Ql(n),"#define SHADER_NAME "+n.shaderName,d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+M:"",n.envMap?"#define "+a:"",E?"#define CUBEUV_TEXEL_WIDTH "+E.texelWidth:"",E?"#define CUBEUV_TEXEL_HEIGHT "+E.texelHeight:"",E?"#define CUBEUV_MAX_MIP "+E.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ei?"#define TONE_MAPPING":"",n.toneMapping!==Ei?At.tonemapping_pars_fragment:"",n.toneMapping!==Ei?Jp("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",At.encodings_pars_fragment,Zp("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(hr).join(`
`)),_=va(_),_=Yl(_,n),_=Zl(_,n),g=va(g),g=Yl(g,n),g=Zl(g,n),_=Jl(_),g=Jl(g),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(c=`#version 300 es
`,r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+r,t=["#define varying in",n.glslVersion===bl?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===bl?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+t);const m=c+r+_,v=c+t+g,x=jl(l,35633,m),w=jl(l,35632,v);if(l.attachShader(s,x),l.attachShader(s,w),n.index0AttributeName!==void 0?l.bindAttribLocation(s,0,n.index0AttributeName):n.morphTargets===!0&&l.bindAttribLocation(s,0,"position"),l.linkProgram(s),C.debug.checkShaderErrors){const L=l.getProgramInfoLog(s).trim(),A=l.getShaderInfoLog(x).trim(),y=l.getShaderInfoLog(w).trim();let P=!0,B=!0;if(l.getProgramParameter(s,35714)===!1){P=!1;const T=ql(l,x,"vertex"),I=ql(l,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(s,35715)+`

Program Info Log: `+L+`
`+T+`
`+I)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(A===""||y==="")&&(B=!1);B&&(this.diagnostics={runnable:P,programLog:L,vertexShader:{log:A,prefix:r},fragmentShader:{log:y,prefix:t}})}l.deleteShader(x),l.deleteShader(w);let R;this.getUniforms=function(){return R===void 0&&(R=new go(l,s)),R};let S;return this.getAttributes=function(){return S===void 0&&(S=tg(l,s)),S},this.destroy=function(){i.releaseStatesOfProgram(this),l.deleteProgram(s),this.program=void 0},this.name=n.shaderName,this.id=jp++,this.cacheKey=e,this.usedTimes=1,this.program=s,this.vertexShader=x,this.fragmentShader=w,this}let fg=0;class mg{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,l=this._getShaderStage(n),h=this._getShaderStage(i),_=this._getShaderCacheForMaterial(e);return _.has(l)===!1&&(_.add(l),l.usedTimes++),_.has(h)===!1&&(_.add(h),h.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;return n.has(e)===!1&&n.set(e,new Set),n.get(e)}_getShaderStage(e){const n=this.shaderCache;if(n.has(e)===!1){const i=new pg(e);n.set(e,i)}return n.get(e)}}class pg{constructor(e){this.id=fg++,this.code=e,this.usedTimes=0}}function gg(C,e,n,i,l,h,_){const g=new Xc,u=new mg,f=[],M=l.isWebGL2,a=l.logarithmicDepthBuffer,E=l.vertexTextures;let p=l.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function s(S,L,A,y,P){const B=y.fog,T=P.geometry,I=S.isMeshStandardMaterial?y.environment:null,D=(S.isMeshStandardMaterial?n:e).get(S.envMap||I),k=!!D&&D.mapping===xo?D.image.height:null,U=d[S.type];S.precision!==null&&(p=l.getMaxPrecision(S.precision),p!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",p,"instead."));const G=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,H=G!==void 0?G.length:0;let se=0;T.morphAttributes.position!==void 0&&(se=1),T.morphAttributes.normal!==void 0&&(se=2),T.morphAttributes.color!==void 0&&(se=3);let ee,Z,ne,W;if(U){const Be=ti[U];ee=Be.vertexShader,Z=Be.fragmentShader}else ee=S.vertexShader,Z=S.fragmentShader,u.update(S),ne=u.getVertexShaderID(S),W=u.getFragmentShaderID(S);const K=C.getRenderTarget(),re=S.alphaTest>0,oe=S.clearcoat>0,de=S.iridescence>0;return{isWebGL2:M,shaderID:U,shaderName:S.type,vertexShader:ee,fragmentShader:Z,defines:S.defines,customVertexShaderID:ne,customFragmentShaderID:W,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:p,instancing:P.isInstancedMesh===!0,instancingColor:P.isInstancedMesh===!0&&P.instanceColor!==null,supportsVertexTextures:E,outputEncoding:K===null?C.outputEncoding:K.isXRRenderTarget===!0?K.texture.encoding:rs,map:!!S.map,matcap:!!S.matcap,envMap:!!D,envMapMode:D&&D.mapping,envMapCubeUVHeight:k,lightMap:!!S.lightMap,aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===wh,tangentSpaceNormalMap:S.normalMapType===ya,decodeVideoTexture:!!S.map&&S.map.isVideoTexture===!0&&S.map.encoding===Bt,clearcoat:oe,clearcoatMap:oe&&!!S.clearcoatMap,clearcoatRoughnessMap:oe&&!!S.clearcoatRoughnessMap,clearcoatNormalMap:oe&&!!S.clearcoatNormalMap,iridescence:de,iridescenceMap:de&&!!S.iridescenceMap,iridescenceThicknessMap:de&&!!S.iridescenceThicknessMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,specularIntensityMap:!!S.specularIntensityMap,specularColorMap:!!S.specularColorMap,opaque:S.transparent===!1&&S.blending===Ns,alphaMap:!!S.alphaMap,alphaTest:re,gradientMap:!!S.gradientMap,sheen:S.sheen>0,sheenColorMap:!!S.sheenColorMap,sheenRoughnessMap:!!S.sheenRoughnessMap,transmission:S.transmission>0,transmissionMap:!!S.transmissionMap,thicknessMap:!!S.thicknessMap,combine:S.combine,vertexTangents:!!S.normalMap&&!!T.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!T.attributes.color&&T.attributes.color.itemSize===4,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.iridescenceMap||!!S.iridescenceThicknessMap||!!S.displacementMap||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||!!S.specularColorMap||!!S.sheenColorMap||!!S.sheenRoughnessMap,uvsVertexOnly:!(!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatNormalMap||!!S.iridescenceMap||!!S.iridescenceThicknessMap||S.transmission>0||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||!!S.specularColorMap||S.sheen>0||!!S.sheenColorMap||!!S.sheenRoughnessMap)&&!!S.displacementMap,fog:!!B,useFog:S.fog===!0,fogExp2:B&&B.isFogExp2,flatShading:!!S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:a,skinning:P.isSkinnedMesh===!0,morphTargets:T.morphAttributes.position!==void 0,morphNormals:T.morphAttributes.normal!==void 0,morphColors:T.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:se,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numClippingPlanes:_.numPlanes,numClipIntersection:_.numIntersection,dithering:S.dithering,shadowMapEnabled:C.shadowMap.enabled&&A.length>0,shadowMapType:C.shadowMap.type,toneMapping:S.toneMapped?C.toneMapping:Ei,physicallyCorrectLights:C.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Gi,flipSided:S.side===Kn,useDepthPacking:!!S.depthPacking,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:M||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:M||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:M||i.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function r(S){const L=[];if(S.shaderID?L.push(S.shaderID):(L.push(S.customVertexShaderID),L.push(S.customFragmentShaderID)),S.defines!==void 0)for(const A in S.defines)L.push(A),L.push(S.defines[A]);return S.isRawShaderMaterial===!1&&(t(L,S),c(L,S),L.push(C.outputEncoding)),L.push(S.customProgramCacheKey),L.join()}function t(S,L){S.push(L.precision),S.push(L.outputEncoding),S.push(L.envMapMode),S.push(L.envMapCubeUVHeight),S.push(L.combine),S.push(L.vertexUvs),S.push(L.fogExp2),S.push(L.sizeAttenuation),S.push(L.morphTargetsCount),S.push(L.morphAttributeCount),S.push(L.numDirLights),S.push(L.numPointLights),S.push(L.numSpotLights),S.push(L.numHemiLights),S.push(L.numRectAreaLights),S.push(L.numDirLightShadows),S.push(L.numPointLightShadows),S.push(L.numSpotLightShadows),S.push(L.shadowMapType),S.push(L.toneMapping),S.push(L.numClippingPlanes),S.push(L.numClipIntersection),S.push(L.depthPacking)}function c(S,L){g.disableAll(),L.isWebGL2&&g.enable(0),L.supportsVertexTextures&&g.enable(1),L.instancing&&g.enable(2),L.instancingColor&&g.enable(3),L.map&&g.enable(4),L.matcap&&g.enable(5),L.envMap&&g.enable(6),L.lightMap&&g.enable(7),L.aoMap&&g.enable(8),L.emissiveMap&&g.enable(9),L.bumpMap&&g.enable(10),L.normalMap&&g.enable(11),L.objectSpaceNormalMap&&g.enable(12),L.tangentSpaceNormalMap&&g.enable(13),L.clearcoat&&g.enable(14),L.clearcoatMap&&g.enable(15),L.clearcoatRoughnessMap&&g.enable(16),L.clearcoatNormalMap&&g.enable(17),L.iridescence&&g.enable(18),L.iridescenceMap&&g.enable(19),L.iridescenceThicknessMap&&g.enable(20),L.displacementMap&&g.enable(21),L.specularMap&&g.enable(22),L.roughnessMap&&g.enable(23),L.metalnessMap&&g.enable(24),L.gradientMap&&g.enable(25),L.alphaMap&&g.enable(26),L.alphaTest&&g.enable(27),L.vertexColors&&g.enable(28),L.vertexAlphas&&g.enable(29),L.vertexUvs&&g.enable(30),L.vertexTangents&&g.enable(31),L.uvsVertexOnly&&g.enable(32),L.fog&&g.enable(33),S.push(g.mask),g.disableAll(),L.useFog&&g.enable(0),L.flatShading&&g.enable(1),L.logarithmicDepthBuffer&&g.enable(2),L.skinning&&g.enable(3),L.morphTargets&&g.enable(4),L.morphNormals&&g.enable(5),L.morphColors&&g.enable(6),L.premultipliedAlpha&&g.enable(7),L.shadowMapEnabled&&g.enable(8),L.physicallyCorrectLights&&g.enable(9),L.doubleSided&&g.enable(10),L.flipSided&&g.enable(11),L.useDepthPacking&&g.enable(12),L.dithering&&g.enable(13),L.specularIntensityMap&&g.enable(14),L.specularColorMap&&g.enable(15),L.transmission&&g.enable(16),L.transmissionMap&&g.enable(17),L.thicknessMap&&g.enable(18),L.sheen&&g.enable(19),L.sheenColorMap&&g.enable(20),L.sheenRoughnessMap&&g.enable(21),L.decodeVideoTexture&&g.enable(22),L.opaque&&g.enable(23),S.push(g.mask)}function m(S){const L=d[S.type];let A;if(L){const y=ti[L];A=id.clone(y.uniforms)}else A=S.uniforms;return A}function v(S,L){let A;for(let y=0,P=f.length;y<P;y++){const B=f[y];if(B.cacheKey===L){A=B,++A.usedTimes;break}}return A===void 0&&(A=new dg(C,L,S,h),f.push(A)),A}function x(S){if(--S.usedTimes===0){const L=f.indexOf(S);f[L]=f[f.length-1],f.pop(),S.destroy()}}function w(S){u.remove(S)}function R(){u.dispose()}return{getParameters:s,getProgramCacheKey:r,getUniforms:m,acquireProgram:v,releaseProgram:x,releaseShaderCache:w,programs:f,dispose:R}}function _g(){let C=new WeakMap;function e(h){let _=C.get(h);return _===void 0&&(_={},C.set(h,_)),_}function n(h){C.delete(h)}function i(h,_,g){C.get(h)[_]=g}function l(){C=new WeakMap}return{get:e,remove:n,update:i,dispose:l}}function vg(C,e){return C.groupOrder!==e.groupOrder?C.groupOrder-e.groupOrder:C.renderOrder!==e.renderOrder?C.renderOrder-e.renderOrder:C.material.id!==e.material.id?C.material.id-e.material.id:C.z!==e.z?C.z-e.z:C.id-e.id}function ec(C,e){return C.groupOrder!==e.groupOrder?C.groupOrder-e.groupOrder:C.renderOrder!==e.renderOrder?C.renderOrder-e.renderOrder:C.z!==e.z?e.z-C.z:C.id-e.id}function tc(){const C=[];let e=0;const n=[],i=[],l=[];function h(){e=0,n.length=0,i.length=0,l.length=0}function _(a,E,p,d,s,r){let t=C[e];return t===void 0?(t={id:a.id,object:a,geometry:E,material:p,groupOrder:d,renderOrder:a.renderOrder,z:s,group:r},C[e]=t):(t.id=a.id,t.object=a,t.geometry=E,t.material=p,t.groupOrder=d,t.renderOrder=a.renderOrder,t.z=s,t.group=r),e++,t}function g(a,E,p,d,s,r){const t=_(a,E,p,d,s,r);p.transmission>0?i.push(t):p.transparent===!0?l.push(t):n.push(t)}function u(a,E,p,d,s,r){const t=_(a,E,p,d,s,r);p.transmission>0?i.unshift(t):p.transparent===!0?l.unshift(t):n.unshift(t)}function f(a,E){n.length>1&&n.sort(a||vg),i.length>1&&i.sort(E||ec),l.length>1&&l.sort(E||ec)}function M(){for(let a=e,E=C.length;a<E;a++){const p=C[a];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:n,transmissive:i,transparent:l,init:h,push:g,unshift:u,finish:M,sort:f}}function Eg(){let C=new WeakMap;function e(i,l){let h;return C.has(i)===!1?(h=new tc,C.set(i,[h])):l>=C.get(i).length?(h=new tc,C.get(i).push(h)):h=C.get(i)[l],h}function n(){C=new WeakMap}return{get:e,dispose:n}}function xg(){const C={};return{get:function(e){if(C[e.id]!==void 0)return C[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ce,color:new dt};break;case"SpotLight":n={position:new ce,direction:new ce,color:new dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ce,color:new dt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ce,skyColor:new dt,groundColor:new dt};break;case"RectAreaLight":n={color:new dt,position:new ce,halfWidth:new ce,halfHeight:new ce};break}return C[e.id]=n,n}}}function Sg(){const C={};return{get:function(e){if(C[e.id]!==void 0)return C[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct,shadowCameraNear:1,shadowCameraFar:1e3};break}return C[e.id]=n,n}}}let bg=0;function Ag(C,e){return(e.castShadow?1:0)-(C.castShadow?1:0)}function Cg(C,e){const n=new xg,i=Sg(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let M=0;M<9;M++)l.probe.push(new ce);const h=new ce,_=new It,g=new It;function u(M,a){let E=0,p=0,d=0;for(let L=0;L<9;L++)l.probe[L].set(0,0,0);let s=0,r=0,t=0,c=0,m=0,v=0,x=0,w=0;M.sort(Ag);const R=a!==!0?Math.PI:1;for(let L=0,A=M.length;L<A;L++){const y=M[L],P=y.color,B=y.intensity,T=y.distance,I=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)E+=P.r*B*R,p+=P.g*B*R,d+=P.b*B*R;else if(y.isLightProbe)for(let D=0;D<9;D++)l.probe[D].addScaledVector(y.sh.coefficients[D],B);else if(y.isDirectionalLight){const D=n.get(y);if(D.color.copy(y.color).multiplyScalar(y.intensity*R),y.castShadow){const k=y.shadow,U=i.get(y);U.shadowBias=k.bias,U.shadowNormalBias=k.normalBias,U.shadowRadius=k.radius,U.shadowMapSize=k.mapSize,l.directionalShadow[s]=U,l.directionalShadowMap[s]=I,l.directionalShadowMatrix[s]=y.shadow.matrix,v++}l.directional[s]=D,s++}else if(y.isSpotLight){const D=n.get(y);if(D.position.setFromMatrixPosition(y.matrixWorld),D.color.copy(P).multiplyScalar(B*R),D.distance=T,D.coneCos=Math.cos(y.angle),D.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),D.decay=y.decay,y.castShadow){const k=y.shadow,U=i.get(y);U.shadowBias=k.bias,U.shadowNormalBias=k.normalBias,U.shadowRadius=k.radius,U.shadowMapSize=k.mapSize,l.spotShadow[t]=U,l.spotShadowMap[t]=I,l.spotShadowMatrix[t]=y.shadow.matrix,w++}l.spot[t]=D,t++}else if(y.isRectAreaLight){const D=n.get(y);D.color.copy(P).multiplyScalar(B),D.halfWidth.set(y.width*.5,0,0),D.halfHeight.set(0,y.height*.5,0),l.rectArea[c]=D,c++}else if(y.isPointLight){const D=n.get(y);if(D.color.copy(y.color).multiplyScalar(y.intensity*R),D.distance=y.distance,D.decay=y.decay,y.castShadow){const k=y.shadow,U=i.get(y);U.shadowBias=k.bias,U.shadowNormalBias=k.normalBias,U.shadowRadius=k.radius,U.shadowMapSize=k.mapSize,U.shadowCameraNear=k.camera.near,U.shadowCameraFar=k.camera.far,l.pointShadow[r]=U,l.pointShadowMap[r]=I,l.pointShadowMatrix[r]=y.shadow.matrix,x++}l.point[r]=D,r++}else if(y.isHemisphereLight){const D=n.get(y);D.skyColor.copy(y.color).multiplyScalar(B*R),D.groundColor.copy(y.groundColor).multiplyScalar(B*R),l.hemi[m]=D,m++}}c>0&&(e.isWebGL2||C.has("OES_texture_float_linear")===!0?(l.rectAreaLTC1=He.LTC_FLOAT_1,l.rectAreaLTC2=He.LTC_FLOAT_2):C.has("OES_texture_half_float_linear")===!0?(l.rectAreaLTC1=He.LTC_HALF_1,l.rectAreaLTC2=He.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=E,l.ambient[1]=p,l.ambient[2]=d;const S=l.hash;(S.directionalLength!==s||S.pointLength!==r||S.spotLength!==t||S.rectAreaLength!==c||S.hemiLength!==m||S.numDirectionalShadows!==v||S.numPointShadows!==x||S.numSpotShadows!==w)&&(l.directional.length=s,l.spot.length=t,l.rectArea.length=c,l.point.length=r,l.hemi.length=m,l.directionalShadow.length=v,l.directionalShadowMap.length=v,l.pointShadow.length=x,l.pointShadowMap.length=x,l.spotShadow.length=w,l.spotShadowMap.length=w,l.directionalShadowMatrix.length=v,l.pointShadowMatrix.length=x,l.spotShadowMatrix.length=w,S.directionalLength=s,S.pointLength=r,S.spotLength=t,S.rectAreaLength=c,S.hemiLength=m,S.numDirectionalShadows=v,S.numPointShadows=x,S.numSpotShadows=w,l.version=bg++)}function f(M,a){let E=0,p=0,d=0,s=0,r=0;const t=a.matrixWorldInverse;for(let c=0,m=M.length;c<m;c++){const v=M[c];if(v.isDirectionalLight){const x=l.directional[E];x.direction.setFromMatrixPosition(v.matrixWorld),h.setFromMatrixPosition(v.target.matrixWorld),x.direction.sub(h),x.direction.transformDirection(t),E++}else if(v.isSpotLight){const x=l.spot[d];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(t),x.direction.setFromMatrixPosition(v.matrixWorld),h.setFromMatrixPosition(v.target.matrixWorld),x.direction.sub(h),x.direction.transformDirection(t),d++}else if(v.isRectAreaLight){const x=l.rectArea[s];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(t),g.identity(),_.copy(v.matrixWorld),_.premultiply(t),g.extractRotation(_),x.halfWidth.set(v.width*.5,0,0),x.halfHeight.set(0,v.height*.5,0),x.halfWidth.applyMatrix4(g),x.halfHeight.applyMatrix4(g),s++}else if(v.isPointLight){const x=l.point[p];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(t),p++}else if(v.isHemisphereLight){const x=l.hemi[r];x.direction.setFromMatrixPosition(v.matrixWorld),x.direction.transformDirection(t),r++}}}return{setup:u,setupView:f,state:l}}function nc(C,e){const n=new Cg(C,e),i=[],l=[];function h(){i.length=0,l.length=0}function _(a){i.push(a)}function g(a){l.push(a)}function u(a){n.setup(i,a)}function f(a){n.setupView(i,a)}return{init:h,state:{lightsArray:i,shadowsArray:l,lights:n},setupLights:u,setupLightsView:f,pushLight:_,pushShadow:g}}function yg(C,e){let n=new WeakMap;function i(h,_=0){let g;return n.has(h)===!1?(g=new nc(C,e),n.set(h,[g])):_>=n.get(h).length?(g=new nc(C,e),n.get(h).push(g)):g=n.get(h)[_],g}function l(){n=new WeakMap}return{get:i,dispose:l}}class wg extends oi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ch,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Tg extends oi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ce,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Rg=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Mg=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Lg(C,e,n){let i=new Ra;const l=new ct,h=new ct,_=new Ut,g=new wg({depthPacking:yh}),u=new Tg,f={},M=n.maxTextureSize,a={0:Kn,1:Ds,2:Gi},E=new as({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ct},radius:{value:4}},vertexShader:Rg,fragmentShader:Mg}),p=E.clone();p.defines.HORIZONTAL_PASS=1;const d=new qn;d.setAttribute("position",new _n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const s=new si(d,E),r=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Fc,this.render=function(v,x,w){if(r.enabled===!1||r.autoUpdate===!1&&r.needsUpdate===!1||v.length===0)return;const R=C.getRenderTarget(),S=C.getActiveCubeFace(),L=C.getActiveMipmapLevel(),A=C.state;A.setBlending($i),A.buffers.color.setClear(1,1,1,1),A.buffers.depth.setTest(!0),A.setScissorTest(!1);for(let y=0,P=v.length;y<P;y++){const B=v[y],T=B.shadow;if(T===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(T.autoUpdate===!1&&T.needsUpdate===!1)continue;l.copy(T.mapSize);const I=T.getFrameExtents();if(l.multiply(I),h.copy(T.mapSize),(l.x>M||l.y>M)&&(l.x>M&&(h.x=Math.floor(M/I.x),l.x=h.x*I.x,T.mapSize.x=h.x),l.y>M&&(h.y=Math.floor(M/I.y),l.y=h.y*I.y,T.mapSize.y=h.y)),T.map===null){const k=this.type!==ur?{minFilter:on,magFilter:on}:{};T.map=new os(l.x,l.y,k),T.map.texture.name=B.name+".shadowMap",T.camera.updateProjectionMatrix()}C.setRenderTarget(T.map),C.clear();const D=T.getViewportCount();for(let k=0;k<D;k++){const U=T.getViewport(k);_.set(h.x*U.x,h.y*U.y,h.x*U.z,h.y*U.w),A.viewport(_),T.updateMatrices(B,k),i=T.getFrustum(),m(x,w,T.camera,B,this.type)}T.isPointLightShadow!==!0&&this.type===ur&&t(T,w),T.needsUpdate=!1}r.needsUpdate=!1,C.setRenderTarget(R,S,L)};function t(v,x){const w=e.update(s);E.defines.VSM_SAMPLES!==v.blurSamples&&(E.defines.VSM_SAMPLES=v.blurSamples,p.defines.VSM_SAMPLES=v.blurSamples,E.needsUpdate=!0,p.needsUpdate=!0),v.mapPass===null&&(v.mapPass=new os(l.x,l.y)),E.uniforms.shadow_pass.value=v.map.texture,E.uniforms.resolution.value=v.mapSize,E.uniforms.radius.value=v.radius,C.setRenderTarget(v.mapPass),C.clear(),C.renderBufferDirect(x,null,w,E,s,null),p.uniforms.shadow_pass.value=v.mapPass.texture,p.uniforms.resolution.value=v.mapSize,p.uniforms.radius.value=v.radius,C.setRenderTarget(v.map),C.clear(),C.renderBufferDirect(x,null,w,p,s,null)}function c(v,x,w,R,S,L){let A=null;const y=w.isPointLight===!0?v.customDistanceMaterial:v.customDepthMaterial;if(y!==void 0?A=y:A=w.isPointLight===!0?u:g,C.localClippingEnabled&&x.clipShadows===!0&&Array.isArray(x.clippingPlanes)&&x.clippingPlanes.length!==0||x.displacementMap&&x.displacementScale!==0||x.alphaMap&&x.alphaTest>0){const P=A.uuid,B=x.uuid;let T=f[P];T===void 0&&(T={},f[P]=T);let I=T[B];I===void 0&&(I=A.clone(),T[B]=I),A=I}return A.visible=x.visible,A.wireframe=x.wireframe,L===ur?A.side=x.shadowSide!==null?x.shadowSide:x.side:A.side=x.shadowSide!==null?x.shadowSide:a[x.side],A.alphaMap=x.alphaMap,A.alphaTest=x.alphaTest,A.clipShadows=x.clipShadows,A.clippingPlanes=x.clippingPlanes,A.clipIntersection=x.clipIntersection,A.displacementMap=x.displacementMap,A.displacementScale=x.displacementScale,A.displacementBias=x.displacementBias,A.wireframeLinewidth=x.wireframeLinewidth,A.linewidth=x.linewidth,w.isPointLight===!0&&A.isMeshDistanceMaterial===!0&&(A.referencePosition.setFromMatrixPosition(w.matrixWorld),A.nearDistance=R,A.farDistance=S),A}function m(v,x,w,R,S){if(v.visible===!1)return;if(v.layers.test(x.layers)&&(v.isMesh||v.isLine||v.isPoints)&&(v.castShadow||v.receiveShadow&&S===ur)&&(!v.frustumCulled||i.intersectsObject(v))){v.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,v.matrixWorld);const y=e.update(v),P=v.material;if(Array.isArray(P)){const B=y.groups;for(let T=0,I=B.length;T<I;T++){const D=B[T],k=P[D.materialIndex];if(k&&k.visible){const U=c(v,k,R,w.near,w.far,S);C.renderBufferDirect(w,null,y,U,v,D)}}}else if(P.visible){const B=c(v,P,R,w.near,w.far,S);C.renderBufferDirect(w,null,y,B,v,null)}}const A=v.children;for(let y=0,P=A.length;y<P;y++)m(A[y],x,w,R,S)}}function Ig(C,e,n){const i=n.isWebGL2;function l(){let le=!1;const Oe=new Ut;let Se=null;const ze=new Ut(0,0,0,0);return{setMask:function(Ve){Se!==Ve&&!le&&(C.colorMask(Ve,Ve,Ve,Ve),Se=Ve)},setLocked:function(Ve){le=Ve},setClear:function(Ve,st,Dt,pt,an){an===!0&&(Ve*=pt,st*=pt,Dt*=pt),Oe.set(Ve,st,Dt,pt),ze.equals(Oe)===!1&&(C.clearColor(Ve,st,Dt,pt),ze.copy(Oe))},reset:function(){le=!1,Se=null,ze.set(-1,0,0,0)}}}function h(){let le=!1,Oe=null,Se=null,ze=null;return{setTest:function(Ve){Ve?re(2929):oe(2929)},setMask:function(Ve){Oe!==Ve&&!le&&(C.depthMask(Ve),Oe=Ve)},setFunc:function(Ve){if(Se!==Ve){if(Ve)switch(Ve){case Ku:C.depthFunc(512);break;case ju:C.depthFunc(519);break;case qu:C.depthFunc(513);break;case ua:C.depthFunc(515);break;case Yu:C.depthFunc(514);break;case Zu:C.depthFunc(518);break;case Ju:C.depthFunc(516);break;case Qu:C.depthFunc(517);break;default:C.depthFunc(515)}else C.depthFunc(515);Se=Ve}},setLocked:function(Ve){le=Ve},setClear:function(Ve){ze!==Ve&&(C.clearDepth(Ve),ze=Ve)},reset:function(){le=!1,Oe=null,Se=null,ze=null}}}function _(){let le=!1,Oe=null,Se=null,ze=null,Ve=null,st=null,Dt=null,pt=null,an=null;return{setTest:function(Ot){le||(Ot?re(2960):oe(2960))},setMask:function(Ot){Oe!==Ot&&!le&&(C.stencilMask(Ot),Oe=Ot)},setFunc:function(Ot,Sn,nn){(Se!==Ot||ze!==Sn||Ve!==nn)&&(C.stencilFunc(Ot,Sn,nn),Se=Ot,ze=Sn,Ve=nn)},setOp:function(Ot,Sn,nn){(st!==Ot||Dt!==Sn||pt!==nn)&&(C.stencilOp(Ot,Sn,nn),st=Ot,Dt=Sn,pt=nn)},setLocked:function(Ot){le=Ot},setClear:function(Ot){an!==Ot&&(C.clearStencil(Ot),an=Ot)},reset:function(){le=!1,Oe=null,Se=null,ze=null,Ve=null,st=null,Dt=null,pt=null,an=null}}}const g=new l,u=new h,f=new _,M=new WeakMap,a=new WeakMap;let E={},p={},d=new WeakMap,s=[],r=null,t=!1,c=null,m=null,v=null,x=null,w=null,R=null,S=null,L=!1,A=null,y=null,P=null,B=null,T=null;const I=C.getParameter(35661);let D=!1,k=0;const U=C.getParameter(7938);U.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(U)[1]),D=k>=1):U.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),D=k>=2);let G=null,H={};const se=C.getParameter(3088),ee=C.getParameter(2978),Z=new Ut().fromArray(se),ne=new Ut().fromArray(ee);function W(le,Oe,Se){const ze=new Uint8Array(4),Ve=C.createTexture();C.bindTexture(le,Ve),C.texParameteri(le,10241,9728),C.texParameteri(le,10240,9728);for(let st=0;st<Se;st++)C.texImage2D(Oe+st,0,6408,1,1,0,6408,5121,ze);return Ve}const K={};K[3553]=W(3553,3553,1),K[34067]=W(34067,34069,6),g.setClear(0,0,0,1),u.setClear(1),f.setClear(0),re(2929),u.setFunc(ua),it(!1),Vt(Xa),re(2884),_t($i);function re(le){E[le]!==!0&&(C.enable(le),E[le]=!0)}function oe(le){E[le]!==!1&&(C.disable(le),E[le]=!1)}function de(le,Oe){return p[le]!==Oe?(C.bindFramebuffer(le,Oe),p[le]=Oe,i&&(le===36009&&(p[36160]=Oe),le===36160&&(p[36009]=Oe)),!0):!1}function ue(le,Oe){let Se=s,ze=!1;if(le)if(Se=d.get(Oe),Se===void 0&&(Se=[],d.set(Oe,Se)),le.isWebGLMultipleRenderTargets){const Ve=le.texture;if(Se.length!==Ve.length||Se[0]!==36064){for(let st=0,Dt=Ve.length;st<Dt;st++)Se[st]=36064+st;Se.length=Ve.length,ze=!0}}else Se[0]!==36064&&(Se[0]=36064,ze=!0);else Se[0]!==1029&&(Se[0]=1029,ze=!0);ze&&(n.isWebGL2?C.drawBuffers(Se):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Se))}function Be(le){return r!==le?(C.useProgram(le),r=le,!0):!1}const Ge={[Is]:32774,[Ou]:32778,[Bu]:32779};if(i)Ge[Ya]=32775,Ge[Za]=32776;else{const le=e.get("EXT_blend_minmax");le!==null&&(Ge[Ya]=le.MIN_EXT,Ge[Za]=le.MAX_EXT)}const ke={[ku]:0,[Uu]:1,[$u]:768,[Nc]:770,[Xu]:776,[Hu]:774,[Wu]:772,[Gu]:769,[Pc]:771,[zu]:775,[Vu]:773};function _t(le,Oe,Se,ze,Ve,st,Dt,pt){if(le===$i){t===!0&&(oe(3042),t=!1);return}if(t===!1&&(re(3042),t=!0),le!==Du){if(le!==c||pt!==L){if((m!==Is||w!==Is)&&(C.blendEquation(32774),m=Is,w=Is),pt)switch(le){case Ns:C.blendFuncSeparate(1,771,1,771);break;case Ka:C.blendFunc(1,1);break;case ja:C.blendFuncSeparate(0,769,0,1);break;case qa:C.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case Ns:C.blendFuncSeparate(770,771,1,771);break;case Ka:C.blendFunc(770,1);break;case ja:C.blendFuncSeparate(0,769,0,1);break;case qa:C.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}v=null,x=null,R=null,S=null,c=le,L=pt}return}Ve=Ve||Oe,st=st||Se,Dt=Dt||ze,(Oe!==m||Ve!==w)&&(C.blendEquationSeparate(Ge[Oe],Ge[Ve]),m=Oe,w=Ve),(Se!==v||ze!==x||st!==R||Dt!==S)&&(C.blendFuncSeparate(ke[Se],ke[ze],ke[st],ke[Dt]),v=Se,x=ze,R=st,S=Dt),c=le,L=null}function wt(le,Oe){le.side===Gi?oe(2884):re(2884);let Se=le.side===Kn;Oe&&(Se=!Se),it(Se),le.blending===Ns&&le.transparent===!1?_t($i):_t(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.premultipliedAlpha),u.setFunc(le.depthFunc),u.setTest(le.depthTest),u.setMask(le.depthWrite),g.setMask(le.colorWrite);const ze=le.stencilWrite;f.setTest(ze),ze&&(f.setMask(le.stencilWriteMask),f.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),f.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),mt(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?re(32926):oe(32926)}function it(le){A!==le&&(le?C.frontFace(2304):C.frontFace(2305),A=le)}function Vt(le){le!==Iu?(re(2884),le!==y&&(le===Xa?C.cullFace(1029):le===Fu?C.cullFace(1028):C.cullFace(1032))):oe(2884),y=le}function Lt(le){le!==P&&(D&&C.lineWidth(le),P=le)}function mt(le,Oe,Se){le?(re(32823),(B!==Oe||T!==Se)&&(C.polygonOffset(Oe,Se),B=Oe,T=Se)):oe(32823)}function Le(le){le?re(3089):oe(3089)}function Xe(le){le===void 0&&(le=33984+I-1),G!==le&&(C.activeTexture(le),G=le)}function q(le,Oe){G===null&&Xe();let Se=H[G];Se===void 0&&(Se={type:void 0,texture:void 0},H[G]=Se),(Se.type!==le||Se.texture!==Oe)&&(C.bindTexture(le,Oe||K[le]),Se.type=le,Se.texture=Oe)}function X(){const le=H[G];le!==void 0&&le.type!==void 0&&(C.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function he(){try{C.compressedTexImage2D.apply(C,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function be(){try{C.texSubImage2D.apply(C,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Te(){try{C.texSubImage3D.apply(C,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Re(){try{C.compressedTexSubImage2D.apply(C,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ue(){try{C.texStorage2D.apply(C,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function j(){try{C.texStorage3D.apply(C,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function xe(){try{C.texImage2D.apply(C,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Pe(){try{C.texImage3D.apply(C,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function We(le){Z.equals(le)===!1&&(C.scissor(le.x,le.y,le.z,le.w),Z.copy(le))}function $e(le){ne.equals(le)===!1&&(C.viewport(le.x,le.y,le.z,le.w),ne.copy(le))}function Qe(le,Oe){let Se=a.get(Oe);Se===void 0&&(Se=new WeakMap,a.set(Oe,Se));let ze=Se.get(le);ze===void 0&&(ze=C.getUniformBlockIndex(Oe,le.name),Se.set(le,ze))}function ft(le,Oe){const ze=a.get(Oe).get(le);M.get(le)!==ze&&(C.uniformBlockBinding(Oe,ze,le.__bindingPointIndex),M.set(le,ze))}function Ft(){C.disable(3042),C.disable(2884),C.disable(2929),C.disable(32823),C.disable(3089),C.disable(2960),C.disable(32926),C.blendEquation(32774),C.blendFunc(1,0),C.blendFuncSeparate(1,0,1,0),C.colorMask(!0,!0,!0,!0),C.clearColor(0,0,0,0),C.depthMask(!0),C.depthFunc(513),C.clearDepth(1),C.stencilMask(4294967295),C.stencilFunc(519,0,4294967295),C.stencilOp(7680,7680,7680),C.clearStencil(0),C.cullFace(1029),C.frontFace(2305),C.polygonOffset(0,0),C.activeTexture(33984),C.bindFramebuffer(36160,null),i===!0&&(C.bindFramebuffer(36009,null),C.bindFramebuffer(36008,null)),C.useProgram(null),C.lineWidth(1),C.scissor(0,0,C.canvas.width,C.canvas.height),C.viewport(0,0,C.canvas.width,C.canvas.height),E={},G=null,H={},p={},d=new WeakMap,s=[],r=null,t=!1,c=null,m=null,v=null,x=null,w=null,R=null,S=null,L=!1,A=null,y=null,P=null,B=null,T=null,Z.set(0,0,C.canvas.width,C.canvas.height),ne.set(0,0,C.canvas.width,C.canvas.height),g.reset(),u.reset(),f.reset()}return{buffers:{color:g,depth:u,stencil:f},enable:re,disable:oe,bindFramebuffer:de,drawBuffers:ue,useProgram:Be,setBlending:_t,setMaterial:wt,setFlipSided:it,setCullFace:Vt,setLineWidth:Lt,setPolygonOffset:mt,setScissorTest:Le,activeTexture:Xe,bindTexture:q,unbindTexture:X,compressedTexImage2D:he,texImage2D:xe,texImage3D:Pe,updateUBOMapping:Qe,uniformBlockBinding:ft,texStorage2D:Ue,texStorage3D:j,texSubImage2D:be,texSubImage3D:Te,compressedTexSubImage2D:Re,scissor:We,viewport:$e,reset:Ft}}function Fg(C,e,n,i,l,h,_){const g=l.isWebGL2,u=l.maxTextures,f=l.maxCubemapSize,M=l.maxTextureSize,a=l.maxSamples,E=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test(navigator.userAgent),d=new WeakMap;let s;const r=new WeakMap;let t=!1;try{t=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function c(q,X){return t?new OffscreenCanvas(q,X):vr("canvas")}function m(q,X,he,be){let Te=1;if((q.width>be||q.height>be)&&(Te=be/Math.max(q.width,q.height)),Te<1||X===!0)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap){const Re=X?vo:Math.floor,Ue=Re(Te*q.width),j=Re(Te*q.height);s===void 0&&(s=c(Ue,j));const xe=he?c(Ue,j):s;return xe.width=Ue,xe.height=j,xe.getContext("2d").drawImage(q,0,0,Ue,j),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+q.width+"x"+q.height+") to ("+Ue+"x"+j+")."),xe}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+q.width+"x"+q.height+")."),q;return q}function v(q){return _a(q.width)&&_a(q.height)}function x(q){return g?!1:q.wrapS!==Dn||q.wrapT!==Dn||q.minFilter!==on&&q.minFilter!==yn}function w(q,X){return q.generateMipmaps&&X&&q.minFilter!==on&&q.minFilter!==yn}function R(q){C.generateMipmap(q)}function S(q,X,he,be,Te=!1){if(g===!1)return X;if(q!==null){if(C[q]!==void 0)return C[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let Re=X;return X===6403&&(he===5126&&(Re=33326),he===5131&&(Re=33325),he===5121&&(Re=33321)),X===33319&&(he===5126&&(Re=33328),he===5131&&(Re=33327),he===5121&&(Re=33323)),X===6408&&(he===5126&&(Re=34836),he===5131&&(Re=34842),he===5121&&(Re=be===Bt&&Te===!1?35907:32856),he===32819&&(Re=32854),he===32820&&(Re=32855)),(Re===33325||Re===33326||Re===33327||Re===33328||Re===34842||Re===34836)&&e.get("EXT_color_buffer_float"),Re}function L(q,X,he){return w(q,he)===!0||q.isFramebufferTexture&&q.minFilter!==on&&q.minFilter!==yn?Math.log2(Math.max(X.width,X.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?X.mipmaps.length:1}function A(q){return q===on||q===fa||q===ma?9728:9729}function y(q){const X=q.target;X.removeEventListener("dispose",y),B(X),X.isVideoTexture&&d.delete(X)}function P(q){const X=q.target;X.removeEventListener("dispose",P),I(X)}function B(q){const X=i.get(q);if(X.__webglInit===void 0)return;const he=q.source,be=r.get(he);if(be){const Te=be[X.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&T(q),Object.keys(be).length===0&&r.delete(he)}i.remove(q)}function T(q){const X=i.get(q);C.deleteTexture(X.__webglTexture);const he=q.source,be=r.get(he);delete be[X.__cacheKey],_.memory.textures--}function I(q){const X=q.texture,he=i.get(q),be=i.get(X);if(be.__webglTexture!==void 0&&(C.deleteTexture(be.__webglTexture),_.memory.textures--),q.depthTexture&&q.depthTexture.dispose(),q.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++)C.deleteFramebuffer(he.__webglFramebuffer[Te]),he.__webglDepthbuffer&&C.deleteRenderbuffer(he.__webglDepthbuffer[Te]);else{if(C.deleteFramebuffer(he.__webglFramebuffer),he.__webglDepthbuffer&&C.deleteRenderbuffer(he.__webglDepthbuffer),he.__webglMultisampledFramebuffer&&C.deleteFramebuffer(he.__webglMultisampledFramebuffer),he.__webglColorRenderbuffer)for(let Te=0;Te<he.__webglColorRenderbuffer.length;Te++)he.__webglColorRenderbuffer[Te]&&C.deleteRenderbuffer(he.__webglColorRenderbuffer[Te]);he.__webglDepthRenderbuffer&&C.deleteRenderbuffer(he.__webglDepthRenderbuffer)}if(q.isWebGLMultipleRenderTargets)for(let Te=0,Re=X.length;Te<Re;Te++){const Ue=i.get(X[Te]);Ue.__webglTexture&&(C.deleteTexture(Ue.__webglTexture),_.memory.textures--),i.remove(X[Te])}i.remove(X),i.remove(q)}let D=0;function k(){D=0}function U(){const q=D;return q>=u&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+u),D+=1,q}function G(q){const X=[];return X.push(q.wrapS),X.push(q.wrapT),X.push(q.magFilter),X.push(q.minFilter),X.push(q.anisotropy),X.push(q.internalFormat),X.push(q.format),X.push(q.type),X.push(q.generateMipmaps),X.push(q.premultiplyAlpha),X.push(q.flipY),X.push(q.unpackAlignment),X.push(q.encoding),X.join()}function H(q,X){const he=i.get(q);if(q.isVideoTexture&&Le(q),q.isRenderTargetTexture===!1&&q.version>0&&he.__version!==q.version){const be=q.image;if(be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(he,q,X);return}}n.activeTexture(33984+X),n.bindTexture(3553,he.__webglTexture)}function se(q,X){const he=i.get(q);if(q.version>0&&he.__version!==q.version){oe(he,q,X);return}n.activeTexture(33984+X),n.bindTexture(35866,he.__webglTexture)}function ee(q,X){const he=i.get(q);if(q.version>0&&he.__version!==q.version){oe(he,q,X);return}n.activeTexture(33984+X),n.bindTexture(32879,he.__webglTexture)}function Z(q,X){const he=i.get(q);if(q.version>0&&he.__version!==q.version){de(he,q,X);return}n.activeTexture(33984+X),n.bindTexture(34067,he.__webglTexture)}const ne={[ks]:10497,[Dn]:33071,[_o]:33648},W={[on]:9728,[fa]:9984,[ma]:9986,[yn]:9729,[Bc]:9985,[Hs]:9987};function K(q,X,he){if(he?(C.texParameteri(q,10242,ne[X.wrapS]),C.texParameteri(q,10243,ne[X.wrapT]),(q===32879||q===35866)&&C.texParameteri(q,32882,ne[X.wrapR]),C.texParameteri(q,10240,W[X.magFilter]),C.texParameteri(q,10241,W[X.minFilter])):(C.texParameteri(q,10242,33071),C.texParameteri(q,10243,33071),(q===32879||q===35866)&&C.texParameteri(q,32882,33071),(X.wrapS!==Dn||X.wrapT!==Dn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),C.texParameteri(q,10240,A(X.magFilter)),C.texParameteri(q,10241,A(X.minFilter)),X.minFilter!==on&&X.minFilter!==yn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const be=e.get("EXT_texture_filter_anisotropic");if(X.type===Ui&&e.has("OES_texture_float_linear")===!1||g===!1&&X.type===pr&&e.has("OES_texture_half_float_linear")===!1)return;(X.anisotropy>1||i.get(X).__currentAnisotropy)&&(C.texParameterf(q,be.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,l.getMaxAnisotropy())),i.get(X).__currentAnisotropy=X.anisotropy)}}function re(q,X){let he=!1;q.__webglInit===void 0&&(q.__webglInit=!0,X.addEventListener("dispose",y));const be=X.source;let Te=r.get(be);Te===void 0&&(Te={},r.set(be,Te));const Re=G(X);if(Re!==q.__cacheKey){Te[Re]===void 0&&(Te[Re]={texture:C.createTexture(),usedTimes:0},_.memory.textures++,he=!0),Te[Re].usedTimes++;const Ue=Te[q.__cacheKey];Ue!==void 0&&(Te[q.__cacheKey].usedTimes--,Ue.usedTimes===0&&T(X)),q.__cacheKey=Re,q.__webglTexture=Te[Re].texture}return he}function oe(q,X,he){let be=3553;X.isDataArrayTexture&&(be=35866),X.isData3DTexture&&(be=32879);const Te=re(q,X),Re=X.source;if(n.activeTexture(33984+he),n.bindTexture(be,q.__webglTexture),Re.version!==Re.__currentVersion||Te===!0){C.pixelStorei(37440,X.flipY),C.pixelStorei(37441,X.premultiplyAlpha),C.pixelStorei(3317,X.unpackAlignment),C.pixelStorei(37443,0);const Ue=x(X)&&v(X.image)===!1;let j=m(X.image,Ue,!1,M);j=Xe(X,j);const xe=v(j)||g,Pe=h.convert(X.format,X.encoding);let We=h.convert(X.type),$e=S(X.internalFormat,Pe,We,X.encoding,X.isVideoTexture);K(be,X,xe);let Qe;const ft=X.mipmaps,Ft=g&&X.isVideoTexture!==!0,le=Re.__currentVersion===void 0||Te===!0,Oe=L(X,j,xe);if(X.isDepthTexture)$e=6402,g?X.type===Ui?$e=36012:X.type===Ji?$e=33190:X.type===Ps?$e=35056:$e=33189:X.type===Ui&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),X.format===ts&&$e===6402&&X.type!==kc&&X.type!==Ji&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),X.type=Ji,We=h.convert(X.type)),X.format===Us&&$e===6402&&($e=34041,X.type!==Ps&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),X.type=Ps,We=h.convert(X.type))),le&&(Ft?n.texStorage2D(3553,1,$e,j.width,j.height):n.texImage2D(3553,0,$e,j.width,j.height,0,Pe,We,null));else if(X.isDataTexture)if(ft.length>0&&xe){Ft&&le&&n.texStorage2D(3553,Oe,$e,ft[0].width,ft[0].height);for(let Se=0,ze=ft.length;Se<ze;Se++)Qe=ft[Se],Ft?n.texSubImage2D(3553,Se,0,0,Qe.width,Qe.height,Pe,We,Qe.data):n.texImage2D(3553,Se,$e,Qe.width,Qe.height,0,Pe,We,Qe.data);X.generateMipmaps=!1}else Ft?(le&&n.texStorage2D(3553,Oe,$e,j.width,j.height),n.texSubImage2D(3553,0,0,0,j.width,j.height,Pe,We,j.data)):n.texImage2D(3553,0,$e,j.width,j.height,0,Pe,We,j.data);else if(X.isCompressedTexture){Ft&&le&&n.texStorage2D(3553,Oe,$e,ft[0].width,ft[0].height);for(let Se=0,ze=ft.length;Se<ze;Se++)Qe=ft[Se],X.format!==Xn?Pe!==null?Ft?n.compressedTexSubImage2D(3553,Se,0,0,Qe.width,Qe.height,Pe,Qe.data):n.compressedTexImage2D(3553,Se,$e,Qe.width,Qe.height,0,Qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ft?n.texSubImage2D(3553,Se,0,0,Qe.width,Qe.height,Pe,We,Qe.data):n.texImage2D(3553,Se,$e,Qe.width,Qe.height,0,Pe,We,Qe.data)}else if(X.isDataArrayTexture)Ft?(le&&n.texStorage3D(35866,Oe,$e,j.width,j.height,j.depth),n.texSubImage3D(35866,0,0,0,0,j.width,j.height,j.depth,Pe,We,j.data)):n.texImage3D(35866,0,$e,j.width,j.height,j.depth,0,Pe,We,j.data);else if(X.isData3DTexture)Ft?(le&&n.texStorage3D(32879,Oe,$e,j.width,j.height,j.depth),n.texSubImage3D(32879,0,0,0,0,j.width,j.height,j.depth,Pe,We,j.data)):n.texImage3D(32879,0,$e,j.width,j.height,j.depth,0,Pe,We,j.data);else if(X.isFramebufferTexture){if(le)if(Ft)n.texStorage2D(3553,Oe,$e,j.width,j.height);else{let Se=j.width,ze=j.height;for(let Ve=0;Ve<Oe;Ve++)n.texImage2D(3553,Ve,$e,Se,ze,0,Pe,We,null),Se>>=1,ze>>=1}}else if(ft.length>0&&xe){Ft&&le&&n.texStorage2D(3553,Oe,$e,ft[0].width,ft[0].height);for(let Se=0,ze=ft.length;Se<ze;Se++)Qe=ft[Se],Ft?n.texSubImage2D(3553,Se,0,0,Pe,We,Qe):n.texImage2D(3553,Se,$e,Pe,We,Qe);X.generateMipmaps=!1}else Ft?(le&&n.texStorage2D(3553,Oe,$e,j.width,j.height),n.texSubImage2D(3553,0,0,0,Pe,We,j)):n.texImage2D(3553,0,$e,Pe,We,j);w(X,xe)&&R(be),Re.__currentVersion=Re.version,X.onUpdate&&X.onUpdate(X)}q.__version=X.version}function de(q,X,he){if(X.image.length!==6)return;const be=re(q,X),Te=X.source;if(n.activeTexture(33984+he),n.bindTexture(34067,q.__webglTexture),Te.version!==Te.__currentVersion||be===!0){C.pixelStorei(37440,X.flipY),C.pixelStorei(37441,X.premultiplyAlpha),C.pixelStorei(3317,X.unpackAlignment),C.pixelStorei(37443,0);const Re=X.isCompressedTexture||X.image[0].isCompressedTexture,Ue=X.image[0]&&X.image[0].isDataTexture,j=[];for(let Se=0;Se<6;Se++)!Re&&!Ue?j[Se]=m(X.image[Se],!1,!0,f):j[Se]=Ue?X.image[Se].image:X.image[Se],j[Se]=Xe(X,j[Se]);const xe=j[0],Pe=v(xe)||g,We=h.convert(X.format,X.encoding),$e=h.convert(X.type),Qe=S(X.internalFormat,We,$e,X.encoding),ft=g&&X.isVideoTexture!==!0,Ft=Te.__currentVersion===void 0||be===!0;let le=L(X,xe,Pe);K(34067,X,Pe);let Oe;if(Re){ft&&Ft&&n.texStorage2D(34067,le,Qe,xe.width,xe.height);for(let Se=0;Se<6;Se++){Oe=j[Se].mipmaps;for(let ze=0;ze<Oe.length;ze++){const Ve=Oe[ze];X.format!==Xn?We!==null?ft?n.compressedTexSubImage2D(34069+Se,ze,0,0,Ve.width,Ve.height,We,Ve.data):n.compressedTexImage2D(34069+Se,ze,Qe,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ft?n.texSubImage2D(34069+Se,ze,0,0,Ve.width,Ve.height,We,$e,Ve.data):n.texImage2D(34069+Se,ze,Qe,Ve.width,Ve.height,0,We,$e,Ve.data)}}}else{Oe=X.mipmaps,ft&&Ft&&(Oe.length>0&&le++,n.texStorage2D(34067,le,Qe,j[0].width,j[0].height));for(let Se=0;Se<6;Se++)if(Ue){ft?n.texSubImage2D(34069+Se,0,0,0,j[Se].width,j[Se].height,We,$e,j[Se].data):n.texImage2D(34069+Se,0,Qe,j[Se].width,j[Se].height,0,We,$e,j[Se].data);for(let ze=0;ze<Oe.length;ze++){const st=Oe[ze].image[Se].image;ft?n.texSubImage2D(34069+Se,ze+1,0,0,st.width,st.height,We,$e,st.data):n.texImage2D(34069+Se,ze+1,Qe,st.width,st.height,0,We,$e,st.data)}}else{ft?n.texSubImage2D(34069+Se,0,0,0,We,$e,j[Se]):n.texImage2D(34069+Se,0,Qe,We,$e,j[Se]);for(let ze=0;ze<Oe.length;ze++){const Ve=Oe[ze];ft?n.texSubImage2D(34069+Se,ze+1,0,0,We,$e,Ve.image[Se]):n.texImage2D(34069+Se,ze+1,Qe,We,$e,Ve.image[Se])}}}w(X,Pe)&&R(34067),Te.__currentVersion=Te.version,X.onUpdate&&X.onUpdate(X)}q.__version=X.version}function ue(q,X,he,be,Te){const Re=h.convert(he.format,he.encoding),Ue=h.convert(he.type),j=S(he.internalFormat,Re,Ue,he.encoding);i.get(X).__hasExternalTextures||(Te===32879||Te===35866?n.texImage3D(Te,0,j,X.width,X.height,X.depth,0,Re,Ue,null):n.texImage2D(Te,0,j,X.width,X.height,0,Re,Ue,null)),n.bindFramebuffer(36160,q),mt(X)?E.framebufferTexture2DMultisampleEXT(36160,be,Te,i.get(he).__webglTexture,0,Lt(X)):C.framebufferTexture2D(36160,be,Te,i.get(he).__webglTexture,0),n.bindFramebuffer(36160,null)}function Be(q,X,he){if(C.bindRenderbuffer(36161,q),X.depthBuffer&&!X.stencilBuffer){let be=33189;if(he||mt(X)){const Te=X.depthTexture;Te&&Te.isDepthTexture&&(Te.type===Ui?be=36012:Te.type===Ji&&(be=33190));const Re=Lt(X);mt(X)?E.renderbufferStorageMultisampleEXT(36161,Re,be,X.width,X.height):C.renderbufferStorageMultisample(36161,Re,be,X.width,X.height)}else C.renderbufferStorage(36161,be,X.width,X.height);C.framebufferRenderbuffer(36160,36096,36161,q)}else if(X.depthBuffer&&X.stencilBuffer){const be=Lt(X);he&&mt(X)===!1?C.renderbufferStorageMultisample(36161,be,35056,X.width,X.height):mt(X)?E.renderbufferStorageMultisampleEXT(36161,be,35056,X.width,X.height):C.renderbufferStorage(36161,34041,X.width,X.height),C.framebufferRenderbuffer(36160,33306,36161,q)}else{const be=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let Te=0;Te<be.length;Te++){const Re=be[Te],Ue=h.convert(Re.format,Re.encoding),j=h.convert(Re.type),xe=S(Re.internalFormat,Ue,j,Re.encoding),Pe=Lt(X);he&&mt(X)===!1?C.renderbufferStorageMultisample(36161,Pe,xe,X.width,X.height):mt(X)?E.renderbufferStorageMultisampleEXT(36161,Pe,xe,X.width,X.height):C.renderbufferStorage(36161,xe,X.width,X.height)}}C.bindRenderbuffer(36161,null)}function Ge(q,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,q),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(X.depthTexture).__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),H(X.depthTexture,0);const be=i.get(X.depthTexture).__webglTexture,Te=Lt(X);if(X.depthTexture.format===ts)mt(X)?E.framebufferTexture2DMultisampleEXT(36160,36096,3553,be,0,Te):C.framebufferTexture2D(36160,36096,3553,be,0);else if(X.depthTexture.format===Us)mt(X)?E.framebufferTexture2DMultisampleEXT(36160,33306,3553,be,0,Te):C.framebufferTexture2D(36160,33306,3553,be,0);else throw new Error("Unknown depthTexture format")}function ke(q){const X=i.get(q),he=q.isWebGLCubeRenderTarget===!0;if(q.depthTexture&&!X.__autoAllocateDepthBuffer){if(he)throw new Error("target.depthTexture not supported in Cube render targets");Ge(X.__webglFramebuffer,q)}else if(he){X.__webglDepthbuffer=[];for(let be=0;be<6;be++)n.bindFramebuffer(36160,X.__webglFramebuffer[be]),X.__webglDepthbuffer[be]=C.createRenderbuffer(),Be(X.__webglDepthbuffer[be],q,!1)}else n.bindFramebuffer(36160,X.__webglFramebuffer),X.__webglDepthbuffer=C.createRenderbuffer(),Be(X.__webglDepthbuffer,q,!1);n.bindFramebuffer(36160,null)}function _t(q,X,he){const be=i.get(q);X!==void 0&&ue(be.__webglFramebuffer,q,q.texture,36064,3553),he!==void 0&&ke(q)}function wt(q){const X=q.texture,he=i.get(q),be=i.get(X);q.addEventListener("dispose",P),q.isWebGLMultipleRenderTargets!==!0&&(be.__webglTexture===void 0&&(be.__webglTexture=C.createTexture()),be.__version=X.version,_.memory.textures++);const Te=q.isWebGLCubeRenderTarget===!0,Re=q.isWebGLMultipleRenderTargets===!0,Ue=v(q)||g;if(Te){he.__webglFramebuffer=[];for(let j=0;j<6;j++)he.__webglFramebuffer[j]=C.createFramebuffer()}else{if(he.__webglFramebuffer=C.createFramebuffer(),Re)if(l.drawBuffers){const j=q.texture;for(let xe=0,Pe=j.length;xe<Pe;xe++){const We=i.get(j[xe]);We.__webglTexture===void 0&&(We.__webglTexture=C.createTexture(),_.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(g&&q.samples>0&&mt(q)===!1){const j=Re?X:[X];he.__webglMultisampledFramebuffer=C.createFramebuffer(),he.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,he.__webglMultisampledFramebuffer);for(let xe=0;xe<j.length;xe++){const Pe=j[xe];he.__webglColorRenderbuffer[xe]=C.createRenderbuffer(),C.bindRenderbuffer(36161,he.__webglColorRenderbuffer[xe]);const We=h.convert(Pe.format,Pe.encoding),$e=h.convert(Pe.type),Qe=S(Pe.internalFormat,We,$e,Pe.encoding),ft=Lt(q);C.renderbufferStorageMultisample(36161,ft,Qe,q.width,q.height),C.framebufferRenderbuffer(36160,36064+xe,36161,he.__webglColorRenderbuffer[xe])}C.bindRenderbuffer(36161,null),q.depthBuffer&&(he.__webglDepthRenderbuffer=C.createRenderbuffer(),Be(he.__webglDepthRenderbuffer,q,!0)),n.bindFramebuffer(36160,null)}}if(Te){n.bindTexture(34067,be.__webglTexture),K(34067,X,Ue);for(let j=0;j<6;j++)ue(he.__webglFramebuffer[j],q,X,36064,34069+j);w(X,Ue)&&R(34067),n.unbindTexture()}else if(Re){const j=q.texture;for(let xe=0,Pe=j.length;xe<Pe;xe++){const We=j[xe],$e=i.get(We);n.bindTexture(3553,$e.__webglTexture),K(3553,We,Ue),ue(he.__webglFramebuffer,q,We,36064+xe,3553),w(We,Ue)&&R(3553)}n.unbindTexture()}else{let j=3553;(q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(g?j=q.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(j,be.__webglTexture),K(j,X,Ue),ue(he.__webglFramebuffer,q,X,36064,j),w(X,Ue)&&R(j),n.unbindTexture()}q.depthBuffer&&ke(q)}function it(q){const X=v(q)||g,he=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let be=0,Te=he.length;be<Te;be++){const Re=he[be];if(w(Re,X)){const Ue=q.isWebGLCubeRenderTarget?34067:3553,j=i.get(Re).__webglTexture;n.bindTexture(Ue,j),R(Ue),n.unbindTexture()}}}function Vt(q){if(g&&q.samples>0&&mt(q)===!1){const X=q.isWebGLMultipleRenderTargets?q.texture:[q.texture],he=q.width,be=q.height;let Te=16384;const Re=[],Ue=q.stencilBuffer?33306:36096,j=i.get(q),xe=q.isWebGLMultipleRenderTargets===!0;if(xe)for(let Pe=0;Pe<X.length;Pe++)n.bindFramebuffer(36160,j.__webglMultisampledFramebuffer),C.framebufferRenderbuffer(36160,36064+Pe,36161,null),n.bindFramebuffer(36160,j.__webglFramebuffer),C.framebufferTexture2D(36009,36064+Pe,3553,null,0);n.bindFramebuffer(36008,j.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,j.__webglFramebuffer);for(let Pe=0;Pe<X.length;Pe++){Re.push(36064+Pe),q.depthBuffer&&Re.push(Ue);const We=j.__ignoreDepthValues!==void 0?j.__ignoreDepthValues:!1;if(We===!1&&(q.depthBuffer&&(Te|=256),q.stencilBuffer&&(Te|=1024)),xe&&C.framebufferRenderbuffer(36008,36064,36161,j.__webglColorRenderbuffer[Pe]),We===!0&&(C.invalidateFramebuffer(36008,[Ue]),C.invalidateFramebuffer(36009,[Ue])),xe){const $e=i.get(X[Pe]).__webglTexture;C.framebufferTexture2D(36009,36064,3553,$e,0)}C.blitFramebuffer(0,0,he,be,0,0,he,be,Te,9728),p&&C.invalidateFramebuffer(36008,Re)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),xe)for(let Pe=0;Pe<X.length;Pe++){n.bindFramebuffer(36160,j.__webglMultisampledFramebuffer),C.framebufferRenderbuffer(36160,36064+Pe,36161,j.__webglColorRenderbuffer[Pe]);const We=i.get(X[Pe]).__webglTexture;n.bindFramebuffer(36160,j.__webglFramebuffer),C.framebufferTexture2D(36009,36064+Pe,3553,We,0)}n.bindFramebuffer(36009,j.__webglMultisampledFramebuffer)}}function Lt(q){return Math.min(a,q.samples)}function mt(q){const X=i.get(q);return g&&q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function Le(q){const X=_.render.frame;d.get(q)!==X&&(d.set(q,X),q.update())}function Xe(q,X){const he=q.encoding,be=q.format,Te=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||q.format===ga||he!==rs&&(he===Bt?g===!1?e.has("EXT_sRGB")===!0&&be===Xn?(q.format=ga,q.minFilter=yn,q.generateMipmaps=!1):X=Vc.sRGBToLinear(X):(be!==Xn||Te!==ss)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",he)),X}this.allocateTextureUnit=U,this.resetTextureUnits=k,this.setTexture2D=H,this.setTexture2DArray=se,this.setTexture3D=ee,this.setTextureCube=Z,this.rebindTextures=_t,this.setupRenderTarget=wt,this.updateRenderTargetMipmap=it,this.updateMultisampleRenderTarget=Vt,this.setupDepthRenderbuffer=ke,this.setupFrameBufferTexture=ue,this.useMultisampledRTT=mt}function Ng(C,e,n){const i=n.isWebGL2;function l(h,_=null){let g;if(h===ss)return 5121;if(h===uh)return 32819;if(h===hh)return 32820;if(h===ah)return 5120;if(h===lh)return 5122;if(h===kc)return 5123;if(h===ch)return 5124;if(h===Ji)return 5125;if(h===Ui)return 5126;if(h===pr)return i?5131:(g=e.get("OES_texture_half_float"),g!==null?g.HALF_FLOAT_OES:null);if(h===dh)return 6406;if(h===Xn)return 6408;if(h===mh)return 6409;if(h===ph)return 6410;if(h===ts)return 6402;if(h===Us)return 34041;if(h===gh)return 6403;if(h===fh)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(h===ga)return g=e.get("EXT_sRGB"),g!==null?g.SRGB_ALPHA_EXT:null;if(h===_h)return 36244;if(h===vh)return 33319;if(h===Eh)return 33320;if(h===xh)return 36249;if(h===wo||h===To||h===Ro||h===Mo)if(_===Bt)if(g=e.get("WEBGL_compressed_texture_s3tc_srgb"),g!==null){if(h===wo)return g.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(h===To)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(h===Ro)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(h===Mo)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(g=e.get("WEBGL_compressed_texture_s3tc"),g!==null){if(h===wo)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(h===To)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(h===Ro)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(h===Mo)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(h===Ja||h===Qa||h===el||h===tl)if(g=e.get("WEBGL_compressed_texture_pvrtc"),g!==null){if(h===Ja)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(h===Qa)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(h===el)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(h===tl)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(h===Sh)return g=e.get("WEBGL_compressed_texture_etc1"),g!==null?g.COMPRESSED_RGB_ETC1_WEBGL:null;if(h===nl||h===il)if(g=e.get("WEBGL_compressed_texture_etc"),g!==null){if(h===nl)return _===Bt?g.COMPRESSED_SRGB8_ETC2:g.COMPRESSED_RGB8_ETC2;if(h===il)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:g.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(h===sl||h===rl||h===ol||h===al||h===ll||h===cl||h===ul||h===hl||h===dl||h===fl||h===ml||h===pl||h===gl||h===_l)if(g=e.get("WEBGL_compressed_texture_astc"),g!==null){if(h===sl)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:g.COMPRESSED_RGBA_ASTC_4x4_KHR;if(h===rl)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:g.COMPRESSED_RGBA_ASTC_5x4_KHR;if(h===ol)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:g.COMPRESSED_RGBA_ASTC_5x5_KHR;if(h===al)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:g.COMPRESSED_RGBA_ASTC_6x5_KHR;if(h===ll)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:g.COMPRESSED_RGBA_ASTC_6x6_KHR;if(h===cl)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:g.COMPRESSED_RGBA_ASTC_8x5_KHR;if(h===ul)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:g.COMPRESSED_RGBA_ASTC_8x6_KHR;if(h===hl)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:g.COMPRESSED_RGBA_ASTC_8x8_KHR;if(h===dl)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:g.COMPRESSED_RGBA_ASTC_10x5_KHR;if(h===fl)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:g.COMPRESSED_RGBA_ASTC_10x6_KHR;if(h===ml)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:g.COMPRESSED_RGBA_ASTC_10x8_KHR;if(h===pl)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:g.COMPRESSED_RGBA_ASTC_10x10_KHR;if(h===gl)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:g.COMPRESSED_RGBA_ASTC_12x10_KHR;if(h===_l)return _===Bt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:g.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(h===vl)if(g=e.get("EXT_texture_compression_bptc"),g!==null){if(h===vl)return _===Bt?g.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:g.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return h===Ps?i?34042:(g=e.get("WEBGL_depth_texture"),g!==null?g.UNSIGNED_INT_24_8_WEBGL:null):C[h]!==void 0?C[h]:null}return{convert:l}}class Pg extends gn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class es extends Yt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Dg={type:"move"};class ia{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new es,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new es,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ce),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new es,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ce),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let l=null,h=null,_=null;const g=this._targetRay,u=this._grip,f=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(f&&e.hand){_=!0;for(const s of e.hand.values()){const r=n.getJointPose(s,i);if(f.joints[s.jointName]===void 0){const c=new es;c.matrixAutoUpdate=!1,c.visible=!1,f.joints[s.jointName]=c,f.add(c)}const t=f.joints[s.jointName];r!==null&&(t.matrix.fromArray(r.transform.matrix),t.matrix.decompose(t.position,t.rotation,t.scale),t.jointRadius=r.radius),t.visible=r!==null}const M=f.joints["index-finger-tip"],a=f.joints["thumb-tip"],E=M.position.distanceTo(a.position),p=.02,d=.005;f.inputState.pinching&&E>p+d?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&E<=p-d&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(h=n.getPose(e.gripSpace,i),h!==null&&(u.matrix.fromArray(h.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),h.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(h.linearVelocity)):u.hasLinearVelocity=!1,h.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(h.angularVelocity)):u.hasAngularVelocity=!1));g!==null&&(l=n.getPose(e.targetRaySpace,i),l===null&&h!==null&&(l=h),l!==null&&(g.matrix.fromArray(l.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),l.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(l.linearVelocity)):g.hasLinearVelocity=!1,l.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(l.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(Dg)))}return g!==null&&(g.visible=l!==null),u!==null&&(u.visible=h!==null),f!==null&&(f.visible=_!==null),this}}class Og extends vn{constructor(e,n,i,l,h,_,g,u,f,M){if(M=M!==void 0?M:ts,M!==ts&&M!==Us)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&M===ts&&(i=Ji),i===void 0&&M===Us&&(i=Ps),super(null,l,h,_,g,u,M,i,f),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=g!==void 0?g:on,this.minFilter=u!==void 0?u:on,this.flipY=!1,this.generateMipmaps=!1}}class Bg extends cs{constructor(e,n){super();const i=this;let l=null,h=1,_=null,g="local-floor",u=null,f=null,M=null,a=null,E=null,p=null;const d=n.getContextAttributes();let s=null,r=null;const t=[],c=[],m=new gn;m.layers.enable(1),m.viewport=new Ut;const v=new gn;v.layers.enable(2),v.viewport=new Ut;const x=[m,v],w=new Pg;w.layers.enable(1),w.layers.enable(2);let R=null,S=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let H=t[G];return H===void 0&&(H=new ia,t[G]=H),H.getTargetRaySpace()},this.getControllerGrip=function(G){let H=t[G];return H===void 0&&(H=new ia,t[G]=H),H.getGripSpace()},this.getHand=function(G){let H=t[G];return H===void 0&&(H=new ia,t[G]=H),H.getHandSpace()};function L(G){const H=c.indexOf(G.inputSource);if(H===-1)return;const se=t[H];se!==void 0&&se.dispatchEvent({type:G.type,data:G.inputSource})}function A(){l.removeEventListener("select",L),l.removeEventListener("selectstart",L),l.removeEventListener("selectend",L),l.removeEventListener("squeeze",L),l.removeEventListener("squeezestart",L),l.removeEventListener("squeezeend",L),l.removeEventListener("end",A),l.removeEventListener("inputsourceschange",y);for(let G=0;G<t.length;G++){const H=c[G];H!==null&&(c[G]=null,t[G].disconnect(H))}R=null,S=null,e.setRenderTarget(s),E=null,a=null,M=null,l=null,r=null,U.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){h=G,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){g=G,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||_},this.setReferenceSpace=function(G){u=G},this.getBaseLayer=function(){return a!==null?a:E},this.getBinding=function(){return M},this.getFrame=function(){return p},this.getSession=function(){return l},this.setSession=async function(G){if(l=G,l!==null){if(s=e.getRenderTarget(),l.addEventListener("select",L),l.addEventListener("selectstart",L),l.addEventListener("selectend",L),l.addEventListener("squeeze",L),l.addEventListener("squeezestart",L),l.addEventListener("squeezeend",L),l.addEventListener("end",A),l.addEventListener("inputsourceschange",y),d.xrCompatible!==!0&&await n.makeXRCompatible(),l.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const H={antialias:l.renderState.layers===void 0?d.antialias:!0,alpha:d.alpha,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:h};E=new XRWebGLLayer(l,n,H),l.updateRenderState({baseLayer:E}),r=new os(E.framebufferWidth,E.framebufferHeight,{format:Xn,type:ss,encoding:e.outputEncoding})}else{let H=null,se=null,ee=null;d.depth&&(ee=d.stencil?35056:33190,H=d.stencil?Us:ts,se=d.stencil?Ps:Ji);const Z={colorFormat:32856,depthFormat:ee,scaleFactor:h};M=new XRWebGLBinding(l,n),a=M.createProjectionLayer(Z),l.updateRenderState({layers:[a]}),r=new os(a.textureWidth,a.textureHeight,{format:Xn,type:ss,depthTexture:new Og(a.textureWidth,a.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,H),stencilBuffer:d.stencil,encoding:e.outputEncoding,samples:d.antialias?4:0});const ne=e.properties.get(r);ne.__ignoreDepthValues=a.ignoreDepthValues}r.isXRRenderTarget=!0,this.setFoveation(1),u=null,_=await l.requestReferenceSpace(g),U.setContext(l),U.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function y(G){for(let H=0;H<G.removed.length;H++){const se=G.removed[H],ee=c.indexOf(se);ee>=0&&(c[ee]=null,t[ee].dispatchEvent({type:"disconnected",data:se}))}for(let H=0;H<G.added.length;H++){const se=G.added[H];let ee=c.indexOf(se);if(ee===-1){for(let ne=0;ne<t.length;ne++)if(ne>=c.length){c.push(se),ee=ne;break}else if(c[ne]===null){c[ne]=se,ee=ne;break}if(ee===-1)break}const Z=t[ee];Z&&Z.dispatchEvent({type:"connected",data:se})}}const P=new ce,B=new ce;function T(G,H,se){P.setFromMatrixPosition(H.matrixWorld),B.setFromMatrixPosition(se.matrixWorld);const ee=P.distanceTo(B),Z=H.projectionMatrix.elements,ne=se.projectionMatrix.elements,W=Z[14]/(Z[10]-1),K=Z[14]/(Z[10]+1),re=(Z[9]+1)/Z[5],oe=(Z[9]-1)/Z[5],de=(Z[8]-1)/Z[0],ue=(ne[8]+1)/ne[0],Be=W*de,Ge=W*ue,ke=ee/(-de+ue),_t=ke*-de;H.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(_t),G.translateZ(ke),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert();const wt=W+ke,it=K+ke,Vt=Be-_t,Lt=Ge+(ee-_t),mt=re*K/it*wt,Le=oe*K/it*wt;G.projectionMatrix.makePerspective(Vt,Lt,mt,Le,wt,it)}function I(G,H){H===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(H.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(l===null)return;w.near=v.near=m.near=G.near,w.far=v.far=m.far=G.far,(R!==w.near||S!==w.far)&&(l.updateRenderState({depthNear:w.near,depthFar:w.far}),R=w.near,S=w.far);const H=G.parent,se=w.cameras;I(w,H);for(let Z=0;Z<se.length;Z++)I(se[Z],H);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),G.position.copy(w.position),G.quaternion.copy(w.quaternion),G.scale.copy(w.scale),G.matrix.copy(w.matrix),G.matrixWorld.copy(w.matrixWorld);const ee=G.children;for(let Z=0,ne=ee.length;Z<ne;Z++)ee[Z].updateMatrixWorld(!0);se.length===2?T(w,m,v):w.projectionMatrix.copy(m.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){if(a!==null)return a.fixedFoveation;if(E!==null)return E.fixedFoveation},this.setFoveation=function(G){a!==null&&(a.fixedFoveation=G),E!==null&&E.fixedFoveation!==void 0&&(E.fixedFoveation=G)};let D=null;function k(G,H){if(f=H.getViewerPose(u||_),p=H,f!==null){const se=f.views;E!==null&&(e.setRenderTargetFramebuffer(r,E.framebuffer),e.setRenderTarget(r));let ee=!1;se.length!==w.cameras.length&&(w.cameras.length=0,ee=!0);for(let Z=0;Z<se.length;Z++){const ne=se[Z];let W=null;if(E!==null)W=E.getViewport(ne);else{const re=M.getViewSubImage(a,ne);W=re.viewport,Z===0&&(e.setRenderTargetTextures(r,re.colorTexture,a.ignoreDepthValues?void 0:re.depthStencilTexture),e.setRenderTarget(r))}let K=x[Z];K===void 0&&(K=new gn,K.layers.enable(Z),K.viewport=new Ut,x[Z]=K),K.matrix.fromArray(ne.transform.matrix),K.projectionMatrix.fromArray(ne.projectionMatrix),K.viewport.set(W.x,W.y,W.width,W.height),Z===0&&w.matrix.copy(K.matrix),ee===!0&&w.cameras.push(K)}}for(let se=0;se<t.length;se++){const ee=c[se],Z=t[se];ee!==null&&Z!==void 0&&Z.update(ee,H,u||_)}D&&D(G,H),p=null}const U=new Zc;U.setAnimationLoop(k),this.setAnimationLoop=function(G){D=G},this.dispose=function(){}}}function kg(C,e){function n(s,r){s.fogColor.value.copy(r.color),r.isFog?(s.fogNear.value=r.near,s.fogFar.value=r.far):r.isFogExp2&&(s.fogDensity.value=r.density)}function i(s,r,t,c,m){r.isMeshBasicMaterial||r.isMeshLambertMaterial?l(s,r):r.isMeshToonMaterial?(l(s,r),M(s,r)):r.isMeshPhongMaterial?(l(s,r),f(s,r)):r.isMeshStandardMaterial?(l(s,r),a(s,r),r.isMeshPhysicalMaterial&&E(s,r,m)):r.isMeshMatcapMaterial?(l(s,r),p(s,r)):r.isMeshDepthMaterial?l(s,r):r.isMeshDistanceMaterial?(l(s,r),d(s,r)):r.isMeshNormalMaterial?l(s,r):r.isLineBasicMaterial?(h(s,r),r.isLineDashedMaterial&&_(s,r)):r.isPointsMaterial?g(s,r,t,c):r.isSpriteMaterial?u(s,r):r.isShadowMaterial?(s.color.value.copy(r.color),s.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}function l(s,r){s.opacity.value=r.opacity,r.color&&s.diffuse.value.copy(r.color),r.emissive&&s.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(s.map.value=r.map),r.alphaMap&&(s.alphaMap.value=r.alphaMap),r.bumpMap&&(s.bumpMap.value=r.bumpMap,s.bumpScale.value=r.bumpScale,r.side===Kn&&(s.bumpScale.value*=-1)),r.displacementMap&&(s.displacementMap.value=r.displacementMap,s.displacementScale.value=r.displacementScale,s.displacementBias.value=r.displacementBias),r.emissiveMap&&(s.emissiveMap.value=r.emissiveMap),r.normalMap&&(s.normalMap.value=r.normalMap,s.normalScale.value.copy(r.normalScale),r.side===Kn&&s.normalScale.value.negate()),r.specularMap&&(s.specularMap.value=r.specularMap),r.alphaTest>0&&(s.alphaTest.value=r.alphaTest);const t=e.get(r).envMap;if(t&&(s.envMap.value=t,s.flipEnvMap.value=t.isCubeTexture&&t.isRenderTargetTexture===!1?-1:1,s.reflectivity.value=r.reflectivity,s.ior.value=r.ior,s.refractionRatio.value=r.refractionRatio),r.lightMap){s.lightMap.value=r.lightMap;const v=C.physicallyCorrectLights!==!0?Math.PI:1;s.lightMapIntensity.value=r.lightMapIntensity*v}r.aoMap&&(s.aoMap.value=r.aoMap,s.aoMapIntensity.value=r.aoMapIntensity);let c;r.map?c=r.map:r.specularMap?c=r.specularMap:r.displacementMap?c=r.displacementMap:r.normalMap?c=r.normalMap:r.bumpMap?c=r.bumpMap:r.roughnessMap?c=r.roughnessMap:r.metalnessMap?c=r.metalnessMap:r.alphaMap?c=r.alphaMap:r.emissiveMap?c=r.emissiveMap:r.clearcoatMap?c=r.clearcoatMap:r.clearcoatNormalMap?c=r.clearcoatNormalMap:r.clearcoatRoughnessMap?c=r.clearcoatRoughnessMap:r.iridescenceMap?c=r.iridescenceMap:r.iridescenceThicknessMap?c=r.iridescenceThicknessMap:r.specularIntensityMap?c=r.specularIntensityMap:r.specularColorMap?c=r.specularColorMap:r.transmissionMap?c=r.transmissionMap:r.thicknessMap?c=r.thicknessMap:r.sheenColorMap?c=r.sheenColorMap:r.sheenRoughnessMap&&(c=r.sheenRoughnessMap),c!==void 0&&(c.isWebGLRenderTarget&&(c=c.texture),c.matrixAutoUpdate===!0&&c.updateMatrix(),s.uvTransform.value.copy(c.matrix));let m;r.aoMap?m=r.aoMap:r.lightMap&&(m=r.lightMap),m!==void 0&&(m.isWebGLRenderTarget&&(m=m.texture),m.matrixAutoUpdate===!0&&m.updateMatrix(),s.uv2Transform.value.copy(m.matrix))}function h(s,r){s.diffuse.value.copy(r.color),s.opacity.value=r.opacity}function _(s,r){s.dashSize.value=r.dashSize,s.totalSize.value=r.dashSize+r.gapSize,s.scale.value=r.scale}function g(s,r,t,c){s.diffuse.value.copy(r.color),s.opacity.value=r.opacity,s.size.value=r.size*t,s.scale.value=c*.5,r.map&&(s.map.value=r.map),r.alphaMap&&(s.alphaMap.value=r.alphaMap),r.alphaTest>0&&(s.alphaTest.value=r.alphaTest);let m;r.map?m=r.map:r.alphaMap&&(m=r.alphaMap),m!==void 0&&(m.matrixAutoUpdate===!0&&m.updateMatrix(),s.uvTransform.value.copy(m.matrix))}function u(s,r){s.diffuse.value.copy(r.color),s.opacity.value=r.opacity,s.rotation.value=r.rotation,r.map&&(s.map.value=r.map),r.alphaMap&&(s.alphaMap.value=r.alphaMap),r.alphaTest>0&&(s.alphaTest.value=r.alphaTest);let t;r.map?t=r.map:r.alphaMap&&(t=r.alphaMap),t!==void 0&&(t.matrixAutoUpdate===!0&&t.updateMatrix(),s.uvTransform.value.copy(t.matrix))}function f(s,r){s.specular.value.copy(r.specular),s.shininess.value=Math.max(r.shininess,1e-4)}function M(s,r){r.gradientMap&&(s.gradientMap.value=r.gradientMap)}function a(s,r){s.roughness.value=r.roughness,s.metalness.value=r.metalness,r.roughnessMap&&(s.roughnessMap.value=r.roughnessMap),r.metalnessMap&&(s.metalnessMap.value=r.metalnessMap),e.get(r).envMap&&(s.envMapIntensity.value=r.envMapIntensity)}function E(s,r,t){s.ior.value=r.ior,r.sheen>0&&(s.sheenColor.value.copy(r.sheenColor).multiplyScalar(r.sheen),s.sheenRoughness.value=r.sheenRoughness,r.sheenColorMap&&(s.sheenColorMap.value=r.sheenColorMap),r.sheenRoughnessMap&&(s.sheenRoughnessMap.value=r.sheenRoughnessMap)),r.clearcoat>0&&(s.clearcoat.value=r.clearcoat,s.clearcoatRoughness.value=r.clearcoatRoughness,r.clearcoatMap&&(s.clearcoatMap.value=r.clearcoatMap),r.clearcoatRoughnessMap&&(s.clearcoatRoughnessMap.value=r.clearcoatRoughnessMap),r.clearcoatNormalMap&&(s.clearcoatNormalScale.value.copy(r.clearcoatNormalScale),s.clearcoatNormalMap.value=r.clearcoatNormalMap,r.side===Kn&&s.clearcoatNormalScale.value.negate())),r.iridescence>0&&(s.iridescence.value=r.iridescence,s.iridescenceIOR.value=r.iridescenceIOR,s.iridescenceThicknessMinimum.value=r.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum.value=r.iridescenceThicknessRange[1],r.iridescenceMap&&(s.iridescenceMap.value=r.iridescenceMap),r.iridescenceThicknessMap&&(s.iridescenceThicknessMap.value=r.iridescenceThicknessMap)),r.transmission>0&&(s.transmission.value=r.transmission,s.transmissionSamplerMap.value=t.texture,s.transmissionSamplerSize.value.set(t.width,t.height),r.transmissionMap&&(s.transmissionMap.value=r.transmissionMap),s.thickness.value=r.thickness,r.thicknessMap&&(s.thicknessMap.value=r.thicknessMap),s.attenuationDistance.value=r.attenuationDistance,s.attenuationColor.value.copy(r.attenuationColor)),s.specularIntensity.value=r.specularIntensity,s.specularColor.value.copy(r.specularColor),r.specularIntensityMap&&(s.specularIntensityMap.value=r.specularIntensityMap),r.specularColorMap&&(s.specularColorMap.value=r.specularColorMap)}function p(s,r){r.matcap&&(s.matcap.value=r.matcap)}function d(s,r){s.referencePosition.value.copy(r.referencePosition),s.nearDistance.value=r.nearDistance,s.farDistance.value=r.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Ug(C,e,n,i){let l={},h={},_=[];const g=n.isWebGL2?C.getParameter(35375):0;function u(c,m){const v=m.program;i.uniformBlockBinding(c,v)}function f(c,m){let v=l[c.id];v===void 0&&(d(c),v=M(c),l[c.id]=v,c.addEventListener("dispose",r));const x=m.program;i.updateUBOMapping(c,x);const w=e.render.frame;h[c.id]!==w&&(E(c),h[c.id]=w)}function M(c){const m=a();c.__bindingPointIndex=m;const v=C.createBuffer(),x=c.__size,w=c.usage;return C.bindBuffer(35345,v),C.bufferData(35345,x,w),C.bindBuffer(35345,null),C.bindBufferBase(35345,m,v),v}function a(){for(let c=0;c<g;c++)if(_.indexOf(c)===-1)return _.push(c),c;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function E(c){const m=l[c.id],v=c.uniforms,x=c.__cache;C.bindBuffer(35345,m);for(let w=0,R=v.length;w<R;w++){const S=v[w];if(p(S,w,x)===!0){const L=S.value,A=S.__offset;typeof L=="number"?(S.__data[0]=L,C.bufferSubData(35345,A,S.__data)):(S.value.isMatrix3?(S.__data[0]=S.value.elements[0],S.__data[1]=S.value.elements[1],S.__data[2]=S.value.elements[2],S.__data[3]=S.value.elements[0],S.__data[4]=S.value.elements[3],S.__data[5]=S.value.elements[4],S.__data[6]=S.value.elements[5],S.__data[7]=S.value.elements[0],S.__data[8]=S.value.elements[6],S.__data[9]=S.value.elements[7],S.__data[10]=S.value.elements[8],S.__data[11]=S.value.elements[0]):L.toArray(S.__data),C.bufferSubData(35345,A,S.__data))}}C.bindBuffer(35345,null)}function p(c,m,v){const x=c.value;if(v[m]===void 0)return typeof x=="number"?v[m]=x:v[m]=x.clone(),!0;if(typeof x=="number"){if(v[m]!==x)return v[m]=x,!0}else{const w=v[m];if(w.equals(x)===!1)return w.copy(x),!0}return!1}function d(c){const m=c.uniforms;let v=0;const x=16;let w=0;for(let R=0,S=m.length;R<S;R++){const L=m[R],A=s(L);if(L.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=v,R>0){w=v%x;const y=x-w;w!==0&&y-A.boundary<0&&(v+=x-w,L.__offset=v)}v+=A.storage}return w=v%x,w>0&&(v+=x-w),c.__size=v,c.__cache={},this}function s(c){const m=c.value,v={boundary:0,storage:0};return typeof m=="number"?(v.boundary=4,v.storage=4):m.isVector2?(v.boundary=8,v.storage=8):m.isVector3||m.isColor?(v.boundary=16,v.storage=12):m.isVector4?(v.boundary=16,v.storage=16):m.isMatrix3?(v.boundary=48,v.storage=48):m.isMatrix4?(v.boundary=64,v.storage=64):m.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",m),v}function r(c){const m=c.target;m.removeEventListener("dispose",r);const v=_.indexOf(m.__bindingPointIndex);_.splice(v,1),C.deleteBuffer(l[m.id]),delete l[m.id],delete h[m.id]}function t(){for(const c in l)C.deleteBuffer(l[c]);_=[],l={},h={}}return{bind:u,update:f,dispose:t}}function $g(){const C=vr("canvas");return C.style.display="block",C}function iu(C={}){this.isWebGLRenderer=!0;const e=C.canvas!==void 0?C.canvas:$g(),n=C.context!==void 0?C.context:null,i=C.depth!==void 0?C.depth:!0,l=C.stencil!==void 0?C.stencil:!0,h=C.antialias!==void 0?C.antialias:!1,_=C.premultipliedAlpha!==void 0?C.premultipliedAlpha:!0,g=C.preserveDrawingBuffer!==void 0?C.preserveDrawingBuffer:!1,u=C.powerPreference!==void 0?C.powerPreference:"default",f=C.failIfMajorPerformanceCaveat!==void 0?C.failIfMajorPerformanceCaveat:!1;let M;n!==null?M=n.getContextAttributes().alpha:M=C.alpha!==void 0?C.alpha:!1;let a=null,E=null;const p=[],d=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=rs,this.physicallyCorrectLights=!1,this.toneMapping=Ei,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const s=this;let r=!1,t=0,c=0,m=null,v=-1,x=null;const w=new Ut,R=new Ut;let S=null,L=e.width,A=e.height,y=1,P=null,B=null;const T=new Ut(0,0,L,A),I=new Ut(0,0,L,A);let D=!1;const k=new Ra;let U=!1,G=!1,H=null;const se=new It,ee=new ct,Z=new ce,ne={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function W(){return m===null?y:1}let K=n;function re(Q,fe){for(let Ee=0;Ee<Q.length;Ee++){const ge=Q[Ee],Ce=e.getContext(ge,fe);if(Ce!==null)return Ce}return null}try{const Q={alpha:!0,depth:i,stencil:l,antialias:h,premultipliedAlpha:_,preserveDrawingBuffer:g,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Ca}`),e.addEventListener("webglcontextlost",Qe,!1),e.addEventListener("webglcontextrestored",ft,!1),e.addEventListener("webglcontextcreationerror",Ft,!1),K===null){const fe=["webgl2","webgl","experimental-webgl"];if(s.isWebGL1Renderer===!0&&fe.shift(),K=re(fe,Q),K===null)throw re(fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let oe,de,ue,Be,Ge,ke,_t,wt,it,Vt,Lt,mt,Le,Xe,q,X,he,be,Te,Re,Ue,j,xe,Pe;function We(){oe=new Ym(K),de=new Hm(K,oe,C),oe.init(de),j=new Ng(K,oe,de),ue=new Ig(K,oe,de),Be=new Qm,Ge=new _g,ke=new Fg(K,oe,ue,Ge,de,j,Be),_t=new Xm(s),wt=new qm(s),it=new ud(K,de),xe=new Wm(K,oe,it,de),Vt=new Zm(K,it,Be,xe),Lt=new ip(K,Vt,it,Be),Te=new np(K,de,ke),X=new zm(Ge),mt=new gg(s,_t,wt,oe,de,xe,X),Le=new kg(s,Ge),Xe=new Eg,q=new yg(oe,de),be=new Gm(s,_t,ue,Lt,M,_),he=new Lg(s,Lt,de),Pe=new Ug(K,Be,de,ue),Re=new Vm(K,oe,Be,de),Ue=new Jm(K,oe,Be,de),Be.programs=mt.programs,s.capabilities=de,s.extensions=oe,s.properties=Ge,s.renderLists=Xe,s.shadowMap=he,s.state=ue,s.info=Be}We();const $e=new Bg(s,K);this.xr=$e,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const Q=oe.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=oe.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return y},this.setPixelRatio=function(Q){Q!==void 0&&(y=Q,this.setSize(L,A,!1))},this.getSize=function(Q){return Q.set(L,A)},this.setSize=function(Q,fe,Ee){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=Q,A=fe,e.width=Math.floor(Q*y),e.height=Math.floor(fe*y),Ee!==!1&&(e.style.width=Q+"px",e.style.height=fe+"px"),this.setViewport(0,0,Q,fe)},this.getDrawingBufferSize=function(Q){return Q.set(L*y,A*y).floor()},this.setDrawingBufferSize=function(Q,fe,Ee){L=Q,A=fe,y=Ee,e.width=Math.floor(Q*Ee),e.height=Math.floor(fe*Ee),this.setViewport(0,0,Q,fe)},this.getCurrentViewport=function(Q){return Q.copy(w)},this.getViewport=function(Q){return Q.copy(T)},this.setViewport=function(Q,fe,Ee,ge){Q.isVector4?T.set(Q.x,Q.y,Q.z,Q.w):T.set(Q,fe,Ee,ge),ue.viewport(w.copy(T).multiplyScalar(y).floor())},this.getScissor=function(Q){return Q.copy(I)},this.setScissor=function(Q,fe,Ee,ge){Q.isVector4?I.set(Q.x,Q.y,Q.z,Q.w):I.set(Q,fe,Ee,ge),ue.scissor(R.copy(I).multiplyScalar(y).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(Q){ue.setScissorTest(D=Q)},this.setOpaqueSort=function(Q){P=Q},this.setTransparentSort=function(Q){B=Q},this.getClearColor=function(Q){return Q.copy(be.getClearColor())},this.setClearColor=function(){be.setClearColor.apply(be,arguments)},this.getClearAlpha=function(){return be.getClearAlpha()},this.setClearAlpha=function(){be.setClearAlpha.apply(be,arguments)},this.clear=function(Q=!0,fe=!0,Ee=!0){let ge=0;Q&&(ge|=16384),fe&&(ge|=256),Ee&&(ge|=1024),K.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Qe,!1),e.removeEventListener("webglcontextrestored",ft,!1),e.removeEventListener("webglcontextcreationerror",Ft,!1),Xe.dispose(),q.dispose(),Ge.dispose(),_t.dispose(),wt.dispose(),Lt.dispose(),xe.dispose(),Pe.dispose(),mt.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",st),$e.removeEventListener("sessionend",Dt),H&&(H.dispose(),H=null),pt.stop()};function Qe(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),r=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),r=!1;const Q=Be.autoReset,fe=he.enabled,Ee=he.autoUpdate,ge=he.needsUpdate,Ce=he.type;We(),Be.autoReset=Q,he.enabled=fe,he.autoUpdate=Ee,he.needsUpdate=ge,he.type=Ce}function Ft(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function le(Q){const fe=Q.target;fe.removeEventListener("dispose",le),Oe(fe)}function Oe(Q){Se(Q),Ge.remove(Q)}function Se(Q){const fe=Ge.get(Q).programs;fe!==void 0&&(fe.forEach(function(Ee){mt.releaseProgram(Ee)}),Q.isShaderMaterial&&mt.releaseShaderCache(Q))}this.renderBufferDirect=function(Q,fe,Ee,ge,Ce,Ze){fe===null&&(fe=ne);const at=Ce.isMesh&&Ce.matrixWorld.determinant()<0,tt=Zs(Q,fe,Ee,ge,Ce);ue.setMaterial(ge,at);let ut=Ee.index;const Mt=Ee.attributes.position;if(ut===null){if(Mt===void 0||Mt.count===0)return}else if(ut.count===0)return;let bt=1;ge.wireframe===!0&&(ut=Vt.getWireframeAttribute(Ee),bt=2),xe.setup(Ce,ge,tt,Ee,ut);let yt,$t=Re;ut!==null&&(yt=it.get(ut),$t=Ue,$t.setIndex(yt));const Bn=ut!==null?ut.count:Mt.count,Yn=Ee.drawRange.start*bt,Zn=Ee.drawRange.count*bt,bn=Ze!==null?Ze.start*bt:0,Tt=Ze!==null?Ze.count*bt:1/0,fn=Math.max(Yn,bn),xt=Math.min(Bn,Yn+Zn,bn+Tt)-1,Zt=Math.max(0,xt-fn+1);if(Zt!==0){if(Ce.isMesh)ge.wireframe===!0?(ue.setLineWidth(ge.wireframeLinewidth*W()),$t.setMode(1)):$t.setMode(4);else if(Ce.isLine){let wn=ge.linewidth;wn===void 0&&(wn=1),ue.setLineWidth(wn*W()),Ce.isLineSegments?$t.setMode(1):Ce.isLineLoop?$t.setMode(2):$t.setMode(3)}else Ce.isPoints?$t.setMode(0):Ce.isSprite&&$t.setMode(4);if(Ce.isInstancedMesh)$t.renderInstances(fn,Zt,Ce.count);else if(Ee.isInstancedBufferGeometry){const wn=Math.min(Ee.instanceCount,Ee._maxInstanceCount);$t.renderInstances(fn,Zt,wn)}else $t.render(fn,Zt)}},this.compile=function(Q,fe){E=q.get(Q),E.init(),d.push(E),Q.traverseVisible(function(Ee){Ee.isLight&&Ee.layers.test(fe.layers)&&(E.pushLight(Ee),Ee.castShadow&&E.pushShadow(Ee))}),E.setupLights(s.physicallyCorrectLights),Q.traverse(function(Ee){const ge=Ee.material;if(ge)if(Array.isArray(ge))for(let Ce=0;Ce<ge.length;Ce++){const Ze=ge[Ce];bi(Ze,Q,Ee)}else bi(ge,Q,Ee)}),d.pop(),E=null};let ze=null;function Ve(Q){ze&&ze(Q)}function st(){pt.stop()}function Dt(){pt.start()}const pt=new Zc;pt.setAnimationLoop(Ve),typeof self<"u"&&pt.setContext(self),this.setAnimationLoop=function(Q){ze=Q,$e.setAnimationLoop(Q),Q===null?pt.stop():pt.start()},$e.addEventListener("sessionstart",st),$e.addEventListener("sessionend",Dt),this.render=function(Q,fe){if(fe!==void 0&&fe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(r===!0)return;Q.autoUpdate===!0&&Q.updateMatrixWorld(),fe.parent===null&&fe.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(fe),fe=$e.getCamera()),Q.isScene===!0&&Q.onBeforeRender(s,Q,fe,m),E=q.get(Q,d.length),E.init(),d.push(E),se.multiplyMatrices(fe.projectionMatrix,fe.matrixWorldInverse),k.setFromProjectionMatrix(se),G=this.localClippingEnabled,U=X.init(this.clippingPlanes,G,fe),a=Xe.get(Q,p.length),a.init(),p.push(a),an(Q,fe,0,s.sortObjects),a.finish(),s.sortObjects===!0&&a.sort(P,B),U===!0&&X.beginShadows();const Ee=E.state.shadowsArray;if(he.render(Ee,Q,fe),U===!0&&X.endShadows(),this.info.autoReset===!0&&this.info.reset(),be.render(a,Q),E.setupLights(s.physicallyCorrectLights),fe.isArrayCamera){const ge=fe.cameras;for(let Ce=0,Ze=ge.length;Ce<Ze;Ce++){const at=ge[Ce];Ot(a,Q,at,at.viewport)}}else Ot(a,Q,fe);m!==null&&(ke.updateMultisampleRenderTarget(m),ke.updateRenderTargetMipmap(m)),Q.isScene===!0&&Q.onAfterRender(s,Q,fe),xe.resetDefaultState(),v=-1,x=null,d.pop(),d.length>0?E=d[d.length-1]:E=null,p.pop(),p.length>0?a=p[p.length-1]:a=null};function an(Q,fe,Ee,ge){if(Q.visible===!1)return;if(Q.layers.test(fe.layers)){if(Q.isGroup)Ee=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(fe);else if(Q.isLight)E.pushLight(Q),Q.castShadow&&E.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||k.intersectsSprite(Q)){ge&&Z.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(se);const at=Lt.update(Q),tt=Q.material;tt.visible&&a.push(Q,at,tt,Ee,Z.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(Q.isSkinnedMesh&&Q.skeleton.frame!==Be.render.frame&&(Q.skeleton.update(),Q.skeleton.frame=Be.render.frame),!Q.frustumCulled||k.intersectsObject(Q))){ge&&Z.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(se);const at=Lt.update(Q),tt=Q.material;if(Array.isArray(tt)){const ut=at.groups;for(let Mt=0,bt=ut.length;Mt<bt;Mt++){const yt=ut[Mt],$t=tt[yt.materialIndex];$t&&$t.visible&&a.push(Q,at,$t,Ee,Z.z,yt)}}else tt.visible&&a.push(Q,at,tt,Ee,Z.z,null)}}const Ze=Q.children;for(let at=0,tt=Ze.length;at<tt;at++)an(Ze[at],fe,Ee,ge)}function Ot(Q,fe,Ee,ge){const Ce=Q.opaque,Ze=Q.transmissive,at=Q.transparent;E.setupLightsView(Ee),Ze.length>0&&Sn(Ce,fe,Ee),ge&&ue.viewport(w.copy(ge)),Ce.length>0&&nn(Ce,fe,Ee),Ze.length>0&&nn(Ze,fe,Ee),at.length>0&&nn(at,fe,Ee),ue.buffers.depth.setTest(!0),ue.buffers.depth.setMask(!0),ue.buffers.color.setMask(!0),ue.setPolygonOffset(!1)}function Sn(Q,fe,Ee){const ge=de.isWebGL2;H===null&&(H=new os(1,1,{generateMipmaps:!0,type:oe.has("EXT_color_buffer_half_float")?pr:ss,minFilter:Hs,samples:ge&&h===!0?4:0})),s.getDrawingBufferSize(ee),ge?H.setSize(ee.x,ee.y):H.setSize(vo(ee.x),vo(ee.y));const Ce=s.getRenderTarget();s.setRenderTarget(H),s.clear();const Ze=s.toneMapping;s.toneMapping=Ei,nn(Q,fe,Ee),s.toneMapping=Ze,ke.updateMultisampleRenderTarget(H),ke.updateRenderTargetMipmap(H),s.setRenderTarget(Ce)}function nn(Q,fe,Ee){const ge=fe.isScene===!0?fe.overrideMaterial:null;for(let Ce=0,Ze=Q.length;Ce<Ze;Ce++){const at=Q[Ce],tt=at.object,ut=at.geometry,Mt=ge===null?at.material:ge,bt=at.group;tt.layers.test(Ee.layers)&&li(tt,fe,Ee,ut,Mt,bt)}}function li(Q,fe,Ee,ge,Ce,Ze){Q.onBeforeRender(s,fe,Ee,ge,Ce,Ze),Q.modelViewMatrix.multiplyMatrices(Ee.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),Ce.onBeforeRender(s,fe,Ee,ge,Q,Ze),Ce.transparent===!0&&Ce.side===Gi?(Ce.side=Kn,Ce.needsUpdate=!0,s.renderBufferDirect(Ee,fe,ge,Ce,Q,Ze),Ce.side=Ds,Ce.needsUpdate=!0,s.renderBufferDirect(Ee,fe,ge,Ce,Q,Ze),Ce.side=Gi):s.renderBufferDirect(Ee,fe,ge,Ce,Q,Ze),Q.onAfterRender(s,fe,Ee,ge,Ce,Ze)}function bi(Q,fe,Ee){fe.isScene!==!0&&(fe=ne);const ge=Ge.get(Q),Ce=E.state.lights,Ze=E.state.shadowsArray,at=Ce.state.version,tt=mt.getParameters(Q,Ce.state,Ze,fe,Ee),ut=mt.getProgramCacheKey(tt);let Mt=ge.programs;ge.environment=Q.isMeshStandardMaterial?fe.environment:null,ge.fog=fe.fog,ge.envMap=(Q.isMeshStandardMaterial?wt:_t).get(Q.envMap||ge.environment),Mt===void 0&&(Q.addEventListener("dispose",le),Mt=new Map,ge.programs=Mt);let bt=Mt.get(ut);if(bt!==void 0){if(ge.currentProgram===bt&&ge.lightsStateVersion===at)return hs(Q,tt),bt}else tt.uniforms=mt.getUniforms(Q),Q.onBuild(Ee,tt,s),Q.onBeforeCompile(tt,s),bt=mt.acquireProgram(tt,ut),Mt.set(ut,bt),ge.uniforms=tt.uniforms;const yt=ge.uniforms;(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(yt.clippingPlanes=X.uniform),hs(Q,tt),ge.needsLights=Js(Q),ge.lightsStateVersion=at,ge.needsLights&&(yt.ambientLightColor.value=Ce.state.ambient,yt.lightProbe.value=Ce.state.probe,yt.directionalLights.value=Ce.state.directional,yt.directionalLightShadows.value=Ce.state.directionalShadow,yt.spotLights.value=Ce.state.spot,yt.spotLightShadows.value=Ce.state.spotShadow,yt.rectAreaLights.value=Ce.state.rectArea,yt.ltc_1.value=Ce.state.rectAreaLTC1,yt.ltc_2.value=Ce.state.rectAreaLTC2,yt.pointLights.value=Ce.state.point,yt.pointLightShadows.value=Ce.state.pointShadow,yt.hemisphereLights.value=Ce.state.hemi,yt.directionalShadowMap.value=Ce.state.directionalShadowMap,yt.directionalShadowMatrix.value=Ce.state.directionalShadowMatrix,yt.spotShadowMap.value=Ce.state.spotShadowMap,yt.spotShadowMatrix.value=Ce.state.spotShadowMatrix,yt.pointShadowMap.value=Ce.state.pointShadowMap,yt.pointShadowMatrix.value=Ce.state.pointShadowMatrix);const $t=bt.getUniforms(),Bn=go.seqWithValue($t.seq,yt);return ge.currentProgram=bt,ge.uniformsList=Bn,bt}function hs(Q,fe){const Ee=Ge.get(Q);Ee.outputEncoding=fe.outputEncoding,Ee.instancing=fe.instancing,Ee.skinning=fe.skinning,Ee.morphTargets=fe.morphTargets,Ee.morphNormals=fe.morphNormals,Ee.morphColors=fe.morphColors,Ee.morphTargetsCount=fe.morphTargetsCount,Ee.numClippingPlanes=fe.numClippingPlanes,Ee.numIntersection=fe.numClipIntersection,Ee.vertexAlphas=fe.vertexAlphas,Ee.vertexTangents=fe.vertexTangents,Ee.toneMapping=fe.toneMapping}function Zs(Q,fe,Ee,ge,Ce){fe.isScene!==!0&&(fe=ne),ke.resetTextureUnits();const Ze=fe.fog,at=ge.isMeshStandardMaterial?fe.environment:null,tt=m===null?s.outputEncoding:m.isXRRenderTarget===!0?m.texture.encoding:rs,ut=(ge.isMeshStandardMaterial?wt:_t).get(ge.envMap||at),Mt=ge.vertexColors===!0&&!!Ee.attributes.color&&Ee.attributes.color.itemSize===4,bt=!!ge.normalMap&&!!Ee.attributes.tangent,yt=!!Ee.morphAttributes.position,$t=!!Ee.morphAttributes.normal,Bn=!!Ee.morphAttributes.color,Yn=ge.toneMapped?s.toneMapping:Ei,Zn=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,bn=Zn!==void 0?Zn.length:0,Tt=Ge.get(ge),fn=E.state.lights;if(U===!0&&(G===!0||Q!==x)){const en=Q===x&&ge.id===v;X.setState(ge,Q,en)}let xt=!1;ge.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==fn.state.version||Tt.outputEncoding!==tt||Ce.isInstancedMesh&&Tt.instancing===!1||!Ce.isInstancedMesh&&Tt.instancing===!0||Ce.isSkinnedMesh&&Tt.skinning===!1||!Ce.isSkinnedMesh&&Tt.skinning===!0||Tt.envMap!==ut||ge.fog===!0&&Tt.fog!==Ze||Tt.numClippingPlanes!==void 0&&(Tt.numClippingPlanes!==X.numPlanes||Tt.numIntersection!==X.numIntersection)||Tt.vertexAlphas!==Mt||Tt.vertexTangents!==bt||Tt.morphTargets!==yt||Tt.morphNormals!==$t||Tt.morphColors!==Bn||Tt.toneMapping!==Yn||de.isWebGL2===!0&&Tt.morphTargetsCount!==bn)&&(xt=!0):(xt=!0,Tt.__version=ge.version);let Zt=Tt.currentProgram;xt===!0&&(Zt=bi(ge,fe,Ce));let wn=!1,Jn=!1,Ai=!1;const ht=Zt.getUniforms(),Ht=Tt.uniforms;if(ue.useProgram(Zt.program)&&(wn=!0,Jn=!0,Ai=!0),ge.id!==v&&(v=ge.id,Jn=!0),wn||x!==Q){if(ht.setValue(K,"projectionMatrix",Q.projectionMatrix),de.logarithmicDepthBuffer&&ht.setValue(K,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),x!==Q&&(x=Q,Jn=!0,Ai=!0),ge.isShaderMaterial||ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshStandardMaterial||ge.envMap){const en=ht.map.cameraPosition;en!==void 0&&en.setValue(K,Z.setFromMatrixPosition(Q.matrixWorld))}(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&ht.setValue(K,"isOrthographic",Q.isOrthographicCamera===!0),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial||ge.isShadowMaterial||Ce.isSkinnedMesh)&&ht.setValue(K,"viewMatrix",Q.matrixWorldInverse)}if(Ce.isSkinnedMesh){ht.setOptional(K,Ce,"bindMatrix"),ht.setOptional(K,Ce,"bindMatrixInverse");const en=Ce.skeleton;en&&(de.floatVertexTextures?(en.boneTexture===null&&en.computeBoneTexture(),ht.setValue(K,"boneTexture",en.boneTexture,ke),ht.setValue(K,"boneTextureSize",en.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ci=Ee.morphAttributes;if((ci.position!==void 0||ci.normal!==void 0||ci.color!==void 0&&de.isWebGL2===!0)&&Te.update(Ce,Ee,ge,Zt),(Jn||Tt.receiveShadow!==Ce.receiveShadow)&&(Tt.receiveShadow=Ce.receiveShadow,ht.setValue(K,"receiveShadow",Ce.receiveShadow)),Jn&&(ht.setValue(K,"toneMappingExposure",s.toneMappingExposure),Tt.needsLights&&In(Ht,Ai),Ze&&ge.fog===!0&&Le.refreshFogUniforms(Ht,Ze),Le.refreshMaterialUniforms(Ht,ge,y,A,H),go.upload(K,Tt.uniformsList,Ht,ke)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(go.upload(K,Tt.uniformsList,Ht,ke),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&ht.setValue(K,"center",Ce.center),ht.setValue(K,"modelViewMatrix",Ce.modelViewMatrix),ht.setValue(K,"normalMatrix",Ce.normalMatrix),ht.setValue(K,"modelMatrix",Ce.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const en=ge.uniformsGroups;for(let sn=0,ds=en.length;sn<ds;sn++)if(de.isWebGL2){const O=en[sn];Pe.update(O,Zt),Pe.bind(O,Zt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Zt}function In(Q,fe){Q.ambientLightColor.needsUpdate=fe,Q.lightProbe.needsUpdate=fe,Q.directionalLights.needsUpdate=fe,Q.directionalLightShadows.needsUpdate=fe,Q.pointLights.needsUpdate=fe,Q.pointLightShadows.needsUpdate=fe,Q.spotLights.needsUpdate=fe,Q.spotLightShadows.needsUpdate=fe,Q.rectAreaLights.needsUpdate=fe,Q.hemisphereLights.needsUpdate=fe}function Js(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.getActiveCubeFace=function(){return t},this.getActiveMipmapLevel=function(){return c},this.getRenderTarget=function(){return m},this.setRenderTargetTextures=function(Q,fe,Ee){Ge.get(Q.texture).__webglTexture=fe,Ge.get(Q.depthTexture).__webglTexture=Ee;const ge=Ge.get(Q);ge.__hasExternalTextures=!0,ge.__hasExternalTextures&&(ge.__autoAllocateDepthBuffer=Ee===void 0,ge.__autoAllocateDepthBuffer||oe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Q,fe){const Ee=Ge.get(Q);Ee.__webglFramebuffer=fe,Ee.__useDefaultFramebuffer=fe===void 0},this.setRenderTarget=function(Q,fe=0,Ee=0){m=Q,t=fe,c=Ee;let ge=!0;if(Q){const ut=Ge.get(Q);ut.__useDefaultFramebuffer!==void 0?(ue.bindFramebuffer(36160,null),ge=!1):ut.__webglFramebuffer===void 0?ke.setupRenderTarget(Q):ut.__hasExternalTextures&&ke.rebindTextures(Q,Ge.get(Q.texture).__webglTexture,Ge.get(Q.depthTexture).__webglTexture)}let Ce=null,Ze=!1,at=!1;if(Q){const ut=Q.texture;(ut.isData3DTexture||ut.isDataArrayTexture)&&(at=!0);const Mt=Ge.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Ce=Mt[fe],Ze=!0):de.isWebGL2&&Q.samples>0&&ke.useMultisampledRTT(Q)===!1?Ce=Ge.get(Q).__webglMultisampledFramebuffer:Ce=Mt,w.copy(Q.viewport),R.copy(Q.scissor),S=Q.scissorTest}else w.copy(T).multiplyScalar(y).floor(),R.copy(I).multiplyScalar(y).floor(),S=D;if(ue.bindFramebuffer(36160,Ce)&&de.drawBuffers&&ge&&ue.drawBuffers(Q,Ce),ue.viewport(w),ue.scissor(R),ue.setScissorTest(S),Ze){const ut=Ge.get(Q.texture);K.framebufferTexture2D(36160,36064,34069+fe,ut.__webglTexture,Ee)}else if(at){const ut=Ge.get(Q.texture),Mt=fe||0;K.framebufferTextureLayer(36160,36064,ut.__webglTexture,Ee||0,Mt)}v=-1},this.readRenderTargetPixels=function(Q,fe,Ee,ge,Ce,Ze,at){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let tt=Ge.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&at!==void 0&&(tt=tt[at]),tt){ue.bindFramebuffer(36160,tt);try{const ut=Q.texture,Mt=ut.format,bt=ut.type;if(Mt!==Xn&&j.convert(Mt)!==K.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const yt=bt===pr&&(oe.has("EXT_color_buffer_half_float")||de.isWebGL2&&oe.has("EXT_color_buffer_float"));if(bt!==ss&&j.convert(bt)!==K.getParameter(35738)&&!(bt===Ui&&(de.isWebGL2||oe.has("OES_texture_float")||oe.has("WEBGL_color_buffer_float")))&&!yt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}fe>=0&&fe<=Q.width-ge&&Ee>=0&&Ee<=Q.height-Ce&&K.readPixels(fe,Ee,ge,Ce,j.convert(Mt),j.convert(bt),Ze)}finally{const ut=m!==null?Ge.get(m).__webglFramebuffer:null;ue.bindFramebuffer(36160,ut)}}},this.copyFramebufferToTexture=function(Q,fe,Ee=0){const ge=Math.pow(2,-Ee),Ce=Math.floor(fe.image.width*ge),Ze=Math.floor(fe.image.height*ge);ke.setTexture2D(fe,0),K.copyTexSubImage2D(3553,Ee,0,0,Q.x,Q.y,Ce,Ze),ue.unbindTexture()},this.copyTextureToTexture=function(Q,fe,Ee,ge=0){const Ce=fe.image.width,Ze=fe.image.height,at=j.convert(Ee.format),tt=j.convert(Ee.type);ke.setTexture2D(Ee,0),K.pixelStorei(37440,Ee.flipY),K.pixelStorei(37441,Ee.premultiplyAlpha),K.pixelStorei(3317,Ee.unpackAlignment),fe.isDataTexture?K.texSubImage2D(3553,ge,Q.x,Q.y,Ce,Ze,at,tt,fe.image.data):fe.isCompressedTexture?K.compressedTexSubImage2D(3553,ge,Q.x,Q.y,fe.mipmaps[0].width,fe.mipmaps[0].height,at,fe.mipmaps[0].data):K.texSubImage2D(3553,ge,Q.x,Q.y,at,tt,fe.image),ge===0&&Ee.generateMipmaps&&K.generateMipmap(3553),ue.unbindTexture()},this.copyTextureToTexture3D=function(Q,fe,Ee,ge,Ce=0){if(s.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ze=Q.max.x-Q.min.x+1,at=Q.max.y-Q.min.y+1,tt=Q.max.z-Q.min.z+1,ut=j.convert(ge.format),Mt=j.convert(ge.type);let bt;if(ge.isData3DTexture)ke.setTexture3D(ge,0),bt=32879;else if(ge.isDataArrayTexture)ke.setTexture2DArray(ge,0),bt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(37440,ge.flipY),K.pixelStorei(37441,ge.premultiplyAlpha),K.pixelStorei(3317,ge.unpackAlignment);const yt=K.getParameter(3314),$t=K.getParameter(32878),Bn=K.getParameter(3316),Yn=K.getParameter(3315),Zn=K.getParameter(32877),bn=Ee.isCompressedTexture?Ee.mipmaps[0]:Ee.image;K.pixelStorei(3314,bn.width),K.pixelStorei(32878,bn.height),K.pixelStorei(3316,Q.min.x),K.pixelStorei(3315,Q.min.y),K.pixelStorei(32877,Q.min.z),Ee.isDataTexture||Ee.isData3DTexture?K.texSubImage3D(bt,Ce,fe.x,fe.y,fe.z,Ze,at,tt,ut,Mt,bn.data):Ee.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(bt,Ce,fe.x,fe.y,fe.z,Ze,at,tt,ut,bn.data)):K.texSubImage3D(bt,Ce,fe.x,fe.y,fe.z,Ze,at,tt,ut,Mt,bn),K.pixelStorei(3314,yt),K.pixelStorei(32878,$t),K.pixelStorei(3316,Bn),K.pixelStorei(3315,Yn),K.pixelStorei(32877,Zn),Ce===0&&ge.generateMipmaps&&K.generateMipmap(bt),ue.unbindTexture()},this.initTexture=function(Q){Q.isCubeTexture?ke.setTextureCube(Q,0):Q.isData3DTexture?ke.setTexture3D(Q,0):Q.isDataArrayTexture?ke.setTexture2DArray(Q,0):ke.setTexture2D(Q,0),ue.unbindTexture()},this.resetState=function(){t=0,c=0,m=null,ue.reset(),xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Gg extends iu{}Gg.prototype.isWebGL1Renderer=!0;class Wg extends Yt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}class Vg{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=pa,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=jn()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let l=0,h=this.stride;l<h;l++)this.array[e+l]=n.array[i+l];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=jn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=jn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const pn=new ce;class Fa{constructor(e,n,i,l=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=l===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)pn.fromBufferAttribute(this,n),pn.applyMatrix4(e),this.setXYZ(n,pn.x,pn.y,pn.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)pn.fromBufferAttribute(this,n),pn.applyNormalMatrix(e),this.setXYZ(n,pn.x,pn.y,pn.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)pn.fromBufferAttribute(this,n),pn.transformDirection(e),this.setXYZ(n,pn.x,pn.y,pn.z);return this}setX(e,n){return this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,l){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=l,this}setXYZW(e,n,i,l,h){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=l,this.data.array[e+3]=h,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const l=i*this.data.stride+this.offset;for(let h=0;h<this.itemSize;h++)n.push(this.data.array[l+h])}return new _n(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Fa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const l=i*this.data.stride+this.offset;for(let h=0;h<this.itemSize;h++)n.push(this.data.array[l+h])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const ic=new ce,sc=new Ut,rc=new Ut,Hg=new ce,oc=new It;class zg extends si{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new It,this.bindMatrixInverse=new It}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ut,n=this.geometry.attributes.skinWeight;for(let i=0,l=n.count;i<l;i++){e.fromBufferAttribute(n,i);const h=1/e.manhattanLength();h!==1/0?e.multiplyScalar(h):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const i=this.skeleton,l=this.geometry;sc.fromBufferAttribute(l.attributes.skinIndex,e),rc.fromBufferAttribute(l.attributes.skinWeight,e),ic.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let h=0;h<4;h++){const _=rc.getComponent(h);if(_!==0){const g=sc.getComponent(h);oc.multiplyMatrices(i.bones[g].matrixWorld,i.boneInverses[g]),n.addScaledVector(Hg.copy(ic).applyMatrix4(oc),_)}}return n.applyMatrix4(this.bindMatrixInverse)}}class su extends Yt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xg extends vn{constructor(e=null,n=1,i=1,l,h,_,g,u,f=on,M=on,a,E){super(null,_,g,u,f,M,l,h,a,E),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ac=new It,Kg=new It;class Na{constructor(e=[],n=[]){this.uuid=jn(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,l=this.bones.length;i<l;i++)this.boneInverses.push(new It)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new It;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,l=this.boneTexture;for(let h=0,_=e.length;h<_;h++){const g=e[h]?e[h].matrixWorld:Kg;ac.multiplyMatrices(g,n[h]),ac.toArray(i,h*16)}l!==null&&(l.needsUpdate=!0)}clone(){return new Na(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=$c(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Xg(n,e,e,Xn,Ui);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const l=this.bones[n];if(l.name===e)return l}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,l=e.bones.length;i<l;i++){const h=e.bones[i];let _=n[h];_===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",h),_=new su),this.bones.push(_),this.boneInverses.push(new It().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let l=0,h=n.length;l<h;l++){const _=n[l];e.bones.push(_.uuid);const g=i[l];e.boneInverses.push(g.toArray())}return e}}class ru extends oi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new dt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const lc=new ce,cc=new ce,uc=new It,sa=new Ta,uo=new Xs;class Pa extends Yt{constructor(e=new qn,n=new ru){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let l=1,h=n.count;l<h;l++)lc.fromBufferAttribute(n,l-1),cc.fromBufferAttribute(n,l),i[l]=i[l-1],i[l]+=lc.distanceTo(cc);e.setAttribute("lineDistance",new xi(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,l=this.matrixWorld,h=e.params.Line.threshold,_=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),uo.copy(i.boundingSphere),uo.applyMatrix4(l),uo.radius+=h,e.ray.intersectsSphere(uo)===!1)return;uc.copy(l).invert(),sa.copy(e.ray).applyMatrix4(uc);const g=h/((this.scale.x+this.scale.y+this.scale.z)/3),u=g*g,f=new ce,M=new ce,a=new ce,E=new ce,p=this.isLineSegments?2:1,d=i.index,r=i.attributes.position;if(d!==null){const t=Math.max(0,_.start),c=Math.min(d.count,_.start+_.count);for(let m=t,v=c-1;m<v;m+=p){const x=d.getX(m),w=d.getX(m+1);if(f.fromBufferAttribute(r,x),M.fromBufferAttribute(r,w),sa.distanceSqToSegment(f,M,E,a)>u)continue;E.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(E);S<e.near||S>e.far||n.push({distance:S,point:a.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else{const t=Math.max(0,_.start),c=Math.min(r.count,_.start+_.count);for(let m=t,v=c-1;m<v;m+=p){if(f.fromBufferAttribute(r,m),M.fromBufferAttribute(r,m+1),sa.distanceSqToSegment(f,M,E,a)>u)continue;E.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(E);w<e.near||w>e.far||n.push({distance:w,point:a.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const l=n[i[0]];if(l!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,_=l.length;h<_;h++){const g=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=h}}}}}const hc=new ce,dc=new ce;class jg extends Pa{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let l=0,h=n.count;l<h;l+=2)hc.fromBufferAttribute(n,l),dc.fromBufferAttribute(n,l+1),i[l]=l===0?0:i[l-1],i[l+1]=i[l]+hc.distanceTo(dc);e.setAttribute("lineDistance",new xi(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class qg extends Pa{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class ou extends oi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new dt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const fc=new It,Ea=new Ta,ho=new Xs,fo=new ce;class Yg extends Yt{constructor(e=new qn,n=new ou){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,l=this.matrixWorld,h=e.params.Points.threshold,_=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ho.copy(i.boundingSphere),ho.applyMatrix4(l),ho.radius+=h,e.ray.intersectsSphere(ho)===!1)return;fc.copy(l).invert(),Ea.copy(e.ray).applyMatrix4(fc);const g=h/((this.scale.x+this.scale.y+this.scale.z)/3),u=g*g,f=i.index,a=i.attributes.position;if(f!==null){const E=Math.max(0,_.start),p=Math.min(f.count,_.start+_.count);for(let d=E,s=p;d<s;d++){const r=f.getX(d);fo.fromBufferAttribute(a,r),mc(fo,r,u,l,e,n,this)}}else{const E=Math.max(0,_.start),p=Math.min(a.count,_.start+_.count);for(let d=E,s=p;d<s;d++)fo.fromBufferAttribute(a,d),mc(fo,d,u,l,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const l=n[i[0]];if(l!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,_=l.length;h<_;h++){const g=l[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=h}}}}}function mc(C,e,n,i,l,h,_){const g=Ea.distanceSqToPoint(C);if(g<n){const u=new ce;Ea.closestPointToPoint(C,u),u.applyMatrix4(i);const f=l.ray.origin.distanceTo(u);if(f<l.near||f>l.far)return;h.push({distance:f,distanceToRay:Math.sqrt(g),point:u,index:e,face:null,object:_})}}class bo extends oi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new dt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ya,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class us extends bo{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ct(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return dn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new dt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new dt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new dt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function Bi(C,e,n){return au(C)?new C.constructor(C.subarray(e,n!==void 0?n:C.length)):C.slice(e,n)}function mo(C,e,n){return!C||!n&&C.constructor===e?C:typeof e.BYTES_PER_ELEMENT=="number"?new e(C):Array.prototype.slice.call(C)}function au(C){return ArrayBuffer.isView(C)&&!(C instanceof DataView)}function Zg(C){function e(l,h){return C[l]-C[h]}const n=C.length,i=new Array(n);for(let l=0;l!==n;++l)i[l]=l;return i.sort(e),i}function pc(C,e,n){const i=C.length,l=new C.constructor(i);for(let h=0,_=0;_!==i;++h){const g=n[h]*e;for(let u=0;u!==e;++u)l[_++]=C[g+u]}return l}function lu(C,e,n,i){let l=1,h=C[0];for(;h!==void 0&&h[i]===void 0;)h=C[l++];if(h===void 0)return;let _=h[i];if(_!==void 0)if(Array.isArray(_))do _=h[i],_!==void 0&&(e.push(h.time),n.push.apply(n,_)),h=C[l++];while(h!==void 0);else if(_.toArray!==void 0)do _=h[i],_!==void 0&&(e.push(h.time),_.toArray(n,n.length)),h=C[l++];while(h!==void 0);else do _=h[i],_!==void 0&&(e.push(h.time),n.push(_)),h=C[l++];while(h!==void 0)}class Cr{constructor(e,n,i,l){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=l!==void 0?l:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,l=n[i],h=n[i-1];e:{t:{let _;n:{i:if(!(e<l)){for(let g=i+2;;){if(l===void 0){if(e<h)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===g)break;if(h=l,l=n[++i],e<l)break t}_=n.length;break n}if(!(e>=h)){const g=n[1];e<g&&(i=2,h=g);for(let u=i-2;;){if(h===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(l=h,h=n[--i-1],e>=h)break t}_=i,i=0;break n}break e}for(;i<_;){const g=i+_>>>1;e<n[g]?_=g:i=g+1}if(l=n[i],h=n[i-1],h===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(l===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,h,l)}return this.interpolate_(i,h,e,l)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,l=this.valueSize,h=e*l;for(let _=0;_!==l;++_)n[_]=i[h+_];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Jg extends Cr{constructor(e,n,i,l){super(e,n,i,l),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:El,endingEnd:El}}intervalChanged_(e,n,i){const l=this.parameterPositions;let h=e-2,_=e+1,g=l[h],u=l[_];if(g===void 0)switch(this.getSettings_().endingStart){case xl:h=e,g=2*n-i;break;case Sl:h=l.length-2,g=n+l[h]-l[h+1];break;default:h=e,g=i}if(u===void 0)switch(this.getSettings_().endingEnd){case xl:_=e,u=2*i-n;break;case Sl:_=1,u=i+l[1]-l[0];break;default:_=e-1,u=n}const f=(i-n)*.5,M=this.valueSize;this._weightPrev=f/(n-g),this._weightNext=f/(u-i),this._offsetPrev=h*M,this._offsetNext=_*M}interpolate_(e,n,i,l){const h=this.resultBuffer,_=this.sampleValues,g=this.valueSize,u=e*g,f=u-g,M=this._offsetPrev,a=this._offsetNext,E=this._weightPrev,p=this._weightNext,d=(i-n)/(l-n),s=d*d,r=s*d,t=-E*r+2*E*s-E*d,c=(1+E)*r+(-1.5-2*E)*s+(-.5+E)*d+1,m=(-1-p)*r+(1.5+p)*s+.5*d,v=p*r-p*s;for(let x=0;x!==g;++x)h[x]=t*_[M+x]+c*_[f+x]+m*_[u+x]+v*_[a+x];return h}}class Qg extends Cr{constructor(e,n,i,l){super(e,n,i,l)}interpolate_(e,n,i,l){const h=this.resultBuffer,_=this.sampleValues,g=this.valueSize,u=e*g,f=u-g,M=(i-n)/(l-n),a=1-M;for(let E=0;E!==g;++E)h[E]=_[f+E]*a+_[u+E]*M;return h}}class e_ extends Cr{constructor(e,n,i,l){super(e,n,i,l)}interpolate_(e){return this.copySampleValue_(e-1)}}class ai{constructor(e,n,i,l){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mo(n,this.TimeBufferType),this.values=mo(i,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:mo(e.times,Array),values:mo(e.values,Array)};const l=e.getInterpolation();l!==e.DefaultInterpolation&&(i.interpolation=l)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new e_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Qg(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Jg(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case gr:n=this.InterpolantFactoryMethodDiscrete;break;case $s:n=this.InterpolantFactoryMethodLinear;break;case Lo:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gr;case this.InterpolantFactoryMethodLinear:return $s;case this.InterpolantFactoryMethodSmooth:return Lo}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,l=n.length;i!==l;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,l=n.length;i!==l;++i)n[i]*=e}return this}trim(e,n){const i=this.times,l=i.length;let h=0,_=l-1;for(;h!==l&&i[h]<e;)++h;for(;_!==-1&&i[_]>n;)--_;if(++_,h!==0||_!==l){h>=_&&(_=Math.max(_,1),h=_-1);const g=this.getValueSize();this.times=Bi(i,h,_),this.values=Bi(this.values,h*g,_*g)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,l=this.values,h=i.length;h===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let _=null;for(let g=0;g!==h;g++){const u=i[g];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,u),e=!1;break}if(_!==null&&_>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,u,_),e=!1;break}_=u}if(l!==void 0&&au(l))for(let g=0,u=l.length;g!==u;++g){const f=l[g];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,f),e=!1;break}}return e}optimize(){const e=Bi(this.times),n=Bi(this.values),i=this.getValueSize(),l=this.getInterpolation()===Lo,h=e.length-1;let _=1;for(let g=1;g<h;++g){let u=!1;const f=e[g],M=e[g+1];if(f!==M&&(g!==1||f!==e[0]))if(l)u=!0;else{const a=g*i,E=a-i,p=a+i;for(let d=0;d!==i;++d){const s=n[a+d];if(s!==n[E+d]||s!==n[p+d]){u=!0;break}}}if(u){if(g!==_){e[_]=e[g];const a=g*i,E=_*i;for(let p=0;p!==i;++p)n[E+p]=n[a+p]}++_}}if(h>0){e[_]=e[h];for(let g=h*i,u=_*i,f=0;f!==i;++f)n[u+f]=n[g+f];++_}return _!==e.length?(this.times=Bi(e,0,_),this.values=Bi(n,0,_*i)):(this.times=e,this.values=n),this}clone(){const e=Bi(this.times,0),n=Bi(this.values,0),i=this.constructor,l=new i(this.name,e,n);return l.createInterpolant=this.createInterpolant,l}}ai.prototype.TimeBufferType=Float32Array;ai.prototype.ValueBufferType=Float32Array;ai.prototype.DefaultInterpolation=$s;class js extends ai{}js.prototype.ValueTypeName="bool";js.prototype.ValueBufferType=Array;js.prototype.DefaultInterpolation=gr;js.prototype.InterpolantFactoryMethodLinear=void 0;js.prototype.InterpolantFactoryMethodSmooth=void 0;class cu extends ai{}cu.prototype.ValueTypeName="color";class Er extends ai{}Er.prototype.ValueTypeName="number";class t_ extends Cr{constructor(e,n,i,l){super(e,n,i,l)}interpolate_(e,n,i,l){const h=this.resultBuffer,_=this.sampleValues,g=this.valueSize,u=(i-n)/(l-n);let f=e*g;for(let M=f+g;f!==M;f+=4)Si.slerpFlat(h,0,_,f-g,_,f,u);return h}}class ls extends ai{InterpolantFactoryMethodLinear(e){return new t_(this.times,this.values,this.getValueSize(),e)}}ls.prototype.ValueTypeName="quaternion";ls.prototype.DefaultInterpolation=$s;ls.prototype.InterpolantFactoryMethodSmooth=void 0;class qs extends ai{}qs.prototype.ValueTypeName="string";qs.prototype.ValueBufferType=Array;qs.prototype.DefaultInterpolation=gr;qs.prototype.InterpolantFactoryMethodLinear=void 0;qs.prototype.InterpolantFactoryMethodSmooth=void 0;class xr extends ai{}xr.prototype.ValueTypeName="vector";class n_{constructor(e,n=-1,i,l=bh){this.name=e,this.tracks=i,this.duration=n,this.blendMode=l,this.uuid=jn(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,l=1/(e.fps||1);for(let _=0,g=i.length;_!==g;++_)n.push(s_(i[_]).scale(l));const h=new this(e.name,e.duration,n,e.blendMode);return h.uuid=e.uuid,h}static toJSON(e){const n=[],i=e.tracks,l={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let h=0,_=i.length;h!==_;++h)n.push(ai.toJSON(i[h]));return l}static CreateFromMorphTargetSequence(e,n,i,l){const h=n.length,_=[];for(let g=0;g<h;g++){let u=[],f=[];u.push((g+h-1)%h,g,(g+1)%h),f.push(0,1,0);const M=Zg(u);u=pc(u,1,M),f=pc(f,1,M),!l&&u[0]===0&&(u.push(h),f.push(f[0])),_.push(new Er(".morphTargetInfluences["+n[g].name+"]",u,f).scale(1/i))}return new this(e,-1,_)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const l=e;i=l.geometry&&l.geometry.animations||l.animations}for(let l=0;l<i.length;l++)if(i[l].name===n)return i[l];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const l={},h=/^([\w-]*?)([\d]+)$/;for(let g=0,u=e.length;g<u;g++){const f=e[g],M=f.name.match(h);if(M&&M.length>1){const a=M[1];let E=l[a];E||(l[a]=E=[]),E.push(f)}}const _=[];for(const g in l)_.push(this.CreateFromMorphTargetSequence(g,l[g],n,i));return _}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(a,E,p,d,s){if(p.length!==0){const r=[],t=[];lu(p,r,t,d),r.length!==0&&s.push(new a(E,r,t))}},l=[],h=e.name||"default",_=e.fps||30,g=e.blendMode;let u=e.length||-1;const f=e.hierarchy||[];for(let a=0;a<f.length;a++){const E=f[a].keys;if(!(!E||E.length===0))if(E[0].morphTargets){const p={};let d;for(d=0;d<E.length;d++)if(E[d].morphTargets)for(let s=0;s<E[d].morphTargets.length;s++)p[E[d].morphTargets[s]]=-1;for(const s in p){const r=[],t=[];for(let c=0;c!==E[d].morphTargets.length;++c){const m=E[d];r.push(m.time),t.push(m.morphTarget===s?1:0)}l.push(new Er(".morphTargetInfluence["+s+"]",r,t))}u=p.length*_}else{const p=".bones["+n[a].name+"]";i(xr,p+".position",E,"pos",l),i(ls,p+".quaternion",E,"rot",l),i(xr,p+".scale",E,"scl",l)}}return l.length===0?null:new this(h,u,l,g)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,l=e.length;i!==l;++i){const h=this.tracks[i];n=Math.max(n,h.times[h.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function i_(C){switch(C.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Er;case"vector":case"vector2":case"vector3":case"vector4":return xr;case"color":return cu;case"quaternion":return ls;case"bool":case"boolean":return js;case"string":return qs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+C)}function s_(C){if(C.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=i_(C.type);if(C.times===void 0){const n=[],i=[];lu(C.keys,n,i,"value"),C.times=n,C.values=i}return e.parse!==void 0?e.parse(C):new e(C.name,C.times,C.values,C.interpolation)}const Ws={enabled:!1,files:{},add:function(C,e){this.enabled!==!1&&(this.files[C]=e)},get:function(C){if(this.enabled!==!1)return this.files[C]},remove:function(C){delete this.files[C]},clear:function(){this.files={}}};class r_{constructor(e,n,i){const l=this;let h=!1,_=0,g=0,u;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(M){g++,h===!1&&l.onStart!==void 0&&l.onStart(M,_,g),h=!0},this.itemEnd=function(M){_++,l.onProgress!==void 0&&l.onProgress(M,_,g),_===g&&(h=!1,l.onLoad!==void 0&&l.onLoad())},this.itemError=function(M){l.onError!==void 0&&l.onError(M)},this.resolveURL=function(M){return u?u(M):M},this.setURLModifier=function(M){return u=M,this},this.addHandler=function(M,a){return f.push(M,a),this},this.removeHandler=function(M){const a=f.indexOf(M);return a!==-1&&f.splice(a,2),this},this.getHandler=function(M){for(let a=0,E=f.length;a<E;a+=2){const p=f[a],d=f[a+1];if(p.global&&(p.lastIndex=0),p.test(M))return d}return null}}}const o_=new r_;class Ys{constructor(e){this.manager=e!==void 0?e:o_,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(l,h){i.load(e,l,n,h)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const gi={};class a_ extends Error{constructor(e,n){super(e),this.response=n}}class Eo extends Ys{constructor(e){super(e)}load(e,n,i,l){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const h=Ws.get(e);if(h!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(h),this.manager.itemEnd(e)},0),h;if(gi[e]!==void 0){gi[e].push({onLoad:n,onProgress:i,onError:l});return}gi[e]=[],gi[e].push({onLoad:n,onProgress:i,onError:l});const _=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),g=this.mimeType,u=this.responseType;fetch(_).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const M=gi[e],a=f.body.getReader(),E=f.headers.get("Content-Length"),p=E?parseInt(E):0,d=p!==0;let s=0;const r=new ReadableStream({start(t){c();function c(){a.read().then(({done:m,value:v})=>{if(m)t.close();else{s+=v.byteLength;const x=new ProgressEvent("progress",{lengthComputable:d,loaded:s,total:p});for(let w=0,R=M.length;w<R;w++){const S=M[w];S.onProgress&&S.onProgress(x)}t.enqueue(v),c()}})}}});return new Response(r)}else throw new a_(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(M=>new DOMParser().parseFromString(M,g));case"json":return f.json();default:if(g===void 0)return f.text();{const a=/charset="?([^;"\s]*)"?/i.exec(g),E=a&&a[1]?a[1].toLowerCase():void 0,p=new TextDecoder(E);return f.arrayBuffer().then(d=>p.decode(d))}}}).then(f=>{Ws.add(e,f);const M=gi[e];delete gi[e];for(let a=0,E=M.length;a<E;a++){const p=M[a];p.onLoad&&p.onLoad(f)}}).catch(f=>{const M=gi[e];if(M===void 0)throw this.manager.itemError(e),f;delete gi[e];for(let a=0,E=M.length;a<E;a++){const p=M[a];p.onError&&p.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class l_ extends Ys{constructor(e){super(e)}load(e,n,i,l){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const h=this,_=Ws.get(e);if(_!==void 0)return h.manager.itemStart(e),setTimeout(function(){n&&n(_),h.manager.itemEnd(e)},0),_;const g=vr("img");function u(){M(),Ws.add(e,this),n&&n(this),h.manager.itemEnd(e)}function f(a){M(),l&&l(a),h.manager.itemError(e),h.manager.itemEnd(e)}function M(){g.removeEventListener("load",u,!1),g.removeEventListener("error",f,!1)}return g.addEventListener("load",u,!1),g.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(g.crossOrigin=this.crossOrigin),h.manager.itemStart(e),g.src=e,g}}class uu extends Ys{constructor(e){super(e)}load(e,n,i,l){const h=new vn,_=new l_(this.manager);return _.setCrossOrigin(this.crossOrigin),_.setPath(this.path),_.load(e,function(g){h.image=g,h.needsUpdate=!0,n!==void 0&&n(h)},i,l),h}}class Da extends Yt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new dt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}const gc=new It,_c=new ce,vc=new ce;class Oa{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ct(512,512),this.map=null,this.mapPass=null,this.matrix=new It,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ra,this._frameExtents=new ct(1,1),this._viewportCount=1,this._viewports=[new Ut(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;_c.setFromMatrixPosition(e.matrixWorld),n.position.copy(_c),vc.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(vc),n.updateMatrixWorld(),gc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gc),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(n.projectionMatrix),i.multiply(n.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class c_ extends Oa{constructor(){super(new gn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=_r*2*e.angle*this.focus,l=this.mapSize.width/this.mapSize.height,h=e.distance||n.far;(i!==n.fov||l!==n.aspect||h!==n.far)&&(n.fov=i,n.aspect=l,n.far=h,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class u_ extends Da{constructor(e,n,i=0,l=Math.PI/3,h=0,_=1){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.target=new Yt,this.distance=i,this.angle=l,this.penumbra=h,this.decay=_,this.shadow=new c_}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Ec=new It,ar=new ce,ra=new ce;class h_ extends Oa{constructor(){super(new gn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ct(4,2),this._viewportCount=6,this._viewports=[new Ut(2,1,1,1),new Ut(0,1,1,1),new Ut(3,1,1,1),new Ut(1,1,1,1),new Ut(3,0,1,1),new Ut(1,0,1,1)],this._cubeDirections=[new ce(1,0,0),new ce(-1,0,0),new ce(0,0,1),new ce(0,0,-1),new ce(0,1,0),new ce(0,-1,0)],this._cubeUps=[new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,0,1),new ce(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,l=this.matrix,h=e.distance||i.far;h!==i.far&&(i.far=h,i.updateProjectionMatrix()),ar.setFromMatrixPosition(e.matrixWorld),i.position.copy(ar),ra.copy(i.position),ra.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(ra),i.updateMatrixWorld(),l.makeTranslation(-ar.x,-ar.y,-ar.z),Ec.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ec)}}class d_ extends Da{constructor(e,n,i=0,l=1){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=l,this.shadow=new h_}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class f_ extends Oa{constructor(){super(new La(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class m_ extends Da{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.target=new Yt,this.shadow=new f_}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class is{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,l=e.length;i<l;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class p_ extends Ys{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,l){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const h=this,_=Ws.get(e);if(_!==void 0)return h.manager.itemStart(e),setTimeout(function(){n&&n(_),h.manager.itemEnd(e)},0),_;const g={};g.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",g.headers=this.requestHeader,fetch(e,g).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(h.options,{colorSpaceConversion:"none"}))}).then(function(u){Ws.add(e,u),n&&n(u),h.manager.itemEnd(e)}).catch(function(u){l&&l(u),h.manager.itemError(e),h.manager.itemEnd(e)}),h.manager.itemStart(e)}}class g_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=xc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=xc();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function xc(){return(typeof performance>"u"?Date:performance).now()}const Ba="\\[\\]\\.:\\/",__=new RegExp("["+Ba+"]","g"),ka="[^"+Ba+"]",v_="[^"+Ba.replace("\\.","")+"]",E_=/((?:WC+[\/:])*)/.source.replace("WC",ka),x_=/(WCOD+)?/.source.replace("WCOD",v_),S_=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ka),b_=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ka),A_=new RegExp("^"+E_+x_+S_+b_+"$"),C_=["material","materials","bones"];class y_{constructor(e,n,i){const l=i||kt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,l)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,l=this._bindings[i];l!==void 0&&l.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let l=this._targetGroup.nCachedObjects_,h=i.length;l!==h;++l)i[l].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class kt{constructor(e,n,i){this.path=n,this.parsedPath=i||kt.parseTrackName(n),this.node=kt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new kt.Composite(e,n,i):new kt(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(__,"")}static parseTrackName(e){const n=A_.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},l=i.nodeName&&i.nodeName.lastIndexOf(".");if(l!==void 0&&l!==-1){const h=i.nodeName.substring(l+1);C_.indexOf(h)!==-1&&(i.nodeName=i.nodeName.substring(0,l),i.objectName=h)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(h){for(let _=0;_<h.length;_++){const g=h[_];if(g.name===n||g.uuid===n)return g;const u=i(g.children);if(u)return u}return null},l=i(e.children);if(l)return l}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let l=0,h=i.length;l!==h;++l)e[n++]=i[l]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let l=0,h=i.length;l!==h;++l)i[l]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let l=0,h=i.length;l!==h;++l)i[l]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let l=0,h=i.length;l!==h;++l)i[l]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,l=n.propertyName;let h=n.propertyIndex;if(e||(e=kt.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let f=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let M=0;M<e.length;M++)if(e[M].name===f){f=M;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const _=e[l];if(_===void 0){const f=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+l+" but it wasn't found.",e);return}let g=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?g=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(g=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(h!==void 0){if(l==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[h]!==void 0&&(h=e.morphTargetDictionary[h])}u=this.BindingType.ArrayElement,this.resolvedProperty=_,this.propertyIndex=h}else _.fromArray!==void 0&&_.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=_):Array.isArray(_)?(u=this.BindingType.EntireArray,this.resolvedProperty=_):this.propertyName=l;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][g]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}kt.Composite=y_;kt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};kt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};kt.prototype.GetterByBindingType=[kt.prototype._getValue_direct,kt.prototype._getValue_array,kt.prototype._getValue_arrayElement,kt.prototype._getValue_toArray];kt.prototype.SetterByBindingTypeAndVersioning=[[kt.prototype._setValue_direct,kt.prototype._setValue_direct_setNeedsUpdate,kt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_array,kt.prototype._setValue_array_setNeedsUpdate,kt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_arrayElement,kt.prototype._setValue_arrayElement_setNeedsUpdate,kt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_fromArray,kt.prototype._setValue_fromArray_setNeedsUpdate,kt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Sc{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(dn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ca}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ca);var w_={exports:{}};(function(C,e){(function(n,i){C.exports=i()})(self,()=>(()=>{var n={874:(h,_)=>{Object.defineProperty(_,"__esModule",{value:!0})},327:(h,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.makeEveryOtherGenerator=_.makeGenerator=void 0,_.makeGenerator=function(g){var u=function(f){return typeof f=="string"?f:f==null?"":Array.isArray(f)?f.map(u).join(""):f.type in g?g[f.type](f):"NO GENERATOR FOR ".concat(f.type)+f};return u},_.makeEveryOtherGenerator=function(g){return function(u,f){return u.reduce(function(M,a,E){return M+g(a)+(E===u.length-1?"":g(f[E]))},"")}}},83:function(h,_,g){var u=this&&this.__createBinding||(Object.create?function(M,a,E,p){p===void 0&&(p=E);var d=Object.getOwnPropertyDescriptor(a,E);d&&!("get"in d?!a.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return a[E]}}),Object.defineProperty(M,p,d)}:function(M,a,E,p){p===void 0&&(p=E),M[p]=a[E]}),f=this&&this.__exportStar||function(M,a){for(var E in M)E==="default"||Object.prototype.hasOwnProperty.call(a,E)||u(a,M,E)};Object.defineProperty(_,"__esModule",{value:!0}),f(g(327),_),f(g(416),_),f(g(874),_)},416:(h,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.visit=void 0,_.visit=function(g,u){var f=function(M,a,E,p,d){var s,r=u[M.type],t=function(m,v,x,w,R){return{node:m,parent:v,parentPath:x,key:w,index:R,skip:function(){this.skipped=!0},remove:function(){this.removed=!0},replaceWith:function(S){this.replaced=S},findParent:function(S){return x&&(S(x)?x:x.findParent(S))}}}(M,a,E,p,d),c=a;if(r!=null&&r.enter){if(r.enter(t),t.removed){if(!p||!a)throw new Error("Asked to remove ".concat(M," but no parent key was present in ").concat(a));return typeof d=="number"?c[p].splice(d,1):c[p]=null,t}if(t.replaced){if(!p||!a)throw new Error("Asked to remove ".concat(M," but no parent key was present in ").concat(a));typeof d=="number"?c[p].splice(d,1,t.replaced):c[p]=t.replaced}if(t.skipped)return t}Object.entries(M).filter(function(m){return m[0],function(v){return function(x){return!!(x!=null&&x.type)}(v)||Array.isArray(v)}(m[1])}).forEach(function(m){var v=m[0],x=m[1];if(Array.isArray(x))for(var w=0,R=0;w-R<x.length;w++){var S=x[w-R],L=f(S,M,t,v,w-R);L!=null&&L.removed&&(R+=1)}else f(x,M,t,v)}),(s=r==null?void 0:r.exit)===null||s===void 0||s.call(r,t)};f(g)}},851:(h,_,g)=>{Object.defineProperty(_,"__esModule",{value:!0});var u=(0,g(83).makeGenerator)({program:function(f){return u(f.program)+u(f.wsEnd)},segment:function(f){return u(f.blocks)},text:function(f){return u(f.text)},literal:function(f){return u(f.wsStart)+u(f.literal)+u(f.wsEnd)},identifier:function(f){return u(f.identifier)+u(f.wsEnd)},binary:function(f){return u(f.left)+u(f.operator)+u(f.right)},group:function(f){return u(f.lp)+u(f.expression)+u(f.rp)},unary:function(f){return u(f.operator)+u(f.expression)},unary_defined:function(f){return u(f.operator)+u(f.lp)+u(f.identifier)+u(f.rp)},int_constant:function(f){return u(f.token)+u(f.wsEnd)},elseif:function(f){return u(f.token)+u(f.expression)+u(f.wsEnd)+u(f.body)},if:function(f){return u(f.token)+u(f.expression)+u(f.wsEnd)+u(f.body)},ifdef:function(f){return u(f.token)+u(f.identifier)+u(f.wsEnd)},ifndef:function(f){return u(f.token)+u(f.identifier)+u(f.wsEnd)},else:function(f){return u(f.token)+u(f.body)+u(f.wsEnd)},error:function(f){return u(f.error)+u(f.message)+u(f.wsEnd)},undef:function(f){return u(f.undef)+u(f.identifier)+u(f.wsEnd)},define:function(f){return u(f.wsStart)+u(f.define)+u(f.identifier)+u(f.body)+u(f.wsEnd)},define_arguments:function(f){return u(f.wsStart)+u(f.define)+u(f.identifier)+u(f.lp)+u(f.args)+u(f.rp)+u(f.body)+u(f.wsEnd)},conditional:function(f){return u(f.wsStart)+u(f.ifPart)+u(f.elseIfParts)+u(f.elsePart)+u(f.endif)+u(f.wsEnd)},version:function(f){return u(f.version)+u(f.value)+u(f.profile)+u(f.wsEnd)},pragma:function(f){return u(f.pragma)+u(f.body)+u(f.wsEnd)},line:function(f){return u(f.line)+u(f.value)+u(f.wsEnd)},extension:function(f){return u(f.extension)+u(f.name)+u(f.colon)+u(f.behavior)+u(f.wsEnd)}});_.default=u},29:function(h,_,g){var u=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(_,"__esModule",{value:!0}),_.parser=_.preprocess=_.generate=_.preprocessComments=_.preprocessAst=void 0;var f=u(g(851));_.generate=f.default;var M=g(168);Object.defineProperty(_,"preprocessAst",{enumerable:!0,get:function(){return M.preprocessAst}}),Object.defineProperty(_,"preprocessComments",{enumerable:!0,get:function(){return M.preprocessComments}});var a=u(g(180));_.parser=a.default;var E=function(p,d){return(0,f.default)((0,M.preprocessAst)(a.default.parse(d.preserveComments?p:(0,M.preprocessComments)(p)),d))};_.preprocess=E,_.default=E},180:h=>{function _(u,f,M,a){var E=Error.call(this,u);return Object.setPrototypeOf&&Object.setPrototypeOf(E,_.prototype),E.expected=f,E.found=M,E.location=a,E.name="SyntaxError",E}function g(u,f,M){return M=M||" ",u.length>f?u:(f-=u.length,u+(M+=M.repeat(f)).slice(0,f))}(function(u,f){function M(){this.constructor=u}M.prototype=f.prototype,u.prototype=new M})(_,Error),_.prototype.format=function(u){var f="Error: "+this.message;if(this.location){var M,a=null;for(M=0;M<u.length;M++)if(u[M].source===this.location.source){a=u[M].text.split(/\r\n|\n|\r/g);break}var E=this.location.start,p=this.location.source+":"+E.line+":"+E.column;if(a){var d=this.location.end,s=g("",E.line.toString().length),r=a[E.line-1],t=E.line===d.line?d.column:r.length+1;f+=`
 --> `+p+`
`+s+` |
`+E.line+" | "+r+`
`+s+" | "+g("",E.column-1)+g("",t-E.column,"^")}else f+=`
 at `+p}return f},_.buildMessage=function(u,f){var M={literal:function(s){return'"'+E(s.text)+'"'},class:function(s){var r=s.parts.map(function(t){return Array.isArray(t)?p(t[0])+"-"+p(t[1]):p(t)});return"["+(s.inverted?"^":"")+r+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(s){return s.description}};function a(s){return s.charCodeAt(0).toString(16).toUpperCase()}function E(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+a(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+a(r)})}function p(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+a(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+a(r)})}function d(s){return M[s.type](s)}return"Expected "+function(s){var r,t,c=s.map(d);if(c.sort(),c.length>0){for(r=1,t=1;r<c.length;r++)c[r-1]!==c[r]&&(c[t]=c[r],t++);c.length=t}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}(u)+" but "+function(s){return s?'"'+E(s)+'"':"end of input"}(f)+" found."},h.exports={SyntaxError:_,parse:function(u,f){var M,a={},E=(f=f!==void 0?f:{}).grammarSource,p={start:wr},d=wr,s="#define",r="#line",t="#undef",c="#error",m="#pragma",v="defined",x="#ifdef",w="#ifndef",R="#elif",S="#else",L="#endif",A="#version",y="#extension",P="*/",B=/^[A-Za-z_]/,T=/^[A-Za-z_0-9]/,I=/^[uU]/,D=/^[1-9]/,k=/^[0-7]/,U=/^[xX]/,G=/^[0-9a-fA-F]/,H=/^[0-9]/,se=/^[\n]/,ee=/^[^\n]/,Z=/^[ \t]/,ne=lt("<<",!1),W=lt(">>",!1),K=lt("<=",!1),re=lt(">=",!1),oe=lt("==",!1),de=lt("!=",!1),ue=lt("&&",!1),Be=lt("||",!1),Ge=lt("(",!1),ke=lt(")",!1),_t=lt(",",!1),wt=lt("!",!1),it=lt("-",!1),Vt=lt("~",!1),Lt=lt("+",!1),mt=lt("*",!1),Le=lt("/",!1),Xe=lt("%",!1),q=lt("<",!1),X=lt(">",!1),he=lt("|",!1),be=lt("^",!1),Te=lt("&",!1),Re=lt(":",!1),Ue=lt("#define",!1),j=lt("#line",!1),xe=lt("#undef",!1),Pe=lt("#error",!1),We=lt("#pragma",!1),$e=lt("defined",!1),Qe=lt("#if",!1),ft=lt("#ifdef",!1),Ft=lt("#ifndef",!1),le=lt("#elif",!1),Oe=lt("#else",!1),Se=lt("#endif",!1),ze=lt("#version",!1),Ve=lt("#extension",!1),st=mn([["A","Z"],["a","z"],"_"],!1,!1),Dt=mn([["A","Z"],["a","z"],"_",["0","9"]],!1,!1),pt=Gt("number"),an=mn(["u","U"],!1,!1),Ot=mn([["1","9"]],!1,!1),Sn=lt("0",!1),nn=mn([["0","7"]],!1,!1),li=mn(["x","X"],!1,!1),bi=mn([["0","9"],["a","f"],["A","F"]],!1,!1),hs=mn([["0","9"]],!1,!1),Zs=Gt("control line"),In=mn([`
`],!1,!1),Js=Gt("token string"),Q=mn([`
`],!0,!1),fe=Gt("text"),Ee=lt("#",!1),ge=Gt("if"),Ce=Gt("primary expression"),Ze=Gt("unary expression"),at=Gt("multiplicative expression"),tt=Gt("additive expression"),ut=Gt("shift expression"),Mt=Gt("relational expression"),bt=Gt("equality expression"),yt=Gt("and expression"),$t=Gt("exclusive or expression"),Bn=Gt("inclusive or expression"),Yn=Gt("logical and expression"),Zn=Gt("logical or expression"),bn=Gt("constant expression"),Tt=Gt("whitespace or comment"),fn=lt("//",!1),xt=lt("/*",!1),Zt=lt("*/",!1),wn={type:"any"},Jn=Gt("whitespace"),Ai=mn([" ","	"],!1,!1),ht=function(V,z){return vt("literal",{literal:V,wsEnd:z})},Ht=function(V,z,ie){return vt("literal",{literal:z,wsStart:V,wsEnd:ie})},ci=function(V){return vt("text",{text:V.join("")})},en=function(V,z,ie,Y,te){return vt("elseif",{token:z,expression:ie,wsEnd:Y,body:te})},sn=function(V,z){return Ao(V,z)},ds=function(V,z,ie){return jt(z,ie)},O=0,fs=[{line:1,column:1}],Tn=0,Ci=[],me=0,pe={};if("startRule"in f){if(!(f.startRule in p))throw new Error(`Can't start parsing from rule "`+f.startRule+'".');d=p[f.startRule]}function lt(V,z){return{type:"literal",text:V,ignoreCase:z}}function mn(V,z,ie){return{type:"class",parts:V,inverted:z,ignoreCase:ie}}function Gt(V){return{type:"other",description:V}}function Wt(V){var z,ie=fs[V];if(ie)return ie;for(z=V-1;!fs[z];)z--;for(ie={line:(ie=fs[z]).line,column:ie.column};z<V;)u.charCodeAt(z)===10?(ie.line++,ie.column=1):ie.column++,z++;return fs[V]=ie,ie}function yr(V,z){var ie=Wt(V),Y=Wt(z);return{source:E,start:{offset:V,line:ie.line,column:ie.column},end:{offset:z,line:Y.line,column:Y.column}}}function Me(V){O<Tn||(O>Tn&&(Tn=O,Ci=[]),Ci.push(V))}function wr(){var V,z=74*O+0,ie=pe[z];return ie?(O=ie.nextPos,ie.result):(V=function(){var Y,te,we,Ne=74*O+1,ye=pe[Ne];return ye?(O=ye.nextPos,ye.result):(Y=O,(te=yi())!==a?(we=ve(),Y=vt("program",{program:te.blocks,wsEnd:we})):(O=Y,Y=a),pe[Ne]={nextPos:O,result:Y},Y)}(),pe[z]={nextPos:O,result:V},V)}function Tr(){var V,z,ie,Y=74*O+3,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.substr(O,2)==="<<"?(z="<<",O+=2):(z=a,me===0&&Me(ne)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Rr(){var V,z,ie,Y=74*O+4,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.substr(O,2)===">>"?(z=">>",O+=2):(z=a,me===0&&Me(W)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function ln(){var V,z,ie,Y=74*O+5,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.substr(O,2)==="<="?(z="<=",O+=2):(z=a,me===0&&Me(K)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Vi(){var V,z,ie,Y=74*O+6,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.substr(O,2)===">="?(z=">=",O+=2):(z=a,me===0&&Me(re)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function ui(){var V,z,ie,Y=74*O+7,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.substr(O,2)==="=="?(z="==",O+=2):(z=a,me===0&&Me(oe)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Mr(){var V,z,ie,Y=74*O+8,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.substr(O,2)==="!="?(z="!=",O+=2):(z=a,me===0&&Me(de)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Lr(){var V,z,ie,Y=74*O+9,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.substr(O,2)==="&&"?(z="&&",O+=2):(z=a,me===0&&Me(ue)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Ir(){var V,z,ie,Y=74*O+10,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.substr(O,2)==="||"?(z="||",O+=2):(z=a,me===0&&Me(Be)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function ms(){var V,z,ie,Y=74*O+11,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===40?(z="(",O++):(z=a,me===0&&Me(Ge)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Qs(){var V,z,ie,Y=74*O+12,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===41?(z=")",O++):(z=a,me===0&&Me(ke)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Fr(){var V,z,ie,Y=74*O+13,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===44?(z=",",O++):(z=a,me===0&&Me(_t)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function er(){var V,z,ie,Y=74*O+15,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===45?(z="-",O++):(z=a,me===0&&Me(it)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function tr(){var V,z,ie,Y=74*O+17,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===43?(z="+",O++):(z=a,me===0&&Me(Lt)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Nr(){var V,z,ie,Y=74*O+18,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===42?(z="*",O++):(z=a,me===0&&Me(mt)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Pr(){var V,z,ie,Y=74*O+19,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===47?(z="/",O++):(z=a,me===0&&Me(Le)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Dr(){var V,z,ie,Y=74*O+20,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===37?(z="%",O++):(z=a,me===0&&Me(Xe)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Or(){var V,z,ie,Y=74*O+21,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===60?(z="<",O++):(z=a,me===0&&Me(q)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Br(){var V,z,ie,Y=74*O+22,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===62?(z=">",O++):(z=a,me===0&&Me(X)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function kr(){var V,z,ie,Y=74*O+23,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===124?(z="|",O++):(z=a,me===0&&Me(he)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Ur(){var V,z,ie,Y=74*O+24,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===94?(z="^",O++):(z=a,me===0&&Me(be)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function $r(){var V,z,ie,Y=74*O+25,te=pe[Y];return te?(O=te.nextPos,te.result):(V=O,u.charCodeAt(O)===38?(z="&",O++):(z=a,me===0&&Me(Te)),z!==a?(ie=ve(),V=ht(z,ie)):(O=V,V=a),pe[Y]={nextPos:O,result:V},V)}function Gr(){var V,z,ie,Y,te=74*O+27,we=pe[te];return we?(O=we.nextPos,we.result):(V=O,z=ve(),u.substr(O,7)===s?(ie=s,O+=7):(ie=a,me===0&&Me(Ue)),ie!==a?(Y=ve(),V=Ht(z,ie,Y)):(O=V,V=a),pe[te]={nextPos:O,result:V},V)}function Wr(){var V,z,ie,Y,te=74*O+37,we=pe[te];return we?(O=we.nextPos,we.result):(V=O,z=ve(),u.substr(O,5)===R?(ie=R,O+=5):(ie=a,me===0&&Me(le)),ie!==a?(Y=ve(),V=Ht(z,ie,Y)):(O=V,V=a),pe[te]={nextPos:O,result:V},V)}function Fn(){var V,z,ie,Y,te,we,Ne=74*O+42,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(V=O,z=O,ie=O,B.test(u.charAt(O))?(Y=u.charAt(O),O++):(Y=a,me===0&&Me(st)),Y!==a){for(te=[],T.test(u.charAt(O))?(we=u.charAt(O),O++):(we=a,me===0&&Me(Dt));we!==a;)te.push(we),T.test(u.charAt(O))?(we=u.charAt(O),O++):(we=a,me===0&&Me(Dt));ie=Y=[Y,te]}else O=ie,ie=a;return(z=ie!==a?u.substring(z,O):ie)!==a?(ie=ve(),V=vt("identifier",{identifier:z,wsEnd:ie})):(O=V,V=a),pe[Ne]={nextPos:O,result:V},V}function rn(){var V,z,ie,Y,te=74*O+44,we=pe[te];return we?(O=we.nextPos,we.result):(me++,V=O,z=O,ie=function(){var Ne,ye,qe,Je,nt,Nt=74*O+46,Et=pe[Nt];if(Et)return O=Et.nextPos,Et.result;if(Ne=O,ye=O,D.test(u.charAt(O))?(qe=u.charAt(O),O++):(qe=a,me===0&&Me(Ot)),qe!==a){for(Je=[],nt=Kt();nt!==a;)Je.push(nt),nt=Kt();ye=qe=[qe,Je]}else O=ye,ye=a;return Ne=ye!==a?u.substring(Ne,O):ye,pe[Nt]={nextPos:O,result:Ne},Ne}(),ie!==a?((Y=nr())===a&&(Y=null),z=ie=[ie,Y]):(O=z,z=a),(V=z!==a?u.substring(V,O):z)===a&&(V=O,z=O,ie=function(){var Ne,ye,qe,Je,nt=74*O+47,Nt=pe[nt];if(Nt)return O=Nt.nextPos,Nt.result;if(Ne=O,u.charCodeAt(O)===48?(ye="0",O++):(ye=a,me===0&&Me(Sn)),ye!==a){for(qe=[],k.test(u.charAt(O))?(Je=u.charAt(O),O++):(Je=a,me===0&&Me(nn));Je!==a;)qe.push(Je),k.test(u.charAt(O))?(Je=u.charAt(O),O++):(Je=a,me===0&&Me(nn));Ne=ye=[ye,qe]}else O=Ne,Ne=a;return pe[nt]={nextPos:O,result:Ne},Ne}(),ie!==a?((Y=nr())===a&&(Y=null),z=ie=[ie,Y]):(O=z,z=a),(V=z!==a?u.substring(V,O):z)===a&&(V=O,z=O,ie=function(){var Ne,ye,qe,Je,nt,Nt=74*O+48,Et=pe[Nt];if(Et)return O=Et.nextPos,Et.result;if(Ne=O,u.charCodeAt(O)===48?(ye="0",O++):(ye=a,me===0&&Me(Sn)),ye!==a)if(U.test(u.charAt(O))?(qe=u.charAt(O),O++):(qe=a,me===0&&Me(li)),qe!==a){for(Je=[],G.test(u.charAt(O))?(nt=u.charAt(O),O++):(nt=a,me===0&&Me(bi));nt!==a;)Je.push(nt),G.test(u.charAt(O))?(nt=u.charAt(O),O++):(nt=a,me===0&&Me(bi));Ne=ye=[ye,qe,Je]}else O=Ne,Ne=a;else O=Ne,Ne=a;return pe[Nt]={nextPos:O,result:Ne},Ne}(),ie!==a?((Y=nr())===a&&(Y=null),z=ie=[ie,Y]):(O=z,z=a),V=z!==a?u.substring(V,O):z)),me--,V===a&&(z=a,me===0&&Me(pt)),pe[te]={nextPos:O,result:V},V)}function nr(){var V,z=74*O+45,ie=pe[z];return ie?(O=ie.nextPos,ie.result):(I.test(u.charAt(O))?(V=u.charAt(O),O++):(V=a,me===0&&Me(an)),pe[z]={nextPos:O,result:V},V)}function Kt(){var V,z=74*O+49,ie=pe[z];return ie?(O=ie.nextPos,ie.result):(H.test(u.charAt(O))?(V=u.charAt(O),O++):(V=a,me===0&&Me(hs)),pe[z]={nextPos:O,result:V},V)}function yi(){var V,z,ie,Y,te,we=74*O+50,Ne=pe[we];if(Ne)return O=Ne.nextPos,Ne.result;if(V=O,z=[],(ie=Vr())===a){if(ie=O,Y=[],(te=Ti())!==a)for(;te!==a;)Y.push(te),te=Ti();else Y=a;Y!==a&&(Y=ci(Y)),ie=Y}if(ie!==a){for(;ie!==a;)if(z.push(ie),(ie=Vr())===a){if(ie=O,Y=[],(te=Ti())!==a)for(;te!==a;)Y.push(te),te=Ti();else Y=a;Y!==a&&(Y=ci(Y)),ie=Y}}else z=a;return z!==a&&(z=vt("segment",{blocks:z})),V=z,pe[we]={nextPos:O,result:V},V}function Vr(){var V,z,ie,Y,te,we,Ne,ye,qe,Je,nt,Nt,Et,cn=74*O+51,zt=pe[cn];if(zt)return O=zt.nextPos,zt.result;if(me++,V=function(){var Ke,rt,et,Ye,gt,ot,An,Qn,Ga,Wa,Va,Ha=74*O+54,Co=pe[Ha];if(Co)return O=Co.nextPos,Co.result;if(Ke=O,rt=O,et=function(){var Rt,Jt,Xt,Nn=74*O+55,Rn=pe[Nn];return Rn?(O=Rn.nextPos,Rn.result):(me++,Rt=O,Jt=function(){var Pt,ei,Cn,Ri,Mi=74*O+35,$n=pe[Mi];return $n?(O=$n.nextPos,$n.result):(Pt=O,ei=ve(),u.substr(O,6)===x?(Cn=x,O+=6):(Cn=a,me===0&&Me(ft)),Cn!==a?(Ri=ve(),Pt=Ht(ei,Cn,Ri)):(O=Pt,Pt=a),pe[Mi]={nextPos:O,result:Pt},Pt)}(),Jt!==a&&(Xt=Fn())!==a?Rt=vt("ifdef",{token:Jt,identifier:Xt}):(O=Rt,Rt=a),Rt===a&&(Rt=O,Jt=function(){var Pt,ei,Cn,Ri,Mi=74*O+36,$n=pe[Mi];return $n?(O=$n.nextPos,$n.result):(Pt=O,ei=ve(),u.substr(O,7)===w?(Cn=w,O+=7):(Cn=a,me===0&&Me(Ft)),Cn!==a?(Ri=ve(),Pt=Ht(ei,Cn,Ri)):(O=Pt,Pt=a),pe[Mi]={nextPos:O,result:Pt},Pt)}(),Jt!==a&&(Xt=Fn())!==a?Rt=vt("ifndef",{token:Jt,identifier:Xt}):(O=Rt,Rt=a),Rt===a&&(Rt=O,Jt=function(){var Pt,ei,Cn,Ri,Mi=74*O+34,$n=pe[Mi];return $n?(O=$n.nextPos,$n.result):(Pt=O,ei=ve(),u.substr(O,3)==="#if"?(Cn="#if",O+=3):(Cn=a,me===0&&Me(Qe)),Cn!==a?(Ri=ve(),Pt=Ht(ei,Cn,Ri)):(O=Pt,Pt=a),pe[Mi]={nextPos:O,result:Pt},Pt)}(),Jt!==a?((Xt=Fe())===a&&(Xt=null),Rt=function(Pt,ei){return vt("if",{token:Pt,expression:ei})}(Jt,Xt)):(O=Rt,Rt=a))),me--,Rt===a&&(Jt=a,me===0&&Me(ge)),pe[Nn]={nextPos:O,result:Rt},Rt)}(),et!==a?(se.test(u.charAt(O))?(Ye=u.charAt(O),O++):(Ye=a,me===0&&Me(In)),Ye!==a?((gt=yi())===a&&(gt=null),Ga=et,Wa=Ye,Va=gt,rt={...Ga,body:Va,wsEnd:Wa}):(O=rt,rt=a)):(O=rt,rt=a),rt!==a){for(et=[],Ye=O,(gt=Wr())!==a&&(ot=Fe())!==a?(se.test(u.charAt(O))?(An=u.charAt(O),O++):(An=a,me===0&&Me(In)),An!==a?((Qn=yi())===a&&(Qn=null),Ye=en(0,gt,ot,An,Qn)):(O=Ye,Ye=a)):(O=Ye,Ye=a);Ye!==a;)et.push(Ye),Ye=O,(gt=Wr())!==a&&(ot=Fe())!==a?(se.test(u.charAt(O))?(An=u.charAt(O),O++):(An=a,me===0&&Me(In)),An!==a?((Qn=yi())===a&&(Qn=null),Ye=en(0,gt,ot,An,Qn)):(O=Ye,Ye=a)):(O=Ye,Ye=a);Ye=O,gt=function(){var Rt,Jt,Xt,Nn,Rn=74*O+38,Pt=pe[Rn];return Pt?(O=Pt.nextPos,Pt.result):(Rt=O,Jt=ve(),u.substr(O,5)===S?(Xt=S,O+=5):(Xt=a,me===0&&Me(Oe)),Xt!==a?(Nn=ve(),Rt=Ht(Jt,Xt,Nn)):(O=Rt,Rt=a),pe[Rn]={nextPos:O,result:Rt},Rt)}(),gt!==a?(se.test(u.charAt(O))?(ot=u.charAt(O),O++):(ot=a,me===0&&Me(In)),ot!==a?((An=yi())===a&&(An=null),Ye=function(Rt,Jt,Xt,Nn,Rn){return vt("else",{token:Xt,wsEnd:Nn,body:Rn})}(0,0,gt,ot,An)):(O=Ye,Ye=a)):(O=Ye,Ye=a),Ye===a&&(Ye=null),gt=function(){var Rt,Jt,Xt,Nn,Rn=74*O+39,Pt=pe[Rn];return Pt?(O=Pt.nextPos,Pt.result):(Rt=O,Jt=ve(),u.substr(O,6)===L?(Xt=L,O+=6):(Xt=a,me===0&&Me(Se)),Xt!==a?(Nn=ve(),Rt=Ht(Jt,Xt,Nn)):(O=Rt,Rt=a),pe[Rn]={nextPos:O,result:Rt},Rt)}(),gt!==a?(se.test(u.charAt(O))?(ot=u.charAt(O),O++):(ot=a,me===0&&Me(In)),ot===a&&(ot=null),Ke=function(Rt,Jt,Xt,Nn,Rn){return vt("conditional",{ifPart:Rt,elseIfParts:Jt,elsePart:Xt,endif:Nn,wsEnd:Rn})}(rt,et,Ye,gt,ot)):(O=Ke,Ke=a)}else O=Ke,Ke=a;return pe[Ha]={nextPos:O,result:Ke},Ke}(),V===a){if(V=O,z=O,(ie=Gr())!==a)if((Y=function(){var Ke,rt,et,Ye,gt,ot,An=74*O+43,Qn=pe[An];if(Qn)return O=Qn.nextPos,Qn.result;if(Ke=O,rt=O,et=O,B.test(u.charAt(O))?(Ye=u.charAt(O),O++):(Ye=a,me===0&&Me(st)),Ye!==a){for(gt=[],T.test(u.charAt(O))?(ot=u.charAt(O),O++):(ot=a,me===0&&Me(Dt));ot!==a;)gt.push(ot),T.test(u.charAt(O))?(ot=u.charAt(O),O++):(ot=a,me===0&&Me(Dt));et=Ye=[Ye,gt]}else O=et,et=a;return(rt=et!==a?u.substring(rt,O):et)!==a&&(rt=vt("identifier",{identifier:rt})),Ke=rt,pe[An]={nextPos:O,result:Ke},Ke}())!==a)if((te=ms())!==a){if(we=O,(Ne=Fn())!==a){for(ye=[],qe=O,(Je=Fr())!==a&&(nt=Fn())!==a?qe=Je=[Je,nt]:(O=qe,qe=a);qe!==a;)ye.push(qe),qe=O,(Je=Fr())!==a&&(nt=Fn())!==a?qe=Je=[Je,nt]:(O=qe,qe=a);we=[Ne,...ye.flat()]}else O=we,we=a;we===a&&(we=null),(Ne=Qs())!==a?((ye=wi())===a&&(ye=null),z=function(Ke,rt,et,Ye,gt,ot){return vt("define_arguments",{define:Ke,identifier:rt,lp:et,args:Ye||[],rp:gt,body:ot})}(ie,Y,te,we,Ne,ye)):(O=z,z=a)}else O=z,z=a;else O=z,z=a;else O=z,z=a;if(z===a&&(z=O,(ie=Gr())!==a&&(Y=Fn())!==a?((te=wi())===a&&(te=null),z=function(Ke,rt,et){return vt("define",{define:Ke,identifier:rt,body:et})}(ie,Y,te)):(O=z,z=a),z===a)){if(z=O,ie=function(){var Ke,rt,et,Ye,gt=74*O+29,ot=pe[gt];return ot?(O=ot.nextPos,ot.result):(Ke=O,rt=ve(),u.substr(O,5)===r?(et=r,O+=5):(et=a,me===0&&Me(j)),et!==a?(Ye=ve(),Ke=Ht(rt,et,Ye)):(O=Ke,Ke=a),pe[gt]={nextPos:O,result:Ke},Ke)}(),ie!==a){if(Y=O,te=[],(we=Kt())!==a)for(;we!==a;)te.push(we),we=Kt();else te=a;(Y=te!==a?u.substring(Y,O):te)!==a?z=vt("line",{line:ie,value:Y}):(O=z,z=a)}else O=z,z=a;z===a&&(z=O,ie=function(){var Ke,rt,et,Ye,gt=74*O+30,ot=pe[gt];return ot?(O=ot.nextPos,ot.result):(Ke=O,rt=ve(),u.substr(O,6)===t?(et=t,O+=6):(et=a,me===0&&Me(xe)),et!==a?(Ye=ve(),Ke=Ht(rt,et,Ye)):(O=Ke,Ke=a),pe[gt]={nextPos:O,result:Ke},Ke)}(),ie!==a&&(Y=Fn())!==a?z=vt("undef",{undef:ie,identifier:Y}):(O=z,z=a),z===a&&(z=O,ie=function(){var Ke,rt,et,Ye,gt=74*O+31,ot=pe[gt];return ot?(O=ot.nextPos,ot.result):(Ke=O,rt=ve(),u.substr(O,6)===c?(et=c,O+=6):(et=a,me===0&&Me(Pe)),et!==a?(Ye=ve(),Ke=Ht(rt,et,Ye)):(O=Ke,Ke=a),pe[gt]={nextPos:O,result:Ke},Ke)}(),ie!==a&&(Y=wi())!==a?z=vt("error",{error:ie,message:Y}):(O=z,z=a),z===a&&(z=O,ie=function(){var Ke,rt,et,Ye,gt=74*O+32,ot=pe[gt];return ot?(O=ot.nextPos,ot.result):(Ke=O,rt=ve(),u.substr(O,7)===m?(et=m,O+=7):(et=a,me===0&&Me(We)),et!==a?(Ye=ve(),Ke=Ht(rt,et,Ye)):(O=Ke,Ke=a),pe[gt]={nextPos:O,result:Ke},Ke)}(),ie!==a&&(Y=wi())!==a?z=vt("pragma",{pragma:ie,body:Y}):(O=z,z=a),z===a&&(z=O,ie=function(){var Ke,rt,et,Ye,gt=74*O+40,ot=pe[gt];return ot?(O=ot.nextPos,ot.result):(Ke=O,rt=ve(),u.substr(O,8)===A?(et=A,O+=8):(et=a,me===0&&Me(ze)),et!==a?(Ye=ve(),Ke=Ht(rt,et,Ye)):(O=Ke,Ke=a),pe[gt]={nextPos:O,result:Ke},Ke)}(),ie!==a&&(Y=rn())!==a?((te=wi())===a&&(te=null),z=vt("version",{version:ie,value:Y,profile:te})):(O=z,z=a),z===a&&(z=O,ie=function(){var Ke,rt,et,Ye,gt=74*O+41,ot=pe[gt];return ot?(O=ot.nextPos,ot.result):(Ke=O,rt=ve(),u.substr(O,10)===y?(et=y,O+=10):(et=a,me===0&&Me(Ve)),et!==a?(Ye=ve(),Ke=Ht(rt,et,Ye)):(O=Ke,Ke=a),pe[gt]={nextPos:O,result:Ke},Ke)}(),ie!==a&&(Y=Fn())!==a?(te=function(){var Ke,rt,et,Ye=74*O+26,gt=pe[Ye];return gt?(O=gt.nextPos,gt.result):(Ke=O,u.charCodeAt(O)===58?(rt=":",O++):(rt=a,me===0&&Me(Re)),rt!==a?(et=ve(),Ke=ht(rt,et)):(O=Ke,Ke=a),pe[Ye]={nextPos:O,result:Ke},Ke)}(),te!==a&&(we=wi())!==a?z=vt("extension",{extension:ie,name:Y,colon:te,behavior:we}):(O=z,z=a)):(O=z,z=a))))))}z!==a?(se.test(u.charAt(O))?(ie=u.charAt(O),O++):(ie=a,me===0&&Me(In)),ie===a&&(ie=null),Nt=z,Et=ie,V={...Nt,wsEnd:Et}):(O=V,V=a)}return me--,V===a&&(z=a,me===0&&Me(Zs)),pe[cn]={nextPos:O,result:V},V}function wi(){var V,z,ie,Y=74*O+52,te=pe[Y];if(te)return O=te.nextPos,te.result;if(me++,V=O,z=[],ee.test(u.charAt(O))?(ie=u.charAt(O),O++):(ie=a,me===0&&Me(Q)),ie!==a)for(;ie!==a;)z.push(ie),ee.test(u.charAt(O))?(ie=u.charAt(O),O++):(ie=a,me===0&&Me(Q));else z=a;return V=z!==a?u.substring(V,O):z,me--,V===a&&(z=a,me===0&&Me(Js)),pe[Y]={nextPos:O,result:V},V}function Ti(){var V,z,ie,Y,te,we,Ne=74*O+53,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(me++,V=O,z=O,ie=O,me++,Y=O,(te=St())===a&&(te=null),u.charCodeAt(O)===35?(we="#",O++):(we=a,me===0&&Me(Ee)),we!==a?Y=te=[te,we]:(O=Y,Y=a),me--,Y===a?ie=void 0:(O=ie,ie=a),ie!==a){if(Y=[],ee.test(u.charAt(O))?(te=u.charAt(O),O++):(te=a,me===0&&Me(Q)),te!==a)for(;te!==a;)Y.push(te),ee.test(u.charAt(O))?(te=u.charAt(O),O++):(te=a,me===0&&Me(Q));else Y=a;Y!==a?(se.test(u.charAt(O))?(te=u.charAt(O),O++):(te=a,me===0&&Me(In)),te===a&&(te=null),z=ie=[ie,Y,te]):(O=z,z=a)}else O=z,z=a;return z===a&&(se.test(u.charAt(O))?(z=u.charAt(O),O++):(z=a,me===0&&Me(In))),V=z!==a?u.substring(V,O):z,me--,V===a&&(z=a,me===0&&Me(fe)),pe[Ne]={nextPos:O,result:V},V}function De(){var V,z,ie,Y,te=74*O+56,we=pe[te];return we?(O=we.nextPos,we.result):(me++,(V=function(){var Ne,ye,qe,Je=74*O+2,nt=pe[Je];return nt?(O=nt.nextPos,nt.result):(Ne=O,(ye=rn())!==a?(qe=ve(),Ne=vt("int_constant",{token:ye,wsEnd:qe})):(O=Ne,Ne=a),pe[Je]={nextPos:O,result:Ne},Ne)}())===a&&(V=O,(z=ms())!==a&&(ie=Fe())!==a&&(Y=Qs())!==a?V=vt("group",{lp:z,expression:ie,rp:Y}):(O=V,V=a),V===a&&(V=Fn())),me--,V===a&&(z=a,me===0&&Me(Ce)),pe[te]={nextPos:O,result:V},V)}function o(){var V,z,ie,Y,te,we=74*O+57,Ne=pe[we];return Ne?(O=Ne.nextPos,Ne.result):(me++,V=O,z=function(){var ye,qe,Je,nt,Nt=74*O+33,Et=pe[Nt];return Et?(O=Et.nextPos,Et.result):(ye=O,qe=ve(),u.substr(O,7)===v?(Je=v,O+=7):(Je=a,me===0&&Me($e)),Je!==a?(nt=ve(),ye=Ht(qe,Je,nt)):(O=ye,ye=a),pe[Nt]={nextPos:O,result:ye},ye)}(),z!==a&&(ie=ms())!==a&&(Y=Fn())!==a&&(te=Qs())!==a?V=vt("unary_defined",{operator:z,lp:ie,identifier:Y,rp:te}):(O=V,V=a),V===a&&(V=O,(z=tr())===a&&(z=er())===a&&(z=function(){var ye,qe,Je,nt=74*O+14,Nt=pe[nt];return Nt?(O=Nt.nextPos,Nt.result):(ye=O,u.charCodeAt(O)===33?(qe="!",O++):(qe=a,me===0&&Me(wt)),qe!==a?(Je=ve(),ye=ht(qe,Je)):(O=ye,ye=a),pe[nt]={nextPos:O,result:ye},ye)}(),z===a&&(z=function(){var ye,qe,Je,nt=74*O+16,Nt=pe[nt];return Nt?(O=Nt.nextPos,Nt.result):(ye=O,u.charCodeAt(O)===126?(qe="~",O++):(qe=a,me===0&&Me(Vt)),qe!==a?(Je=ve(),ye=ht(qe,Je)):(O=ye,ye=a),pe[nt]={nextPos:O,result:ye},ye)}())),z!==a&&(ie=o())!==a?V=vt("unary",{operator:z,expression:ie}):(O=V,V=a),V===a&&(V=De())),me--,V===a&&(z=a,me===0&&Me(Ze)),pe[we]={nextPos:O,result:V},V)}function b(){var V,z,ie,Y,te,we,Ne=74*O+58,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(me++,V=O,(z=o())!==a){for(ie=[],Y=O,(te=Nr())===a&&(te=Pr())===a&&(te=Dr()),te!==a&&(we=o())!==a?Y=te=[te,we]:(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=Nr())===a&&(te=Pr())===a&&(te=Dr()),te!==a&&(we=o())!==a?Y=te=[te,we]:(O=Y,Y=a);V=sn(z,ie)}else O=V,V=a;return me--,V===a&&(z=a,me===0&&Me(at)),pe[Ne]={nextPos:O,result:V},V}function N(){var V,z,ie,Y,te,we,Ne=74*O+59,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(me++,V=O,(z=b())!==a){for(ie=[],Y=O,(te=tr())===a&&(te=er()),te!==a&&(we=b())!==a?Y=te=[te,we]:(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=tr())===a&&(te=er()),te!==a&&(we=b())!==a?Y=te=[te,we]:(O=Y,Y=a);V=sn(z,ie)}else O=V,V=a;return me--,V===a&&(z=a,me===0&&Me(tt)),pe[Ne]={nextPos:O,result:V},V}function F(){var V,z,ie,Y,te,we,Ne=74*O+60,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(me++,V=O,(z=N())!==a){for(ie=[],Y=O,(te=Rr())===a&&(te=Tr()),te!==a&&(we=N())!==a?Y=te=[te,we]:(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=Rr())===a&&(te=Tr()),te!==a&&(we=N())!==a?Y=te=[te,we]:(O=Y,Y=a);V=sn(z,ie)}else O=V,V=a;return me--,V===a&&(z=a,me===0&&Me(ut)),pe[Ne]={nextPos:O,result:V},V}function $(){var V,z,ie,Y,te,we,Ne=74*O+61,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(me++,V=O,(z=F())!==a){for(ie=[],Y=O,(te=ln())===a&&(te=Vi())===a&&(te=Or())===a&&(te=Br()),te!==a&&(we=F())!==a?Y=te=[te,we]:(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=ln())===a&&(te=Vi())===a&&(te=Or())===a&&(te=Br()),te!==a&&(we=F())!==a?Y=te=[te,we]:(O=Y,Y=a);V=sn(z,ie)}else O=V,V=a;return me--,V===a&&(z=a,me===0&&Me(Mt)),pe[Ne]={nextPos:O,result:V},V}function J(){var V,z,ie,Y,te,we,Ne=74*O+62,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(me++,V=O,(z=$())!==a){for(ie=[],Y=O,(te=ui())===a&&(te=Mr()),te!==a&&(we=$())!==a?Y=te=[te,we]:(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=ui())===a&&(te=Mr()),te!==a&&(we=$())!==a?Y=te=[te,we]:(O=Y,Y=a);V=sn(z,ie)}else O=V,V=a;return me--,V===a&&(z=a,me===0&&Me(bt)),pe[Ne]={nextPos:O,result:V},V}function ae(){var V,z,ie,Y,te,we,Ne=74*O+63,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(me++,V=O,(z=J())!==a){for(ie=[],Y=O,(te=$r())!==a&&(we=J())!==a?Y=te=[te,we]:(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=$r())!==a&&(we=J())!==a?Y=te=[te,we]:(O=Y,Y=a);V=sn(z,ie)}else O=V,V=a;return me--,V===a&&(z=a,me===0&&Me(yt)),pe[Ne]={nextPos:O,result:V},V}function _e(){var V,z,ie,Y,te,we,Ne=74*O+64,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(me++,V=O,(z=ae())!==a){for(ie=[],Y=O,(te=Ur())!==a&&(we=ae())!==a?Y=te=[te,we]:(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=Ur())!==a&&(we=ae())!==a?Y=te=[te,we]:(O=Y,Y=a);V=sn(z,ie)}else O=V,V=a;return me--,V===a&&(z=a,me===0&&Me($t)),pe[Ne]={nextPos:O,result:V},V}function Ae(){var V,z,ie,Y,te,we,Ne=74*O+65,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(me++,V=O,(z=_e())!==a){for(ie=[],Y=O,(te=kr())!==a&&(we=_e())!==a?Y=te=[te,we]:(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=kr())!==a&&(we=_e())!==a?Y=te=[te,we]:(O=Y,Y=a);V=sn(z,ie)}else O=V,V=a;return me--,V===a&&(z=a,me===0&&Me(Bn)),pe[Ne]={nextPos:O,result:V},V}function Ie(){var V,z,ie,Y,te,we,Ne=74*O+66,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(me++,V=O,(z=Ae())!==a){for(ie=[],Y=O,(te=Lr())!==a&&(we=Ae())!==a?Y=te=[te,we]:(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=Lr())!==a&&(we=Ae())!==a?Y=te=[te,we]:(O=Y,Y=a);V=sn(z,ie)}else O=V,V=a;return me--,V===a&&(z=a,me===0&&Me(Yn)),pe[Ne]={nextPos:O,result:V},V}function Fe(){var V,z=74*O+68,ie=pe[z];return ie?(O=ie.nextPos,ie.result):(me++,V=function(){var Y,te,we,Ne,ye,qe,Je=74*O+67,nt=pe[Je];if(nt)return O=nt.nextPos,nt.result;if(me++,Y=O,(te=Ie())!==a){for(we=[],Ne=O,(ye=Ir())!==a&&(qe=Ie())!==a?Ne=ye=[ye,qe]:(O=Ne,Ne=a);Ne!==a;)we.push(Ne),Ne=O,(ye=Ir())!==a&&(qe=Ie())!==a?Ne=ye=[ye,qe]:(O=Ne,Ne=a);Y=sn(te,we)}else O=Y,Y=a;return me--,Y===a&&(te=a,me===0&&Me(Zn)),pe[Je]={nextPos:O,result:Y},Y}(),me--,V===a&&me===0&&Me(bn),pe[z]={nextPos:O,result:V},V)}function ve(){var V,z,ie,Y,te,we,Ne=74*O+69,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;for(me++,V=O,(z=St())===a&&(z=null),ie=[],Y=O,(te=je())!==a?((we=St())===a&&(we=null),Y=te=[te,we]):(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=je())!==a?((we=St())===a&&(we=null),Y=te=[te,we]):(O=Y,Y=a);return V=ir(z,ie),me--,z=a,me===0&&Me(Tt),pe[Ne]={nextPos:O,result:V},V}function je(){var V,z,ie,Y,te,we,Ne=74*O+70,ye=pe[Ne];if(ye)return O=ye.nextPos,ye.result;if(V=function(){var qe,Je,nt,Nt,Et,cn=74*O+71,zt=pe[cn];if(zt)return O=zt.nextPos,zt.result;if(qe=O,Je=O,u.substr(O,2)==="//"?(nt="//",O+=2):(nt=a,me===0&&Me(fn)),nt!==a){for(Nt=[],ee.test(u.charAt(O))?(Et=u.charAt(O),O++):(Et=a,me===0&&Me(Q));Et!==a;)Nt.push(Et),ee.test(u.charAt(O))?(Et=u.charAt(O),O++):(Et=a,me===0&&Me(Q));Je=nt=[nt,Nt]}else O=Je,Je=a;return qe=Je!==a?u.substring(qe,O):Je,pe[cn]={nextPos:O,result:qe},qe}(),V===a)if(V=O,z=function(){var qe,Je,nt,Nt,Et,cn,zt,Ke=74*O+72,rt=pe[Ke];if(rt)return O=rt.nextPos,rt.result;if(qe=O,Je=O,u.substr(O,2)==="/*"?(nt="/*",O+=2):(nt=a,me===0&&Me(xt)),nt!==a){for(Nt=[],Et=O,cn=O,me++,u.substr(O,2)===P?(zt=P,O+=2):(zt=a,me===0&&Me(Zt)),me--,zt===a?cn=void 0:(O=cn,cn=a),cn!==a?(u.length>O?(zt=u.charAt(O),O++):(zt=a,me===0&&Me(wn)),zt!==a?Et=zt:(O=Et,Et=a)):(O=Et,Et=a);Et!==a;)Nt.push(Et),Et=O,cn=O,me++,u.substr(O,2)===P?(zt=P,O+=2):(zt=a,me===0&&Me(Zt)),me--,zt===a?cn=void 0:(O=cn,cn=a),cn!==a?(u.length>O?(zt=u.charAt(O),O++):(zt=a,me===0&&Me(wn)),zt!==a?Et=zt:(O=Et,Et=a)):(O=Et,Et=a);u.substr(O,2)===P?(Et=P,O+=2):(Et=a,me===0&&Me(Zt)),Et!==a?Je=nt=[nt,Nt,Et]:(O=Je,Je=a)}else O=Je,Je=a;return qe=Je!==a?u.substring(qe,O):Je,pe[Ke]={nextPos:O,result:qe},qe}(),z!==a){for(ie=[],Y=O,(te=St())!==a&&(we=je())!==a?Y=ds(0,te,we):(O=Y,Y=a);Y!==a;)ie.push(Y),Y=O,(te=St())!==a&&(we=je())!==a?Y=ds(0,te,we):(O=Y,Y=a);V=jt(z,ie.flat())}else O=V,V=a;return pe[Ne]={nextPos:O,result:V},V}function St(){var V,z,ie,Y=74*O+73,te=pe[Y];if(te)return O=te.nextPos,te.result;if(me++,V=O,z=[],Z.test(u.charAt(O))?(ie=u.charAt(O),O++):(ie=a,me===0&&Me(Ai)),ie!==a)for(;ie!==a;)z.push(ie),Z.test(u.charAt(O))?(ie=u.charAt(O),O++):(ie=a,me===0&&Me(Ai));else z=a;return V=z!==a?u.substring(V,O):z,me--,V===a&&(z=a,me===0&&Me(Jn)),pe[Y]={nextPos:O,result:V},V}const vt=(V,z)=>({type:V,...z}),jt=(...V)=>V.flat().filter(z=>z!=null&&z!==""&&z.length!==0),ir=(...V)=>{return(z=jt(V)).length>1?z:z[0];var z},Ao=(...V)=>V.flat().reduce((z,[ie,Y])=>({type:"binary",operator:ie,left:z,right:Y}));if((M=d())!==a&&O===u.length)return M;throw M!==a&&O<u.length&&Me({type:"end"}),Hi=Ci,kn=Tn<u.length?u.charAt(Tn):null,Un=Tn<u.length?yr(Tn,Tn+1):yr(Tn,Tn),new _(_.buildMessage(Hi,kn),Hi,kn,Un);var Hi,kn,Un}}},168:function(h,_,g){var u=this&&this.__assign||function(){return u=Object.assign||function(c){for(var m,v=1,x=arguments.length;v<x;v++)for(var w in m=arguments[v])Object.prototype.hasOwnProperty.call(m,w)&&(c[w]=m[w]);return c},u.apply(this,arguments)},f=this&&this.__spreadArray||function(c,m,v){if(v||arguments.length===2)for(var x,w=0,R=m.length;w<R;w++)!x&&w in m||(x||(x=Array.prototype.slice.call(m,0,w)),x[w]=m[w]);return c.concat(x||Array.prototype.slice.call(m))};Object.defineProperty(_,"__esModule",{value:!0}),_.preprocessComments=_.preprocessAst=void 0;var M=g(416),a=function(c){for(var m=[],v=1;v<arguments.length;v++)m[v-1]=arguments[v];return Object.entries(c).reduce(function(x,w){var R,S=w[0],L=w[1];return u(u({},x),!m.includes(S)&&((R={})[S]=L,R))},{})};_.preprocessComments=function(c){var m,v,x,w="",R=1,S=0,L=0;for(m=0;m<c.length;m++)v=c.substr(m,1),x=c.substr(m+1,1),v!="/"||x!="/"||S||L?(v==`
`&&S&&(S=0),v!="/"||x!="*"||L||S?v=="*"&&x=="/"&&L?(L==R&&(w+=" "),L=0,m++):(L||S)&&v!=`
`||(w+=v,R++):(L=R,m++)):(S=R,m++);return w};var E=function(c){return c.replace(/\s+##\s+/g,"")},p=function(c,m){return Object.entries(m).reduce(function(v,x){var w=x[0],R=x[1];return R.args?function(S,L,A,y){for(var P,B="\\b".concat(L,"\\s*\\("),T=new RegExp(B,"m"),I="",D=y,k=function(){var U=function(re){for(var oe,de=0,ue=[],Be="",Ge=0;Ge<re.length;Ge++){if((oe=re.charAt(Ge))==="("&&de++,oe===")"&&de--,de===-1)return(Be!==""||ue.length)&&ue.push(Be),{args:ue,length:Ge};oe===","&&de===0?(ue.push(Be),Be=""):Be+=oe}return null}(D.substring(P.index+P[0].length));if(U===null)throw new Error("".concat(D.match(T)," unterminated macro invocation"));var G=(A.args||[]).filter(function(re){return re.literal!==","}),H=U.args,se=U.length,ee=P[0].length+se+1;if(H.length>G.length)throw new Error("'".concat(L,"': Too many arguments for macro"));if(H.length<G.length)throw new Error("'".concat(L,"': Not enough arguments for macro"));var Z=E(G.reduce(function(re,oe,de){return re.replace(new RegExp("\\b".concat(oe.identifier,"\\b"),"g"),H[de].trim())},A.body)),ne=p(Z,a(S,L)),W=P.index+ne.length,K=D.replace(D.substr(P.index,ee),ne);I+=K.substr(0,W),D=K.substr(W)};P=T.exec(D);)k();return I+D}(m,w,R,v):function(S,L,A,y){var P=y;if(new RegExp("\\b".concat(L,"\\b"),"g").test(y)){var B=A.body||"",T=E(y.replace(new RegExp("\\b".concat(L,"\\b"),"g"),B));P=p(T,a(S,L))}return P}(m,w,R,v)},c)},d=function(c){return!!c},s=function(c){for(var m=[],v=1;v<arguments.length;v++)m[v-1]=arguments[v];m.forEach(function(x){t(x,{unary_defined:{enter:function(w){w.skip()}},identifier:{enter:function(w){w.node.identifier=p(w.node.identifier,c)}}})})},r=function(c,m){return v={int_constant:function(w){return parseInt(w.token,10)},unary_defined:function(w){return w.identifier.identifier in m},identifier:function(w){return w.identifier},group:function(w,R){return R(w.expression)},binary:function(w,R){var S=w.left,L=w.right,A=w.operator.literal;switch(A){case"*":return R(S)*R(L);case"/":return R(S)/R(L);case"%":return R(S)%R(L);case"+":return R(S)+R(L);case"-":return R(S)-R(L);case"<<":return R(S)<<R(L);case">>":return R(S)>>R(L);case"<":return R(S)<R(L);case">":return R(S)>R(L);case"<=":return R(S)<=R(L);case">=":return R(S)>=R(L);case"==":return R(S)==R(L);case"!=":return R(S)!=R(L);case"&":return R(S)&R(L);case"^":return R(S)^R(L);case"|":return R(S)|R(L);case"&&":return R(S)&&R(L);case"||":return R(S)||R(L);default:throw new Error("Preprocessing error: Unknown binary operator ".concat(A))}},unary:function(w,R){switch(w.operator.literal){case"+":return R(w.expression);case"-":return-1*R(w.expression);case"!":return!R(w.expression);case"~":return~R(w.expression);default:throw new Error("Preprocessing error: Unknown unary operator ".concat(w.operator.literal))}}},x=function(w){var R=v[w.type];if(!R)throw new Error("No evaluate() evaluator for ".concat(w.type));return R(w,x)},x(c);var v,x},t=M.visit;_.preprocessAst=function(c,m){m===void 0&&(m={});var v,x=Object.entries(m.defines||{}).reduce(function(R,S){var L,A=S[0],y=S[1];return u(u({},R),((L={})[A]={body:y},L))},{}),w=((v=m.preserve)===void 0&&(v={}),function(R){var S=v==null?void 0:v[R.node.type];return typeof S=="function"?S(R):S});return t(c,{conditional:{enter:function(R){var S=R,L=S.node;w(S)||(s.apply(void 0,f([x],f([L.ifPart.expression],L.elseIfParts.map(function(A){return A.expression}),!0).filter(d),!1)),function(A,y){return y.type==="if"?r(y.expression,A):y.type==="ifdef"?y.identifier.identifier in A:y.type==="ifndef"?!(y.identifier.identifier in A):void 0}(x,L.ifPart)?S.replaceWith(L.ifPart.body):L.elseIfParts.reduce(function(A,y){return A||r(y.expression,x)&&(S.replaceWith(y.body),!0)},!1)||(L.elsePart?S.replaceWith(L.elsePart.body):S.remove()))}},text:{enter:function(R){var S=R;S.node.text=p(S.node.text,x)}},define_arguments:{enter:function(R){var S=R,L=S.node,A=L.identifier.identifier,y=L.body,P=L.args;x[A]={args:P,body:y},!w(S)&&S.remove()}},define:{enter:function(R){var S=R,L=S.node,A=L.identifier.identifier,y=L.body;x[A]={body:y},!w(S)&&S.remove()}},undef:{enter:function(R){var S=R;delete x[S.node.identifier.identifier],!w(S)&&S.remove()}},error:{enter:function(R){var S=R;if(m.stopOnError)throw new Error(S.node.message);!w(S)&&S.remove()}},pragma:{enter:function(R){var S=R;!w(S)&&S.remove()}},version:{enter:function(R){var S=R;!w(S)&&S.remove()}},extension:{enter:function(R){var S=R;!w(S)&&S.remove()}},line:{enter:function(R){var S=R;!w(S)&&S.remove()}}}),c}},866:(h,_,g)=>{g.d(_,{Z:()=>E});var u=g(81),f=g.n(u),M=g(645),a=g.n(M)()(f());a.push([h.id,"@import url(https://fonts.googleapis.com/css?family=Montserrat:300,400);"]),a.push([h.id,'.captureMenuComponent{position:absolute;padding:7px;z-index:99999;top:10px;left:50%;margin-left:-209px;height:40px;width:400px;border:2px solid #222;background-color:#2c2c2c;visibility:hidden;display:none;color:#f9f9f9;font-family:Consolas,monaco,monospace;font-size:14px;font-weight:500}.captureMenuComponent.active{visibility:visible;display:block}.captureMenuComponent,.captureMenuComponent:after,.captureMenuComponent:before{box-sizing:content-box}.captureMenuLogComponent{position:absolute;padding:7px;z-index:80000;top:66px;left:50%;margin-left:-209px;height:40px;width:400px;border:2px solid #222;background-color:#2c2c2c;visibility:hidden;display:none;color:#f9f9f9;font-family:Consolas,monaco,monospace;font-size:14px;font-weight:500}.captureMenuLogComponent.active{visibility:visible;display:block}.captureMenuLogComponent,.captureMenuLogComponent:after,.captureMenuLogComponent:before{box-sizing:content-box}.captureMenuLogComponent span.error{color:red}.canvasListComponent{float:left;width:50%;height:100%}.canvasListComponent [commandName=onCanvasSelection]{vertical-align:center;line-height:40px;white-space:nowrap;text-overflow:ellipsis;width:190px;display:inline-block;overflow:hidden;margin:0px 5px}.canvasListComponent [commandName=onCanvasSelection]:hover{color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.canvasListComponent ul{margin:0px;padding:7px;list-style:none;position:absolute;top:54px;left:-2px;width:400px;border:2px solid #222;background-color:#2c2c2c}.canvasListComponent ul li{margin:5px}.canvasListComponent ul li:hover{color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.captureMenuActionsComponent{float:left;width:30%;height:100%;margin-top:7.5px}.captureMenuActionsComponent div{float:left}.captureMenuActionsComponent [commandName=onCaptureRequested]{border-radius:50%;background:#2c2c2c;border:2px solid red;width:21px;height:21px}.captureMenuActionsComponent [commandName=onCaptureRequested]:hover{background:red;cursor:pointer;transition:background .3s;-webkit-transition:background .3s;-moz-transition:background .3s}.captureMenuActionsComponent [commandName=onPlayRequested],.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]{width:21px;height:21px;border:2px solid #f9f9f9;border-radius:50%;margin-left:9px}.captureMenuActionsComponent [commandName=onPlayRequested]:before,.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:before{content:"";position:absolute;display:inline-block;margin-top:6px;margin-left:4px;width:7px;height:7px;border-top:2px solid #f9f9f9;border-right:2px solid #f9f9f9;background-color:#f9f9f9;-moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);z-index:-20}.captureMenuActionsComponent [commandName=onPlayRequested]:after,.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:after{content:"";position:absolute;display:inline-block;width:8px;height:20px;background-color:#2c2c2c;z-index:-10}.captureMenuActionsComponent [commandName=onPlayRequested]:hover,.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:hover{cursor:pointer;border:2px solid #c9c9c9;transition:border .3s;-webkit-transition:border .3s;-moz-transition:border .3s}.captureMenuActionsComponent [commandName=onPauseRequested]{width:21px;height:21px;border:2px solid #f9f9f9;border-radius:50%;margin-left:9px}.captureMenuActionsComponent [commandName=onPauseRequested]:before{content:"";position:absolute;display:inline-block;width:2px;height:13px;margin-left:12px;margin-top:4px;background-color:#f9f9f9}.captureMenuActionsComponent [commandName=onPauseRequested]:after{content:"";position:absolute;display:inline-block;width:2px;height:13px;margin-left:7px;margin-top:4px;background-color:#f9f9f9}.captureMenuActionsComponent [commandName=onPauseRequested]:hover{cursor:pointer;border:2px solid #c9c9c9;transition:border .3s;-webkit-transition:border .3s;-moz-transition:border .3s}.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:before{background-color:#2c2c2c}.fpsCounterComponent{float:left;width:20%;vertical-align:center;line-height:40px;white-space:nowrap}',""]);const E=a},625:(h,_,g)=>{g.d(_,{Z:()=>E});var u=g(81),f=g.n(u),M=g(645),a=g.n(M)()(f());a.push([h.id,"@import url(https://fonts.googleapis.com/css?family=Montserrat:300,400);"]),a.push([h.id,'.resultViewComponent{position:absolute;z-index:99999;border:1px solid #000;top:0;left:0;bottom:0;right:0;background-color:#222;opacity:1;visibility:hidden;display:none;color:#f9f9f9;font-family:Consolas,monaco,monospace;font-size:14px;font-weight:500}.resultViewComponent.active{visibility:visible;display:block}.resultViewComponent,.resultViewComponent:after,.resultViewComponent:before{box-sizing:content-box}.resultViewMenuComponent{font-family:"Montserrat",sans-serif;font-size:13px;font-weight:300;line-height:40px;flex:1 100%;display:flex;flex-flow:row wrap;height:42px;outline:0 none;border-bottom:2px solid #222;box-sizing:border-box;list-style:none;margin:0;background:#2c2c2c;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;justify-content:flex-end}.resultViewMenuComponent .resultViewMenuOpen{display:none;visibility:hidden}.resultViewMenuComponent a{outline:0 none;text-decoration:none;display:block;padding:0 20px 0 20px;color:#ccc;background:#2c2c2c;box-sizing:border-box;height:100%}.resultViewMenuComponent a.active{background:#222;color:#fff;font-weight:400;border-bottom:2px solid #f0640d}.resultViewMenuComponent a:hover{background:#222;color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.resultViewMenuComponent a:hover.active{color:#f0640d;transition:color 0;-webkit-transition:color 0;-moz-transition:color 0}.resultViewMenuComponent a.clearSearch{padding:0px;margin-left:-30px;margin-right:20px;z-index:9000;color:#f9f9f9}.resultViewMenuComponent a.clearSearch:hover{background:#2c2c2c;color:#f0640d}@media all and (max-width: 1024px){.resultViewMenuComponent{padding:0px;position:absolute;overflow-y:visible;top:0px;left:0px;right:0px;bottom:0px;z-index:999999;display:block}.resultViewMenuComponent .resultViewMenuOpen{display:block;visibility:visible}.resultViewMenuComponent li:not(.resultViewMenuSmall){display:none;visibility:hidden}.resultViewMenuComponent li{background:#2c2c2c}.resultViewMenuComponent li.searchContainer{background:#464646}.resultViewMenuComponent a.active{background:#2c2c2c}}.resultViewMenuComponent input{border:0;font-family:"Montserrat",sans-serif;font-weight:300;padding:0 20px 0 20px;background:#464646;color:#f9f9f9;height:40px;position:relative;top:-1px;box-sizing:border-box}.resultViewMenuComponent input:focus{border:0;outline:0 none}.resultViewMenuComponent .clearSearch{position:relative;background:rgba(0,0,0,0);display:inline;padding:0px;margin-left:-30px;z-index:9000;color:#f0640d}.resultViewMenuComponent .clearSearch:hover{background:rgba(0,0,0,0) !important}.resultViewMenuComponent ::-webkit-input-placeholder{color:#ccc}.resultViewMenuComponent :-moz-placeholder{color:#ccc}.resultViewMenuComponent ::-moz-placeholder{color:#ccc}.resultViewMenuComponent :-ms-input-placeholder{color:#ccc}.resultViewContentComponent{position:absolute;top:40px;left:0;bottom:0;right:0}.informationColumnLeftComponent{position:absolute;top:0;left:0;bottom:0;right:50%;overflow:auto;overflow-x:hidden;overflow-y:visible}.informationColumnRightComponent{position:absolute;top:0;left:50%;bottom:0;right:0;overflow:auto;overflow-x:hidden;overflow-y:visible}.captureListComponent{position:absolute;top:40px;left:0;bottom:0;right:0;background:#222;z-index:9000;display:none;visibility:hidden;overflow-y:visible;overflow-x:hidden}.captureListComponent.active{display:block;visibility:visible}.captureListComponent .openCaptureFile{border:1px dashed #f9f9f9;display:block;margin:5px;padding:5px;text-align:center;font-style:italic}.captureListComponent .openCaptureFile span{line-height:100%;vertical-align:middle}.captureListComponent ul{margin:0px;padding:0px;list-style:none;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;justify-content:flex-start}.captureListComponent ul li{margin:5px;border:1px solid #606060}.captureListComponent ul li img{width:295px;background-image:-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));background-image:-moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%),-moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0,25px 0,25px -25px,0px 25px;display:block}.captureListComponent ul li span{display:block;text-align:center;border:5px solid #222}.captureListComponent ul li span .captureListItemSave{color:#f9f9f9;font-size:16px;margin-left:10px;position:relative;padding:3px 8px 3px 32px}.captureListComponent ul li span .captureListItemSave:before,.captureListComponent ul li span .captureListItemSave:after{box-sizing:border-box;content:"";position:absolute}.captureListComponent ul li span .captureListItemSave:before{background:#d9d9d9;border-color:#f9f9f9;border-style:solid;border-width:7px 2px 1px;border-radius:1px;height:16px;left:8px;top:5px;width:16px}.captureListComponent ul li span .captureListItemSave:after{background:#f9f9f9;border-color:#d9d9d9;border-style:solid;border-width:1px 1px 1px 4px;height:5px;left:13px;top:5px;width:7px}.captureListComponent ul li:hover{cursor:pointer}.captureListComponent ul li.active span{background:#f0640d;border:5px solid #f0640d}.captureListComponent ul li.active span .captureListItemSave:before{background:#f0640d}.captureListComponent ul li.active span .captureListItemSave:after{border-color:#f0640d}.visualStateListComponent{position:absolute;top:0;left:0;bottom:0;padding:5px;right:80%;overflow-y:visible;overflow-x:hidden}.visualStateListComponent ul{margin:0px;padding:0px;list-style:none}.visualStateListComponent ul li{margin:20px 15px 0px 15px;border:1px solid #606060}.visualStateListComponent ul li img{display:block;padding:0px;box-sizing:border-box;max-height:600px;width:100%;margin:0 auto;background-image:-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));background-image:-moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%),-moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0,25px 0,25px -25px,0px 25px}.visualStateListComponent ul li:hover{cursor:pointer}.visualStateListComponent ul li span{border:5px solid #222;background:#222;box-sizing:border-box;display:inline-block;width:100%;margin:0px;padding:5px;word-wrap:break-word}.visualStateListComponent ul li.active{border:2px solid #f0640d}.commandListComponent{position:absolute;top:0;left:20%;right:40%;bottom:0;color:#d3d3d3}.commandListComponent ul{margin:0px;padding:0px;list-style:none;overflow-y:visible;overflow-x:hidden;height:100%}.commandListComponent ul li{padding:8px}.commandListComponent ul li span{word-wrap:break-word;line-height:22px}.commandListComponent ul li:hover{color:#f9f9f9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.commandListComponent ul li:nth-child(even){background:#2c2c2c}.commandListComponent ul li:nth-child(odd){background:#222}.commandListComponent ul li .important{font-weight:800}.commandListComponent ul li .important.deprecated{color:red}.commandListComponent ul li .important.unused{color:#ff0}.commandListComponent ul li .important.disabled{color:gray}.commandListComponent ul li .important.redundant{color:orange}.commandListComponent ul li .important.valid{color:#adff2f}.commandListComponent ul li .marker{font-size:16px;font-weight:900;color:#adff2f}.commandListComponent ul li.active{background:#f37628;color:#222}.commandListComponent ul li.drawCall{background:#5db0d7;color:#222}.commandListComponent ul li a{margin-left:5px;margin-right:5px;color:#5db0d7;background:#222;padding:5px;font-weight:900;display:inline-block}.commandDetailComponent{position:absolute;top:0;left:60%;right:0;bottom:0;overflow-y:visible;overflow-x:hidden}.jsonGroupComponent{display:block;margin:10px;padding:10px;padding-bottom:5px}.jsonGroupComponent .jsonGroupComponentTitle{display:block;font-size:16px;color:#5db0d7;border-bottom:1px solid #5db0d7;padding-bottom:5px;margin-bottom:5px;text-transform:capitalize}.jsonGroupComponent ul{margin:0px;padding:0px;list-style:none}.jsonGroupComponent ul li:nth-child(even){background:#222}.jsonGroupComponent ul li:nth-child(odd){background:#222}.jsonItemComponentKey{color:#f0640d}.jsonItemComponentValue{white-space:pre-wrap}.jsonItemImageHolder{width:50%;margin:auto}.jsonItemImageHolder .jsonItemImage{margin:5px;display:block;border:1px solid #606060;width:100%}.jsonItemImageHolder .jsonItemImage img{width:100%;display:block;margin:auto;max-width:256px;background-image:-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));background-image:-moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%),-moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0,25px 0,25px -25px,0px 25px}.jsonItemImageHolder .jsonItemImage span{margin:0px;padding:5px;word-wrap:break-word;display:inline-block;width:100%;box-sizing:border-box}[commandName=onOpenSourceClicked]:hover{color:#f9f9f9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.jsonVisualStateItemComponent{text-align:center;padding:10px}.jsonVisualStateItemComponent img{background-image:-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)),-webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)),-webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));background-image:-moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%),-moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%),-moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0,25px 0,25px -25px,0px 25px;border:1px solid #606060;margin:5px;width:100%;max-width:512px;max-height:800px}.jsonVisualStateItemComponent span{display:block}.jsonContentComponent{position:absolute;top:0;left:0;right:0;bottom:0;padding:10px;overflow-y:visible;overflow-x:hidden}.jsonItemComponentValue{word-break:break-all;white-space:normal}.jsonSourceItemComponentOpen{font-weight:bold;color:#5db0d7;text-decoration:underline}.sourceCodeMenuComponentContainer{position:absolute;left:0;top:0;bottom:48px;right:40%}.sourceCodeMenuComponentFooter{position:absolute;left:0;right:40%;bottom:0;padding:0 15px}.sourceCodeMenuComponent{font-family:"Montserrat",sans-serif;font-size:13px;font-weight:300;line-height:40px;flex:1 100%;display:flex;flex-flow:row wrap;height:42px;outline:0 none;border-bottom:2px solid #222;box-sizing:border-box;list-style:none;margin:0;background:#2c2c2c;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;justify-content:flex-end}.sourceCodeMenuComponent .resultViewMenuOpen{display:none;visibility:hidden}.sourceCodeMenuComponent a{outline:0 none;text-decoration:none;display:block;padding:0 20px 0 20px;color:#ccc;background:#2c2c2c;box-sizing:border-box;height:100%}.sourceCodeMenuComponent a.active{background:#222;color:#fff;font-weight:400;border-bottom:2px solid #f0640d}.sourceCodeMenuComponent a:hover{background:#222;color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.sourceCodeMenuComponent a:hover.active{color:#f0640d;transition:color 0;-webkit-transition:color 0;-moz-transition:color 0}.sourceCodeMenuComponent a.clearSearch{display:inline-block;padding:0px;margin-left:-30px;margin-right:20px;z-index:9000;color:#f9f9f9}.sourceCodeMenuComponent a.clearSearch:hover{background:#2c2c2c;color:#f0640d}.sourceCodeMenuComponent input{border:0;font-family:"Montserrat",sans-serif;font-weight:300;padding:0 20px 0 20px;background:#464646;color:#f9f9f9;height:100%;position:relative;top:-1px;box-sizing:border-box}.sourceCodeMenuComponent input:focus{border:0;outline:0 none}.sourceCodeMenuComponent .clearSearch{position:relative;background:rgba(0,0,0,0);display:inline;padding:0px;margin-left:-30px;z-index:9000;color:#f0640d}.sourceCodeMenuComponent .clearSearch:hover{background:rgba(0,0,0,0) !important}.sourceCodeMenuComponent ::-webkit-input-placeholder{color:#ccc}.sourceCodeMenuComponent :-moz-placeholder{color:#ccc}.sourceCodeMenuComponent ::-moz-placeholder{color:#ccc}.sourceCodeMenuComponent :-ms-input-placeholder{color:#ccc}.sourceCodeComponent{position:absolute;top:42px;left:0;bottom:48px;right:40%;background:#222;z-index:9000;overflow-x:visible;overflow:auto}.sourceCodeComponent .sourceCodeComponentTitle{font-size:16px;font-weight:800;line-height:50px;color:#f0640d;padding:1em;margin:.5em 0}',""]);const E=a},827:(h,_,g)=>{g.d(_,{Z:()=>E});var u=g(81),f=g.n(u),M=g(645),a=g.n(M)()(f());a.push([h.id,`.ace-monokai {\r
    color: #f9f9f9;\r
    font-size: 14px;\r
}\r
\r
.ace-monokai .ace_entity.ace_name.ace_tag,\r
.ace-monokai .ace_keyword,\r
.ace-monokai .ace_meta.ace_tag,\r
.ace-monokai .ace_storage {\r
    color: #F0640D\r
}\r
\r
.ace-monokai .ace_constant.ace_character,\r
.ace-monokai .ace_constant.ace_other {\r
    color: #5db0d7;\r
}\r
\r
.ace-monokai .ace_marker-layer .ace_selection {\r
    background: #a6e22e\r
}\r
\r
.ace-monokai .ace_marker-layer .ace_bracket {\r
    margin: -1px 0 0 -1px;\r
    border: 1px solid #a6e22e;\r
}\r
\r
.ace-monokai .ace_marker-layer .ace_active-line {\r
    background: #2c2c2c\r
}\r
.ace-monokai .ace_gutter-active-line {\r
    background-color: #2c2c2c\r
}\r
.ace-monokai .ace_marker-layer .ace_selected-word {\r
    border: 1px solid #a6e22e\r
}\r
\r
.ace-monokai .ace_constant.ace_language {\r
    color: #e6db74\r
}\r
.ace-monokai .ace_constant.ace_numeric {\r
    color: #ae81ff\r
}\r
\r
.ace-monokai .ace_gutter {\r
    background: #222;\r
    color: #8F908A;\r
}`,""]);const E=a},645:h=>{h.exports=function(_){var g=[];return g.toString=function(){return this.map(function(u){var f="",M=u[5]!==void 0;return u[4]&&(f+="@supports (".concat(u[4],") {")),u[2]&&(f+="@media ".concat(u[2]," {")),M&&(f+="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {")),f+=_(u),M&&(f+="}"),u[2]&&(f+="}"),u[4]&&(f+="}"),f}).join("")},g.i=function(u,f,M,a,E){typeof u=="string"&&(u=[[null,u,void 0]]);var p={};if(M)for(var d=0;d<this.length;d++){var s=this[d][0];s!=null&&(p[s]=!0)}for(var r=0;r<u.length;r++){var t=[].concat(u[r]);M&&p[t[0]]||(E!==void 0&&(t[5]===void 0||(t[1]="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {").concat(t[1],"}")),t[5]=E),f&&(t[2]&&(t[1]="@media ".concat(t[2]," {").concat(t[1],"}")),t[2]=f),a&&(t[4]?(t[1]="@supports (".concat(t[4],") {").concat(t[1],"}"),t[4]=a):t[4]="".concat(a)),g.push(t))}},g}},81:h=>{h.exports=function(_){return _[1]}},819:(h,_,g)=>{h=g.nmd(h),function(){var u=function(){return this}();u||typeof window>"u"||(u=window);var f=function(s,r,t){typeof s=="string"?(arguments.length==2&&(t=r),f.modules[s]||(f.payloads[s]=t,f.modules[s]=null)):f.original?f.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};f.modules={},f.payloads={};var M,a=function(s,r,t){if(typeof r=="string"){var c=d(s,r);if(c!=null)return t&&t(),c}else if(Object.prototype.toString.call(r)==="[object Array]"){for(var m=[],v=0,x=r.length;v<x;++v){var w=d(s,r[v]);if(w==null&&E.original)return;m.push(w)}return t&&t.apply(null,m)||!0}},E=function(s,r){var t=a("",s,r);return t==null&&E.original?E.original.apply(this,arguments):t},p=function(s,r){if(r.indexOf("!")!==-1){var t=r.split("!");return p(s,t[0])+"!"+p(s,t[1])}if(r.charAt(0)==".")for(r=s.split("/").slice(0,-1).join("/")+"/"+r;r.indexOf(".")!==-1&&c!=r;){var c=r;r=r.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return r},d=function(s,r){r=p(s,r);var t=f.modules[r];if(!t){if(typeof(t=f.payloads[r])=="function"){var c={},m={id:r,uri:"",exports:c,packaged:!0};c=t(function(v,x){return a(r,v,x)},c,m)||m.exports,f.modules[r]=c,delete f.payloads[r]}t=f.modules[r]=c||t}return t};M=u,u.ace||(u.ace={}),M=u.ace,M.define&&M.define.packaged||(f.original=M.define,M.define=f,M.define.packaged=!0),M.require&&M.require.packaged||(E.original=M.require,M.require=E,M.require.packaged=!0)}(),ace.define("ace/lib/regexp",["require","exports","module"],function(u,f,M){var a,E={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},p=E.exec.call(/()??/,"")[1]===void 0,d=(a=/^/g,E.test.call(a,""),!a.lastIndex);function s(t){return(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":"")}function r(t,c,m){if(Array.prototype.indexOf)return t.indexOf(c,m);for(var v=m||0;v<t.length;v++)if(t[v]===c)return v;return-1}d&&p||(RegExp.prototype.exec=function(t){var c,m,v=E.exec.apply(this,arguments);if(typeof t=="string"&&v){if(!p&&v.length>1&&r(v,"")>-1&&(m=RegExp(this.source,E.replace.call(s(this),"g","")),E.replace.call(t.slice(v.index),m,function(){for(var w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(v[w]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var x=1;x<v.length;x++)(c=this._xregexp.captureNames[x-1])&&(v[c]=v[x]);!d&&this.global&&!v[0].length&&this.lastIndex>v.index&&this.lastIndex--}return v},d||(RegExp.prototype.test=function(t){var c=E.exec.call(this,t);return c&&this.global&&!c[0].length&&this.lastIndex>c.index&&this.lastIndex--,!!c}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(u,f,M){function a(){}Function.prototype.bind||(Function.prototype.bind=function(W){var K=this;if(typeof K!="function")throw new TypeError("Function.prototype.bind called on incompatible "+K);var re=v.call(arguments,1),oe=function(){if(this instanceof oe){var de=K.apply(this,re.concat(v.call(arguments)));return Object(de)===de?de:this}return K.apply(W,re.concat(v.call(arguments)))};return K.prototype&&(a.prototype=K.prototype,oe.prototype=new a,a.prototype=null),oe});var E,p,d,s,r,t=Function.prototype.call,c=Array.prototype,m=Object.prototype,v=c.slice,x=t.bind(m.toString),w=t.bind(m.hasOwnProperty);if((r=w(m,"__defineGetter__"))&&(E=t.bind(m.__defineGetter__),p=t.bind(m.__defineSetter__),d=t.bind(m.__lookupGetter__),s=t.bind(m.__lookupSetter__)),[1,2].splice(0).length!=2)if(function(){function W(oe){var de=new Array(oe+2);return de[0]=de[1]=0,de}var K,re=[];if(re.splice.apply(re,W(20)),re.splice.apply(re,W(26)),K=re.length,re.splice(5,0,"XXX"),re.length,K+1==re.length)return!0}()){var R=Array.prototype.splice;Array.prototype.splice=function(W,K){return arguments.length?R.apply(this,[W===void 0?0:W,K===void 0?this.length-W:K].concat(v.call(arguments,2))):[]}}else Array.prototype.splice=function(W,K){var re=this.length;W>0?W>re&&(W=re):W==null?W=0:W<0&&(W=Math.max(re+W,0)),W+K<re||(K=re-W);var oe=this.slice(W,W+K),de=v.call(arguments,2),ue=de.length;if(W===re)ue&&this.push.apply(this,de);else{var Be=Math.min(K,re-W),Ge=W+Be,ke=Ge+ue-Be,_t=re-Ge,wt=re-Be;if(ke<Ge)for(var it=0;it<_t;++it)this[ke+it]=this[Ge+it];else if(ke>Ge)for(it=_t;it--;)this[ke+it]=this[Ge+it];if(ue&&W===wt)this.length=wt,this.push.apply(this,de);else for(this.length=wt+ue,it=0;it<ue;++it)this[W+it]=de[it]}return oe};Array.isArray||(Array.isArray=function(W){return x(W)=="[object Array]"});var S,L,A=Object("a"),y=A[0]!="a"||!(0 in A);function P(W){try{return Object.defineProperty(W,"sentinel",{}),"sentinel"in W}catch{}}if(Array.prototype.forEach||(Array.prototype.forEach=function(W){var K=ne(this),re=y&&x(this)=="[object String]"?this.split(""):K,oe=arguments[1],de=-1,ue=re.length>>>0;if(x(W)!="[object Function]")throw new TypeError;for(;++de<ue;)de in re&&W.call(oe,re[de],de,K)}),Array.prototype.map||(Array.prototype.map=function(W){var K=ne(this),re=y&&x(this)=="[object String]"?this.split(""):K,oe=re.length>>>0,de=Array(oe),ue=arguments[1];if(x(W)!="[object Function]")throw new TypeError(W+" is not a function");for(var Be=0;Be<oe;Be++)Be in re&&(de[Be]=W.call(ue,re[Be],Be,K));return de}),Array.prototype.filter||(Array.prototype.filter=function(W){var K,re=ne(this),oe=y&&x(this)=="[object String]"?this.split(""):re,de=oe.length>>>0,ue=[],Be=arguments[1];if(x(W)!="[object Function]")throw new TypeError(W+" is not a function");for(var Ge=0;Ge<de;Ge++)Ge in oe&&(K=oe[Ge],W.call(Be,K,Ge,re)&&ue.push(K));return ue}),Array.prototype.every||(Array.prototype.every=function(W){var K=ne(this),re=y&&x(this)=="[object String]"?this.split(""):K,oe=re.length>>>0,de=arguments[1];if(x(W)!="[object Function]")throw new TypeError(W+" is not a function");for(var ue=0;ue<oe;ue++)if(ue in re&&!W.call(de,re[ue],ue,K))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(W){var K=ne(this),re=y&&x(this)=="[object String]"?this.split(""):K,oe=re.length>>>0,de=arguments[1];if(x(W)!="[object Function]")throw new TypeError(W+" is not a function");for(var ue=0;ue<oe;ue++)if(ue in re&&W.call(de,re[ue],ue,K))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(W){var K=ne(this),re=y&&x(this)=="[object String]"?this.split(""):K,oe=re.length>>>0;if(x(W)!="[object Function]")throw new TypeError(W+" is not a function");if(!oe&&arguments.length==1)throw new TypeError("reduce of empty array with no initial value");var de,ue=0;if(arguments.length>=2)de=arguments[1];else for(;;){if(ue in re){de=re[ue++];break}if(++ue>=oe)throw new TypeError("reduce of empty array with no initial value")}for(;ue<oe;ue++)ue in re&&(de=W.call(void 0,de,re[ue],ue,K));return de}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(W){var K=ne(this),re=y&&x(this)=="[object String]"?this.split(""):K,oe=re.length>>>0;if(x(W)!="[object Function]")throw new TypeError(W+" is not a function");if(!oe&&arguments.length==1)throw new TypeError("reduceRight of empty array with no initial value");var de,ue=oe-1;if(arguments.length>=2)de=arguments[1];else for(;;){if(ue in re){de=re[ue--];break}if(--ue<0)throw new TypeError("reduceRight of empty array with no initial value")}do ue in this&&(de=W.call(void 0,de,re[ue],ue,K));while(ue--);return de}),Array.prototype.indexOf&&[0,1].indexOf(1,2)==-1||(Array.prototype.indexOf=function(W){var K=y&&x(this)=="[object String]"?this.split(""):ne(this),re=K.length>>>0;if(!re)return-1;var oe=0;for(arguments.length>1&&(oe=Z(arguments[1])),oe=oe>=0?oe:Math.max(0,re+oe);oe<re;oe++)if(oe in K&&K[oe]===W)return oe;return-1}),Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)==-1||(Array.prototype.lastIndexOf=function(W){var K=y&&x(this)=="[object String]"?this.split(""):ne(this),re=K.length>>>0;if(!re)return-1;var oe=re-1;for(arguments.length>1&&(oe=Math.min(oe,Z(arguments[1]))),oe=oe>=0?oe:re-Math.abs(oe);oe>=0;oe--)if(oe in K&&W===K[oe])return oe;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(W){return W.__proto__||(W.constructor?W.constructor.prototype:m)}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(W,K){if(typeof W!="object"&&typeof W!="function"||W===null)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+W);if(w(W,K)){var re;if(re={enumerable:!0,configurable:!0},r){var oe=W.__proto__;W.__proto__=m;var de=d(W,K),ue=s(W,K);if(W.__proto__=oe,de||ue)return de&&(re.get=de),ue&&(re.set=ue),re}return re.value=W[K],re}}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(W){return Object.keys(W)}),Object.create||(S=Object.prototype.__proto__===null?function(){return{__proto__:null}}:function(){var W={};for(var K in W)W[K]=null;return W.constructor=W.hasOwnProperty=W.propertyIsEnumerable=W.isPrototypeOf=W.toLocaleString=W.toString=W.valueOf=W.__proto__=null,W},Object.create=function(W,K){var re;if(W===null)re=S();else{if(typeof W!="object")throw new TypeError("typeof prototype["+typeof W+"] != 'object'");var oe=function(){};oe.prototype=W,(re=new oe).__proto__=W}return K!==void 0&&Object.defineProperties(re,K),re}),Object.defineProperty){var B=P({}),T=typeof document>"u"||P(document.createElement("div"));if(!B||!T)var I=Object.defineProperty}Object.defineProperty&&!I||(Object.defineProperty=function(W,K,re){if(typeof W!="object"&&typeof W!="function"||W===null)throw new TypeError("Object.defineProperty called on non-object: "+W);if(typeof re!="object"&&typeof re!="function"||re===null)throw new TypeError("Property description must be an object: "+re);if(I)try{return I.call(Object,W,K,re)}catch{}if(w(re,"value"))if(r&&(d(W,K)||s(W,K))){var oe=W.__proto__;W.__proto__=m,delete W[K],W[K]=re.value,W.__proto__=oe}else W[K]=re.value;else{if(!r)throw new TypeError("getters & setters can not be defined on this javascript engine");w(re,"get")&&E(W,K,re.get),w(re,"set")&&p(W,K,re.set)}return W}),Object.defineProperties||(Object.defineProperties=function(W,K){for(var re in K)w(K,re)&&Object.defineProperty(W,re,K[re]);return W}),Object.seal||(Object.seal=function(W){return W}),Object.freeze||(Object.freeze=function(W){return W});try{Object.freeze(function(){})}catch{Object.freeze=(L=Object.freeze,function(K){return typeof K=="function"?K:L(K)})}if(Object.preventExtensions||(Object.preventExtensions=function(W){return W}),Object.isSealed||(Object.isSealed=function(W){return!1}),Object.isFrozen||(Object.isFrozen=function(W){return!1}),Object.isExtensible||(Object.isExtensible=function(W){if(Object(W)===W)throw new TypeError;for(var K="";w(W,K);)K+="?";W[K]=!0;var re=w(W,K);return delete W[K],re}),!Object.keys){var D=!0,k=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],U=k.length;for(var G in{toString:null})D=!1;Object.keys=function(W){if(typeof W!="object"&&typeof W!="function"||W===null)throw new TypeError("Object.keys called on a non-object");var K=[];for(var re in W)w(W,re)&&K.push(re);if(D)for(var oe=0,de=U;oe<de;oe++){var ue=k[oe];w(W,ue)&&K.push(ue)}return K}}Date.now||(Date.now=function(){return new Date().getTime()});var H=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`;if(!String.prototype.trim){H="["+H+"]";var se=new RegExp("^"+H+H+"*"),ee=new RegExp(H+H+"*$");String.prototype.trim=function(){return String(this).replace(se,"").replace(ee,"")}}function Z(W){return(W=+W)!=W?W=0:W!==0&&W!==1/0&&W!==-1/0&&(W=(W>0||-1)*Math.floor(Math.abs(W))),W}var ne=function(W){if(W==null)throw new TypeError("can't convert "+W+" to object");return Object(W)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(u,f,M){u("./regexp"),u("./es5-shim"),typeof Element>"u"||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})}),ace.define("ace/lib/useragent",["require","exports","module"],function(u,f,M){f.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},f.getOS=function(){return f.isMac?f.OS.MAC:f.isLinux?f.OS.LINUX:f.OS.WINDOWS};var a=typeof navigator=="object"?navigator:{},E=(/mac|win|linux/i.exec(a.platform)||["other"])[0].toLowerCase(),p=a.userAgent||"",d=a.appName||"";f.isWin=E=="win",f.isMac=E=="mac",f.isLinux=E=="linux",f.isIE=d=="Microsoft Internet Explorer"||d.indexOf("MSAppHost")>=0?parseFloat((p.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((p.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),f.isOldIE=f.isIE&&f.isIE<9,f.isGecko=f.isMozilla=p.match(/ Gecko\/\d+/),f.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",f.isWebKit=parseFloat(p.split("WebKit/")[1])||void 0,f.isChrome=parseFloat(p.split(" Chrome/")[1])||void 0,f.isEdge=parseFloat(p.split(" Edge/")[1])||void 0,f.isAIR=p.indexOf("AdobeAIR")>=0,f.isAndroid=p.indexOf("Android")>=0,f.isChromeOS=p.indexOf(" CrOS ")>=0,f.isIOS=/iPad|iPhone|iPod/.test(p)&&!window.MSStream,f.isIOS&&(f.isMac=!0),f.isMobile=f.isIOS||f.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(u,f,M){var a=u("./useragent");if(f.buildDom=function p(d,s,r){if(typeof d=="string"&&d){var t=document.createTextNode(d);return s&&s.appendChild(t),t}if(!Array.isArray(d))return d;if(typeof d[0]!="string"||!d[0]){for(var c=[],m=0;m<d.length;m++){var v=p(d[m],s,r);v&&c.push(v)}return c}var x=document.createElement(d[0]),w=d[1],R=1;for(w&&typeof w=="object"&&!Array.isArray(w)&&(R=2),m=R;m<d.length;m++)p(d[m],x,r);return R==2&&Object.keys(w).forEach(function(S){var L=w[S];S==="class"?x.className=Array.isArray(L)?L.join(" "):L:typeof L=="function"||S=="value"?x[S]=L:S==="ref"?r&&(r[L]=x):L!=null&&x.setAttribute(S,L)}),s&&s.appendChild(x),x},f.getDocumentHead=function(p){return p||(p=document),p.head||p.getElementsByTagName("head")[0]||p.documentElement},f.createElement=function(p,d){return document.createElementNS?document.createElementNS(d||"http://www.w3.org/1999/xhtml",p):document.createElement(p)},f.removeChildren=function(p){p.innerHTML=""},f.createTextNode=function(p,d){return(d?d.ownerDocument:document).createTextNode(p)},f.createFragment=function(p){return(p?p.ownerDocument:document).createDocumentFragment()},f.hasCssClass=function(p,d){return(p.className+"").split(/\s+/g).indexOf(d)!==-1},f.addCssClass=function(p,d){f.hasCssClass(p,d)||(p.className+=" "+d)},f.removeCssClass=function(p,d){for(var s=p.className.split(/\s+/g);;){var r=s.indexOf(d);if(r==-1)break;s.splice(r,1)}p.className=s.join(" ")},f.toggleCssClass=function(p,d){for(var s=p.className.split(/\s+/g),r=!0;;){var t=s.indexOf(d);if(t==-1)break;r=!1,s.splice(t,1)}return r&&s.push(d),p.className=s.join(" "),r},f.setCssClass=function(p,d,s){s?f.addCssClass(p,d):f.removeCssClass(p,d)},f.hasCssString=function(p,d){var s,r=0;if(s=(d=d||document).querySelectorAll("style")){for(;r<s.length;)if(s[r++].id===p)return!0}},f.importCssString=function(p,d,s){var r=s;s&&s.getRootNode&&(r=s.getRootNode())&&r!=s||(r=document);var t=r.ownerDocument||r;if(d&&f.hasCssString(d,r))return null;d&&(p+=`
/*# sourceURL=ace/css/`+d+" */");var c=f.createElement("style");c.appendChild(t.createTextNode(p)),d&&(c.id=d),r==t&&(r=f.getDocumentHead(t)),r.insertBefore(c,r.firstChild)},f.importCssStylsheet=function(p,d){f.buildDom(["link",{rel:"stylesheet",href:p}],f.getDocumentHead(d))},f.scrollbarWidth=function(p){var d=f.createElement("ace_inner");d.style.width="100%",d.style.minWidth="0px",d.style.height="200px",d.style.display="block";var s=f.createElement("ace_outer"),r=s.style;r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",r.display="block",s.appendChild(d);var t=p.documentElement;t.appendChild(s);var c=d.offsetWidth;r.overflow="scroll";var m=d.offsetWidth;return c==m&&(m=s.clientWidth),t.removeChild(s),c-m},typeof document>"u"&&(f.importCssString=function(){}),f.computedStyle=function(p,d){return window.getComputedStyle(p,"")||{}},f.setStyle=function(p,d,s){p[d]!==s&&(p[d]=s)},f.HAS_CSS_ANIMATION=!1,f.HAS_CSS_TRANSFORMS=!1,f.HI_DPI=!a.isWin||typeof window<"u"&&window.devicePixelRatio>=1.5,typeof document<"u"){var E=document.createElement("div");f.HI_DPI&&E.style.transform!==void 0&&(f.HAS_CSS_TRANSFORMS=!0),a.isEdge||E.style.animationName===void 0||(f.HAS_CSS_ANIMATION=!0),E=null}f.HAS_CSS_TRANSFORMS?f.translate=function(p,d,s){p.style.transform="translate("+Math.round(d)+"px, "+Math.round(s)+"px)"}:f.translate=function(p,d,s){p.style.top=Math.round(s)+"px",p.style.left=Math.round(d)+"px"}}),ace.define("ace/lib/oop",["require","exports","module"],function(u,f,M){f.inherits=function(a,E){a.super_=E,a.prototype=Object.create(E.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},f.mixin=function(a,E){for(var p in E)a[p]=E[p];return a},f.implement=function(a,E){f.mixin(a,E)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(u,f,M){var a=u("./oop"),E=function(){var p,d,s={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(d in s.FUNCTION_KEYS)p=s.FUNCTION_KEYS[d].toLowerCase(),s[p]=parseInt(d,10);for(d in s.PRINTABLE_KEYS)p=s.PRINTABLE_KEYS[d].toLowerCase(),s[p]=parseInt(d,10);return a.mixin(s,s.MODIFIER_KEYS),a.mixin(s,s.PRINTABLE_KEYS),a.mixin(s,s.FUNCTION_KEYS),s.enter=s.return,s.escape=s.esc,s.del=s.delete,s[173]="-",function(){for(var r=["cmd","ctrl","alt","shift"],t=Math.pow(2,r.length);t--;)s.KEY_MODS[t]=r.filter(function(c){return t&s.KEY_MODS[c]}).join("-")+"-"}(),s.KEY_MODS[0]="",s.KEY_MODS[-1]="input-",s}();a.mixin(f,E),f.keyCodeToString=function(p){var d=E[p];return typeof d!="string"&&(d=String.fromCharCode(p)),d.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(u,f,M){var a=u("./keys"),E=u("./useragent"),p=null,d=0;f.addListener=function(m,v,x){if(m.addEventListener)return m.addEventListener(v,x,!1);if(m.attachEvent){var w=function(){x.call(m,window.event)};x._wrapper=w,m.attachEvent("on"+v,w)}},f.removeListener=function(m,v,x){if(m.removeEventListener)return m.removeEventListener(v,x,!1);m.detachEvent&&m.detachEvent("on"+v,x._wrapper||x)},f.stopEvent=function(m){return f.stopPropagation(m),f.preventDefault(m),!1},f.stopPropagation=function(m){m.stopPropagation?m.stopPropagation():m.cancelBubble=!0},f.preventDefault=function(m){m.preventDefault?m.preventDefault():m.returnValue=!1},f.getButton=function(m){return m.type=="dblclick"?0:m.type=="contextmenu"||E.isMac&&m.ctrlKey&&!m.altKey&&!m.shiftKey?2:m.preventDefault?m.button:{1:0,2:2,4:1}[m.button]},f.capture=function(m,v,x){function w(R){v&&v(R),x&&x(R),f.removeListener(document,"mousemove",v,!0),f.removeListener(document,"mouseup",w,!0),f.removeListener(document,"dragstart",w,!0)}return f.addListener(document,"mousemove",v,!0),f.addListener(document,"mouseup",w,!0),f.addListener(document,"dragstart",w,!0),w},f.addMouseWheelListener=function(m,v){"onmousewheel"in m?f.addListener(m,"mousewheel",function(x){x.wheelDeltaX!==void 0?(x.wheelX=-x.wheelDeltaX/8,x.wheelY=-x.wheelDeltaY/8):(x.wheelX=0,x.wheelY=-x.wheelDelta/8),v(x)}):"onwheel"in m?f.addListener(m,"wheel",function(x){switch(x.deltaMode){case x.DOM_DELTA_PIXEL:x.wheelX=.35*x.deltaX||0,x.wheelY=.35*x.deltaY||0;break;case x.DOM_DELTA_LINE:case x.DOM_DELTA_PAGE:x.wheelX=5*(x.deltaX||0),x.wheelY=5*(x.deltaY||0)}v(x)}):f.addListener(m,"DOMMouseScroll",function(x){x.axis&&x.axis==x.HORIZONTAL_AXIS?(x.wheelX=5*(x.detail||0),x.wheelY=0):(x.wheelX=0,x.wheelY=5*(x.detail||0)),v(x)})},f.addMultiMouseDownListener=function(m,v,x,w){var R,S,L,A=0,y={2:"dblclick",3:"tripleclick",4:"quadclick"};function P(T){if(f.getButton(T)!==0?A=0:T.detail>1?++A>4&&(A=1):A=1,E.isIE){var I=Math.abs(T.clientX-R)>5||Math.abs(T.clientY-S)>5;L&&!I||(A=1),L&&clearTimeout(L),L=setTimeout(function(){L=null},v[A-1]||600),A==1&&(R=T.clientX,S=T.clientY)}if(T._clicks=A,x[w]("mousedown",T),A>4)A=0;else if(A>1)return x[w](y[A],T)}function B(T){A=2,L&&clearTimeout(L),L=setTimeout(function(){L=null},v[A-1]||600),x[w]("mousedown",T),x[w](y[A],T)}Array.isArray(m)||(m=[m]),m.forEach(function(T){f.addListener(T,"mousedown",P),E.isOldIE&&f.addListener(T,"dblclick",B)})};var s=E.isMac&&E.isOpera&&!("KeyboardEvent"in window)?function(m){return 0|(m.metaKey?1:0)|(m.altKey?2:0)|(m.shiftKey?4:0)|(m.ctrlKey?8:0)}:function(m){return 0|(m.ctrlKey?1:0)|(m.altKey?2:0)|(m.shiftKey?4:0)|(m.metaKey?8:0)};function r(m,v,x){var w=s(v);if(!E.isMac&&p){if(v.getModifierState&&(v.getModifierState("OS")||v.getModifierState("Win"))&&(w|=8),p.altGr){if((3&w)==3)return;p.altGr=0}if(x===18||x===17){var R="location"in v?v.location:v.keyLocation;x===17&&R===1?p[x]==1&&(d=v.timeStamp):x===18&&w===3&&R===2&&v.timeStamp-d<50&&(p.altGr=!0)}}if(x in a.MODIFIER_KEYS&&(x=-1),w||x!==13||(R="location"in v?v.location:v.keyLocation)!==3||(m(v,w,-x),!v.defaultPrevented)){if(E.isChromeOS&&8&w){if(m(v,w,x),v.defaultPrevented)return;w&=-9}return!!(w||x in a.FUNCTION_KEYS||x in a.PRINTABLE_KEYS)&&m(v,w,x)}}function t(){p=Object.create(null)}if(f.getModifierString=function(m){return a.KEY_MODS[s(m)]},f.addCommandKeyListener=function(m,v){var x=f.addListener;if(E.isOldGecko||E.isOpera&&!("KeyboardEvent"in window)){var w=null;x(m,"keydown",function(S){w=S.keyCode}),x(m,"keypress",function(S){return r(v,S,w)})}else{var R=null;x(m,"keydown",function(S){p[S.keyCode]=(p[S.keyCode]||0)+1;var L=r(v,S,S.keyCode);return R=S.defaultPrevented,L}),x(m,"keypress",function(S){R&&(S.ctrlKey||S.altKey||S.shiftKey||S.metaKey)&&(f.stopEvent(S),R=null)}),x(m,"keyup",function(S){p[S.keyCode]=null}),p||(t(),x(window,"focus",t))}},typeof window=="object"&&window.postMessage&&!E.isOldIE){var c=1;f.nextTick=function(m,v){v=v||window;var x="zero-timeout-message-"+c++,w=function(R){R.data==x&&(f.stopPropagation(R),f.removeListener(v,"message",w),m())};f.addListener(v,"message",w),v.postMessage(x,"*")}}f.$idleBlocked=!1,f.onIdle=function(m,v){return setTimeout(function x(){f.$idleBlocked?setTimeout(x,100):m()},v)},f.$idleBlockId=null,f.blockIdle=function(m){f.$idleBlockId&&clearTimeout(f.$idleBlockId),f.$idleBlocked=!0,f.$idleBlockId=setTimeout(function(){f.$idleBlocked=!1},m||100)},f.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),f.nextFrame?f.nextFrame=f.nextFrame.bind(window):f.nextFrame=function(m){setTimeout(m,17)}}),ace.define("ace/range",["require","exports","module"],function(u,f,M){var a=function(E,p,d,s){this.start={row:E,column:p},this.end={row:d,column:s}};(function(){this.isEqual=function(E){return this.start.row===E.start.row&&this.end.row===E.end.row&&this.start.column===E.start.column&&this.end.column===E.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(E,p){return this.compare(E,p)==0},this.compareRange=function(E){var p,d=E.end,s=E.start;return(p=this.compare(d.row,d.column))==1?(p=this.compare(s.row,s.column))==1?2:p==0?1:0:p==-1?-2:(p=this.compare(s.row,s.column))==-1?-1:p==1?42:0},this.comparePoint=function(E){return this.compare(E.row,E.column)},this.containsRange=function(E){return this.comparePoint(E.start)==0&&this.comparePoint(E.end)==0},this.intersects=function(E){var p=this.compareRange(E);return p==-1||p==0||p==1},this.isEnd=function(E,p){return this.end.row==E&&this.end.column==p},this.isStart=function(E,p){return this.start.row==E&&this.start.column==p},this.setStart=function(E,p){typeof E=="object"?(this.start.column=E.column,this.start.row=E.row):(this.start.row=E,this.start.column=p)},this.setEnd=function(E,p){typeof E=="object"?(this.end.column=E.column,this.end.row=E.row):(this.end.row=E,this.end.column=p)},this.inside=function(E,p){return this.compare(E,p)==0&&!this.isEnd(E,p)&&!this.isStart(E,p)},this.insideStart=function(E,p){return this.compare(E,p)==0&&!this.isEnd(E,p)},this.insideEnd=function(E,p){return this.compare(E,p)==0&&!this.isStart(E,p)},this.compare=function(E,p){return this.isMultiLine()||E!==this.start.row?E<this.start.row?-1:E>this.end.row?1:this.start.row===E?p>=this.start.column?0:-1:this.end.row===E?p<=this.end.column?0:1:0:p<this.start.column?-1:p>this.end.column?1:0},this.compareStart=function(E,p){return this.start.row==E&&this.start.column==p?-1:this.compare(E,p)},this.compareEnd=function(E,p){return this.end.row==E&&this.end.column==p?1:this.compare(E,p)},this.compareInside=function(E,p){return this.end.row==E&&this.end.column==p?1:this.start.row==E&&this.start.column==p?-1:this.compare(E,p)},this.clipRows=function(E,p){if(this.end.row>p)var d={row:p+1,column:0};else this.end.row<E&&(d={row:E,column:0});if(this.start.row>p)var s={row:p+1,column:0};else this.start.row<E&&(s={row:E,column:0});return a.fromPoints(s||this.start,d||this.end)},this.extend=function(E,p){var d=this.compare(E,p);if(d==0)return this;if(d==-1)var s={row:E,column:p};else var r={row:E,column:p};return a.fromPoints(s||this.start,r||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return a.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new a(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new a(this.start.row,0,this.end.row,0)},this.toScreenRange=function(E){var p=E.documentToScreenPosition(this.start),d=E.documentToScreenPosition(this.end);return new a(p.row,p.column,d.row,d.column)},this.moveBy=function(E,p){this.start.row+=E,this.start.column+=p,this.end.row+=E,this.end.column+=p}}).call(a.prototype),a.fromPoints=function(E,p){return new a(E.row,E.column,p.row,p.column)},a.comparePoints=function(E,p){return E.row-p.row||E.column-p.column},a.comparePoints=function(E,p){return E.row-p.row||E.column-p.column},f.Range=a}),ace.define("ace/lib/lang",["require","exports","module"],function(u,f,M){f.last=function(p){return p[p.length-1]},f.stringReverse=function(p){return p.split("").reverse().join("")},f.stringRepeat=function(p,d){for(var s="";d>0;)1&d&&(s+=p),(d>>=1)&&(p+=p);return s};var a=/^\s\s*/,E=/\s\s*$/;f.stringTrimLeft=function(p){return p.replace(a,"")},f.stringTrimRight=function(p){return p.replace(E,"")},f.copyObject=function(p){var d={};for(var s in p)d[s]=p[s];return d},f.copyArray=function(p){for(var d=[],s=0,r=p.length;s<r;s++)p[s]&&typeof p[s]=="object"?d[s]=this.copyObject(p[s]):d[s]=p[s];return d},f.deepCopy=function p(d){if(typeof d!="object"||!d)return d;var s;if(Array.isArray(d)){s=[];for(var r=0;r<d.length;r++)s[r]=p(d[r]);return s}if(Object.prototype.toString.call(d)!=="[object Object]")return d;for(var r in s={},d)s[r]=p(d[r]);return s},f.arrayToMap=function(p){for(var d={},s=0;s<p.length;s++)d[p[s]]=1;return d},f.createMap=function(p){var d=Object.create(null);for(var s in p)d[s]=p[s];return d},f.arrayRemove=function(p,d){for(var s=0;s<=p.length;s++)d===p[s]&&p.splice(s,1)},f.escapeRegExp=function(p){return p.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},f.escapeHTML=function(p){return(""+p).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},f.getMatchOffsets=function(p,d){var s=[];return p.replace(d,function(r){s.push({offset:arguments[arguments.length-2],length:r.length})}),s},f.deferredCall=function(p){var d=null,s=function(){d=null,p()},r=function(t){return r.cancel(),d=setTimeout(s,t||0),r};return r.schedule=r,r.call=function(){return this.cancel(),p(),r},r.cancel=function(){return clearTimeout(d),d=null,r},r.isPending=function(){return d},r},f.delayedCall=function(p,d){var s=null,r=function(){s=null,p()},t=function(c){s==null&&(s=setTimeout(r,c||d))};return t.delay=function(c){s&&clearTimeout(s),s=setTimeout(r,c||d)},t.schedule=t,t.call=function(){this.cancel(),p()},t.cancel=function(){s&&clearTimeout(s),s=null},t.isPending=function(){return s},t}}),ace.define("ace/clipboard",["require","exports","module"],function(u,f,M){var a;M.exports={lineMode:!1,pasteCancelled:function(){return!!(a&&a>Date.now()-50)||(a=!1)},cancel:function(){a=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(u,f,M){var a=u("../lib/event"),E=u("../lib/useragent"),p=u("../lib/dom"),d=u("../lib/lang"),s=u("../clipboard"),r=E.isChrome<18,t=E.isIE,c=E.isChrome>63,m=400,v=u("../lib/keys"),x=v.KEY_MODS,w=E.isIOS,R=w?/\s/:/\n/;f.TextInput=function(S,L){var A=p.createElement("textarea");A.className="ace_text-input",A.setAttribute("wrap","off"),A.setAttribute("autocorrect","off"),A.setAttribute("autocapitalize","off"),A.setAttribute("spellcheck",!1),A.style.opacity="0",S.insertBefore(A,S.firstChild);var y=!1,P=!1,B=!1,T=!1,I="";E.isMobile||(A.style.fontSize="1px");var D=!1,k=!1,U="",G=0,H=0,se=0;try{var ee=document.activeElement===A}catch{}a.addListener(A,"blur",function(Le){k||(L.onBlur(Le),ee=!1)}),a.addListener(A,"focus",function(Le){if(!k){if(ee=!0,E.isEdge)try{if(!document.hasFocus())return}catch{}L.onFocus(Le),E.isEdge?setTimeout(Z):Z()}}),this.$focusScroll=!1,this.focus=function(){if(I||c||this.$focusScroll=="browser")return A.focus({preventScroll:!0});var Le=A.style.top;A.style.position="fixed",A.style.top="0px";try{var Xe=A.getBoundingClientRect().top!=0}catch{return}var q=[];if(Xe)for(var X=A.parentElement;X&&X.nodeType==1;)q.push(X),X.setAttribute("ace_nocontext",!0),X=!X.parentElement&&X.getRootNode?X.getRootNode().host:X.parentElement;A.focus({preventScroll:!0}),Xe&&q.forEach(function(he){he.removeAttribute("ace_nocontext")}),setTimeout(function(){A.style.position="",A.style.top=="0px"&&(A.style.top=Le)},0)},this.blur=function(){A.blur()},this.isFocused=function(){return ee},L.on("beforeEndOperation",function(){L.curOp&&L.curOp.command.name=="insertstring"||(B&&(U=A.value="",_t()),Z())});var Z=w?function(Le){if(ee&&(!y||Le)&&!T){Le||(Le="");var Xe=`
 ab`+Le+`cde fg
`;Xe!=A.value&&(A.value=U=Xe);var q=4+(Le.length||(L.selection.isEmpty()?0:1));G==4&&H==q||A.setSelectionRange(4,q),G=4,H=q}}:function(){if(!B&&!T&&(ee||W)){B=!0;var Le=L.selection,Xe=Le.getRange(),q=Le.cursor.row,X=Xe.start.column,he=Xe.end.column,be=L.session.getLine(q);if(Xe.start.row!=q){var Te=L.session.getLine(q-1);X=Xe.start.row<q-1?0:X,he+=Te.length+1,be=Te+`
`+be}else if(Xe.end.row!=q){var Re=L.session.getLine(q+1);he=Xe.end.row>q+1?Re.length:he,he+=be.length+1,be=be+`
`+Re}be.length>m&&(X<m&&he<m?be=be.slice(0,m):(be=`
`,X=0,he=1));var Ue=be+`

`;if(Ue!=U&&(A.value=U=Ue,G=H=Ue.length),W&&(G=A.selectionStart,H=A.selectionEnd),H!=he||G!=X||A.selectionEnd!=H)try{A.setSelectionRange(X,he),G=X,H=he}catch{}B=!1}};ee&&L.onFocus();var ne=null;this.setInputHandler=function(Le){ne=Le},this.getInputHandler=function(){return ne};var W=!1,K=function(Le,Xe){if(W&&(W=!1),P)return Z(),Le&&L.onPaste(Le),P=!1,"";for(var q=A.selectionStart,X=A.selectionEnd,he=G,be=U.length-H,Te=Le,Re=Le.length-q,Ue=Le.length-X,j=0;he>0&&U[j]==Le[j];)j++,he--;for(Te=Te.slice(j),j=1;be>0&&U.length-j>G-1&&U[U.length-j]==Le[Le.length-j];)j++,be--;Re-=j-1,Ue-=j-1;var xe=Te.length-j+1;return xe<0&&(he=-xe,xe=0),Te=Te.slice(0,xe),Xe||Te||Re||he||be||Ue?(T=!0,Te&&!he&&!be&&!Re&&!Ue||D?L.onTextInput(Te):L.onTextInput(Te,{extendLeft:he,extendRight:be,restoreStart:Re,restoreEnd:Ue}),T=!1,U=Le,G=q,H=X,se=Ue,Te):""},re=function(Le){if(B)return ke();if(Le&&Le.inputType){if(Le.inputType=="historyUndo")return L.execCommand("undo");if(Le.inputType=="historyRedo")return L.execCommand("redo")}var Xe=A.value,q=K(Xe,!0);(Xe.length>500||R.test(q))&&Z()},oe=function(Le,Xe,q){var X=Le.clipboardData||window.clipboardData;if(X&&!r){var he=t||q?"Text":"text/plain";try{return Xe?X.setData(he,Xe)!==!1:X.getData(he)}catch(be){if(!q)return oe(be,Xe,!0)}}},de=function(Le,Xe){var q=L.getCopyText();if(!q)return a.preventDefault(Le);oe(Le,q)?(w&&(Z(q),y=q,setTimeout(function(){y=!1},10)),Xe?L.onCut():L.onCopy(),a.preventDefault(Le)):(y=!0,A.value=q,A.select(),setTimeout(function(){y=!1,Z(),Xe?L.onCut():L.onCopy()}))},ue=function(Le){de(Le,!0)},Be=function(Le){de(Le,!1)},Ge=function(Le){var Xe=oe(Le);s.pasteCancelled()||(typeof Xe=="string"?(Xe&&L.onPaste(Xe,Le),E.isIE&&setTimeout(Z),a.preventDefault(Le)):(A.value="",P=!0))};a.addCommandKeyListener(A,L.onCommandKey.bind(L)),a.addListener(A,"select",function(Le){B||(y?y=!1:function(Xe){return Xe.selectionStart===0&&Xe.selectionEnd>=U.length&&Xe.value===U&&U&&Xe.selectionEnd!==H}(A)&&(L.selectAll(),Z()))}),a.addListener(A,"input",re),a.addListener(A,"cut",ue),a.addListener(A,"copy",Be),a.addListener(A,"paste",Ge),"oncut"in A&&"oncopy"in A&&"onpaste"in A||a.addListener(S,"keydown",function(Le){if((!E.isMac||Le.metaKey)&&Le.ctrlKey)switch(Le.keyCode){case 67:Be(Le);break;case 86:Ge(Le);break;case 88:ue(Le)}});var ke=function(){if(B&&L.onCompositionUpdate&&!L.$readOnly){if(D)return wt();if(B.useTextareaForIME)L.onCompositionUpdate(A.value);else{var Le=A.value;K(Le),B.markerRange&&(B.context&&(B.markerRange.start.column=B.selectionStart=B.context.compositionStartOffset),B.markerRange.end.column=B.markerRange.start.column+H-B.selectionStart+se)}}},_t=function(Le){L.onCompositionEnd&&!L.$readOnly&&(B=!1,L.onCompositionEnd(),L.off("mousedown",wt),Le&&re())};function wt(){k=!0,A.blur(),A.focus(),k=!1}var it,Vt=d.delayedCall(ke,50).schedule.bind(null,null);function Lt(){clearTimeout(it),it=setTimeout(function(){I&&(A.style.cssText=I,I=""),L.renderer.$isMousePressed=!1,L.renderer.$keepTextAreaAtCursor&&L.renderer.$moveTextAreaToCursor()},0)}a.addListener(A,"compositionstart",function(Le){if(!B&&L.onCompositionStart&&!L.$readOnly&&(B={},!D)){setTimeout(ke,0),L.on("mousedown",wt);var Xe=L.getSelectionRange();Xe.end.row=Xe.start.row,Xe.end.column=Xe.start.column,B.markerRange=Xe,B.selectionStart=G,L.onCompositionStart(B),B.useTextareaForIME?(A.value="",U="",G=0,H=0):(A.msGetInputContext&&(B.context=A.msGetInputContext()),A.getInputContext&&(B.context=A.getInputContext()))}}),a.addListener(A,"compositionupdate",ke),a.addListener(A,"keyup",function(Le){Le.keyCode==27&&A.value.length<A.selectionStart&&(B||(U=A.value),G=H=-1,Z()),Vt()}),a.addListener(A,"keydown",Vt),a.addListener(A,"compositionend",_t),this.getElement=function(){return A},this.setCommandMode=function(Le){D=Le,A.readOnly=!1},this.setReadOnly=function(Le){D||(A.readOnly=Le)},this.setCopyWithEmptySelection=function(Le){},this.onContextMenu=function(Le){W=!0,Z(),L._emit("nativecontextmenu",{target:L,domEvent:Le}),this.moveToMouse(Le,!0)},this.moveToMouse=function(Le,Xe){I||(I=A.style.cssText),A.style.cssText=(Xe?"z-index:100000;":"")+(E.isIE?"opacity:0.1;":"")+"text-indent: -"+(G+H)*L.renderer.characterWidth*.5+"px;";var q=L.container.getBoundingClientRect(),X=p.computedStyle(L.container),he=q.top+(parseInt(X.borderTopWidth)||0),be=q.left+(parseInt(q.borderLeftWidth)||0),Te=q.bottom-he-A.clientHeight-2,Re=function(Ue){p.translate(A,Ue.clientX-be-2,Math.min(Ue.clientY-he-2,Te))};Re(Le),Le.type=="mousedown"&&(L.renderer.$isMousePressed=!0,clearTimeout(it),E.isWin&&a.capture(L.container,Re,Lt))},this.onContextMenuClose=Lt;var mt=function(Le){L.textInput.onContextMenu(Le),Lt()};a.addListener(A,"mouseup",mt),a.addListener(A,"mousedown",function(Le){Le.preventDefault(),Lt()}),a.addListener(L.renderer.scroller,"contextmenu",mt),a.addListener(A,"contextmenu",mt),w&&function(Le,Xe,q){var X=null,he=!1;q.addEventListener("keydown",function(Te){X&&clearTimeout(X),he=!0},!0),q.addEventListener("keyup",function(Te){X=setTimeout(function(){he=!1},100)},!0);var be=function(Te){if(document.activeElement===q&&!(he||B||Xe.$mouseHandler.isMousePressed||y)){var Re=q.selectionStart,Ue=q.selectionEnd,j=null,xe=0;if(Re==0?j=v.up:Re==1?j=v.home:Ue>H&&U[Ue]==`
`?j=v.end:Re<G&&U[Re-1]==" "?(j=v.left,xe=x.option):Re<G||Re==G&&H!=G&&Re==Ue?j=v.left:Ue>H&&U.slice(0,Ue).split(`
`).length>2?j=v.down:Ue>H&&U[Ue-1]==" "?(j=v.right,xe=x.option):(Ue>H||Ue==H&&H!=G&&Re==Ue)&&(j=v.right),Re!==Ue&&(xe|=x.shift),j){if(!Xe.onCommandKey({},xe,j)&&Xe.commands){j=v.keyCodeToString(j);var Pe=Xe.commands.findKeyCommand(xe,j);Pe&&Xe.execCommand(Pe)}G=Re,H=Ue,Z("")}}};document.addEventListener("selectionchange",be),Xe.on("destroy",function(){document.removeEventListener("selectionchange",be)})}(0,L,A)}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(u,f,M){var a=u("../lib/useragent");function E(d){d.$clickSelection=null;var s=d.editor;s.setDefaultHandler("mousedown",this.onMouseDown.bind(d)),s.setDefaultHandler("dblclick",this.onDoubleClick.bind(d)),s.setDefaultHandler("tripleclick",this.onTripleClick.bind(d)),s.setDefaultHandler("quadclick",this.onQuadClick.bind(d)),s.setDefaultHandler("mousewheel",this.onMouseWheel.bind(d)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(r){d[r]=this[r]},this),d.selectByLines=this.extendSelectionBy.bind(d,"getLineRange"),d.selectByWords=this.extendSelectionBy.bind(d,"getWordRange")}function p(d,s){if(d.start.row==d.end.row)var r=2*s.column-d.start.column-d.end.column;else d.start.row!=d.end.row-1||d.start.column||d.end.column?r=2*s.row-d.start.row-d.end.row:r=s.column-4;return r<0?{cursor:d.start,anchor:d.end}:{cursor:d.end,anchor:d.start}}(function(){this.onMouseDown=function(d){var s=d.inSelection(),r=d.getDocumentPosition();this.mousedownEvent=d;var t=this.editor,c=d.getButton();return c!==0?((t.getSelectionRange().isEmpty()||c==1)&&t.selection.moveToPosition(r),void(c==2&&(t.textInput.onContextMenu(d.domEvent),a.isMozilla||d.preventDefault()))):(this.mousedownEvent.time=Date.now(),!s||t.isFocused()||(t.focus(),!this.$focusTimeout||this.$clickSelection||t.inMultiSelectMode)?(this.captureMouse(d),this.startSelect(r,d.domEvent._clicks>1),d.preventDefault()):(this.setState("focusWait"),void this.captureMouse(d)))},this.startSelect=function(d,s){d=d||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var r=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?r.selection.selectToPosition(d):s||r.selection.moveToPosition(d),s||this.select(),r.renderer.scroller.setCapture&&r.renderer.scroller.setCapture(),r.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var d,s=this.editor,r=s.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var t=this.$clickSelection.comparePoint(r);if(t==-1)d=this.$clickSelection.end;else if(t==1)d=this.$clickSelection.start;else{var c=p(this.$clickSelection,r);r=c.cursor,d=c.anchor}s.selection.setSelectionAnchor(d.row,d.column)}s.selection.selectToPosition(r),s.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(d){var s,r=this.editor,t=r.renderer.screenToTextCoordinates(this.x,this.y),c=r.selection[d](t.row,t.column);if(this.$clickSelection){var m=this.$clickSelection.comparePoint(c.start),v=this.$clickSelection.comparePoint(c.end);if(m==-1&&v<=0)s=this.$clickSelection.end,c.end.row==t.row&&c.end.column==t.column||(t=c.start);else if(v==1&&m>=0)s=this.$clickSelection.start,c.start.row==t.row&&c.start.column==t.column||(t=c.end);else if(m==-1&&v==1)t=c.end,s=c.start;else{var x=p(this.$clickSelection,t);t=x.cursor,s=x.anchor}r.selection.setSelectionAnchor(s.row,s.column)}r.selection.selectToPosition(t),r.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var d,s,r,t,c=(d=this.mousedownEvent.x,s=this.mousedownEvent.y,r=this.x,t=this.y,Math.sqrt(Math.pow(r-d,2)+Math.pow(t-s,2))),m=Date.now();(c>0||m-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(d){var s=d.getDocumentPosition(),r=this.editor,t=r.session.getBracketRange(s);t?(t.isEmpty()&&(t.start.column--,t.end.column++),this.setState("select")):(t=r.selection.getWordRange(s.row,s.column),this.setState("selectByWords")),this.$clickSelection=t,this.select()},this.onTripleClick=function(d){var s=d.getDocumentPosition(),r=this.editor;this.setState("selectByLines");var t=r.getSelectionRange();t.isMultiLine()&&t.contains(s.row,s.column)?(this.$clickSelection=r.selection.getLineRange(t.start.row),this.$clickSelection.end=r.selection.getLineRange(t.end.row).end):this.$clickSelection=r.selection.getLineRange(s.row),this.select()},this.onQuadClick=function(d){var s=this.editor;s.selectAll(),this.$clickSelection=s.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(d){if(!d.getAccelKey()){d.getShiftKey()&&d.wheelY&&!d.wheelX&&(d.wheelX=d.wheelY,d.wheelY=0);var s=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var r=this.$lastScroll,t=d.domEvent.timeStamp,c=t-r.t,m=c?d.wheelX/c:r.vx,v=c?d.wheelY/c:r.vy;c<550&&(m=(m+r.vx)/2,v=(v+r.vy)/2);var x=Math.abs(m/v),w=!1;return x>=1&&s.renderer.isScrollableBy(d.wheelX*d.speed,0)&&(w=!0),x<=1&&s.renderer.isScrollableBy(0,d.wheelY*d.speed)&&(w=!0),w?r.allowed=t:t-r.allowed<550&&(Math.abs(m)<=1.5*Math.abs(r.vx)&&Math.abs(v)<=1.5*Math.abs(r.vy)?(w=!0,r.allowed=t):r.allowed=0),r.t=t,r.vx=m,r.vy=v,w?(s.renderer.scrollBy(d.wheelX*d.speed,d.wheelY*d.speed),d.stop()):void 0}}}).call(E.prototype),f.DefaultHandlers=E}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(u,f,M){u("./lib/oop");var a=u("./lib/dom");function E(p){this.isOpen=!1,this.$element=null,this.$parentNode=p}(function(){this.$init=function(){return this.$element=a.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(p){this.getElement().textContent=p},this.setHtml=function(p){this.getElement().innerHTML=p},this.setPosition=function(p,d){this.getElement().style.left=p+"px",this.getElement().style.top=d+"px"},this.setClassName=function(p){a.addCssClass(this.getElement(),p)},this.show=function(p,d,s){p!=null&&this.setText(p),d!=null&&s!=null&&this.setPosition(d,s),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(E.prototype),f.Tooltip=E}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(u,f,M){var a=u("../lib/dom"),E=u("../lib/oop"),p=u("../lib/event"),d=u("../tooltip").Tooltip;function s(r){d.call(this,r)}E.inherits(s,d),function(){this.setPosition=function(r,t){var c=window.innerWidth||document.documentElement.clientWidth,m=window.innerHeight||document.documentElement.clientHeight,v=this.getWidth(),x=this.getHeight();(r+=15)+v>c&&(r-=r+v-c),(t+=15)+x>m&&(t-=20+x),d.prototype.setPosition.call(this,r,t)}}.call(s.prototype),f.GutterHandler=function(r){var t,c,m,v=r.editor,x=v.renderer.$gutterLayer,w=new s(v.container);function R(){t&&(t=clearTimeout(t)),m&&(w.hide(),m=null,v._signal("hideGutterTooltip",w),v.removeEventListener("mousewheel",R))}function S(L){w.setPosition(L.x,L.y)}r.editor.setDefaultHandler("guttermousedown",function(L){if(v.isFocused()&&L.getButton()==0&&x.getRegion(L)!="foldWidgets"){var A=L.getDocumentPosition().row,y=v.session.selection;if(L.getShiftKey())y.selectTo(A,0);else{if(L.domEvent.detail==2)return v.selectAll(),L.preventDefault();r.$clickSelection=v.selection.getLineRange(A)}return r.setState("selectByLines"),r.captureMouse(L),L.preventDefault()}}),r.editor.setDefaultHandler("guttermousemove",function(L){var A=L.domEvent.target||L.domEvent.srcElement;if(a.hasCssClass(A,"ace_fold-widget"))return R();m&&r.$tooltipFollowsMouse&&S(L),c=L,t||(t=setTimeout(function(){t=null,c&&!r.isMousePressed?function(){var y=c.getDocumentPosition().row,P=x.$annotations[y];if(!P)return R();if(y==v.session.getLength()){var B=v.renderer.pixelToScreenCoordinates(0,c.y).row,T=c.$pos;if(B>v.session.documentToScreenRow(T.row,T.column))return R()}if(m!=P)if(m=P.text.join("<br/>"),w.setHtml(m),w.show(),v._signal("showGutterTooltip",w),v.on("mousewheel",R),r.$tooltipFollowsMouse)S(c);else{var I=c.domEvent.target.getBoundingClientRect(),D=w.getElement().style;D.left=I.right+"px",D.top=I.bottom+"px"}}():R()},50))}),p.addListener(v.renderer.$gutter,"mouseout",function(L){c=null,m&&!t&&(t=setTimeout(function(){t=null,R()},50))}),v.on("changeSession",R)}}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(u,f,M){var a=u("../lib/event"),E=u("../lib/useragent"),p=f.MouseEvent=function(d,s){this.domEvent=d,this.editor=s,this.x=this.clientX=d.clientX,this.y=this.clientY=d.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){a.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){a.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var d=this.editor.getSelectionRange();if(d.isEmpty())this.$inSelection=!1;else{var s=this.getDocumentPosition();this.$inSelection=d.contains(s.row,s.column)}return this.$inSelection},this.getButton=function(){return a.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=E.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(p.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(u,f,M){var a=u("../lib/dom"),E=u("../lib/event"),p=u("../lib/useragent");function d(r){var t=r.editor,c=a.createElement("img");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",p.isOpera&&(c.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"),["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(Z){r[Z]=this[Z]},this),t.addEventListener("mousedown",this.onMouseDown.bind(r));var m,v,x,w,R,S,L,A,y,P,B,T=t.container,I=0;function D(){var Z=S;(function(ne,W){var K=Date.now(),re=!W||ne.row!=W.row,oe=!W||ne.column!=W.column;!P||re||oe?(t.moveCursorToPosition(ne),P=K,B={x:v,y:x}):s(B.x,B.y,v,x)>5?P=null:K-P>=200&&(t.renderer.scrollCursorIntoView(),P=null)})(S=t.renderer.screenToTextCoordinates(v,x),Z),function(ne,W){var K=Date.now(),re=t.renderer.layerConfig.lineHeight,oe=t.renderer.layerConfig.characterWidth,de=t.renderer.scroller.getBoundingClientRect(),ue={x:{left:v-de.left,right:de.right-v},y:{top:x-de.top,bottom:de.bottom-x}},Be=Math.min(ue.x.left,ue.x.right),Ge=Math.min(ue.y.top,ue.y.bottom),ke={row:ne.row,column:ne.column};Be/oe<=2&&(ke.column+=ue.x.left<ue.x.right?-3:2),Ge/re<=1&&(ke.row+=ue.y.top<ue.y.bottom?-1:1);var _t=ne.row!=ke.row,wt=ne.column!=ke.column,it=!W||ne.row!=W.row;_t||wt&&!it?y?K-y>=200&&t.renderer.scrollCursorIntoView(ke):y=K:y=null}(S,Z)}function k(){R=t.selection.toOrientedRange(),m=t.session.addMarker(R,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(w),D(),w=setInterval(D,20),I=0,E.addListener(document,"mousemove",H)}function U(){clearInterval(w),t.session.removeMarker(m),m=null,t.selection.fromOrientedRange(R),t.isFocused()&&!A&&t.$resetCursorStyle(),R=null,S=null,I=0,y=null,P=null,E.removeListener(document,"mousemove",H)}this.onDragStart=function(Z){if(this.cancelDrag||!T.draggable){var ne=this;return setTimeout(function(){ne.startSelect(),ne.captureMouse(Z)},0),Z.preventDefault()}R=t.getSelectionRange();var W=Z.dataTransfer;W.effectAllowed=t.getReadOnly()?"copy":"copyMove",p.isOpera&&(t.container.appendChild(c),c.scrollTop=0),W.setDragImage&&W.setDragImage(c,0,0),p.isOpera&&t.container.removeChild(c),W.clearData(),W.setData("Text",t.session.getTextRange()),A=!0,this.setState("drag")},this.onDragEnd=function(Z){if(T.draggable=!1,A=!1,this.setState(null),!t.getReadOnly()){var ne=Z.dataTransfer.dropEffect;L||ne!="move"||t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(Z){if(!t.getReadOnly()&&se(Z.dataTransfer))return v=Z.clientX,x=Z.clientY,m||k(),I++,Z.dataTransfer.dropEffect=L=ee(Z),E.preventDefault(Z)},this.onDragOver=function(Z){if(!t.getReadOnly()&&se(Z.dataTransfer))return v=Z.clientX,x=Z.clientY,m||(k(),I++),G!==null&&(G=null),Z.dataTransfer.dropEffect=L=ee(Z),E.preventDefault(Z)},this.onDragLeave=function(Z){if(--I<=0&&m)return U(),L=null,E.preventDefault(Z)},this.onDrop=function(Z){if(S){var ne=Z.dataTransfer;if(A)switch(L){case"move":R=R.contains(S.row,S.column)?{start:S,end:S}:t.moveText(R,S);break;case"copy":R=t.moveText(R,S,!0)}else{var W=ne.getData("Text");R={start:S,end:t.session.insert(S,W)},t.focus(),L=null}return U(),E.preventDefault(Z)}},E.addListener(T,"dragstart",this.onDragStart.bind(r)),E.addListener(T,"dragend",this.onDragEnd.bind(r)),E.addListener(T,"dragenter",this.onDragEnter.bind(r)),E.addListener(T,"dragover",this.onDragOver.bind(r)),E.addListener(T,"dragleave",this.onDragLeave.bind(r)),E.addListener(T,"drop",this.onDrop.bind(r));var G=null;function H(){G==null&&(G=setTimeout(function(){G!=null&&m&&U()},20))}function se(Z){var ne=Z.types;return!ne||Array.prototype.some.call(ne,function(W){return W=="text/plain"||W=="Text"})}function ee(Z){var ne=["copy","copymove","all","uninitialized"],W=p.isMac?Z.altKey:Z.ctrlKey,K="uninitialized";try{K=Z.dataTransfer.effectAllowed.toLowerCase()}catch{}var re="none";return W&&ne.indexOf(K)>=0?re="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(K)>=0?re="move":ne.indexOf(K)>=0&&(re="copy"),re}}function s(r,t,c,m){return Math.sqrt(Math.pow(c-r,2)+Math.pow(m-t,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(r){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var r=this.editor;r.container.draggable=!0,r.renderer.$cursorLayer.setBlinking(!1),r.setStyle("ace_dragging");var t=p.isWin?"default":"move";r.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(r){var t=this.editor.container;p.isIE&&this.state=="dragReady"&&s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&t.dragDrop(),this.state==="dragWait"&&s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(r){if(this.$dragEnabled){this.mousedownEvent=r;var t=this.editor,c=r.inSelection(),m=r.getButton();if((r.domEvent.detail||1)===1&&m===0&&c){if(r.editor.inMultiSelectMode&&(r.getAccelKey()||r.getShiftKey()))return;this.mousedownEvent.time=Date.now();var v=r.domEvent.target||r.domEvent.srcElement;"unselectable"in v&&(v.unselectable="on"),t.getDragDelay()?(p.isWebKit&&(this.cancelDrag=!0,t.container.draggable=!0),this.setState("dragWait")):this.startDrag(),this.captureMouse(r,this.onMouseDrag.bind(this)),r.defaultPrevented=!0}}}}).call(d.prototype),f.DragdropHandler=d}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/dom"],function(u,f,M){var a=u("./mouse_event").MouseEvent,E=u("../lib/dom");f.addTouchListeners=function(p,d){var s,r,t,c,m,v,x,w,R,S="scroll",L=0,A=0,y=0,P=0;function B(){var D,k,U;R||(D=window.navigator&&window.navigator.clipboard,k=!1,U=function(ee){var Z,ne,W=ee.target.getAttribute("action");if(W=="more"||!k)return k=!k,Z=d.getCopyText(),ne=d.session.getUndoManager().hasUndo(),void R.replaceChild(E.buildDom(k?["span",!Z&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],Z&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],Z&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],D&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],ne&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),R.firstChild);W=="paste"?D.readText().then(function(K){d.execCommand(W,K)}):W&&(W!="cut"&&W!="copy"||(D?D.writeText(d.getCopyText()):document.execCommand("copy")),d.execCommand(W)),R.firstChild.style.display="none",k=!1,W!="openCommandPallete"&&d.focus()},R=E.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(ee){S="menu",ee.stopPropagation(),ee.preventDefault(),d.textInput.focus()},ontouchend:function(ee){ee.stopPropagation(),ee.preventDefault(),U(ee)},onclick:U},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],d.container));var G=d.selection.cursor,H=d.renderer.textToScreenCoordinates(G.row,G.column),se=d.container.getBoundingClientRect();R.style.top=H.pageY-se.top-3+"px",R.style.right="10px",R.style.display="",R.firstChild.style.display="none",d.on("input",T)}function T(D){R&&(R.style.display="none"),d.off("input",T)}function I(){m=null,clearTimeout(m);var D=d.selection.getRange(),k=D.contains(x.row,x.column);!D.isEmpty()&&k||(d.selection.moveToPosition(x),d.selection.selectWord()),S="wait",B()}p.addEventListener("contextmenu",function(D){w&&d.textInput.getElement().focus()}),p.addEventListener("touchstart",function(D){var k=D.touches;if(m||k.length>1)return clearTimeout(m),m=null,t=-1,void(S="zoom");w=d.$mouseHandler.isMousePressed=!0;var U=d.renderer.layerConfig.lineHeight,G=d.renderer.layerConfig.lineHeight,H=D.timeStamp;c=H;var se=k[0],ee=se.clientX,Z=se.clientY;Math.abs(s-ee)+Math.abs(r-Z)>U&&(t=-1),s=D.clientX=ee,r=D.clientY=Z,y=P=0;var ne=new a(D,d);if(x=ne.getDocumentPosition(),H-t<500&&k.length==1&&!L)A++,D.preventDefault(),D.button=0,function(){m=null,clearTimeout(m),d.selection.moveToPosition(x);var ke=A>=2?d.selection.getLineRange(x.row):d.session.getBracketRange(x);ke&&!ke.isEmpty()?d.selection.setRange(ke):d.selection.selectWord(),S="wait"}();else{A=0;var W=d.selection.cursor,K=d.selection.isEmpty()?W:d.selection.anchor,re=d.renderer.$cursorLayer.getPixelPosition(W,!0),oe=d.renderer.$cursorLayer.getPixelPosition(K,!0),de=d.renderer.scroller.getBoundingClientRect(),ue=function(ke,_t){return(ke/=G)*ke+(_t=_t/U-.75)*_t};if(D.clientX<de.left)return void(S="zoom");var Be=ue(D.clientX-de.left-re.left,D.clientY-de.top-re.top),Ge=ue(D.clientX-de.left-oe.left,D.clientY-de.top-oe.top);Be<3.5&&Ge<3.5&&(S=Be>Ge?"cursor":"anchor"),S=Ge<3.5?"anchor":Be<3.5?"cursor":"scroll",m=setTimeout(I,450)}t=H}),p.addEventListener("touchend",function(D){w=d.$mouseHandler.isMousePressed=!1,v&&clearInterval(v),S=="zoom"?(S="",L=0):m?(d.selection.moveToPosition(x),L=0,B()):S=="scroll"?(L+=60,v=setInterval(function(){L--<=0&&(clearInterval(v),v=null),Math.abs(y)<.01&&(y=0),Math.abs(P)<.01&&(P=0),L<20&&(y*=.9),L<20&&(P*=.9);var k=d.session.getScrollTop();d.renderer.scrollBy(10*y,10*P),k==d.session.getScrollTop()&&(L=0)},10),D.preventDefault(),T()):B(),clearTimeout(m),m=null}),p.addEventListener("touchmove",function(D){m&&(clearTimeout(m),m=null);var k=D.touches;if(!(k.length>1||S=="zoom")){var U=k[0],G=s-U.clientX,H=r-U.clientY;if(S=="wait"){if(!(G*G+H*H>4))return D.preventDefault();S="cursor"}s=U.clientX,r=U.clientY,D.clientX=U.clientX,D.clientY=U.clientY;var se=D.timeStamp,ee=se-c;if(c=se,S=="scroll"){var Z=new a(D,d);Z.speed=1,Z.wheelX=G,Z.wheelY=H,10*Math.abs(G)<Math.abs(H)&&(G=0),10*Math.abs(H)<Math.abs(G)&&(H=0),ee!=0&&(y=G/ee,P=H/ee),d._emit("mousewheel",Z),Z.propagationStopped||(y=P=0)}else{var ne=new a(D,d).getDocumentPosition();S=="cursor"?d.selection.moveCursorToPosition(ne):S=="anchor"&&d.selection.setSelectionAnchor(ne.row,ne.column),d.renderer.scrollCursorIntoView(ne),D.preventDefault()}}})}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(u,f,M){var a=u("./dom");f.get=function(E,p){var d=new XMLHttpRequest;d.open("GET",E,!0),d.onreadystatechange=function(){d.readyState===4&&p(d.responseText)},d.send(null)},f.loadScript=function(E,p){var d=a.getDocumentHead(),s=document.createElement("script");s.src=E,d.appendChild(s),s.onload=s.onreadystatechange=function(r,t){!t&&s.readyState&&s.readyState!="loaded"&&s.readyState!="complete"||(s=s.onload=s.onreadystatechange=null,t||p())}},f.qualifyURL=function(E){var p=document.createElement("a");return p.href=E,p.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(u,f,M){var a={},E=function(){this.propagationStopped=!0},p=function(){this.defaultPrevented=!0};a._emit=a._dispatchEvent=function(d,s){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var r=this._eventRegistry[d]||[],t=this._defaultHandlers[d];if(r.length||t){typeof s=="object"&&s||(s={}),s.type||(s.type=d),s.stopPropagation||(s.stopPropagation=E),s.preventDefault||(s.preventDefault=p),r=r.slice();for(var c=0;c<r.length&&(r[c](s,this),!s.propagationStopped);c++);return t&&!s.defaultPrevented?t(s,this):void 0}},a._signal=function(d,s){var r=(this._eventRegistry||{})[d];if(r){r=r.slice();for(var t=0;t<r.length;t++)r[t](s,this)}},a.once=function(d,s){var r=this;if(this.addEventListener(d,function t(){r.removeEventListener(d,t),s.apply(null,arguments)}),!s)return new Promise(function(t){s=t})},a.setDefaultHandler=function(d,s){var r=this._defaultHandlers;if(r||(r=this._defaultHandlers={_disabled_:{}}),r[d]){var t=r[d],c=r._disabled_[d];c||(r._disabled_[d]=c=[]),c.push(t);var m=c.indexOf(s);m!=-1&&c.splice(m,1)}r[d]=s},a.removeDefaultHandler=function(d,s){var r=this._defaultHandlers;if(r){var t=r._disabled_[d];if(r[d]==s)t&&this.setDefaultHandler(d,t.pop());else if(t){var c=t.indexOf(s);c!=-1&&t.splice(c,1)}}},a.on=a.addEventListener=function(d,s,r){this._eventRegistry=this._eventRegistry||{};var t=this._eventRegistry[d];return t||(t=this._eventRegistry[d]=[]),t.indexOf(s)==-1&&t[r?"unshift":"push"](s),s},a.off=a.removeListener=a.removeEventListener=function(d,s){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[d];if(r){var t=r.indexOf(s);t!==-1&&r.splice(t,1)}},a.removeAllListeners=function(d){this._eventRegistry&&(this._eventRegistry[d]=[])},f.EventEmitter=a}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(u,f,M){var a=u("./oop"),E=u("./event_emitter").EventEmitter,p={setOptions:function(t){Object.keys(t).forEach(function(c){this.setOption(c,t[c])},this)},getOptions:function(t){var c={};if(t)Array.isArray(t)||(c=t,t=Object.keys(c));else{var m=this.$options;t=Object.keys(m).filter(function(v){return!m[v].hidden})}return t.forEach(function(v){c[v]=this.getOption(v)},this),c},setOption:function(t,c){if(this["$"+t]!==c){var m=this.$options[t];if(!m)return d('misspelled option "'+t+'"');if(m.forwardTo)return this[m.forwardTo]&&this[m.forwardTo].setOption(t,c);m.handlesSet||(this["$"+t]=c),m&&m.set&&m.set.call(this,c)}},getOption:function(t){var c=this.$options[t];return c?c.forwardTo?this[c.forwardTo]&&this[c.forwardTo].getOption(t):c&&c.get?c.get.call(this):this["$"+t]:d('misspelled option "'+t+'"')}};function d(t){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}function s(t,c){var m=new Error(t);m.data=c,typeof console=="object"&&console.error&&console.error(m),setTimeout(function(){throw m})}var r=function(){this.$defaultOptions={}};(function(){a.implement(this,E),this.defineOptions=function(t,c,m){return t.$options||(this.$defaultOptions[c]=t.$options={}),Object.keys(m).forEach(function(v){var x=m[v];typeof x=="string"&&(x={forwardTo:x}),x.name||(x.name=v),t.$options[x.name]=x,"initialValue"in x&&(t["$"+x.name]=x.initialValue)}),a.implement(t,p),this},this.resetOptions=function(t){Object.keys(t.$options).forEach(function(c){var m=t.$options[c];"value"in m&&t.setOption(c,m.value)})},this.setDefaultValue=function(t,c,m){if(!t){for(t in this.$defaultOptions)if(this.$defaultOptions[t][c])break;if(!this.$defaultOptions[t][c])return!1}var v=this.$defaultOptions[t]||(this.$defaultOptions[t]={});v[c]&&(v.forwardTo?this.setDefaultValue(v.forwardTo,c,m):v[c].value=m)},this.setDefaultValues=function(t,c){Object.keys(c).forEach(function(m){this.setDefaultValue(t,m,c[m])},this)},this.warn=d,this.reportError=s}).call(r.prototype),f.AppConfig=r}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(u,f,M){var a=u("./lib/lang"),E=(u("./lib/oop"),u("./lib/net")),p=u("./lib/app_config").AppConfig;M.exports=f=new p;var d=function(){return this||typeof window<"u"&&window}(),s={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};f.get=function(c){if(!s.hasOwnProperty(c))throw new Error("Unknown config key: "+c);return s[c]},f.set=function(c,m){if(s.hasOwnProperty(c))s[c]=m;else if(this.setDefaultValue("",c,m)==0)throw new Error("Unknown config key: "+c)},f.all=function(){return a.copyObject(s)},f.$modes={},f.moduleUrl=function(c,m){if(s.$moduleUrls[c])return s.$moduleUrls[c];var v=c.split("/"),x=(m=m||v[v.length-2]||"")=="snippets"?"/":"-",w=v[v.length-1];if(m=="worker"&&x=="-"){var R=new RegExp("^"+m+"[\\-_]|[\\-_]"+m+"$","g");w=w.replace(R,"")}(!w||w==m)&&v.length>1&&(w=v[v.length-2]);var S=s[m+"Path"];return S==null?S=s.basePath:x=="/"&&(m=x=""),S&&S.slice(-1)!="/"&&(S+="/"),S+m+x+w+this.get("suffix")},f.setModuleUrl=function(c,m){return s.$moduleUrls[c]=m},f.$loading={},f.loadModule=function(c,m){var v,x;Array.isArray(c)&&(x=c[0],c=c[1]);try{v=u(c)}catch{}if(v&&!f.$loading[c])return m&&m(v);if(f.$loading[c]||(f.$loading[c]=[]),f.$loading[c].push(m),!(f.$loading[c].length>1)){var w=function(){u([c],function(R){f._emit("load.module",{name:c,module:R});var S=f.$loading[c];f.$loading[c]=null,S.forEach(function(L){L&&L(R)})})};if(!f.get("packaged"))return w();E.loadScript(f.moduleUrl(c,x),w),r()}};var r=function(){s.basePath||s.workerPath||s.modePath||s.themePath||Object.keys(s.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),r=function(){})};function t(c){if(d&&d.document){s.packaged=c||u.packaged||M.packaged||d.define&&g.amdD.packaged;for(var m,v={},x="",w=document.currentScript||document._currentScript,R=(w&&w.ownerDocument||document).getElementsByTagName("script"),S=0;S<R.length;S++){var L=R[S],A=L.src||L.getAttribute("src");if(A){for(var y=L.attributes,P=0,B=y.length;P<B;P++){var T=y[P];T.name.indexOf("data-ace-")===0&&(v[m=T.name.replace(/^data-ace-/,""),m.replace(/-(.)/g,function(k,U){return U.toUpperCase()})]=T.value)}var I=A.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);I&&(x=I[1])}}for(var D in x&&(v.base=v.base||x,v.packaged=!0),v.basePath=v.base,v.workerPath=v.workerPath||v.base,v.modePath=v.modePath||v.base,v.themePath=v.themePath||v.base,delete v.base,v)v[D]!==void 0&&f.set(D,v[D])}}t(!0),f.init=t,f.version="1.4.7"}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(u,f,M){var a=u("../lib/event"),E=u("../lib/useragent"),p=u("./default_handlers").DefaultHandlers,d=u("./default_gutter_handler").GutterHandler,s=u("./mouse_event").MouseEvent,r=u("./dragdrop_handler").DragdropHandler,t=u("./touch_handler").addTouchListeners,c=u("../config"),m=function(v){var x=this;this.editor=v,new p(this),new d(this),new r(this);var w=function(L){(!document.hasFocus||!document.hasFocus()||!v.isFocused()&&document.activeElement==(v.textInput&&v.textInput.getElement()))&&window.focus(),v.focus()},R=v.renderer.getMouseEventTarget();a.addListener(R,"click",this.onMouseEvent.bind(this,"click")),a.addListener(R,"mousemove",this.onMouseMove.bind(this,"mousemove")),a.addMultiMouseDownListener([R,v.renderer.scrollBarV&&v.renderer.scrollBarV.inner,v.renderer.scrollBarH&&v.renderer.scrollBarH.inner,v.textInput&&v.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),a.addMouseWheelListener(v.container,this.onMouseWheel.bind(this,"mousewheel")),t(v.container,v);var S=v.renderer.$gutter;a.addListener(S,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),a.addListener(S,"click",this.onMouseEvent.bind(this,"gutterclick")),a.addListener(S,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),a.addListener(S,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),a.addListener(R,"mousedown",w),a.addListener(S,"mousedown",w),E.isIE&&v.renderer.scrollBarV&&(a.addListener(v.renderer.scrollBarV.element,"mousedown",w),a.addListener(v.renderer.scrollBarH.element,"mousedown",w)),v.on("mousemove",function(L){if(!x.state&&!x.$dragDelay&&x.$dragEnabled){var A=v.renderer.screenToTextCoordinates(L.x,L.y),y=v.session.selection.getRange(),P=v.renderer;!y.isEmpty()&&y.insideStart(A.row,A.column)?P.setCursorStyle("default"):P.setCursorStyle("")}})};(function(){this.onMouseEvent=function(v,x){this.editor._emit(v,new s(x,this.editor))},this.onMouseMove=function(v,x){var w=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;w&&w.length&&this.editor._emit(v,new s(x,this.editor))},this.onMouseWheel=function(v,x){var w=new s(x,this.editor);w.speed=2*this.$scrollSpeed,w.wheelX=x.wheelX,w.wheelY=x.wheelY,this.editor._emit(v,w)},this.setState=function(v){this.state=v},this.captureMouse=function(v,x){this.x=v.x,this.y=v.y,this.isMousePressed=!0;var w=this.editor,R=this.editor.renderer;R.$isMousePressed=!0;var S=this,L=function(T){if(T){if(E.isWebKit&&!T.which&&S.releaseMouse)return S.releaseMouse();S.x=T.clientX,S.y=T.clientY,x&&x(T),S.mouseEvent=new s(T,S.editor),S.$mouseMoved=!0}},A=function(T){w.off("beforeEndOperation",P),clearInterval(B),y(),S[S.state+"End"]&&S[S.state+"End"](T),S.state="",S.isMousePressed=R.$isMousePressed=!1,R.$keepTextAreaAtCursor&&R.$moveTextAreaToCursor(),S.$onCaptureMouseMove=S.releaseMouse=null,T&&S.onMouseEvent("mouseup",T),w.endOperation()},y=function(){S[S.state]&&S[S.state](),S.$mouseMoved=!1};if(E.isOldIE&&v.domEvent.type=="dblclick")return setTimeout(function(){A(v)});var P=function(T){S.releaseMouse&&w.curOp.command.name&&w.curOp.selectionChanged&&(S[S.state+"End"]&&S[S.state+"End"](),S.state="",S.releaseMouse())};w.on("beforeEndOperation",P),w.startOperation({command:{name:"mouse"}}),S.$onCaptureMouseMove=L,S.releaseMouse=a.capture(this.editor.container,L,A);var B=setInterval(y,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var v=function(x){x&&x.domEvent&&x.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",v),x&&x.domEvent&&a.stopEvent(x.domEvent))}.bind(this);setTimeout(v,10),this.editor.on("nativecontextmenu",v)}}).call(m.prototype),c.defineOptions(m.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:E.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),f.MouseHandler=m}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(u,f,M){var a=u("../lib/dom");f.FoldHandler=function(E){E.on("click",function(p){var d=p.getDocumentPosition(),s=E.session,r=s.getFoldAt(d.row,d.column,1);r&&(p.getAccelKey()?s.removeFold(r):s.expandFold(r),p.stop());var t=p.domEvent&&p.domEvent.target;t&&a.hasCssClass(t,"ace_inline_button")&&a.hasCssClass(t,"ace_toggle_wrap")&&(s.setOption("wrap",!s.getUseWrapMode()),E.renderer.scrollCursorIntoView())}),E.on("gutterclick",function(p){if(E.renderer.$gutterLayer.getRegion(p)=="foldWidgets"){var d=p.getDocumentPosition().row,s=E.session;s.foldWidgets&&s.foldWidgets[d]&&E.session.onFoldWidgetClick(d,p),E.isFocused()||E.focus(),p.stop()}}),E.on("gutterdblclick",function(p){if(E.renderer.$gutterLayer.getRegion(p)=="foldWidgets"){var d=p.getDocumentPosition().row,s=E.session,r=s.getParentFoldRangeData(d,!0),t=r.range||r.firstRange;if(t){d=t.start.row;var c=s.getFoldAt(d,s.getLine(d).length,1);c?s.removeFold(c):(s.addFold("...",t),E.renderer.scrollCursorIntoView({row:t.start.row,column:0}))}p.stop()}})}}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(u,f,M){var a=u("../lib/keys"),E=u("../lib/event"),p=function(d){this.$editor=d,this.$data={editor:d},this.$handlers=[],this.setDefaultHandler(d.commands)};(function(){this.setDefaultHandler=function(d){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=d,this.addKeyboardHandler(d,0)},this.setKeyboardHandler=function(d){var s=this.$handlers;if(s[s.length-1]!=d){for(;s[s.length-1]&&s[s.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(s[s.length-1]);this.addKeyboardHandler(d,1)}},this.addKeyboardHandler=function(d,s){if(d){typeof d!="function"||d.handleKeyboard||(d.handleKeyboard=d);var r=this.$handlers.indexOf(d);r!=-1&&this.$handlers.splice(r,1),s==null?this.$handlers.push(d):this.$handlers.splice(s,0,d),r==-1&&d.attach&&d.attach(this.$editor)}},this.removeKeyboardHandler=function(d){var s=this.$handlers.indexOf(d);return s!=-1&&(this.$handlers.splice(s,1),d.detach&&d.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var d=this.$data,s=d.editor;return this.$handlers.map(function(r){return r.getStatusText&&r.getStatusText(s,d)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(d,s,r,t){for(var c,m=!1,v=this.$editor.commands,x=this.$handlers.length;x--&&!((c=this.$handlers[x].handleKeyboard(this.$data,d,s,r,t))&&c.command&&((m=c.command=="null"||v.exec(c.command,this.$editor,c.args,t))&&t&&d!=-1&&c.passEvent!=1&&c.command.passEvent!=1&&E.stopEvent(t),m)););return m||d!=-1||(c={command:"insertstring"},m=v.exec("insertstring",this.$editor,s)),m&&this.$editor._signal&&this.$editor._signal("keyboardActivity",c),m},this.onCommandKey=function(d,s,r){var t=a.keyCodeToString(r);return this.$callKeyboardHandlers(s,t,r,d)},this.onTextInput=function(d){return this.$callKeyboardHandlers(-1,d)}}).call(p.prototype),f.KeyBinding=p}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(u,f,M){var a=0,E=0,p=!1,d=!1,s=!1,r=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],t=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],c=11,m=18,v=[m,m,m,m,m,m,m,m,m,6,5,6,8,5,m,m,m,m,m,m,m,m,m,m,m,m,m,m,5,5,5,6,8,4,4,c,c,c,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,m,m,m,m,m,m,5,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,9,4,c,c,c,c,4,4,4,4,0,4,4,m,4,4,c,c,2,2,4,0,4,4,4,2,0,4,4,4,4,4],x=[8,8,8,8,8,8,8,8,8,8,8,m,m,m,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,c,c,c,c,c,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8];function w(L,A,y){if(!(E<L))if(L!=1||a!=1||d)for(var P,B,T,I,D=y.length,k=0;k<D;){if(A[k]>=L){for(P=k+1;P<D&&A[P]>=L;)P++;for(B=k,T=P-1;B<T;B++,T--)I=y[B],y[B]=y[T],y[T]=I;k=P}k++}else y.reverse()}function R(L,A,y,P){var B,T,I,D,k=A[P];switch(k){case 0:case 1:p=!1;case 4:case 3:return k;case 2:return p?3:2;case 7:return p=!0,1;case 8:return 4;case 9:return P<1||P+1>=A.length||(B=y[P-1])!=2&&B!=3||(T=A[P+1])!=2&&T!=3?4:(p&&(T=3),T==B?T:4);case 10:return(B=P>0?y[P-1]:5)==2&&P+1<A.length&&A[P+1]==2?2:4;case c:if(P>0&&y[P-1]==2)return 2;if(p)return 4;for(D=P+1,I=A.length;D<I&&A[D]==c;)D++;return D<I&&A[D]==2?2:4;case 12:for(I=A.length,D=P+1;D<I&&A[D]==12;)D++;if(D<I){var U=L[P],G=U>=1425&&U<=2303||U==64286;if(B=A[D],G&&(B==1||B==7))return 1}return P<1||(B=A[P-1])==5?4:y[P-1];case 5:return p=!1,d=!0,a;case 6:return s=!0,4;case 13:case 14:case 16:case 17:case 15:p=!1;case m:return 4}}function S(L){var A=L.charCodeAt(0),y=A>>8;return y==0?A>191?0:v[A]:y==5?/[\u0591-\u05f4]/.test(L)?1:0:y==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(L)?12:/[\u0660-\u0669\u066b-\u066c]/.test(L)?3:A==1642?c:/[\u06f0-\u06f9]/.test(L)?2:7:y==32&&A<=8287?x[255&A]:y==254&&A>=65136?7:4}f.L=0,f.R=1,f.EN=2,f.ON_R=3,f.AN=4,f.R_H=5,f.B=6,f.RLE=7,f.DOT="\xB7",f.doBidiReorder=function(L,A,y){if(L.length<2)return{};var P=L.split(""),B=new Array(P.length),T=new Array(P.length),I=[];a=y?1:0,function(k,U,G,H){var se=a?t:r,ee=null,Z=null,ne=null,W=0,K=null,re=-1,oe=null,de=null,ue=[];if(!H)for(oe=0,H=[];oe<G;oe++)H[oe]=S(k[oe]);for(E=a,p=!1,d=!1,s=!1,de=0;de<G;de++){if(ee=W,ue[de]=Z=R(k,H,ue,de),K=240&(W=se[ee][Z]),W&=15,U[de]=ne=se[W][5],K>0)if(K==16){for(oe=re;oe<de;oe++)U[oe]=1;re=-1}else re=-1;if(se[W][6])re==-1&&(re=de);else if(re>-1){for(oe=re;oe<de;oe++)U[oe]=ne;re=-1}H[de]==5&&(U[de]=0),E|=ne}if(s){for(oe=0;oe<G;oe++)if(H[oe]==6){U[oe]=a;for(var Be=oe-1;Be>=0&&H[Be]==8;Be--)U[Be]=a}}}(P,I,P.length,A);for(var D=0;D<B.length;B[D]=D,D++);for(w(2,I,B),w(1,I,B),D=0;D<B.length-1;D++)A[D]===3?I[D]=f.AN:I[D]===1&&(A[D]>7&&A[D]<13||A[D]===4||A[D]===m)?I[D]=f.ON_R:D>0&&P[D-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(P[D])&&(I[D-1]=I[D]=f.R_H,D++);for(P[P.length-1]===f.DOT&&(I[P.length-1]=f.B),P[0]==="\u202B"&&(I[0]=f.RLE),D=0;D<B.length;D++)T[D]=I[B[D]];return{logicalFromVisual:B,bidiLevels:T}},f.hasBidiCharacters=function(L,A){for(var y=!1,P=0;P<L.length;P++)A[P]=S(L.charAt(P)),y||A[P]!=1&&A[P]!=7&&A[P]!=3||(y=!0);return y},f.getVisualFromLogicalIdx=function(L,A){for(var y=0;y<A.logicalFromVisual.length;y++)if(A.logicalFromVisual[y]==L)return y;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(u,f,M){var a=u("./lib/bidiutil"),E=u("./lib/lang"),p=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,d=function(s){this.session=s,this.bidiMap={},this.currentRow=null,this.bidiUtil=a,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=p.test(s.getValue())};(function(){this.isBidiRow=function(s,r,t){return!!this.seenBidi&&(s!==this.currentRow&&(this.currentRow=s,this.updateRowLine(r,t),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(s){this.seenBidi?this.currentRow=null:s.action=="insert"&&p.test(s.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var s=0,r=this.session.$screenRowCache;if(r.length){var t=this.session.$getRowCacheIndex(r,this.currentRow);t>=0&&(s=this.session.$docRowCache[t])}return s},this.getSplitIndex=function(){var s=0,r=this.session.$screenRowCache;if(r.length)for(var t,c=this.session.$getRowCacheIndex(r,this.currentRow);this.currentRow-s>0&&(t=this.session.$getRowCacheIndex(r,this.currentRow-s-1))===c;)c=t,s++;else s=this.currentRow;return s},this.updateRowLine=function(s,r){s===void 0&&(s=this.getDocumentRow());var t=s===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(s),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var c=this.session.$wrapData[s];c&&(r===void 0&&(r=this.getSplitIndex()),r>0&&c.length?(this.wrapIndent=c.indent,this.wrapOffset=this.wrapIndent*this.charWidths[a.L],this.line=r<c.length?this.line.substring(c[r-1],c[r]):this.line.substring(c[c.length-1])):this.line=this.line.substring(0,c[r])),r==c.length&&(this.line+=this.showInvisibles?t:a.DOT)}else this.line+=this.showInvisibles?t:a.DOT;var m,v=this.session,x=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(w,R){return w==="	"||v.isFullWidth(w.charCodeAt(0))?(m=w==="	"?v.getScreenTabSize(R+x):2,x+=m-1,E.stringRepeat(a.DOT,m)):w}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==a.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var s=[];a.hasBidiCharacters(this.line,s)||this.isRtlDir?this.bidiMap=a.doBidiReorder(this.line,s,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(s){if(this.characterWidth!==s.$characterSize.width){this.fontMetrics=s;var r=this.characterWidth=s.$characterSize.width,t=s.$measureCharWidth("\u05D4");this.charWidths[a.L]=this.charWidths[a.EN]=this.charWidths[a.ON_R]=r,this.charWidths[a.R]=this.charWidths[a.AN]=t,this.charWidths[a.R_H]=.45*t,this.charWidths[a.B]=this.charWidths[a.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(s){this.showInvisibles=s,this.currentRow=null},this.setEolChar=function(s){this.EOL=s},this.setContentWidth=function(s){this.contentWidth=s},this.isRtlLine=function(s){return!!this.$isRtl||(s!=null?this.session.getLine(s).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(s,r){for(var t=s.getCursorPosition(),c=s.selection.getSelectionAnchor().row;c<=t.row;c++)r||s.session.getLine(c).charAt(0)!==s.session.$bidiHandler.RLE?r&&s.session.getLine(c).charAt(0)!==s.session.$bidiHandler.RLE&&s.session.doc.insert({column:0,row:c},s.session.$bidiHandler.RLE):s.session.doc.removeInLine(c,0,1)},this.getPosLeft=function(s){s-=this.wrapIndent;var r=this.line.charAt(0)===this.RLE?1:0,t=s>r?this.session.getOverwrite()?s:s-1:r,c=a.getVisualFromLogicalIdx(t,this.bidiMap),m=this.bidiMap.bidiLevels,v=0;!this.session.getOverwrite()&&s<=r&&m[c]%2!=0&&c++;for(var x=0;x<c;x++)v+=this.charWidths[m[x]];return!this.session.getOverwrite()&&s>r&&m[c]%2==0&&(v+=this.charWidths[m[c]]),this.wrapIndent&&(v+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(v+=this.rtlLineOffset),v},this.getSelections=function(s,r){var t,c=this.bidiMap,m=c.bidiLevels,v=[],x=0,w=Math.min(s,r)-this.wrapIndent,R=Math.max(s,r)-this.wrapIndent,S=!1,L=!1,A=0;this.wrapIndent&&(x+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var y,P=0;P<m.length;P++)y=c.logicalFromVisual[P],t=m[P],(S=y>=w&&y<R)&&!L?A=x:!S&&L&&v.push({left:A,width:x-A}),x+=this.charWidths[t],L=S;if(S&&P===m.length&&v.push({left:A,width:x-A}),this.isRtlDir)for(var B=0;B<v.length;B++)v[B].left+=this.rtlLineOffset;return v},this.offsetToCol=function(s){this.isRtlDir&&(s-=this.rtlLineOffset);var r=0,t=(s=Math.max(s,0),0),c=0,m=this.bidiMap.bidiLevels,v=this.charWidths[m[c]];for(this.wrapIndent&&(s-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);s>t+v/2;){if(t+=v,c===m.length-1){v=0;break}v=this.charWidths[m[++c]]}return c>0&&m[c-1]%2!=0&&m[c]%2==0?(s<t&&c--,r=this.bidiMap.logicalFromVisual[c]):c>0&&m[c-1]%2==0&&m[c]%2!=0?r=1+(s>t?this.bidiMap.logicalFromVisual[c]:this.bidiMap.logicalFromVisual[c-1]):this.isRtlDir&&c===m.length-1&&v===0&&m[c-1]%2==0||!this.isRtlDir&&c===0&&m[c]%2!=0?r=1+this.bidiMap.logicalFromVisual[c]:(c>0&&m[c-1]%2!=0&&v!==0&&c--,r=this.bidiMap.logicalFromVisual[c]),r===0&&this.isRtlDir&&r++,r+this.wrapIndent}}).call(d.prototype),f.BidiHandler=d}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(u,f,M){var a=u("./lib/oop"),E=u("./lib/lang"),p=u("./lib/event_emitter").EventEmitter,d=u("./range").Range,s=function(r){this.session=r,this.doc=r.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",function(c){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),t.$isEmpty||t.$silent||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||c.old.column==c.value.column||(t.$desiredColumn=null)}),this.anchor.on("change",function(){t.$anchorChanged=!0,t.$isEmpty||t.$silent||t._emit("changeSelection")})};(function(){a.implement(this,p),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(r,t){this.$isEmpty=!1,this.anchor.setPosition(r,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var r=this.anchor,t=this.lead;return r.row>t.row||r.row==t.row&&r.column>t.column},this.getRange=function(){var r=this.anchor,t=this.lead;return this.$isEmpty?d.fromPoints(t,t):this.isBackwards()?d.fromPoints(t,r):d.fromPoints(r,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(r,t){var c=t?r.end:r.start,m=t?r.start:r.end;this.$setSelection(c.row,c.column,m.row,m.column)},this.$setSelection=function(r,t,c,m){var v=this.$isEmpty,x=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(r,t),this.cursor.setPosition(c,m),this.$isEmpty=!d.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||v!=this.$isEmpty||x)&&this._emit("changeSelection")},this.$moveSelection=function(r){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),r.call(this)},this.selectTo=function(r,t){this.$moveSelection(function(){this.moveCursorTo(r,t)})},this.selectToPosition=function(r){this.$moveSelection(function(){this.moveCursorToPosition(r)})},this.moveTo=function(r,t){this.clearSelection(),this.moveCursorTo(r,t)},this.moveToPosition=function(r){this.clearSelection(),this.moveCursorToPosition(r)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(r,t){if(t===void 0){var c=r||this.lead;r=c.row,t=c.column}return this.session.getWordRange(r,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var r=this.getCursor(),t=this.session.getAWordRange(r.row,r.column);this.setSelectionRange(t)},this.getLineRange=function(r,t){var c,m=typeof r=="number"?r:this.lead.row,v=this.session.getFoldLine(m);return v?(m=v.start.row,c=v.end.row):c=m,t===!0?new d(m,0,c,this.session.getLine(c).length):new d(m,0,c+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(r,t,c){var m=r.column,v=r.column+t;return c<0&&(m=r.column-t,v=r.column),this.session.isTabStop(r)&&this.doc.getLine(r.row).slice(m,v).split(" ").length-1==t},this.moveCursorLeft=function(){var r,t=this.lead.getPosition();if(r=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(r.start.row,r.start.column);else if(t.column===0)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var c=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,c,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-c):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var r,t=this.lead.getPosition();if(r=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(r.end.row,r.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var c=this.session.getTabSize();t=this.lead,this.wouldMoveIntoSoftTab(t,c,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,c):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var r=this.lead.row,t=this.lead.column,c=this.session.documentToScreenRow(r,t),m=this.session.screenToDocumentPosition(c,0),v=this.session.getDisplayLine(r,null,m.row,m.column).match(/^\s*/);v[0].length==t||this.session.$useEmacsStyleLineStart||(m.column+=v[0].length),this.moveCursorToPosition(m)},this.moveCursorLineEnd=function(){var r=this.lead,t=this.session.getDocumentLastRowColumnPosition(r.row,r.column);if(this.lead.column==t.column){var c=this.session.getLine(t.row);if(t.column==c.length){var m=c.search(/\s+$/);m>0&&(t.column=m)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var r=this.doc.getLength()-1,t=this.doc.getLine(r).length;this.moveCursorTo(r,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var r=this.lead.row,t=this.lead.column,c=this.doc.getLine(r),m=c.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var v=this.session.getFoldAt(r,t,1);if(v)this.moveCursorTo(v.end.row,v.end.column);else{if(this.session.nonTokenRe.exec(m)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,m=c.substring(t)),t>=c.length)return this.moveCursorTo(r,c.length),this.moveCursorRight(),void(r<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(m)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,t)}},this.moveCursorLongWordLeft=function(){var r,t=this.lead.row,c=this.lead.column;if(r=this.session.getFoldAt(t,c,-1))this.moveCursorTo(r.start.row,r.start.column);else{var m=this.session.getFoldStringAt(t,c,-1);m==null&&(m=this.doc.getLine(t).substring(0,c));var v=E.stringReverse(m);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(v)&&(c-=this.session.nonTokenRe.lastIndex,v=v.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),c<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(v)&&(c-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,c)}},this.$shortWordEndIndex=function(r){var t,c=0,m=/\s/,v=this.session.tokenRe;if(v.lastIndex=0,this.session.tokenRe.exec(r))c=this.session.tokenRe.lastIndex;else{for(;(t=r[c])&&m.test(t);)c++;if(c<1){for(v.lastIndex=0;(t=r[c])&&!v.test(t);)if(v.lastIndex=0,c++,m.test(t)){if(c>2){c--;break}for(;(t=r[c])&&m.test(t);)c++;if(c>2)break}}}return v.lastIndex=0,c},this.moveCursorShortWordRight=function(){var r=this.lead.row,t=this.lead.column,c=this.doc.getLine(r),m=c.substring(t),v=this.session.getFoldAt(r,t,1);if(v)return this.moveCursorTo(v.end.row,v.end.column);if(t==c.length){var x=this.doc.getLength();do r++,m=this.doc.getLine(r);while(r<x&&/^\s*$/.test(m));/^\s+/.test(m)||(m=""),t=0}var w=this.$shortWordEndIndex(m);this.moveCursorTo(r,t+w)},this.moveCursorShortWordLeft=function(){var r,t=this.lead.row,c=this.lead.column;if(r=this.session.getFoldAt(t,c,-1))return this.moveCursorTo(r.start.row,r.start.column);var m=this.session.getLine(t).substring(0,c);if(c===0){do t--,m=this.doc.getLine(t);while(t>0&&/^\s*$/.test(m));c=m.length,/\s+$/.test(m)||(m="")}var v=E.stringReverse(m),x=this.$shortWordEndIndex(v);return this.moveCursorTo(t,c-x)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(r,t){var c,m=this.session.documentToScreenPosition(this.lead.row,this.lead.column);t===0&&(r!==0&&(this.session.$bidiHandler.isBidiRow(m.row,this.lead.row)?(c=this.session.$bidiHandler.getPosLeft(m.column),m.column=Math.round(c/this.session.$bidiHandler.charWidths[0])):c=m.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?m.column=this.$desiredColumn:this.$desiredColumn=m.column);var v=this.session.screenToDocumentPosition(m.row+r,m.column,c);r!==0&&t===0&&v.row===this.lead.row&&v.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[v.row]&&(v.row>0||r>0)&&v.row++,this.moveCursorTo(v.row,v.column+t,t===0)},this.moveCursorToPosition=function(r){this.moveCursorTo(r.row,r.column)},this.moveCursorTo=function(r,t,c){var m=this.session.getFoldAt(r,t,1);m&&(r=m.start.row,t=m.start.column),this.$keepDesiredColumnOnChange=!0;var v=this.session.getLine(r);/[\uDC00-\uDFFF]/.test(v.charAt(t))&&v.charAt(t-1)&&(this.lead.row==r&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(r,t),this.$keepDesiredColumnOnChange=!1,c||(this.$desiredColumn=null)},this.moveCursorToScreen=function(r,t,c){var m=this.session.screenToDocumentPosition(r,t);this.moveCursorTo(m.row,m.column,c)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(r){this.setSelectionRange(r,r.cursor==r.start),this.$desiredColumn=r.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(r){var t=this.getRange();return r?(r.start.column=t.start.column,r.start.row=t.start.row,r.end.column=t.end.column,r.end.row=t.end.row):r=t,r.cursor=this.isBackwards()?r.start:r.end,r.desiredColumn=this.$desiredColumn,r},this.getRangeOfMovements=function(r){var t=this.getCursor();try{r(this);var c=this.getCursor();return d.fromPoints(t,c)}catch{return d.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var r=this.ranges.map(function(t){var c=t.clone();return c.isBackwards=t.cursor==t.start,c});else(r=this.getRange()).isBackwards=this.isBackwards();return r},this.fromJSON=function(r){if(r.start==null){if(this.rangeList&&r.length>1){this.toSingleRange(r[0]);for(var t=r.length;t--;){var c=d.fromPoints(r[t].start,r[t].end);r[t].isBackwards&&(c.cursor=c.start),this.addRange(c,!0)}return}r=r[0]}this.rangeList&&this.toSingleRange(r),this.setSelectionRange(r,r.isBackwards)},this.isEqual=function(r){if((r.length||this.rangeCount)&&r.length!=this.rangeCount)return!1;if(!r.length||!this.ranges)return this.getRange().isEqual(r);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(r[t]))return!1;return!0}}).call(s.prototype),f.Selection=s}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(u,f,M){var a=u("./config"),E=2e3,p=function(d){for(var s in this.states=d,this.regExps={},this.matchMappings={},this.states){for(var r=this.states[s],t=[],c=0,m=this.matchMappings[s]={defaultToken:"text"},v="g",x=[],w=0;w<r.length;w++){var R=r[w];if(R.defaultToken&&(m.defaultToken=R.defaultToken),R.caseInsensitive&&(v="gi"),R.regex!=null){R.regex instanceof RegExp&&(R.regex=R.regex.toString().slice(1,-1));var S=R.regex,L=new RegExp("(?:("+S+")|(.))").exec("a").length-2;Array.isArray(R.token)?R.token.length==1||L==1?R.token=R.token[0]:L-1!=R.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:R,groupCount:L-1}),R.token=R.token[0]):(R.tokenArray=R.token,R.token=null,R.onMatch=this.$arrayTokens):typeof R.token!="function"||R.onMatch||(R.onMatch=L>1?this.$applyToken:R.token),L>1&&(/\\\d/.test(R.regex)?S=R.regex.replace(/\\([0-9]+)/g,function(A,y){return"\\"+(parseInt(y,10)+c+1)}):(L=1,S=this.removeCapturingGroups(R.regex)),R.splitRegex||typeof R.token=="string"||x.push(R)),m[c]=w,c+=L,t.push(S),R.onMatch||(R.onMatch=null)}}t.length||(m[0]=0,t.push("$")),x.forEach(function(A){A.splitRegex=this.createSplitterRegexp(A.regex,v)},this),this.regExps[s]=new RegExp("("+t.join(")|(")+")|($)",v)}};(function(){this.$setMaxTokenCount=function(d){E=0|d},this.$applyToken=function(d){var s=this.splitRegex.exec(d).slice(1),r=this.token.apply(this,s);if(typeof r=="string")return[{type:r,value:d}];for(var t=[],c=0,m=r.length;c<m;c++)s[c]&&(t[t.length]={type:r[c],value:s[c]});return t},this.$arrayTokens=function(d){if(!d)return[];var s=this.splitRegex.exec(d);if(!s)return"text";for(var r=[],t=this.tokenArray,c=0,m=t.length;c<m;c++)s[c+1]&&(r[r.length]={type:t[c],value:s[c+1]});return r},this.removeCapturingGroups=function(d){return d.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,function(s,r){return r?"(?:":s})},this.createSplitterRegexp=function(d,s){if(d.indexOf("(?=")!=-1){var r=0,t=!1,c={};d.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(m,v,x,w,R,S){return t?t=R!="]":R?t=!0:w?(r==c.stack&&(c.end=S+1,c.stack=-1),r--):x&&(r++,x.length!=1&&(c.stack=r,c.start=S)),m}),c.end!=null&&/^\)*$/.test(d.substr(c.end))&&(d=d.substring(0,c.start)+d.substr(c.end))}return d.charAt(0)!="^"&&(d="^"+d),d.charAt(d.length-1)!="$"&&(d+="$"),new RegExp(d,(s||"").replace("g",""))},this.getLineTokens=function(d,s){if(s&&typeof s!="string"){var r=s.slice(0);(s=r[0])==="#tmp"&&(r.shift(),s=r.shift())}else r=[];var t=s||"start",c=this.states[t];c||(t="start",c=this.states[t]);var m=this.matchMappings[t],v=this.regExps[t];v.lastIndex=0;for(var x,w=[],R=0,S=0,L={type:null,value:""};x=v.exec(d);){var A=m.defaultToken,y=null,P=x[0],B=v.lastIndex;if(B-P.length>R){var T=d.substring(R,B-P.length);L.type==A?L.value+=T:(L.type&&w.push(L),L={type:A,value:T})}for(var I=0;I<x.length-2;I++)if(x[I+1]!==void 0){A=(y=c[m[I]]).onMatch?y.onMatch(P,t,r,d):y.token,y.next&&(t=typeof y.next=="string"?y.next:y.next(t,r),(c=this.states[t])||(this.reportError("state doesn't exist",t),t="start",c=this.states[t]),m=this.matchMappings[t],R=B,(v=this.regExps[t]).lastIndex=B),y.consumeLineEnd&&(R=B);break}if(P){if(typeof A=="string")y&&y.merge===!1||L.type!==A?(L.type&&w.push(L),L={type:A,value:P}):L.value+=P;else if(A)for(L.type&&w.push(L),L={type:null,value:""},I=0;I<A.length;I++)w.push(A[I])}if(R==d.length)break;if(R=B,S++>E){for(S>2*d.length&&this.reportError("infinite loop with in ace tokenizer",{startState:s,line:d});R<d.length;)L.type&&w.push(L),L={value:d.substring(R,R+=500),type:"overflow"};t="start",r=[];break}}return L.type&&w.push(L),r.length>1&&r[0]!==t&&r.unshift("#tmp",t),{tokens:w,state:r.length?r:t}},this.reportError=a.reportError}).call(p.prototype),f.Tokenizer=p}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(u,f,M){var a=u("../lib/lang"),E=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(s,r){if(r)for(var t in s){for(var c=s[t],m=0;m<c.length;m++){var v=c[m];(v.next||v.onMatch)&&(typeof v.next=="string"&&v.next.indexOf(r)!==0&&(v.next=r+v.next),v.nextState&&v.nextState.indexOf(r)!==0&&(v.nextState=r+v.nextState))}this.$rules[r+t]=c}else for(var t in s)this.$rules[t]=s[t]},this.getRules=function(){return this.$rules},this.embedRules=function(s,r,t,c,m){var v=typeof s=="function"?new s().getRules():s;if(c)for(var x=0;x<c.length;x++)c[x]=r+c[x];else for(var w in c=[],v)c.push(r+w);if(this.addRules(v,r),t){var R=Array.prototype[m?"push":"unshift"];for(x=0;x<c.length;x++)R.apply(this.$rules[c[x]],a.deepCopy(t))}this.$embeds||(this.$embeds=[]),this.$embeds.push(r)},this.getEmbeds=function(){return this.$embeds};var p=function(s,r){return(s!="start"||r.length)&&r.unshift(this.nextState,s),this.nextState},d=function(s,r){return r.shift(),r.shift()||"start"};this.normalizeRules=function(){var s=0,r=this.$rules;Object.keys(r).forEach(function t(c){var m=r[c];m.processed=!0;for(var v=0;v<m.length;v++){var x=m[v],w=null;Array.isArray(x)&&(w=x,x={}),!x.regex&&x.start&&(x.regex=x.start,x.next||(x.next=[]),x.next.push({defaultToken:x.token},{token:x.token+".end",regex:x.end||x.start,next:"pop"}),x.token=x.token+".start",x.push=!0);var R=x.next||x.push;if(R&&Array.isArray(R)){var S=x.stateName;S||(typeof(S=x.token)!="string"&&(S=S[0]||""),r[S]&&(S+=s++)),r[S]=R,x.next=S,t(S)}else R=="pop"&&(x.next=d);if(x.push&&(x.nextState=x.next||x.push,x.next=p,delete x.push),x.rules)for(var L in x.rules)r[L]?r[L].push&&r[L].push.apply(r[L],x.rules[L]):r[L]=x.rules[L];var A=typeof x=="string"?x:x.include;if(A&&(w=Array.isArray(A)?A.map(function(P){return r[P]}):r[A]),w){var y=[v,1].concat(w);x.noEscape&&(y=y.filter(function(P){return!P.next})),m.splice.apply(m,y),v--}x.keywordMap&&(x.token=this.createKeywordMapper(x.keywordMap,x.defaultToken||"text",x.caseInsensitive),delete x.defaultToken)}},this)},this.createKeywordMapper=function(s,r,t,c){var m=Object.create(null);return Object.keys(s).forEach(function(v){var x=s[v];t&&(x=x.toLowerCase());for(var w=x.split(c||"|"),R=w.length;R--;)m[w[R]]=v}),Object.getPrototypeOf(m)&&(m.__proto__=null),this.$keywordList=Object.keys(m),s=null,t?function(v){return m[v.toLowerCase()]||r}:function(v){return m[v]||r}},this.getKeywords=function(){return this.$keywords}}).call(E.prototype),f.TextHighlightRules=E}),ace.define("ace/mode/behaviour",["require","exports","module"],function(u,f,M){var a=function(){this.$behaviours={}};(function(){this.add=function(E,p,d){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[E]:this.$behaviours[E]={}}this.$behaviours[E][p]=d},this.addBehaviours=function(E){for(var p in E)for(var d in E[p])this.add(p,d,E[p][d])},this.remove=function(E){this.$behaviours&&this.$behaviours[E]&&delete this.$behaviours[E]},this.inherit=function(E,p){if(typeof E=="function")var d=new E().getBehaviours(p);else d=E.getBehaviours(p);this.addBehaviours(d)},this.getBehaviours=function(E){if(E){for(var p={},d=0;d<E.length;d++)this.$behaviours[E[d]]&&(p[E[d]]=this.$behaviours[E[d]]);return p}return this.$behaviours}}).call(a.prototype),f.Behaviour=a}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(u,f,M){var a=u("./range").Range,E=function(p,d,s){this.$session=p,this.$row=d,this.$rowTokens=p.getTokens(d);var r=p.getTokenAt(d,s);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var p;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,p||(p=this.$session.getLength()),this.$row>=p)return this.$row=p-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var p=this.$rowTokens,d=this.$tokenIndex,s=p[d].start;if(s!==void 0)return s;for(s=0;d>0;)s+=p[d-=1].value.length;return s},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var p=this.$rowTokens[this.$tokenIndex],d=this.getCurrentTokenColumn();return new a(this.$row,d,this.$row,d+p.value.length)}}).call(E.prototype),f.TokenIterator=E}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(u,f,M){var a,E=u("../../lib/oop"),p=u("../behaviour").Behaviour,d=u("../../token_iterator").TokenIterator,s=u("../../lib/lang"),r=["text","paren.rparen","rparen","paren","punctuation.operator"],t=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],c={},m={'"':'"',"'":"'"},v=function(R){var S=-1;if(R.multiSelect&&(S=R.selection.index,c.rangeCount!=R.multiSelect.rangeCount&&(c={rangeCount:R.multiSelect.rangeCount})),c[S])return a=c[S];a=c[S]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},x=function(R,S,L,A){var y=R.end.row-R.start.row;return{text:L+S+A,selection:[0,R.start.column+1,y,R.end.column+(y?0:1)]}},w=function(R){this.add("braces","insertion",function(S,L,A,y,P){var B=A.getCursorPosition(),T=y.doc.getLine(B.row);if(P=="{"){v(A);var I=A.getSelectionRange(),D=y.doc.getTextRange(I);if(D!==""&&D!=="{"&&A.getWrapBehavioursEnabled())return x(I,D,"{","}");if(w.isSaneInsertion(A,y))return/[\]\}\)]/.test(T[B.column])||A.inMultiSelectMode||R&&R.braces?(w.recordAutoInsert(A,y,"}"),{text:"{}",selection:[1,1]}):(w.recordMaybeInsert(A,y,"{"),{text:"{",selection:[1,1]})}else if(P=="}"){if(v(A),T.substring(B.column,B.column+1)=="}"&&y.$findOpeningBracket("}",{column:B.column+1,row:B.row})!==null&&w.isAutoInsertedClosing(B,T,P))return w.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if(P==`
`||P==`\r
`){v(A);var k="";if(w.isMaybeInsertedClosing(B,T)&&(k=s.stringRepeat("}",a.maybeInsertedBrackets),w.clearMaybeInsertedClosing()),T.substring(B.column,B.column+1)==="}"){var U=y.findMatchingBracket({row:B.row,column:B.column+1},"}");if(!U)return null;var G=this.$getIndent(y.getLine(U.row))}else{if(!k)return void w.clearMaybeInsertedClosing();G=this.$getIndent(T)}var H=G+y.getTabString();return{text:`
`+H+`
`+G+k,selection:[1,H.length,1,H.length]}}w.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(S,L,A,y,P){var B=y.doc.getTextRange(P);if(!P.isMultiLine()&&B=="{"){if(v(A),y.doc.getLine(P.start.row).substring(P.end.column,P.end.column+1)=="}")return P.end.column++,P;a.maybeInsertedBrackets--}}),this.add("parens","insertion",function(S,L,A,y,P){if(P=="("){v(A);var B=A.getSelectionRange(),T=y.doc.getTextRange(B);if(T!==""&&A.getWrapBehavioursEnabled())return x(B,T,"(",")");if(w.isSaneInsertion(A,y))return w.recordAutoInsert(A,y,")"),{text:"()",selection:[1,1]}}else if(P==")"){v(A);var I=A.getCursorPosition(),D=y.doc.getLine(I.row);if(D.substring(I.column,I.column+1)==")"&&y.$findOpeningBracket(")",{column:I.column+1,row:I.row})!==null&&w.isAutoInsertedClosing(I,D,P))return w.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("parens","deletion",function(S,L,A,y,P){var B=y.doc.getTextRange(P);if(!P.isMultiLine()&&B=="("&&(v(A),y.doc.getLine(P.start.row).substring(P.start.column+1,P.start.column+2)==")"))return P.end.column++,P}),this.add("brackets","insertion",function(S,L,A,y,P){if(P=="["){v(A);var B=A.getSelectionRange(),T=y.doc.getTextRange(B);if(T!==""&&A.getWrapBehavioursEnabled())return x(B,T,"[","]");if(w.isSaneInsertion(A,y))return w.recordAutoInsert(A,y,"]"),{text:"[]",selection:[1,1]}}else if(P=="]"){v(A);var I=A.getCursorPosition(),D=y.doc.getLine(I.row);if(D.substring(I.column,I.column+1)=="]"&&y.$findOpeningBracket("]",{column:I.column+1,row:I.row})!==null&&w.isAutoInsertedClosing(I,D,P))return w.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("brackets","deletion",function(S,L,A,y,P){var B=y.doc.getTextRange(P);if(!P.isMultiLine()&&B=="["&&(v(A),y.doc.getLine(P.start.row).substring(P.start.column+1,P.start.column+2)=="]"))return P.end.column++,P}),this.add("string_dquotes","insertion",function(S,L,A,y,P){var B=y.$mode.$quotes||m;if(P.length==1&&B[P]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(P)!=-1)return;v(A);var T=P,I=A.getSelectionRange(),D=y.doc.getTextRange(I);if(!(D===""||D.length==1&&B[D])&&A.getWrapBehavioursEnabled())return x(I,D,T,T);if(!D){var k=A.getCursorPosition(),U=y.doc.getLine(k.row),G=U.substring(k.column-1,k.column),H=U.substring(k.column,k.column+1),se=y.getTokenAt(k.row,k.column),ee=y.getTokenAt(k.row,k.column+1);if(G=="\\"&&se&&/escape/.test(se.type))return null;var Z,ne=se&&/string|escape/.test(se.type),W=!ee||/string|escape/.test(ee.type);if(H==T)(Z=ne!==W)&&/string\.end/.test(ee.type)&&(Z=!1);else{if(ne&&!W||ne&&W)return null;var K=y.$mode.tokenRe;K.lastIndex=0;var re=K.test(G);K.lastIndex=0;var oe=K.test(G);if(re||oe||H&&!/[\s;,.})\]\\]/.test(H))return null;var de=U[k.column-2];if(G==T&&(de==T||K.test(de)))return null;Z=!0}return{text:Z?T+T:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(S,L,A,y,P){var B=y.$mode.$quotes||m,T=y.doc.getTextRange(P);if(!P.isMultiLine()&&B.hasOwnProperty(T)&&(v(A),y.doc.getLine(P.start.row).substring(P.start.column+1,P.start.column+2)==T))return P.end.column++,P})};w.isSaneInsertion=function(R,S){var L=R.getCursorPosition(),A=new d(S,L.row,L.column);if(!this.$matchTokenType(A.getCurrentToken()||"text",r)){if(/[)}\]]/.test(R.session.getLine(L.row)[L.column]))return!0;var y=new d(S,L.row,L.column+1);if(!this.$matchTokenType(y.getCurrentToken()||"text",r))return!1}return A.stepForward(),A.getCurrentTokenRow()!==L.row||this.$matchTokenType(A.getCurrentToken()||"text",t)},w.$matchTokenType=function(R,S){return S.indexOf(R.type||R)>-1},w.recordAutoInsert=function(R,S,L){var A=R.getCursorPosition(),y=S.doc.getLine(A.row);this.isAutoInsertedClosing(A,y,a.autoInsertedLineEnd[0])||(a.autoInsertedBrackets=0),a.autoInsertedRow=A.row,a.autoInsertedLineEnd=L+y.substr(A.column),a.autoInsertedBrackets++},w.recordMaybeInsert=function(R,S,L){var A=R.getCursorPosition(),y=S.doc.getLine(A.row);this.isMaybeInsertedClosing(A,y)||(a.maybeInsertedBrackets=0),a.maybeInsertedRow=A.row,a.maybeInsertedLineStart=y.substr(0,A.column)+L,a.maybeInsertedLineEnd=y.substr(A.column),a.maybeInsertedBrackets++},w.isAutoInsertedClosing=function(R,S,L){return a.autoInsertedBrackets>0&&R.row===a.autoInsertedRow&&L===a.autoInsertedLineEnd[0]&&S.substr(R.column)===a.autoInsertedLineEnd},w.isMaybeInsertedClosing=function(R,S){return a.maybeInsertedBrackets>0&&R.row===a.maybeInsertedRow&&S.substr(R.column)===a.maybeInsertedLineEnd&&S.substr(0,R.column)==a.maybeInsertedLineStart},w.popAutoInsertedClosing=function(){a.autoInsertedLineEnd=a.autoInsertedLineEnd.substr(1),a.autoInsertedBrackets--},w.clearMaybeInsertedClosing=function(){a&&(a.maybeInsertedBrackets=0,a.maybeInsertedRow=-1)},E.inherits(w,p),f.CstyleBehaviour=w}),ace.define("ace/unicode",["require","exports","module"],function(u,f,M){for(var a=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],E=0,p=[],d=0;d<a.length;d+=2)p.push(E+=a[d]),a[d+1]&&p.push(45,E+=a[d+1]);f.wordChars=String.fromCharCode.apply(null,p)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(u,f,M){var a=u("../config"),E=u("../tokenizer").Tokenizer,p=u("./text_highlight_rules").TextHighlightRules,d=u("./behaviour/cstyle").CstyleBehaviour,s=u("../unicode"),r=u("../lib/lang"),t=u("../token_iterator").TokenIterator,c=u("../range").Range,m=function(){this.HighlightRules=p};(function(){this.$defaultBehaviour=new d,this.tokenRe=new RegExp("^["+s.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+s.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new E(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(v,x,w,R){var S=x.doc,L=!0,A=!0,y=1/0,P=x.getTabSize(),B=!1;if(this.lineCommentStart){Array.isArray(this.lineCommentStart)?(U=this.lineCommentStart.map(r.escapeRegExp).join("|"),D=this.lineCommentStart[0]):(U=r.escapeRegExp(this.lineCommentStart),D=this.lineCommentStart),U=new RegExp("^(\\s*)(?:"+U+") ?"),B=x.getUseSoftTabs(),se=function(W,K){var re=W.match(U);if(re){var oe=re[1].length,de=re[0].length;I(W,oe,de)||re[0][de-1]!=" "||de--,S.removeInLine(K,oe,de)}};var T=D+" ",I=(H=function(W,K){L&&!/\S/.test(W)||(I(W,y,y)?S.insertInLine({row:K,column:y},T):S.insertInLine({row:K,column:y},D))},ee=function(W,K){return U.test(W)},function(W,K,re){for(var oe=0;K--&&W.charAt(K)==" ";)oe++;if(oe%P!=0)return!1;for(oe=0;W.charAt(re++)==" ";)oe++;return P>2?oe%P!=P-1:oe%P==0})}else{if(!this.blockComment)return!1;var D=this.blockComment.start,k=this.blockComment.end,U=new RegExp("^(\\s*)(?:"+r.escapeRegExp(D)+")"),G=new RegExp("(?:"+r.escapeRegExp(k)+")\\s*$"),H=function(W,K){ee(W,K)||L&&!/\S/.test(W)||(S.insertInLine({row:K,column:W.length},k),S.insertInLine({row:K,column:y},D))},se=function(W,K){var re;(re=W.match(G))&&S.removeInLine(K,W.length-re[0].length,W.length),(re=W.match(U))&&S.removeInLine(K,re[1].length,re[0].length)},ee=function(W,K){if(U.test(W))return!0;for(var re=x.getTokens(K),oe=0;oe<re.length;oe++)if(re[oe].type==="comment")return!0}}function Z(W){for(var K=w;K<=R;K++)W(S.getLine(K),K)}var ne=1/0;Z(function(W,K){var re=W.search(/\S/);re!==-1?(re<y&&(y=re),A&&!ee(W,K)&&(A=!1)):ne>W.length&&(ne=W.length)}),y==1/0&&(y=ne,L=!1,A=!1),B&&y%P!=0&&(y=Math.floor(y/P)*P),Z(A?se:H)},this.toggleBlockComment=function(v,x,w,R){var S=this.blockComment;if(S){!S.start&&S[0]&&(S=S[0]);var L,A,y=(k=new t(x,R.row,R.column)).getCurrentToken(),P=(x.selection,x.selection.toOrientedRange());if(y&&/comment/.test(y.type)){for(var B,T;y&&/comment/.test(y.type);){if((U=y.value.indexOf(S.start))!=-1){var I=k.getCurrentTokenRow(),D=k.getCurrentTokenColumn()+U;B=new c(I,D,I,D+S.start.length);break}y=k.stepBackward()}var k;for(y=(k=new t(x,R.row,R.column)).getCurrentToken();y&&/comment/.test(y.type);){var U;if((U=y.value.indexOf(S.end))!=-1){I=k.getCurrentTokenRow(),D=k.getCurrentTokenColumn()+U,T=new c(I,D,I,D+S.end.length);break}y=k.stepForward()}T&&x.remove(T),B&&(x.remove(B),L=B.start.row,A=-S.start.length)}else A=S.start.length,L=w.start.row,x.insert(w.end,S.end),x.insert(w.start,S.start);P.start.row==L&&(P.start.column+=A),P.end.row==L&&(P.end.column+=A),x.selection.fromOrientedRange(P)}},this.getNextLineIndent=function(v,x,w){return this.$getIndent(x)},this.checkOutdent=function(v,x,w){return!1},this.autoOutdent=function(v,x,w){},this.$getIndent=function(v){return v.match(/^\s*/)[0]},this.createWorker=function(v){return null},this.createModeDelegates=function(v){for(var x in this.$embeds=[],this.$modes={},v)if(v[x]){var w=v[x],R=w.prototype.$id,S=a.$modes[R];S||(a.$modes[R]=S=new w),a.$modes[x]||(a.$modes[x]=S),this.$embeds.push(x),this.$modes[x]=S}var L=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(x=0;x<L.length;x++)(function(A){var y=L[x],P=A[y];A[L[x]]=function(){return this.$delegator(y,arguments,P)}})(this)},this.$delegator=function(v,x,w){var R=x[0]||"start";if(typeof R!="string"){if(Array.isArray(R[2])){var S=R[2][R[2].length-1];if(A=this.$modes[S])return A[v].apply(A,[R[1]].concat([].slice.call(x,1)))}R=R[0]||"start"}for(var L=0;L<this.$embeds.length;L++)if(this.$modes[this.$embeds[L]]){var A,y=R.split(this.$embeds[L]);if(!y[0]&&y[1])return x[0]=y[1],(A=this.$modes[this.$embeds[L]])[v].apply(A,x)}var P=w.apply(this,x);return w?P:void 0},this.transformAction=function(v,x,w,R,S){if(this.$behaviour){var L=this.$behaviour.getBehaviours();for(var A in L)if(L[A][x]){var y=L[A][x].apply(this,arguments);if(y)return y}}},this.getKeywords=function(v){if(!this.completionKeywords){var x=this.$tokenizer.rules,w=[];for(var R in x)for(var S=x[R],L=0,A=S.length;L<A;L++)if(typeof S[L].token=="string")/keyword|support|storage/.test(S[L].token)&&w.push(S[L].regex);else if(typeof S[L].token=="object")for(var y=0,P=S[L].token.length;y<P;y++)/keyword|support|storage/.test(S[L].token[y])&&(R=S[L].regex.match(/\(.+?\)/g)[y],w.push(R.substr(1,R.length-2)));this.completionKeywords=w}return v?w.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(v,x,w,R){return(this.$keywordList||this.$createKeywordList()).map(function(S){return{name:S,value:S,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(m.prototype),f.Mode=m}),ace.define("ace/apply_delta",["require","exports","module"],function(u,f,M){f.applyDelta=function(a,E,p){var d=E.start.row,s=E.start.column,r=a[d]||"";switch(E.action){case"insert":if(E.lines.length===1)a[d]=r.substring(0,s)+E.lines[0]+r.substring(s);else{var t=[d,1].concat(E.lines);a.splice.apply(a,t),a[d]=r.substring(0,s)+a[d],a[d+E.lines.length-1]+=r.substring(s)}break;case"remove":var c=E.end.column,m=E.end.row;d===m?a[d]=r.substring(0,s)+r.substring(c):a.splice(d,m-d+1,r.substring(0,s)+a[m].substring(c))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(u,f,M){var a=u("./lib/oop"),E=u("./lib/event_emitter").EventEmitter,p=f.Anchor=function(d,s,r){this.$onChange=this.onChange.bind(this),this.attach(d),r===void 0?this.setPosition(s.row,s.column):this.setPosition(s,r)};(function(){function d(s,r,t){var c=t?s.column<=r.column:s.column<r.column;return s.row<r.row||s.row==r.row&&c}a.implement(this,E),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(s){if(!(s.start.row==s.end.row&&s.start.row!=this.row||s.start.row>this.row)){var r=function(t,c,m){var v=t.action=="insert",x=(v?1:-1)*(t.end.row-t.start.row),w=(v?1:-1)*(t.end.column-t.start.column),R=t.start,S=v?R:t.end;return d(c,R,m)?{row:c.row,column:c.column}:d(S,c,!m)?{row:c.row+x,column:c.column+(c.row==S.row?w:0)}:{row:R.row,column:R.column}}(s,{row:this.row,column:this.column},this.$insertRight);this.setPosition(r.row,r.column,!0)}},this.setPosition=function(s,r,t){var c;if(c=t?{row:s,column:r}:this.$clipPositionToDocument(s,r),this.row!=c.row||this.column!=c.column){var m={row:this.row,column:this.column};this.row=c.row,this.column=c.column,this._signal("change",{old:m,value:c})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(s){this.document=s||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(s,r){var t={};return s>=this.document.getLength()?(t.row=Math.max(0,this.document.getLength()-1),t.column=this.document.getLine(t.row).length):s<0?(t.row=0,t.column=0):(t.row=s,t.column=Math.min(this.document.getLine(t.row).length,Math.max(0,r))),r<0&&(t.column=0),t}}).call(p.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(u,f,M){var a=u("./lib/oop"),E=u("./apply_delta").applyDelta,p=u("./lib/event_emitter").EventEmitter,d=u("./range").Range,s=u("./anchor").Anchor,r=function(t){this.$lines=[""],t.length===0?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){a.implement(this,p),this.setValue=function(t){var c=this.getLength()-1;this.remove(new d(0,0,c,this.getLine(c).length)),this.insert({row:0,column:0},t)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,c){return new s(this,t,c)},"aaa".split(/a/).length===0?this.$split=function(t){return t.replace(/\r\n|\r/g,`
`).split(`
`)}:this.$split=function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var c=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=c?c[1]:`
`,this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return t==`\r
`||t=="\r"||t==`
`},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,c){return this.$lines.slice(t,c+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var c;if(t.start.row===t.end.row)c=[this.getLine(t.start.row).substring(t.start.column,t.end.column)];else{(c=this.getLines(t.start.row,t.end.row))[0]=(c[0]||"").substring(t.start.column);var m=c.length-1;t.end.row-t.start.row==m&&(c[m]=c[m].substring(0,t.end.column))}return c},this.insertLines=function(t,c){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,c)},this.removeLines=function(t,c){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,c)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,c){return this.getLength()<=1&&this.$detectNewLine(c),this.insertMergedLines(t,this.$split(c))},this.insertInLine=function(t,c){var m=this.clippedPos(t.row,t.column),v=this.pos(t.row,t.column+c.length);return this.applyDelta({start:m,end:v,action:"insert",lines:[c]},!0),this.clonePos(v)},this.clippedPos=function(t,c){var m=this.getLength();t===void 0?t=m:t<0?t=0:t>=m&&(t=m-1,c=void 0);var v=this.getLine(t);return c==null&&(c=v.length),{row:t,column:c=Math.min(Math.max(c,0),v.length)}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,c){return{row:t,column:c}},this.$clipPosition=function(t){var c=this.getLength();return t.row>=c?(t.row=Math.max(0,c-1),t.column=this.getLine(c-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,c){var m=0;(t=Math.min(Math.max(t,0),this.getLength()))<this.getLength()?(c=c.concat([""]),m=0):(c=[""].concat(c),t--,m=this.$lines[t].length),this.insertMergedLines({row:t,column:m},c)},this.insertMergedLines=function(t,c){var m=this.clippedPos(t.row,t.column),v={row:m.row+c.length-1,column:(c.length==1?m.column:0)+c[c.length-1].length};return this.applyDelta({start:m,end:v,action:"insert",lines:c}),this.clonePos(v)},this.remove=function(t){var c=this.clippedPos(t.start.row,t.start.column),m=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:c,end:m,action:"remove",lines:this.getLinesForRange({start:c,end:m})}),this.clonePos(c)},this.removeInLine=function(t,c,m){var v=this.clippedPos(t,c),x=this.clippedPos(t,m);return this.applyDelta({start:v,end:x,action:"remove",lines:this.getLinesForRange({start:v,end:x})},!0),this.clonePos(v)},this.removeFullLines=function(t,c){t=Math.min(Math.max(0,t),this.getLength()-1);var m=(c=Math.min(Math.max(0,c),this.getLength()-1))==this.getLength()-1&&t>0,v=c<this.getLength()-1,x=m?t-1:t,w=m?this.getLine(x).length:0,R=v?c+1:c,S=v?0:this.getLine(R).length,L=new d(x,w,R,S),A=this.$lines.slice(t,c+1);return this.applyDelta({start:L.start,end:L.end,action:"remove",lines:this.getLinesForRange(L)}),A},this.removeNewLine=function(t){t<this.getLength()-1&&t>=0&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,c){return t instanceof d||(t=d.fromPoints(t.start,t.end)),c.length===0&&t.isEmpty()?t.start:c==this.getTextRange(t)?t.end:(this.remove(t),c?this.insert(t.start,c):t.start)},this.applyDeltas=function(t){for(var c=0;c<t.length;c++)this.applyDelta(t[c])},this.revertDeltas=function(t){for(var c=t.length-1;c>=0;c--)this.revertDelta(t[c])},this.applyDelta=function(t,c){var m=t.action=="insert";(m?t.lines.length<=1&&!t.lines[0]:!d.comparePoints(t.start,t.end))||(m&&t.lines.length>2e4?this.$splitAndapplyLargeDelta(t,2e4):(E(this.$lines,t,c),this._signal("change",t)))},this.$splitAndapplyLargeDelta=function(t,c){for(var m=t.lines,v=m.length-c+1,x=t.start.row,w=t.start.column,R=0,S=0;R<v;R=S){S+=c-1;var L=m.slice(R,S);L.push(""),this.applyDelta({start:this.pos(x+R,w),end:this.pos(x+S,w=0),action:t.action,lines:L},!0)}t.lines=m.slice(R),t.start.row=x+R,t.start.column=w,this.applyDelta(t,!0)},this.revertDelta=function(t){this.applyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:t.action=="insert"?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,c){for(var m=this.$lines||this.getAllLines(),v=this.getNewLineCharacter().length,x=c||0,w=m.length;x<w;x++)if((t-=m[x].length+v)<0)return{row:x,column:t+m[x].length+v};return{row:w-1,column:t+m[w-1].length+v}},this.positionToIndex=function(t,c){for(var m=this.$lines||this.getAllLines(),v=this.getNewLineCharacter().length,x=0,w=Math.min(t.row,m.length),R=c||0;R<w;++R)x+=m[R].length+v;return x+t.column}}).call(r.prototype),f.Document=r}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(u,f,M){var a=u("./lib/oop"),E=u("./lib/event_emitter").EventEmitter,p=function(d,s){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=d;var r=this;this.$worker=function(){if(r.running){for(var t=new Date,c=r.currentLine,m=-1,v=r.doc,x=c;r.lines[c];)c++;var w=v.getLength(),R=0;for(r.running=!1;c<w;){r.$tokenizeRow(c),m=c;do c++;while(r.lines[c]);if(++R%5==0&&new Date-t>20){r.running=setTimeout(r.$worker,20);break}}r.currentLine=c,m==-1&&(m=c),x<=m&&r.fireUpdateEvent(x,m)}}};(function(){a.implement(this,E),this.setTokenizer=function(d){this.tokenizer=d,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(d){this.doc=d,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(d,s){var r={first:d,last:s};this._signal("update",{data:r})},this.start=function(d){this.currentLine=Math.min(d||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(d){var s=d.start.row,r=d.end.row-s;if(r===0)this.lines[s]=null;else if(d.action=="remove")this.lines.splice(s,r+1,null),this.states.splice(s,r+1,null);else{var t=Array(r+1);t.unshift(s,1),this.lines.splice.apply(this.lines,t),this.states.splice.apply(this.states,t)}this.currentLine=Math.min(s,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(d){return this.lines[d]||this.$tokenizeRow(d)},this.getState=function(d){return this.currentLine==d&&this.$tokenizeRow(d),this.states[d]||"start"},this.$tokenizeRow=function(d){var s=this.doc.getLine(d),r=this.states[d-1],t=this.tokenizer.getLineTokens(s,r,d);return this.states[d]+""!=t.state+""?(this.states[d]=t.state,this.lines[d+1]=null,this.currentLine>d+1&&(this.currentLine=d+1)):this.currentLine==d&&(this.currentLine=d+1),this.lines[d]=t.tokens}}).call(p.prototype),f.BackgroundTokenizer=p}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(u,f,M){var a=u("./lib/lang"),E=(u("./lib/oop"),u("./range").Range),p=function(d,s,r){this.setRegexp(d),this.clazz=s,this.type=r||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(d){this.regExp+""!=d+""&&(this.regExp=d,this.cache=[])},this.update=function(d,s,r,t){if(this.regExp)for(var c=t.firstRow,m=t.lastRow,v=c;v<=m;v++){var x=this.cache[v];x==null&&((x=a.getMatchOffsets(r.getLine(v),this.regExp)).length>this.MAX_RANGES&&(x=x.slice(0,this.MAX_RANGES)),x=x.map(function(R){return new E(v,R.offset,v,R.offset+R.length)}),this.cache[v]=x.length?x:"");for(var w=x.length;w--;)s.drawSingleLineMarker(d,x[w].toScreenRange(r),this.clazz,t)}}}).call(p.prototype),f.SearchHighlight=p}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(u,f,M){var a=u("../range").Range;function E(p,d){this.foldData=p,Array.isArray(d)?this.folds=d:d=this.folds=[d];var s=d[d.length-1];this.range=new a(d[0].start.row,d[0].start.column,s.end.row,s.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(r){r.setFoldLine(this)},this)}(function(){this.shiftRow=function(p){this.start.row+=p,this.end.row+=p,this.folds.forEach(function(d){d.start.row+=p,d.end.row+=p})},this.addFold=function(p){if(p.sameRow){if(p.start.row<this.startRow||p.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(p),this.folds.sort(function(d,s){return-d.range.compareEnd(s.start.row,s.start.column)}),this.range.compareEnd(p.start.row,p.start.column)>0?(this.end.row=p.end.row,this.end.column=p.end.column):this.range.compareStart(p.end.row,p.end.column)<0&&(this.start.row=p.start.row,this.start.column=p.start.column)}else if(p.start.row==this.end.row)this.folds.push(p),this.end.row=p.end.row,this.end.column=p.end.column;else{if(p.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(p),this.start.row=p.start.row,this.start.column=p.start.column}p.foldLine=this},this.containsRow=function(p){return p>=this.start.row&&p<=this.end.row},this.walk=function(p,d,s){var r,t,c=0,m=this.folds,v=!0;d==null&&(d=this.end.row,s=this.end.column);for(var x=0;x<m.length;x++){if((t=(r=m[x]).range.compareStart(d,s))==-1)return void p(null,d,s,c,v);if(!p(null,r.start.row,r.start.column,c,v)&&p(r.placeholder,r.start.row,r.start.column,c)||t===0)return;v=!r.sameRow,c=r.end.column}p(null,d,s,c,v)},this.getNextFoldTo=function(p,d){for(var s,r,t=0;t<this.folds.length;t++){if((r=(s=this.folds[t]).range.compareEnd(p,d))==-1)return{fold:s,kind:"after"};if(r===0)return{fold:s,kind:"inside"}}return null},this.addRemoveChars=function(p,d,s){var r,t,c=this.getNextFoldTo(p,d);if(c){if(r=c.fold,c.kind=="inside"&&r.start.column!=d&&r.start.row!=p)window.console&&window.console.log(p,d,r);else if(r.start.row==p){var m=(t=this.folds).indexOf(r);for(m===0&&(this.start.column+=s);m<t.length;m++){if((r=t[m]).start.column+=s,!r.sameRow)return;r.end.column+=s}this.end.column+=s}}},this.split=function(p,d){var s=this.getNextFoldTo(p,d);if(!s||s.kind=="inside")return null;var r=s.fold,t=this.folds,c=this.foldData,m=t.indexOf(r),v=t[m-1];this.end.row=v.end.row,this.end.column=v.end.column;var x=new E(c,t=t.splice(m,t.length-m));return c.splice(c.indexOf(this)+1,0,x),x},this.merge=function(p){for(var d=p.folds,s=0;s<d.length;s++)this.addFold(d[s]);var r=this.foldData;r.splice(r.indexOf(p),1)},this.toString=function(){var p=[this.range.toString()+": ["];return this.folds.forEach(function(d){p.push("  "+d.toString())}),p.push("]"),p.join(`
`)},this.idxToPosition=function(p){for(var d=0,s=0;s<this.folds.length;s++){var r=this.folds[s];if((p-=r.start.column-d)<0)return{row:r.start.row,column:r.start.column+p};if((p-=r.placeholder.length)<0)return r.start;d=r.end.column}return{row:this.end.row,column:this.end.column+p}}}).call(E.prototype),f.FoldLine=E}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(u,f,M){var a=u("./range").Range.comparePoints,E=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=a,this.pointIndex=function(p,d,s){for(var r=this.ranges,t=s||0;t<r.length;t++){var c=r[t],m=a(p,c.end);if(!(m>0)){var v=a(p,c.start);return m===0?d&&v!==0?-t-2:t:v>0||v===0&&!d?t:-t-1}}return-t-1},this.add=function(p){var d=!p.isEmpty(),s=this.pointIndex(p.start,d);s<0&&(s=-s-1);var r=this.pointIndex(p.end,d,s);return r<0?r=-r-1:r++,this.ranges.splice(s,r-s,p)},this.addList=function(p){for(var d=[],s=p.length;s--;)d.push.apply(d,this.add(p[s]));return d},this.substractPoint=function(p){var d=this.pointIndex(p);if(d>=0)return this.ranges.splice(d,1)},this.merge=function(){for(var p,d=[],s=this.ranges,r=(s=s.sort(function(m,v){return a(m.start,v.start)}))[0],t=1;t<s.length;t++){p=r,r=s[t];var c=a(p.end,r.start);c<0||(c!=0||p.isEmpty()||r.isEmpty())&&(a(p.end,r.end)<0&&(p.end.row=r.end.row,p.end.column=r.end.column),s.splice(t,1),d.push(r),r=p,t--)}return this.ranges=s,d},this.contains=function(p,d){return this.pointIndex({row:p,column:d})>=0},this.containsPoint=function(p){return this.pointIndex(p)>=0},this.rangeAtPoint=function(p){var d=this.pointIndex(p);if(d>=0)return this.ranges[d]},this.clipRows=function(p,d){var s=this.ranges;if(s[0].start.row>d||s[s.length-1].start.row<p)return[];var r=this.pointIndex({row:p,column:0});r<0&&(r=-r-1);var t=this.pointIndex({row:d,column:0},r);t<0&&(t=-t-1);for(var c=[],m=r;m<t;m++)c.push(s[m]);return c},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(p){this.session&&this.detach(),this.session=p,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(p){for(var d=p.start,s=p.end,r=d.row,t=s.row,c=this.ranges,m=0,v=c.length;m<v&&!((R=c[m]).end.row>=r);m++);if(p.action=="insert"){for(var x=t-r,w=-d.column+s.column;m<v&&!((R=c[m]).start.row>r);m++)if(R.start.row==r&&R.start.column>=d.column&&(R.start.column==d.column&&this.$bias<=0||(R.start.column+=w,R.start.row+=x)),R.end.row==r&&R.end.column>=d.column){if(R.end.column==d.column&&this.$bias<0)continue;R.end.column==d.column&&w>0&&m<v-1&&R.end.column>R.start.column&&R.end.column==c[m+1].start.column&&(R.end.column-=w),R.end.column+=w,R.end.row+=x}}else for(x=r-t,w=d.column-s.column;m<v&&!((R=c[m]).start.row>t);m++)R.end.row<t&&(r<R.end.row||r==R.end.row&&d.column<R.end.column)?(R.end.row=r,R.end.column=d.column):R.end.row==t?R.end.column<=s.column?(x||R.end.column>d.column)&&(R.end.column=d.column,R.end.row=d.row):(R.end.column+=w,R.end.row+=x):R.end.row>t&&(R.end.row+=x),R.start.row<t&&(r<R.start.row||r==R.start.row&&d.column<R.start.column)?(R.start.row=r,R.start.column=d.column):R.start.row==t?R.start.column<=s.column?(x||R.start.column>d.column)&&(R.start.column=d.column,R.start.row=d.row):(R.start.column+=w,R.start.row+=x):R.start.row>t&&(R.start.row+=x);if(x!=0&&m<v)for(;m<v;m++){var R;(R=c[m]).start.row+=x,R.end.row+=x}}}).call(E.prototype),f.RangeList=E}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(u,f,M){var a=u("../range_list").RangeList,E=u("../lib/oop"),p=f.Fold=function(r,t){this.foldLine=null,this.placeholder=t,this.range=r,this.start=r.start,this.end=r.end,this.sameRow=r.start.row==r.end.row,this.subFolds=this.ranges=[]};function d(r,t){r.row-=t.row,r.row==0&&(r.column-=t.column)}function s(r,t){r.row==0&&(r.column+=t.column),r.row+=t.row}E.inherits(p,a),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(r){this.foldLine=r,this.subFolds.forEach(function(t){t.setFoldLine(r)})},this.clone=function(){var r=this.range.clone(),t=new p(r,this.placeholder);return this.subFolds.forEach(function(c){t.subFolds.push(c.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(r){if(!this.range.isEqual(r)){var t,c;t=r,c=this.start,d(t.start,c),d(t.end,c);for(var m=r.start.row,v=r.start.column,x=0,w=-1;x<this.subFolds.length&&(w=this.subFolds[x].range.compare(m,v))==1;x++);var R=this.subFolds[x],S=0;if(w==0){if(R.range.containsRange(r))return R.addSubFold(r);S=1}m=r.range.end.row,v=r.range.end.column;var L=x;for(w=-1;L<this.subFolds.length&&(w=this.subFolds[L].range.compare(m,v))==1;L++);w==0&&L++;for(var A=this.subFolds.splice(x,L-x,r),y=w==0?A.length-1:A.length,P=S;P<y;P++)r.addSubFold(A[P]);return r.setFoldLine(this.foldLine),r}},this.restoreRange=function(r){return function(t,c){s(t.start,c),s(t.end,c)}(r,this.start)}}.call(p.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(u,f,M){var a=u("../range").Range,E=u("./fold_line").FoldLine,p=u("./fold").Fold,d=u("../token_iterator").TokenIterator;f.Folding=function(){this.getFoldAt=function(s,r,t){var c=this.getFoldLine(s);if(!c)return null;for(var m=c.folds,v=0;v<m.length;v++){var x=m[v].range;if(x.contains(s,r)){if(t==1&&x.isEnd(s,r)&&!x.isEmpty()||t==-1&&x.isStart(s,r)&&!x.isEmpty())continue;return m[v]}}},this.getFoldsInRange=function(s){var r=s.start,t=s.end,c=this.$foldData,m=[];r.column+=1,t.column-=1;for(var v=0;v<c.length;v++){var x=c[v].range.compareRange(s);if(x!=2){if(x==-2)break;for(var w=c[v].folds,R=0;R<w.length;R++){var S=w[R];if((x=S.range.compareRange(s))==-2)break;if(x!=2){if(x==42)break;m.push(S)}}}}return r.column-=1,t.column+=1,m},this.getFoldsInRangeList=function(s){if(Array.isArray(s)){var r=[];s.forEach(function(t){r=r.concat(this.getFoldsInRange(t))},this)}else r=this.getFoldsInRange(s);return r},this.getAllFolds=function(){for(var s=[],r=this.$foldData,t=0;t<r.length;t++)for(var c=0;c<r[t].folds.length;c++)s.push(r[t].folds[c]);return s},this.getFoldStringAt=function(s,r,t,c){if(!(c=c||this.getFoldLine(s)))return null;for(var m,v,x={end:{column:0}},w=0;w<c.folds.length;w++){var R=(v=c.folds[w]).range.compareEnd(s,r);if(R==-1){m=this.getLine(v.start.row).substring(x.end.column,v.start.column);break}if(R===0)return null;x=v}return m||(m=this.getLine(v.start.row).substring(x.end.column)),t==-1?m.substring(0,r-x.end.column):t==1?m.substring(r-x.end.column):m},this.getFoldLine=function(s,r){var t=this.$foldData,c=0;for(r&&(c=t.indexOf(r)),c==-1&&(c=0);c<t.length;c++){var m=t[c];if(m.start.row<=s&&m.end.row>=s)return m;if(m.end.row>s)return null}return null},this.getNextFoldLine=function(s,r){var t=this.$foldData,c=0;for(r&&(c=t.indexOf(r)),c==-1&&(c=0);c<t.length;c++){var m=t[c];if(m.end.row>=s)return m}return null},this.getFoldedRowCount=function(s,r){for(var t=this.$foldData,c=r-s+1,m=0;m<t.length;m++){var v=t[m],x=v.end.row,w=v.start.row;if(x>=r){w<r&&(w>=s?c-=r-w:c=0);break}x>=s&&(c-=w>=s?x-w:x-s+1)}return c},this.$addFoldLine=function(s){return this.$foldData.push(s),this.$foldData.sort(function(r,t){return r.start.row-t.start.row}),s},this.addFold=function(s,r){var t,c=this.$foldData,m=!1;s instanceof p?t=s:(t=new p(r,s)).collapseChildren=r.collapseChildren,this.$clipRangeToDocument(t.range);var v=t.start.row,x=t.start.column,w=t.end.row,R=t.end.column,S=this.getFoldAt(v,x,1),L=this.getFoldAt(w,R,-1);if(S&&L==S)return S.addSubFold(t);S&&!S.range.isStart(v,x)&&this.removeFold(S),L&&!L.range.isEnd(w,R)&&this.removeFold(L);var A=this.getFoldsInRange(t.range);A.length>0&&(this.removeFolds(A),A.forEach(function(T){t.addSubFold(T)}));for(var y=0;y<c.length;y++){var P=c[y];if(w==P.start.row){P.addFold(t),m=!0;break}if(v==P.end.row){if(P.addFold(t),m=!0,!t.sameRow){var B=c[y+1];if(B&&B.start.row==w){P.merge(B);break}}break}if(w<=P.start.row)break}return m||(P=this.$addFoldLine(new E(this.$foldData,t))),this.$useWrapMode?this.$updateWrapData(P.start.row,P.start.row):this.$updateRowLengthCache(P.start.row,P.start.row),this.$modified=!0,this._signal("changeFold",{data:t,action:"add"}),t},this.addFolds=function(s){s.forEach(function(r){this.addFold(r)},this)},this.removeFold=function(s){var r=s.foldLine,t=r.start.row,c=r.end.row,m=this.$foldData,v=r.folds;if(v.length==1)m.splice(m.indexOf(r),1);else if(r.range.isEnd(s.end.row,s.end.column))v.pop(),r.end.row=v[v.length-1].end.row,r.end.column=v[v.length-1].end.column;else if(r.range.isStart(s.start.row,s.start.column))v.shift(),r.start.row=v[0].start.row,r.start.column=v[0].start.column;else if(s.sameRow)v.splice(v.indexOf(s),1);else{var x=r.split(s.start.row,s.start.column);(v=x.folds).shift(),x.start.row=v[0].start.row,x.start.column=v[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(t,c):this.$updateRowLengthCache(t,c)),this.$modified=!0,this._signal("changeFold",{data:s,action:"remove"})},this.removeFolds=function(s){for(var r=[],t=0;t<s.length;t++)r.push(s[t]);r.forEach(function(c){this.removeFold(c)},this),this.$modified=!0},this.expandFold=function(s){this.removeFold(s),s.subFolds.forEach(function(r){s.restoreRange(r),this.addFold(r)},this),s.collapseChildren>0&&this.foldAll(s.start.row+1,s.end.row,s.collapseChildren-1),s.subFolds=[]},this.expandFolds=function(s){s.forEach(function(r){this.expandFold(r)},this)},this.unfold=function(s,r){var t,c;if(s==null?(t=new a(0,0,this.getLength(),0),r=!0):t=typeof s=="number"?new a(s,0,s,this.getLine(s).length):"row"in s?a.fromPoints(s,s):s,c=this.getFoldsInRangeList(t),r)this.removeFolds(c);else for(var m=c;m.length;)this.expandFolds(m),m=this.getFoldsInRangeList(t);if(c.length)return c},this.isRowFolded=function(s,r){return!!this.getFoldLine(s,r)},this.getRowFoldEnd=function(s,r){var t=this.getFoldLine(s,r);return t?t.end.row:s},this.getRowFoldStart=function(s,r){var t=this.getFoldLine(s,r);return t?t.start.row:s},this.getFoldDisplayLine=function(s,r,t,c,m){c==null&&(c=s.start.row),m==null&&(m=0),r==null&&(r=s.end.row),t==null&&(t=this.getLine(r).length);var v=this.doc,x="";return s.walk(function(w,R,S,L){if(!(R<c)){if(R==c){if(S<m)return;L=Math.max(m,L)}x+=w!=null?w:v.getLine(R).substring(L,S)}},r,t),x},this.getDisplayLine=function(s,r,t,c){var m,v=this.getFoldLine(s);return v?this.getFoldDisplayLine(v,s,r,t,c):(m=this.doc.getLine(s)).substring(c||0,r||m.length)},this.$cloneFoldData=function(){var s=[];return s=this.$foldData.map(function(r){var t=r.folds.map(function(c){return c.clone()});return new E(s,t)})},this.toggleFold=function(s){var r,t,c=this.selection.getRange();if(c.isEmpty()){var m=c.start;if(r=this.getFoldAt(m.row,m.column))return void this.expandFold(r);(t=this.findMatchingBracket(m))?c.comparePoint(t)==1?c.end=t:(c.start=t,c.start.column++,c.end.column--):(t=this.findMatchingBracket({row:m.row,column:m.column+1}))?(c.comparePoint(t)==1?c.end=t:c.start=t,c.start.column++):c=this.getCommentFoldRange(m.row,m.column)||c}else{var v=this.getFoldsInRange(c);if(s&&v.length)return void this.expandFolds(v);v.length==1&&(r=v[0])}if(r||(r=this.getFoldAt(c.start.row,c.start.column)),r&&r.range.toString()==c.toString())this.expandFold(r);else{var x="...";if(!c.isMultiLine()){if((x=this.getTextRange(c)).length<4)return;x=x.trim().substring(0,2)+".."}this.addFold(x,c)}},this.getCommentFoldRange=function(s,r,t){var c=new d(this,s,r),m=c.getCurrentToken(),v=m.type;if(m&&/^comment|string/.test(v)){(v=v.match(/comment|string/)[0])=="comment"&&(v+="|doc-start");var x=new RegExp(v),w=new a;if(t!=1){do m=c.stepBackward();while(m&&x.test(m.type));c.stepForward()}if(w.start.row=c.getCurrentTokenRow(),w.start.column=c.getCurrentTokenColumn()+2,c=new d(this,s,r),t!=-1){var R=-1;do if(m=c.stepForward(),R==-1){var S=this.getState(c.$row);x.test(S)||(R=c.$row)}else if(c.$row>R)break;while(m&&x.test(m.type));m=c.stepBackward()}else m=c.getCurrentToken();return w.end.row=c.getCurrentTokenRow(),w.end.column=c.getCurrentTokenColumn()+m.value.length-2,w}},this.foldAll=function(s,r,t){t==null&&(t=1e5);var c=this.foldWidgets;if(c){r=r||this.getLength();for(var m=s=s||0;m<r;m++)if(c[m]==null&&(c[m]=this.getFoldWidget(m)),c[m]=="start"){var v=this.getFoldWidgetRange(m);if(v&&v.isMultiLine()&&v.end.row<=r&&v.start.row>=s){m=v.end.row;try{var x=this.addFold("...",v);x&&(x.collapseChildren=t)}catch{}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(s){if(!this.$foldStyles[s])throw new Error("invalid fold style: "+s+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=s){this.$foldStyle=s,s=="manual"&&this.unfold();var r=this.$foldMode;this.$setFolding(null),this.$setFolding(r)}},this.$setFolding=function(s){this.$foldMode!=s&&(this.$foldMode=s,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),s&&this.$foldStyle!="manual"?(this.foldWidgets=[],this.getFoldWidget=s.getFoldWidget.bind(s,this,this.$foldStyle),this.getFoldWidgetRange=s.getFoldWidgetRange.bind(s,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(s,r){var t=this.foldWidgets;if(!t||r&&t[s])return{};for(var c,m=s-1;m>=0;){var v=t[m];if(v==null&&(v=t[m]=this.getFoldWidget(m)),v=="start"){var x=this.getFoldWidgetRange(m);if(c||(c=x),x&&x.end.row>=s)break}m--}return{range:m!==-1&&x,firstRange:c}},this.onFoldWidgetClick=function(s,r){var t={children:(r=r.domEvent).shiftKey,all:r.ctrlKey||r.metaKey,siblings:r.altKey};if(!this.$toggleFoldWidget(s,t)){var c=r.target||r.srcElement;c&&/ace_fold-widget/.test(c.className)&&(c.className+=" ace_invalid")}},this.$toggleFoldWidget=function(s,r){if(this.getFoldWidget){var t=this.getFoldWidget(s),c=this.getLine(s),m=t==="end"?-1:1,v=this.getFoldAt(s,m===-1?0:c.length,m);if(v)return r.children||r.all?this.removeFold(v):this.expandFold(v),v;var x=this.getFoldWidgetRange(s,!0);if(x&&!x.isMultiLine()&&(v=this.getFoldAt(x.start.row,x.start.column,1))&&x.isEqual(v.range))return this.removeFold(v),v;if(r.siblings){var w=this.getParentFoldRangeData(s);if(w.range)var R=w.range.start.row+1,S=w.range.end.row;this.foldAll(R,S,r.all?1e4:0)}else r.children?(S=x?x.end.row:this.getLength(),this.foldAll(s+1,S,r.all?1e4:0)):x&&(r.all&&(x.collapseChildren=1e4),this.addFold("...",x));return x}},this.toggleFoldWidget=function(s){var r=this.selection.getCursor().row;r=this.getRowFoldStart(r);var t=this.$toggleFoldWidget(r,{});if(!t){var c=this.getParentFoldRangeData(r,!0);if(t=c.range||c.firstRange){r=t.start.row;var m=this.getFoldAt(r,this.getLine(r).length,1);m?this.removeFold(m):this.addFold("...",t)}}},this.updateFoldWidgets=function(s){var r=s.start.row,t=s.end.row-r;if(t===0)this.foldWidgets[r]=null;else if(s.action=="remove")this.foldWidgets.splice(r,t+1,null);else{var c=Array(t+1);c.unshift(r,1),this.foldWidgets.splice.apply(this.foldWidgets,c)}},this.tokenizerUpdateFoldWidgets=function(s){var r=s.data;r.first!=r.last&&this.foldWidgets.length>r.first&&this.foldWidgets.splice(r.first,this.foldWidgets.length)}}}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(u,f,M){var a=u("../token_iterator").TokenIterator,E=u("../range").Range;f.BracketMatch=function(){this.findMatchingBracket=function(p,d){if(p.column==0)return null;var s=d||this.getLine(p.row).charAt(p.column-1);if(s=="")return null;var r=s.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],p):this.$findOpeningBracket(r[2],p):null},this.getBracketRange=function(p){var d,s=this.getLine(p.row),r=!0,t=s.charAt(p.column-1),c=t&&t.match(/([\(\[\{])|([\)\]\}])/);if(c||(t=s.charAt(p.column),p={row:p.row,column:p.column+1},c=t&&t.match(/([\(\[\{])|([\)\]\}])/),r=!1),!c)return null;if(c[1]){if(!(m=this.$findClosingBracket(c[1],p)))return null;d=E.fromPoints(p,m),r||(d.end.column++,d.start.column--),d.cursor=d.end}else{var m;if(!(m=this.$findOpeningBracket(c[2],p)))return null;d=E.fromPoints(m,p),r||(d.start.column++,d.end.column--),d.cursor=d.start}return d},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(p,d,s){var r=this.$brackets[p],t=1,c=new a(this,d.row,d.column),m=c.getCurrentToken();if(m||(m=c.stepForward()),m){s||(s=new RegExp("(\\.?"+m.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var v=d.column-c.getCurrentTokenColumn()-2,x=m.value;;){for(;v>=0;){var w=x.charAt(v);if(w==r){if((t-=1)==0)return{row:c.getCurrentTokenRow(),column:v+c.getCurrentTokenColumn()}}else w==p&&(t+=1);v-=1}do m=c.stepBackward();while(m&&!s.test(m.type));if(m==null)break;v=(x=m.value).length-1}return null}},this.$findClosingBracket=function(p,d,s){var r=this.$brackets[p],t=1,c=new a(this,d.row,d.column),m=c.getCurrentToken();if(m||(m=c.stepForward()),m){s||(s=new RegExp("(\\.?"+m.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var v=d.column-c.getCurrentTokenColumn();;){for(var x=m.value,w=x.length;v<w;){var R=x.charAt(v);if(R==r){if((t-=1)==0)return{row:c.getCurrentTokenRow(),column:v+c.getCurrentTokenColumn()}}else R==p&&(t+=1);v+=1}do m=c.stepForward();while(m&&!s.test(m.type));if(m==null)break;v=0}return null}}}}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(u,f,M){var a=u("./lib/oop"),E=u("./lib/lang"),p=u("./bidihandler").BidiHandler,d=u("./config"),s=u("./lib/event_emitter").EventEmitter,r=u("./selection").Selection,t=u("./mode/text").Mode,c=u("./range").Range,m=u("./document").Document,v=u("./background_tokenizer").BackgroundTokenizer,x=u("./search_highlight").SearchHighlight,w=function(R,S){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++w.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),typeof R=="object"&&R.getLine||(R=new m(R)),this.setDocument(R),this.selection=new r(this),this.$bidiHandler=new p(this),d.resetOptions(this),this.setMode(S),d._signal("session",this)};w.$uid=0,function(){a.implement(this,s),this.setDocument=function(A){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=A,A.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(A){if(!A)return this.$docRowCache=[],void(this.$screenRowCache=[]);var y=this.$docRowCache.length,P=this.$getRowCacheIndex(this.$docRowCache,A)+1;y>P&&(this.$docRowCache.splice(P,y),this.$screenRowCache.splice(P,y))},this.$getRowCacheIndex=function(A,y){for(var P=0,B=A.length-1;P<=B;){var T=P+B>>1,I=A[T];if(y>I)P=T+1;else{if(!(y<I))return T;B=T-1}}return P-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(A){var y=A.data;this.$resetRowCache(y.start.row)},this.onChange=function(A){this.$modified=!0,this.$bidiHandler.onChange(A),this.$resetRowCache(A.start.row);var y=this.$updateInternalDataOnChange(A);!this.$fromUndo&&this.$undoManager&&(y&&y.length&&(this.$undoManager.add({action:"removeFolds",folds:y},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(A,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(A),this._signal("change",A)},this.setValue=function(A){this.doc.setValue(A),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(A){return this.bgTokenizer.getState(A)},this.getTokens=function(A){return this.bgTokenizer.getTokens(A)},this.getTokenAt=function(A,y){var P,B=this.bgTokenizer.getTokens(A),T=0;if(y==null){var I=B.length-1;T=this.getLine(A).length}else for(I=0;I<B.length&&!((T+=B[I].value.length)>=y);I++);return(P=B[I])?(P.index=I,P.start=T-P.value.length,P):null},this.setUndoManager=function(A){if(this.$undoManager=A,this.$informUndoManager&&this.$informUndoManager.cancel(),A){var y=this;A.addSession(this),this.$syncInformUndoManager=function(){y.$informUndoManager.cancel(),y.mergeUndoDeltas=!1},this.$informUndoManager=E.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?E.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(A){this.setOption("useSoftTabs",A)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(A){this.setOption("tabSize",A)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(A){return this.$useSoftTabs&&A.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(A){this.setOption("navigateWithinSoftTabs",A)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(A){this.setOption("overwrite",A)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(A,y){this.$decorations[A]||(this.$decorations[A]=""),this.$decorations[A]+=" "+y,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(A,y){this.$decorations[A]=(this.$decorations[A]||"").replace(" "+y,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(A){this.$breakpoints=[];for(var y=0;y<A.length;y++)this.$breakpoints[A[y]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(A,y){y===void 0&&(y="ace_breakpoint"),y?this.$breakpoints[A]=y:delete this.$breakpoints[A],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(A){delete this.$breakpoints[A],this._signal("changeBreakpoint",{})},this.addMarker=function(A,y,P,B){var T=this.$markerId++,I={range:A,type:P||"line",renderer:typeof P=="function"?P:null,clazz:y,inFront:!!B,id:T};return B?(this.$frontMarkers[T]=I,this._signal("changeFrontMarker")):(this.$backMarkers[T]=I,this._signal("changeBackMarker")),T},this.addDynamicMarker=function(A,y){if(A.update){var P=this.$markerId++;return A.id=P,A.inFront=!!y,y?(this.$frontMarkers[P]=A,this._signal("changeFrontMarker")):(this.$backMarkers[P]=A,this._signal("changeBackMarker")),A}},this.removeMarker=function(A){var y=this.$frontMarkers[A]||this.$backMarkers[A];y&&(delete(y.inFront?this.$frontMarkers:this.$backMarkers)[A],this._signal(y.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(A){return A?this.$frontMarkers:this.$backMarkers},this.highlight=function(A){if(!this.$searchHighlight){var y=new x(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(y)}this.$searchHighlight.setRegexp(A)},this.highlightLines=function(A,y,P,B){typeof y!="number"&&(P=y,y=A),P||(P="ace_step");var T=new c(A,0,y,1/0);return T.id=this.addMarker(T,P,"fullLine",B),T},this.setAnnotations=function(A){this.$annotations=A,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(A){var y=A.match(/^.*?(\r?\n)/m);this.$autoNewLine=y?y[1]:`
`},this.getWordRange=function(A,y){var P=this.getLine(A),B=!1;if(y>0&&(B=!!P.charAt(y-1).match(this.tokenRe)),B||(B=!!P.charAt(y).match(this.tokenRe)),B)var T=this.tokenRe;else T=/^\s+$/.test(P.slice(y-1,y+1))?/\s/:this.nonTokenRe;var I=y;if(I>0){do I--;while(I>=0&&P.charAt(I).match(T));I++}for(var D=y;D<P.length&&P.charAt(D).match(T);)D++;return new c(A,I,A,D)},this.getAWordRange=function(A,y){for(var P=this.getWordRange(A,y),B=this.getLine(P.end.row);B.charAt(P.end.column).match(/[ \t]/);)P.end.column+=1;return P},this.setNewLineMode=function(A){this.doc.setNewLineMode(A)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(A){this.setOption("useWorker",A)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(A){var y=A.data;this.bgTokenizer.start(y.first),this._signal("tokenizerUpdate",A)},this.$modes=d.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(A,y){if(A&&typeof A=="object"){if(A.getTokenizer)return this.$onChangeMode(A);var P=A,B=P.path}else B=A||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new t),this.$modes[B]&&!P)return this.$onChangeMode(this.$modes[B]),void(y&&y());this.$modeId=B,d.loadModule(["mode",B],function(T){if(this.$modeId!==B)return y&&y();this.$modes[B]&&!P?this.$onChangeMode(this.$modes[B]):T&&T.Mode&&(T=new T.Mode(P),P||(this.$modes[B]=T,T.$id=B),this.$onChangeMode(T)),y&&y()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(A,y){if(y||(this.$modeId=A.$id),this.$mode!==A){this.$mode=A,this.$stopWorker(),this.$useWorker&&this.$startWorker();var P=A.getTokenizer();if(P.addEventListener!==void 0){var B=this.onReloadTokenizer.bind(this);P.addEventListener("update",B)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(P);else{this.bgTokenizer=new v(P);var T=this;this.bgTokenizer.addEventListener("update",function(I){T._signal("tokenizerUpdate",I)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=A.tokenRe,this.nonTokenRe=A.nonTokenRe,y||(A.attachToSession&&A.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(A.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(A){d.warn("Could not load worker",A),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(A){this.$scrollTop===A||isNaN(A)||(this.$scrollTop=A,this._signal("changeScrollTop",A))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(A){this.$scrollLeft===A||isNaN(A)||(this.$scrollLeft=A,this._signal("changeScrollLeft",A))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var A=0;return this.lineWidgets.forEach(function(y){y&&y.screenWidth>A&&(A=y.screenWidth)}),this.lineWidgetWidth=A},this.$computeWidth=function(A){if(this.$modified||A){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var y=this.doc.getAllLines(),P=this.$rowLengthCache,B=0,T=0,I=this.$foldData[T],D=I?I.start.row:1/0,k=y.length,U=0;U<k;U++){if(U>D){if((U=I.end.row+1)>=k)break;D=(I=this.$foldData[T++])?I.start.row:1/0}P[U]==null&&(P[U]=this.$getStringScreenWidth(y[U])[0]),P[U]>B&&(B=P[U])}this.screenWidth=B}},this.getLine=function(A){return this.doc.getLine(A)},this.getLines=function(A,y){return this.doc.getLines(A,y)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(A){return this.doc.getTextRange(A||this.selection.getRange())},this.insert=function(A,y){return this.doc.insert(A,y)},this.remove=function(A){return this.doc.remove(A)},this.removeFullLines=function(A,y){return this.doc.removeFullLines(A,y)},this.undoChanges=function(A,y){if(A.length){this.$fromUndo=!0;for(var P=A.length-1;P!=-1;P--){var B=A[P];B.action=="insert"||B.action=="remove"?this.doc.revertDelta(B):B.folds&&this.addFolds(B.folds)}!y&&this.$undoSelect&&(A.selectionBefore?this.selection.fromJSON(A.selectionBefore):this.selection.setRange(this.$getUndoSelection(A,!0))),this.$fromUndo=!1}},this.redoChanges=function(A,y){if(A.length){this.$fromUndo=!0;for(var P=0;P<A.length;P++){var B=A[P];B.action!="insert"&&B.action!="remove"||this.doc.applyDelta(B)}!y&&this.$undoSelect&&(A.selectionAfter?this.selection.fromJSON(A.selectionAfter):this.selection.setRange(this.$getUndoSelection(A,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(A){this.$undoSelect=A},this.$getUndoSelection=function(A,y){function P(k){return y?k.action!=="insert":k.action==="insert"}for(var B,T,I=0;I<A.length;I++){var D=A[I];D.start&&(B?P(D)?(T=D.start,B.compare(T.row,T.column)==-1&&B.setStart(T),T=D.end,B.compare(T.row,T.column)==1&&B.setEnd(T)):(T=D.start,B.compare(T.row,T.column)==-1&&(B=c.fromPoints(D.start,D.start))):B=P(D)?c.fromPoints(D.start,D.end):c.fromPoints(D.start,D.start))}return B},this.replace=function(A,y){return this.doc.replace(A,y)},this.moveText=function(A,y,P){var B=this.getTextRange(A),T=this.getFoldsInRange(A),I=c.fromPoints(y,y);if(!P){this.remove(A);var D=A.start.row-A.end.row;(G=D?-A.end.column:A.start.column-A.end.column)&&(I.start.row==A.end.row&&I.start.column>A.end.column&&(I.start.column+=G),I.end.row==A.end.row&&I.end.column>A.end.column&&(I.end.column+=G)),D&&I.start.row>=A.end.row&&(I.start.row+=D,I.end.row+=D)}if(I.end=this.insert(I.start,B),T.length){var k=A.start,U=I.start,G=(D=U.row-k.row,U.column-k.column);this.addFolds(T.map(function(H){return(H=H.clone()).start.row==k.row&&(H.start.column+=G),H.end.row==k.row&&(H.end.column+=G),H.start.row+=D,H.end.row+=D,H}))}return I},this.indentRows=function(A,y,P){P=P.replace(/\t/g,this.getTabString());for(var B=A;B<=y;B++)this.doc.insertInLine({row:B,column:0},P)},this.outdentRows=function(A){for(var y=A.collapseRows(),P=new c(0,0,0,0),B=this.getTabSize(),T=y.start.row;T<=y.end.row;++T){var I=this.getLine(T);P.start.row=T,P.end.row=T;for(var D=0;D<B&&I.charAt(D)==" ";++D);D<B&&I.charAt(D)=="	"?(P.start.column=D,P.end.column=D+1):(P.start.column=0,P.end.column=D),this.remove(P)}},this.$moveLines=function(A,y,P){if(A=this.getRowFoldStart(A),y=this.getRowFoldEnd(y),P<0){if((T=this.getRowFoldStart(A+P))<0)return 0;var B=T-A}else if(P>0){var T;if((T=this.getRowFoldEnd(y+P))>this.doc.getLength()-1)return 0;B=T-y}else A=this.$clipRowToDocument(A),B=(y=this.$clipRowToDocument(y))-A+1;var I=new c(A,0,y,Number.MAX_VALUE),D=this.getFoldsInRange(I).map(function(U){return(U=U.clone()).start.row+=B,U.end.row+=B,U}),k=P==0?this.doc.getLines(A,y):this.doc.removeFullLines(A,y);return this.doc.insertFullLines(A+B,k),D.length&&this.addFolds(D),B},this.moveLinesUp=function(A,y){return this.$moveLines(A,y,-1)},this.moveLinesDown=function(A,y){return this.$moveLines(A,y,1)},this.duplicateLines=function(A,y){return this.$moveLines(A,y,0)},this.$clipRowToDocument=function(A){return Math.max(0,Math.min(A,this.doc.getLength()-1))},this.$clipColumnToRow=function(A,y){return y<0?0:Math.min(this.doc.getLine(A).length,y)},this.$clipPositionToDocument=function(A,y){if(y=Math.max(0,y),A<0)A=0,y=0;else{var P=this.doc.getLength();A>=P?(A=P-1,y=this.doc.getLine(P-1).length):y=Math.min(this.doc.getLine(A).length,y)}return{row:A,column:y}},this.$clipRangeToDocument=function(A){A.start.row<0?(A.start.row=0,A.start.column=0):A.start.column=this.$clipColumnToRow(A.start.row,A.start.column);var y=this.doc.getLength()-1;return A.end.row>y?(A.end.row=y,A.end.column=this.doc.getLine(y).length):A.end.column=this.$clipColumnToRow(A.end.row,A.end.column),A},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(A){if(A!=this.$useWrapMode){if(this.$useWrapMode=A,this.$modified=!0,this.$resetRowCache(0),A){var y=this.getLength();this.$wrapData=Array(y),this.$updateWrapData(0,y-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(A,y){this.$wrapLimitRange.min===A&&this.$wrapLimitRange.max===y||(this.$wrapLimitRange={min:A,max:y},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(A,y){var P=this.$wrapLimitRange;P.max<0&&(P={min:y,max:y});var B=this.$constrainWrapLimit(A,P.min,P.max);return B!=this.$wrapLimit&&B>1&&(this.$wrapLimit=B,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(A,y,P){return y&&(A=Math.max(y,A)),P&&(A=Math.min(P,A)),A},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(A){this.setWrapLimitRange(A,A)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(A){var y=this.$useWrapMode,P=A.action,B=A.start,T=A.end,I=B.row,D=T.row,k=D-I,U=null;if(this.$updating=!0,k!=0)if(P==="remove"){this[y?"$wrapData":"$rowLengthCache"].splice(I,k);var G=this.$foldData;U=this.getFoldsInRange(A),this.removeFolds(U);var H=0;if(W=this.getFoldLine(T.row)){W.addRemoveChars(T.row,T.column,B.column-T.column),W.shiftRow(-k);var se=this.getFoldLine(I);se&&se!==W&&(se.merge(W),W=se),H=G.indexOf(W)+1}for(;H<G.length;H++)(W=G[H]).start.row>=T.row&&W.shiftRow(-k);D=I}else{var ee=Array(k);ee.unshift(I,0);var Z=y?this.$wrapData:this.$rowLengthCache;if(Z.splice.apply(Z,ee),G=this.$foldData,H=0,W=this.getFoldLine(I)){var ne=W.range.compareInside(B.row,B.column);ne==0?(W=W.split(B.row,B.column))&&(W.shiftRow(k),W.addRemoveChars(D,0,T.column-B.column)):ne==-1&&(W.addRemoveChars(I,0,T.column-B.column),W.shiftRow(k)),H=G.indexOf(W)+1}for(;H<G.length;H++){var W;(W=G[H]).start.row>=I&&W.shiftRow(k)}}else k=Math.abs(A.start.column-A.end.column),P==="remove"&&(U=this.getFoldsInRange(A),this.removeFolds(U),k=-k),(W=this.getFoldLine(I))&&W.addRemoveChars(I,B.column,k);return y&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,y?this.$updateWrapData(I,D):this.$updateRowLengthCache(I,D),U},this.$updateRowLengthCache=function(A,y,P){this.$rowLengthCache[A]=null,this.$rowLengthCache[y]=null},this.$updateWrapData=function(A,y){var P,B,T=this.doc.getAllLines(),I=this.getTabSize(),D=this.$wrapData,k=this.$wrapLimit,U=A;for(y=Math.min(y,T.length-1);U<=y;)(B=this.getFoldLine(U,B))?(P=[],B.walk(function(G,H,se,ee){var Z;if(G!=null){(Z=this.$getDisplayTokens(G,P.length))[0]=R;for(var ne=1;ne<Z.length;ne++)Z[ne]=S}else Z=this.$getDisplayTokens(T[H].substring(ee,se),P.length);P=P.concat(Z)}.bind(this),B.end.row,T[B.end.row].length+1),D[B.start.row]=this.$computeWrapSplits(P,k,I),U=B.end.row+1):(P=this.$getDisplayTokens(T[U]),D[U]=this.$computeWrapSplits(P,k,I),U++)};var R=3,S=4;function L(A){return!(A<4352)&&(A>=4352&&A<=4447||A>=4515&&A<=4519||A>=4602&&A<=4607||A>=9001&&A<=9002||A>=11904&&A<=11929||A>=11931&&A<=12019||A>=12032&&A<=12245||A>=12272&&A<=12283||A>=12288&&A<=12350||A>=12353&&A<=12438||A>=12441&&A<=12543||A>=12549&&A<=12589||A>=12593&&A<=12686||A>=12688&&A<=12730||A>=12736&&A<=12771||A>=12784&&A<=12830||A>=12832&&A<=12871||A>=12880&&A<=13054||A>=13056&&A<=19903||A>=19968&&A<=42124||A>=42128&&A<=42182||A>=43360&&A<=43388||A>=44032&&A<=55203||A>=55216&&A<=55238||A>=55243&&A<=55291||A>=63744&&A<=64255||A>=65040&&A<=65049||A>=65072&&A<=65106||A>=65108&&A<=65126||A>=65128&&A<=65131||A>=65281&&A<=65376||A>=65504&&A<=65510)}this.$computeWrapSplits=function(A,y,P){if(A.length==0)return[];var B=[],T=A.length,I=0,D=0,k=this.$wrapAsCode,U=this.$indentedSoftWrap,G=y<=Math.max(2*P,8)||U===!1?0:Math.floor(y/2);function H(ne){for(var W=ne-I,K=I;K<ne;K++){var re=A[K];re!==12&&re!==2||(W-=1)}B.length||(se=function(){var oe=0;if(G===0)return oe;if(U)for(var de=0;de<A.length;de++){var ue=A[de];if(ue==10)oe+=1;else{if(ue!=11){if(ue==12)continue;break}oe+=P}}return k&&U!==!1&&(oe+=P),Math.min(oe,G)}(),B.indent=se),D+=W,B.push(D),I=ne}for(var se=0;T-I>y-se;){var ee=I+y-se;if(A[ee-1]>=10&&A[ee]>=10)H(ee);else if(A[ee]!=R&&A[ee]!=S){for(var Z=Math.max(ee-(y-(y>>2)),I-1);ee>Z&&A[ee]<R;)ee--;if(k){for(;ee>Z&&A[ee]<R;)ee--;for(;ee>Z&&A[ee]==9;)ee--}else for(;ee>Z&&A[ee]<10;)ee--;ee>Z?H(++ee):(A[ee=I+y]==2&&ee--,H(ee-se))}else{for(;ee!=I-1&&A[ee]!=R;ee--);if(ee>I){H(ee);continue}for(ee=I+y;ee<A.length&&A[ee]==S;ee++);if(ee==A.length)break;H(ee)}}return B},this.$getDisplayTokens=function(A,y){var P,B=[];y=y||0;for(var T=0;T<A.length;T++){var I=A.charCodeAt(T);if(I==9){P=this.getScreenTabSize(B.length+y),B.push(11);for(var D=1;D<P;D++)B.push(12)}else I==32?B.push(10):I>39&&I<48||I>57&&I<64?B.push(9):I>=4352&&L(I)?B.push(1,2):B.push(1)}return B},this.$getStringScreenWidth=function(A,y,P){if(y==0)return[0,0];var B,T;for(y==null&&(y=1/0),P=P||0,T=0;T<A.length&&((B=A.charCodeAt(T))==9?P+=this.getScreenTabSize(P):B>=4352&&L(B)?P+=2:P+=1,!(P>y));T++);return[P,T]},this.lineWidgets=null,this.getRowLength=function(A){if(this.lineWidgets)var y=this.lineWidgets[A]&&this.lineWidgets[A].rowCount||0;else y=0;return this.$useWrapMode&&this.$wrapData[A]?this.$wrapData[A].length+1+y:1+y},this.getRowLineCount=function(A){return this.$useWrapMode&&this.$wrapData[A]?this.$wrapData[A].length+1:1},this.getRowWrapIndent=function(A){if(this.$useWrapMode){var y=this.screenToDocumentPosition(A,Number.MAX_VALUE),P=this.$wrapData[y.row];return P.length&&P[0]<y.column?P.indent:0}return 0},this.getScreenLastRowColumn=function(A){var y=this.screenToDocumentPosition(A,Number.MAX_VALUE);return this.documentToScreenColumn(y.row,y.column)},this.getDocumentLastRowColumn=function(A,y){var P=this.documentToScreenRow(A,y);return this.getScreenLastRowColumn(P)},this.getDocumentLastRowColumnPosition=function(A,y){var P=this.documentToScreenRow(A,y);return this.screenToDocumentPosition(P,Number.MAX_VALUE/10)},this.getRowSplitData=function(A){return this.$useWrapMode?this.$wrapData[A]:void 0},this.getScreenTabSize=function(A){return this.$tabSize-(A%this.$tabSize|0)},this.screenToDocumentRow=function(A,y){return this.screenToDocumentPosition(A,y).row},this.screenToDocumentColumn=function(A,y){return this.screenToDocumentPosition(A,y).column},this.screenToDocumentPosition=function(A,y,P){if(A<0)return{row:0,column:0};var B,T,I=0,D=0,k=0,U=0,G=this.$screenRowCache,H=this.$getRowCacheIndex(G,A),se=G.length;if(se&&H>=0){k=G[H],I=this.$docRowCache[H];var ee=A>G[se-1]}else ee=!se;for(var Z=this.getLength()-1,ne=this.getNextFoldLine(I),W=ne?ne.start.row:1/0;k<=A&&!(k+(U=this.getRowLength(I))>A||I>=Z);)k+=U,++I>W&&(I=ne.end.row+1,W=(ne=this.getNextFoldLine(I,ne))?ne.start.row:1/0),ee&&(this.$docRowCache.push(I),this.$screenRowCache.push(k));if(ne&&ne.start.row<=I)B=this.getFoldDisplayLine(ne),I=ne.start.row;else{if(k+U<=A||I>Z)return{row:Z,column:this.getLine(Z).length};B=this.getLine(I),ne=null}var K=0,re=Math.floor(A-k);if(this.$useWrapMode){var oe=this.$wrapData[I];oe&&(T=oe[re],re>0&&oe.length&&(K=oe.indent,D=oe[re-1]||oe[oe.length-1],B=B.substring(D)))}return P!==void 0&&this.$bidiHandler.isBidiRow(k+re,I,re)&&(y=this.$bidiHandler.offsetToCol(P)),D+=this.$getStringScreenWidth(B,y-K)[1],this.$useWrapMode&&D>=T&&(D=T-1),ne?ne.idxToPosition(D):{row:I,column:D}},this.documentToScreenPosition=function(A,y){if(y===void 0)var P=this.$clipPositionToDocument(A.row,A.column);else P=this.$clipPositionToDocument(A,y);A=P.row,y=P.column;var B,T=0,I=null;(B=this.getFoldAt(A,y,1))&&(A=B.start.row,y=B.start.column);var D,k=0,U=this.$docRowCache,G=this.$getRowCacheIndex(U,A),H=U.length;if(H&&G>=0){k=U[G],T=this.$screenRowCache[G];var se=A>U[H-1]}else se=!H;for(var ee=this.getNextFoldLine(k),Z=ee?ee.start.row:1/0;k<A;){if(k>=Z){if((D=ee.end.row+1)>A)break;Z=(ee=this.getNextFoldLine(D,ee))?ee.start.row:1/0}else D=k+1;T+=this.getRowLength(k),k=D,se&&(this.$docRowCache.push(k),this.$screenRowCache.push(T))}var ne="";ee&&k>=Z?(ne=this.getFoldDisplayLine(ee,A,y),I=ee.start.row):(ne=this.getLine(A).substring(0,y),I=A);var W=0;if(this.$useWrapMode){var K=this.$wrapData[I];if(K){for(var re=0;ne.length>=K[re];)T++,re++;ne=ne.substring(K[re-1]||0,ne.length),W=re>0?K.indent:0}}return{row:T,column:W+this.$getStringScreenWidth(ne)[0]}},this.documentToScreenColumn=function(A,y){return this.documentToScreenPosition(A,y).column},this.documentToScreenRow=function(A,y){return this.documentToScreenPosition(A,y).row},this.getScreenLength=function(){var A=0,y=null;if(this.$useWrapMode)for(var P=this.$wrapData.length,B=0,T=(k=0,(y=this.$foldData[k++])?y.start.row:1/0);B<P;){var I=this.$wrapData[B];A+=I?I.length+1:1,++B>T&&(B=y.end.row+1,T=(y=this.$foldData[k++])?y.start.row:1/0)}else{A=this.getLength();for(var D=this.$foldData,k=0;k<D.length;k++)A-=(y=D[k]).end.row-y.start.row}return this.lineWidgets&&(A+=this.$getWidgetScreenLength()),A},this.$setFontMetrics=function(A){this.$enableVarChar&&(this.$getStringScreenWidth=function(y,P,B){if(P===0)return[0,0];var T,I;for(P||(P=1/0),B=B||0,I=0;I<y.length&&!((B+=(T=y.charAt(I))==="	"?this.getScreenTabSize(B):A.getCharacterWidth(T))>P);I++);return[B,I]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=L}.call(w.prototype),u("./edit_session/folding").Folding.call(w.prototype),u("./edit_session/bracket_match").BracketMatch.call(w.prototype),d.defineOptions(w.prototype,"session",{wrap:{set:function(R){if(R&&R!="off"?R=="free"?R=!0:R=="printMargin"?R=-1:typeof R=="string"&&(R=parseInt(R,10)||!1):R=!1,this.$wrap!=R)if(this.$wrap=R,R){var S=typeof R=="number"?R:null;this.setWrapLimitRange(S,S),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(R){(R=R=="auto"?this.$mode.type!="text":R!="text")!=this.$wrapAsCode&&(this.$wrapAsCode=R,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(R){this.$useWorker=R,this.$stopWorker(),R&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(R){(R=parseInt(R))>0&&this.$tabSize!==R&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=R,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(R){this.setFoldStyle(R)},handlesSet:!0},overwrite:{set:function(R){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(R){this.doc.setNewLineMode(R)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(R){this.setMode(R)},get:function(){return this.$modeId},handlesSet:!0}}),f.EditSession=w}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(u,f,M){var a=u("./lib/lang"),E=u("./lib/oop"),p=u("./range").Range,d=function(){this.$options={}};(function(){this.set=function(s){return E.mixin(this.$options,s),this},this.getOptions=function(){return a.copyObject(this.$options)},this.setOptions=function(s){this.$options=s},this.find=function(s){var r=this.$options,t=this.$matchIterator(s,r);if(!t)return!1;var c=null;return t.forEach(function(m,v,x,w){return c=new p(m,v,x,w),!(v==w&&r.start&&r.start.start&&r.skipCurrent!=0&&c.isEqual(r.start)&&(c=null,1))}),c},this.findAll=function(s){var r=this.$options;if(!r.needle)return[];this.$assembleRegExp(r);var t=r.range,c=t?s.getLines(t.start.row,t.end.row):s.doc.getAllLines(),m=[],v=r.re;if(r.$isMultiLine){var x,w=v.length,R=c.length-w;e:for(var S=v.offset||0;S<=R;S++){for(var L=0;L<w;L++)if(c[S+L].search(v[L])==-1)continue e;var A=c[S],y=c[S+w-1],P=A.length-A.match(v[0])[0].length,B=y.match(v[w-1])[0].length;x&&x.end.row===S&&x.end.column>P||(m.push(x=new p(S,P,S+w-1,B)),w>2&&(S=S+w-2))}}else for(var T=0;T<c.length;T++){var I=a.getMatchOffsets(c[T],v);for(L=0;L<I.length;L++){var D=I[L];m.push(new p(T,D.offset,T,D.offset+D.length))}}if(t){var k=t.start.column,U=t.start.column;for(T=0,L=m.length-1;T<L&&m[T].start.column<k&&m[T].start.row==t.start.row;)T++;for(;T<L&&m[L].end.column>U&&m[L].end.row==t.end.row;)L--;for(m=m.slice(T,L+1),T=0,L=m.length;T<L;T++)m[T].start.row+=t.start.row,m[T].end.row+=t.start.row}return m},this.replace=function(s,r){var t=this.$options,c=this.$assembleRegExp(t);if(t.$isMultiLine)return r;if(c){var m=c.exec(s);if(!m||m[0].length!=s.length)return null;if(r=s.replace(c,r),t.preserveCase){r=r.split("");for(var v=Math.min(s.length,s.length);v--;){var x=s[v];x&&x.toLowerCase()!=x?r[v]=r[v].toUpperCase():r[v]=r[v].toLowerCase()}r=r.join("")}return r}},this.$assembleRegExp=function(s,r){if(s.needle instanceof RegExp)return s.re=s.needle;var t=s.needle;if(!s.needle)return s.re=!1;s.regExp||(t=a.escapeRegExp(t)),s.wholeWord&&(t=function(v,x){function w(R){return/\w/.test(R)||x.regExp?"\\b":""}return w(v[0])+v+w(v[v.length-1])}(t,s));var c=s.caseSensitive?"gm":"gmi";if(s.$isMultiLine=!r&&/[\n\r]/.test(t),s.$isMultiLine)return s.re=this.$assembleMultilineRegExp(t,c);try{var m=new RegExp(t,c)}catch{m=!1}return s.re=m},this.$assembleMultilineRegExp=function(s,r){for(var t=s.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),c=[],m=0;m<t.length;m++)try{c.push(new RegExp(t[m],r))}catch{return!1}return c},this.$matchIterator=function(s,r){var t=this.$assembleRegExp(r);if(!t)return!1;var c=r.backwards==1,m=r.skipCurrent!=0,v=r.range,x=r.start;x||(x=v?v[c?"end":"start"]:s.selection.getRange()),x.start&&(x=x[m!=c?"end":"start"]);var w=v?v.start.row:0,R=v?v.end.row:s.getLength()-1;if(c)var S=function(y){var P=x.row;if(!A(P,x.column,y)){for(P--;P>=w;P--)if(A(P,Number.MAX_VALUE,y))return;if(r.wrap!=0){for(P=R,w=x.row;P>=w;P--)if(A(P,Number.MAX_VALUE,y))return}}};else S=function(y){var P=x.row;if(!A(P,x.column,y)){for(P+=1;P<=R;P++)if(A(P,0,y))return;if(r.wrap!=0){for(P=w,R=x.row;P<=R;P++)if(A(P,0,y))return}}};if(r.$isMultiLine)var L=t.length,A=function(y,P,B){var T=c?y-L+1:y;if(!(T<0)){var I=s.getLine(T),D=I.search(t[0]);if(!(!c&&D<P||D===-1)){for(var k=1;k<L;k++)if((I=s.getLine(T+k)).search(t[k])==-1)return;var U=I.match(t[L-1])[0].length;if(!(c&&U>P))return!!B(T,D,T+L-1,U)||void 0}}};else A=c?function(y,P,B){var T,I=s.getLine(y),D=[],k=0;for(t.lastIndex=0;T=t.exec(I);){var U=T[0].length;if(k=T.index,!U){if(k>=I.length)break;t.lastIndex=k+=1}if(T.index+U>P)break;D.push(T.index,U)}for(var G=D.length-1;G>=0;G-=2){var H=D[G-1];if(B(y,H,y,H+(U=D[G])))return!0}}:function(y,P,B){var T,I,D=s.getLine(y);for(t.lastIndex=P;I=t.exec(D);){var k=I[0].length;if(B(y,T=I.index,y,T+k))return!0;if(!k&&(t.lastIndex=T+=1,T>=D.length))return!1}};return{forEach:S}}}).call(d.prototype),f.Search=d}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(u,f,M){var a=u("../lib/keys"),E=u("../lib/useragent"),p=a.KEY_MODS;function d(r,t){this.platform=t||(E.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(r),this.$singleCommand=!0}function s(r,t){d.call(this,r,t),this.$singleCommand=!1}s.prototype=d.prototype,function(){function r(t){return typeof t=="object"&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,c){var m=t&&(typeof t=="string"?t:t.name);t=this.commands[m],c||delete this.commands[m];var v=this.commandKeyBinding;for(var x in v){var w=v[x];if(w==t)delete v[x];else if(Array.isArray(w)){var R=w.indexOf(t);R!=-1&&(w.splice(R,1),w.length==1&&(v[x]=w[0]))}}},this.bindKey=function(t,c,m){if(typeof t=="object"&&t&&(m==null&&(m=t.position),t=t[this.platform]),t)return typeof c=="function"?this.addCommand({exec:c,bindKey:t,name:c.name||t}):void t.split("|").forEach(function(v){var x="";if(v.indexOf(" ")!=-1){var w=v.split(/\s+/);v=w.pop(),w.forEach(function(L){var A=this.parseKeys(L),y=p[A.hashId]+A.key;x+=(x?" ":"")+y,this._addCommandToBinding(x,"chainKeys")},this),x+=" "}var R=this.parseKeys(v),S=p[R.hashId]+R.key;this._addCommandToBinding(x+S,c,m)},this)},this._addCommandToBinding=function(t,c,m){var v,x=this.commandKeyBinding;if(c)if(!x[t]||this.$singleCommand)x[t]=c;else{Array.isArray(x[t])?(v=x[t].indexOf(c))!=-1&&x[t].splice(v,1):x[t]=[x[t]],typeof m!="number"&&(m=r(c));var w=x[t];for(v=0;v<w.length&&!(r(w[v])>m);v++);w.splice(v,0,c)}else delete x[t]},this.addCommands=function(t){t&&Object.keys(t).forEach(function(c){var m=t[c];if(m){if(typeof m=="string")return this.bindKey(m,c);typeof m=="function"&&(m={exec:m}),typeof m=="object"&&(m.name||(m.name=c),this.addCommand(m))}},this)},this.removeCommands=function(t){Object.keys(t).forEach(function(c){this.removeCommand(t[c])},this)},this.bindKeys=function(t){Object.keys(t).forEach(function(c){this.bindKey(c,t[c])},this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var c=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(S){return S}),m=c.pop(),v=a[m];if(a.FUNCTION_KEYS[v])m=a.FUNCTION_KEYS[v].toLowerCase();else{if(!c.length)return{key:m,hashId:-1};if(c.length==1&&c[0]=="shift")return{key:m.toUpperCase(),hashId:-1}}for(var x=0,w=c.length;w--;){var R=a.KEY_MODS[c[w]];if(R==null)return typeof console<"u"&&console.error("invalid modifier "+c[w]+" in "+t),!1;x|=R}return{key:m,hashId:x}},this.findKeyCommand=function(t,c){var m=p[t]+c;return this.commandKeyBinding[m]},this.handleKeyboard=function(t,c,m,v){if(!(v<0)){var x=p[c]+m,w=this.commandKeyBinding[x];return t.$keyChain&&(t.$keyChain+=" "+x,w=this.commandKeyBinding[t.$keyChain]||w),!w||w!="chainKeys"&&w[w.length-1]!="chainKeys"?(t.$keyChain&&(c&&c!=4||m.length!=1?(c==-1||v>0)&&(t.$keyChain=""):t.$keyChain=t.$keyChain.slice(0,-x.length-1)),{command:w}):(t.$keyChain=t.$keyChain||x,{command:"null"})}},this.getStatusText=function(t,c){return c.$keyChain||""}}.call(d.prototype),f.HashHandler=d,f.MultiHashHandler=s}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(u,f,M){var a=u("../lib/oop"),E=u("../keyboard/hash_handler").MultiHashHandler,p=u("../lib/event_emitter").EventEmitter,d=function(s,r){E.call(this,r,s),this.byName=this.commands,this.setDefaultHandler("exec",function(t){return t.command.exec(t.editor,t.args||{})})};a.inherits(d,E),function(){a.implement(this,p),this.exec=function(s,r,t){if(Array.isArray(s)){for(var c=s.length;c--;)if(this.exec(s[c],r,t))return!0;return!1}if(typeof s=="string"&&(s=this.commands[s]),!s||r&&r.$readOnly&&!s.readOnly||this.$checkCommandState!=0&&s.isAvailable&&!s.isAvailable(r))return!1;var m={editor:r,command:s,args:t};return m.returnValue=this._emit("exec",m),this._signal("afterExec",m),m.returnValue!==!1},this.toggleRecording=function(s){if(!this.$inReplay)return s&&s._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(r){this.macro.push([r.command,r.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(s){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(s);try{this.$inReplay=!0,this.macro.forEach(function(r){typeof r=="string"?this.exec(r,s):this.exec(r[0],s,r[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(s){return s.map(function(r){return typeof r[0]!="string"&&(r[0]=r[0].name),r[1]||(r=r[0]),r})}}.call(d.prototype),f.CommandManager=d}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(u,f,M){var a=u("../lib/lang"),E=u("../config"),p=u("../range").Range;function d(s,r){return{win:s,mac:r}}f.commands=[{name:"showSettingsMenu",bindKey:d("Ctrl-,","Command-,"),exec:function(s){E.loadModule("ace/ext/settings_menu",function(r){r.init(s),s.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:d("Alt-E","F4"),exec:function(s){E.loadModule("./ext/error_marker",function(r){r.showErrorMarker(s,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:d("Alt-Shift-E","Shift-F4"),exec:function(s){E.loadModule("./ext/error_marker",function(r){r.showErrorMarker(s,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:d("Ctrl-A","Command-A"),exec:function(s){s.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:d(null,"Ctrl-L"),exec:function(s){s.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:d("Ctrl-L","Command-L"),exec:function(s,r){typeof r!="number"||isNaN(r)||s.gotoLine(r),s.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:d("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(s){s.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:d("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(s){s.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:d("F2","F2"),exec:function(s){s.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:d("Alt-F2","Alt-F2"),exec:function(s){s.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:d(null,"Ctrl-Command-Option-0"),exec:function(s){s.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:d("Alt-0","Command-Option-0"),exec:function(s){s.session.foldAll(),s.session.unfold(s.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:d("Alt-Shift-0","Command-Option-Shift-0"),exec:function(s){s.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:d("Ctrl-K","Command-G"),exec:function(s){s.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:d("Ctrl-Shift-K","Command-Shift-G"),exec:function(s){s.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:d("Alt-K","Ctrl-G"),exec:function(s){s.selection.isEmpty()?s.selection.selectWord():s.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:d("Alt-Shift-K","Ctrl-Shift-G"),exec:function(s){s.selection.isEmpty()?s.selection.selectWord():s.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:d("Ctrl-F","Command-F"),exec:function(s){E.loadModule("ace/ext/searchbox",function(r){r.Search(s)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(s){s.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:d("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(s){s.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:d("Ctrl-Home","Command-Home|Command-Up"),exec:function(s){s.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:d("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(s){s.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:d("Up","Up|Ctrl-P"),exec:function(s,r){s.navigateUp(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:d("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(s){s.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:d("Ctrl-End","Command-End|Command-Down"),exec:function(s){s.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:d("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(s){s.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:d("Down","Down|Ctrl-N"),exec:function(s,r){s.navigateDown(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:d("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(s){s.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:d("Ctrl-Left","Option-Left"),exec:function(s){s.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:d("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(s){s.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:d("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(s){s.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:d("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(s){s.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:d("Left","Left|Ctrl-B"),exec:function(s,r){s.navigateLeft(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:d("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(s){s.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:d("Ctrl-Right","Option-Right"),exec:function(s){s.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:d("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(s){s.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:d("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(s){s.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:d("Shift-Right","Shift-Right"),exec:function(s){s.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:d("Right","Right|Ctrl-F"),exec:function(s,r){s.navigateRight(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(s){s.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:d(null,"Option-PageDown"),exec:function(s){s.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:d("PageDown","PageDown|Ctrl-V"),exec:function(s){s.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(s){s.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:d(null,"Option-PageUp"),exec:function(s){s.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(s){s.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:d("Ctrl-Up",null),exec:function(s){s.renderer.scrollBy(0,-2*s.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:d("Ctrl-Down",null),exec:function(s){s.renderer.scrollBy(0,2*s.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(s){s.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(s){s.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:d("Ctrl-Alt-E","Command-Option-E"),exec:function(s){s.commands.toggleRecording(s)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:d("Ctrl-Shift-E","Command-Shift-E"),exec:function(s){s.commands.replay(s)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:d("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(s){s.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:d("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(s){s.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:d("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(s){s.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:d(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(s){},readOnly:!0},{name:"cut",description:"Cut",exec:function(s){var r=s.$copyWithEmptySelection&&s.selection.isEmpty()?s.selection.getLineRange():s.selection.getRange();s._emit("cut",r),r.isEmpty()||s.session.remove(r),s.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(s,r){s.$handlePaste(r)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:d("Ctrl-D","Command-D"),exec:function(s){s.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:d("Ctrl-Shift-D","Command-Shift-D"),exec:function(s){s.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:d("Ctrl-Alt-S","Command-Alt-S"),exec:function(s){s.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:d("Ctrl-/","Command-/"),exec:function(s){s.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:d("Ctrl-Shift-/","Command-Shift-/"),exec:function(s){s.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:d("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(s){s.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:d("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(s){s.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:d("Ctrl-H","Command-Option-F"),exec:function(s){E.loadModule("ace/ext/searchbox",function(r){r.Search(s,!0)})}},{name:"undo",description:"Undo",bindKey:d("Ctrl-Z","Command-Z"),exec:function(s){s.undo()}},{name:"redo",description:"Redo",bindKey:d("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(s){s.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:d("Alt-Shift-Up","Command-Option-Up"),exec:function(s){s.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:d("Alt-Up","Option-Up"),exec:function(s){s.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:d("Alt-Shift-Down","Command-Option-Down"),exec:function(s){s.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:d("Alt-Down","Option-Down"),exec:function(s){s.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:d("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(s){s.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:d("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(s){s.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:d("Shift-Delete",null),exec:function(s){if(!s.selection.isEmpty())return!1;s.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:d("Alt-Backspace","Command-Backspace"),exec:function(s){s.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:d("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(s){s.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:d("Ctrl-Shift-Backspace",null),exec:function(s){var r=s.selection.getRange();r.start.column=0,s.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:d("Ctrl-Shift-Delete",null),exec:function(s){var r=s.selection.getRange();r.end.column=Number.MAX_VALUE,s.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:d("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(s){s.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:d("Ctrl-Delete","Alt-Delete"),exec:function(s){s.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:d("Shift-Tab","Shift-Tab"),exec:function(s){s.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:d("Tab","Tab"),exec:function(s){s.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:d("Ctrl-[","Ctrl-["),exec:function(s){s.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:d("Ctrl-]","Ctrl-]"),exec:function(s){s.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(s,r){s.insert(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(s,r){s.insert(a.stringRepeat(r.text||"",r.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:d(null,"Ctrl-O"),exec:function(s){s.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:d("Alt-Shift-X","Ctrl-T"),exec:function(s){s.transposeLetters()},multiSelectAction:function(s){s.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:d("Ctrl-U","Ctrl-U"),exec:function(s){s.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:d("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(s){s.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",description:"Expand to line",bindKey:d("Ctrl-Shift-L","Command-Shift-L"),exec:function(s){var r=s.selection.getRange();r.start.column=r.end.column=0,r.end.row++,s.selection.setRange(r,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:d(null,null),exec:function(s){for(var r=s.selection.isBackwards(),t=r?s.selection.getSelectionLead():s.selection.getSelectionAnchor(),c=r?s.selection.getSelectionAnchor():s.selection.getSelectionLead(),m=s.session.doc.getLine(t.row).length,v=s.session.doc.getTextRange(s.selection.getRange()).replace(/\n\s*/," ").length,x=s.session.doc.getLine(t.row),w=t.row+1;w<=c.row+1;w++){var R=a.stringTrimLeft(a.stringTrimRight(s.session.doc.getLine(w)));R.length!==0&&(R=" "+R),x+=R}c.row+1<s.session.doc.getLength()-1&&(x+=s.session.doc.getNewLineCharacter()),s.clearSelection(),s.session.doc.replace(new p(t.row,0,c.row+2,0),x),v>0?(s.selection.moveCursorTo(t.row,t.column),s.selection.selectTo(t.row,t.column+v)):(m=s.session.doc.getLine(t.row).length>m?m+1:m,s.selection.moveCursorTo(t.row,m))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:d(null,null),exec:function(s){var r=s.session.doc.getLength()-1,t=s.session.doc.getLine(r).length,c=s.selection.rangeList.ranges,m=[];c.length<1&&(c=[s.selection.getRange()]);for(var v=0;v<c.length;v++)v==c.length-1&&(c[v].end.row===r&&c[v].end.column===t||m.push(new p(c[v].end.row,c[v].end.column,r,t))),v===0?c[v].start.row===0&&c[v].start.column===0||m.push(new p(0,0,c[v].start.row,c[v].start.column)):m.push(new p(c[v-1].end.row,c[v-1].end.column,c[v].start.row,c[v].start.column));for(s.exitMultiSelectMode(),s.clearSelection(),v=0;v<m.length;v++)s.selection.addRange(m[v],!1)},readOnly:!0,scrollIntoView:"none"},{name:"openCommandPallete",description:"Open command pallete",bindKey:d("F1","F1"),exec:function(s){s.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:d(null,null),exec:function(s){s.prompt({$type:"modes"})},readOnly:!0}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],function(u,f,M){u("./lib/fixoldbrowsers");var a=u("./lib/oop"),E=u("./lib/dom"),p=u("./lib/lang"),d=u("./lib/useragent"),s=u("./keyboard/textinput").TextInput,r=u("./mouse/mouse_handler").MouseHandler,t=u("./mouse/fold_handler").FoldHandler,c=u("./keyboard/keybinding").KeyBinding,m=u("./edit_session").EditSession,v=u("./search").Search,x=u("./range").Range,w=u("./lib/event_emitter").EventEmitter,R=u("./commands/command_manager").CommandManager,S=u("./commands/default_commands").commands,L=u("./config"),A=u("./token_iterator").TokenIterator,y=u("./clipboard"),P=function(T,I,D){var k=T.getContainerElement();this.container=k,this.renderer=T,this.id="editor"+ ++P.$uid,this.commands=new R(d.isMac?"mac":"win",S),typeof document=="object"&&(this.textInput=new s(T.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new r(this),new t(this)),this.keyBinding=new c(this),this.$search=new v().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=p.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(U,G){G._$emitInputEvent.schedule(31)}),this.setSession(I||D&&D.session||new m("")),L.resetOptions(this),D&&this.setOptions(D),L._signal("editor",this)};P.$uid=0,function(){a.implement(this,w),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=p.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(T){if(this.curOp){if(!T||this.curOp.command)return;this.prevOp=this.curOp}T||(this.previousCommand=null,T={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:T.command||{},args:T.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(T){if(this.curOp){if(T&&T.returnValue===!1)return this.curOp=null;if(T==1&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var I=this.curOp.command,D=I&&I.scrollIntoView;if(D){switch(D){case"center-animate":D="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var k=this.selection.getRange(),U=this.renderer.layerConfig;(k.start.row>=U.lastRow||k.end.row<=U.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}D=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var G=this.selection.toJSON();this.curOp.selectionAfter=G,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(G),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(T){if(this.$mergeUndoDeltas){var I=this.prevOp,D=this.$mergeableCommands,k=I.command&&T.command.name==I.command.name;if(T.command.name=="insertstring"){var U=T.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),k=k&&this.mergeNextCommand&&(!/\s/.test(U)||/\s/.test(I.args)),this.mergeNextCommand=!0}else k=k&&D.indexOf(T.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(k=!1),k?this.session.mergeUndoDeltas=!0:D.indexOf(T.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(T,I){if(T&&typeof T=="string"&&T!="ace"){this.$keybindingId=T;var D=this;L.loadModule(["keybinding",T],function(k){D.$keybindingId==T&&D.keyBinding.setKeyboardHandler(k&&k.handler),I&&I()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(T),I&&I()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(T){if(this.session!=T){this.curOp&&this.endOperation(),this.curOp={};var I=this.session;if(I){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var D=this.session.getSelection();D.off("changeCursor",this.$onCursorChange),D.off("changeSelection",this.$onSelectionChange)}this.session=T,T?(this.$onDocumentChange=this.onDocumentChange.bind(this),T.on("change",this.$onDocumentChange),this.renderer.setSession(T),this.$onChangeMode=this.onChangeMode.bind(this),T.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),T.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),T.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),T.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),T.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),T.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=T.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(T)),this._signal("changeSession",{session:T,oldSession:I}),this.curOp=null,I&&I._signal("changeEditor",{oldEditor:this}),T&&T._signal("changeEditor",{editor:this}),T&&T.bgTokenizer&&T.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(T,I){return this.session.doc.setValue(T),I?I==1?this.navigateFileEnd():I==-1&&this.navigateFileStart():this.selectAll(),T},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(T){this.renderer.onResize(T)},this.setTheme=function(T,I){this.renderer.setTheme(T,I)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(T){this.renderer.setStyle(T)},this.unsetStyle=function(T){this.renderer.unsetStyle(T)},this.getFontSize=function(){return this.getOption("fontSize")||E.computedStyle(this.container).fontSize},this.setFontSize=function(T){this.setOption("fontSize",T)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var T=this;this.$highlightPending=!0,setTimeout(function(){T.$highlightPending=!1;var I=T.session;if(I&&I.bgTokenizer){var D=I.findMatchingBracket(T.getCursorPosition());if(D)var k=new x(D.row,D.column,D.row,D.column+1);else I.$mode.getMatching&&(k=I.$mode.getMatching(T.session));k&&(I.$bracketHighlight=I.addMarker(k,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var T=this;this.$highlightTagPending=!0,setTimeout(function(){T.$highlightTagPending=!1;var I=T.session;if(I&&I.bgTokenizer){var D=T.getCursorPosition(),k=new A(T.session,D.row,D.column),U=k.getCurrentToken();if(!U||!/\b(?:tag-open|tag-name)/.test(U.type))return I.removeMarker(I.$tagHighlight),void(I.$tagHighlight=null);if(U.type.indexOf("tag-open")==-1||(U=k.stepForward())){var G=U.value,H=0,se=k.stepBackward();if(se.value=="<")do se=U,(U=k.stepForward())&&U.value===G&&U.type.indexOf("tag-name")!==-1&&(se.value==="<"?H++:se.value==="</"&&H--);while(U&&H>=0);else{do U=se,se=k.stepBackward(),U&&U.value===G&&U.type.indexOf("tag-name")!==-1&&(se.value==="<"?H++:se.value==="</"&&H--);while(se&&H<=0);k.stepForward()}if(!U)return I.removeMarker(I.$tagHighlight),void(I.$tagHighlight=null);var ee=k.getCurrentTokenRow(),Z=k.getCurrentTokenColumn(),ne=new x(ee,Z,ee,Z+U.value.length),W=I.$backMarkers[I.$tagHighlight];I.$tagHighlight&&W!=null&&ne.compareRange(W.range)!==0&&(I.removeMarker(I.$tagHighlight),I.$tagHighlight=null),I.$tagHighlight||(I.$tagHighlight=I.addMarker(ne,"ace_bracket","text"))}}},50)}},this.focus=function(){var T=this;setTimeout(function(){T.isFocused()||T.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(T){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",T))},this.onBlur=function(T){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",T))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(T){var I=this.session.$useWrapMode,D=T.start.row==T.end.row?T.end.row:1/0;this.renderer.updateLines(T.start.row,D,I),this._signal("change",T),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(T){var I=T.data;this.renderer.updateLines(I.first,I.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var T,I=this.getSession();if(this.$highlightActiveLine&&(this.$selectionStyle=="line"&&this.selection.isMultiLine()||(T=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(T=!1),!this.renderer.$maxLines||this.session.getLength()!==1||this.renderer.$minLines>1||(T=!1)),I.$highlightLineMarker&&!T)I.removeMarker(I.$highlightLineMarker.id),I.$highlightLineMarker=null;else if(!I.$highlightLineMarker&&T){var D=new x(T.row,T.column,T.row,1/0);D.id=I.addMarker(D,"ace_active-line","screenLine"),I.$highlightLineMarker=D}else T&&(I.$highlightLineMarker.start.row=T.row,I.$highlightLineMarker.end.row=T.row,I.$highlightLineMarker.start.column=T.column,I._signal("changeBackMarker"))},this.onSelectionChange=function(T){var I=this.session;if(I.$selectionMarker&&I.removeMarker(I.$selectionMarker),I.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var D=this.selection.getRange(),k=this.getSelectionStyle();I.$selectionMarker=I.addMarker(D,"ace_selection",k)}var U=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(U),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var T=this.session,I=this.getSelectionRange();if(!I.isEmpty()&&!I.isMultiLine()){var D=I.start.column,k=I.end.column,U=T.getLine(I.start.row),G=U.substring(D,k);if(!(G.length>5e3)&&/[\w\d]/.test(G)){var H=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:G}),se=U.substring(D-1,k+1);if(H.test(se))return H}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(T){this.renderer.updateText(),this._emit("changeMode",T)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var T=this.getSelectedText(),I=this.session.doc.getNewLineCharacter(),D=!1;if(!T&&this.$copyWithEmptySelection){D=!0;for(var k=this.selection.getAllRanges(),U=0;U<k.length;U++){var G=k[U];U&&k[U-1].start.row==G.start.row||(T+=this.session.getLine(G.start.row)+I)}}var H={text:T};return this._signal("copy",H),y.lineMode=D?H.text:"",H.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(T,I){var D={text:T,event:I};this.commands.exec("paste",this,D)},this.$handlePaste=function(T){typeof T=="string"&&(T={text:T}),this._signal("paste",T);var I=T.text,D=I==y.lineMode,k=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)D?k.insert({row:this.selection.lead.row,column:0},I):this.insert(I);else if(D)this.selection.rangeList.ranges.forEach(function(Z){k.insert({row:Z.start.row,column:0},I)});else{var U=I.split(/\r\n|\r|\n/),G=this.selection.rangeList.ranges,H=!(U.length!=2||U[0]&&U[1]);if(U.length!=G.length||H)return this.commands.exec("insertstring",this,I);for(var se=G.length;se--;){var ee=G[se];ee.isEmpty()||k.remove(ee),k.insert(ee.start,U[se])}}},this.execCommand=function(T,I){return this.commands.exec(T,this,I)},this.insert=function(T,I){var D=this.session,k=D.getMode(),U=this.getCursorPosition();if(this.getBehavioursEnabled()&&!I){var G=k.transformAction(D.getState(U.row),"insertion",this,D,T);G&&(T!==G.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),T=G.text)}if(T=="	"&&(T=this.session.getTabString()),this.selection.isEmpty())this.session.getOverwrite()&&T.indexOf(`
`)==-1&&((H=new x.fromPoints(U,U)).end.column+=T.length,this.session.remove(H));else{var H=this.getSelectionRange();U=this.session.remove(H),this.clearSelection()}if(T==`
`||T==`\r
`){var se=D.getLine(U.row);if(U.column>se.search(/\S|$/)){var ee=se.substr(U.column).search(/\S|$/);D.doc.removeInLine(U.row,U.column,U.column+ee)}}this.clearSelection();var Z=U.column,ne=D.getState(U.row),W=(se=D.getLine(U.row),k.checkOutdent(ne,se,T));if(D.insert(U,T),G&&G.selection&&(G.selection.length==2?this.selection.setSelectionRange(new x(U.row,Z+G.selection[0],U.row,Z+G.selection[1])):this.selection.setSelectionRange(new x(U.row+G.selection[0],G.selection[1],U.row+G.selection[2],G.selection[3]))),D.getDocument().isNewLine(T)){var K=k.getNextLineIndent(ne,se.slice(0,U.column),D.getTabString());D.insert({row:U.row+1,column:0},K)}W&&k.autoOutdent(ne,D,U.row)},this.onTextInput=function(T,I){if(!I)return this.keyBinding.onTextInput(T);this.startOperation({command:{name:"insertstring"}});var D=this.applyComposition.bind(this,T,I);this.selection.rangeCount?this.forEachSelection(D):D(),this.endOperation()},this.applyComposition=function(T,I){var D;(I.extendLeft||I.extendRight)&&((D=this.selection.getRange()).start.column-=I.extendLeft,D.end.column+=I.extendRight,this.selection.setRange(D),T||D.isEmpty()||this.remove()),!T&&this.selection.isEmpty()||this.insert(T,!0),(I.restoreStart||I.restoreEnd)&&((D=this.selection.getRange()).start.column-=I.restoreStart,D.end.column-=I.restoreEnd,this.selection.setRange(D))},this.onCommandKey=function(T,I,D){return this.keyBinding.onCommandKey(T,I,D)},this.setOverwrite=function(T){this.session.setOverwrite(T)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(T){this.setOption("scrollSpeed",T)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(T){this.setOption("dragDelay",T)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(T){this.setOption("selectionStyle",T)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(T){this.setOption("highlightActiveLine",T)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(T){this.setOption("highlightGutterLine",T)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(T){this.setOption("highlightSelectedWord",T)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(T){this.renderer.setAnimatedScroll(T)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(T){this.renderer.setShowInvisibles(T)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(T){this.renderer.setDisplayIndentGuides(T)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(T){this.renderer.setShowPrintMargin(T)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(T){this.renderer.setPrintMarginColumn(T)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(T){this.setOption("readOnly",T)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(T){this.setOption("behavioursEnabled",T)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(T){this.setOption("wrapBehavioursEnabled",T)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(T){this.setOption("showFoldWidgets",T)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(T){this.setOption("fadeFoldWidgets",T)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(T){this.selection.isEmpty()&&(T=="left"?this.selection.selectLeft():this.selection.selectRight());var I=this.getSelectionRange();if(this.getBehavioursEnabled()){var D=this.session,k=D.getState(I.start.row),U=D.getMode().transformAction(k,"deletion",this,D,I);if(I.end.column===0){var G=D.getTextRange(I);if(G[G.length-1]==`
`){var H=D.getLine(I.end.row);/^\s+$/.test(H)&&(I.end.column=H.length)}}U&&(I=U)}this.session.remove(I),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var T=this.getSelectionRange();T.start.column==T.end.column&&T.start.row==T.end.row&&(T.end.column=0,T.end.row++),this.session.remove(T),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var T=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(T)},this.transposeLetters=function(){if(this.selection.isEmpty()){var T=this.getCursorPosition(),I=T.column;if(I!==0){var D,k,U=this.session.getLine(T.row);I<U.length?(D=U.charAt(I)+U.charAt(I-1),k=new x(T.row,I-1,T.row,I+1)):(D=U.charAt(I-1)+U.charAt(I-2),k=new x(T.row,I-2,T.row,I)),this.session.replace(k,D),this.session.selection.moveToPosition(k.end)}}},this.toLowerCase=function(){var T=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var I=this.getSelectionRange(),D=this.session.getTextRange(I);this.session.replace(I,D.toLowerCase()),this.selection.setSelectionRange(T)},this.toUpperCase=function(){var T=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var I=this.getSelectionRange(),D=this.session.getTextRange(I);this.session.replace(I,D.toUpperCase()),this.selection.setSelectionRange(T)},this.indent=function(){var T=this.session,I=this.getSelectionRange();if(!(I.start.row<I.end.row)){if(I.start.column<I.end.column){var D=T.getTextRange(I);if(!/^\s+$/.test(D))return Z=this.$getSelectedRows(),void T.indentRows(Z.first,Z.last,"	")}var k=T.getLine(I.start.row),U=I.start,G=T.getTabSize(),H=T.documentToScreenColumn(U.row,U.column);if(this.session.getUseSoftTabs())var se=G-H%G,ee=p.stringRepeat(" ",se);else{for(se=H%G;k[I.start.column-1]==" "&&se;)I.start.column--,se--;this.selection.setSelectionRange(I),ee="	"}return this.insert(ee)}var Z=this.$getSelectedRows();T.indentRows(Z.first,Z.last,"	")},this.blockIndent=function(){var T=this.$getSelectedRows();this.session.indentRows(T.first,T.last,"	")},this.blockOutdent=function(){var T=this.session.getSelection();this.session.outdentRows(T.getRange())},this.sortLines=function(){for(var T=this.$getSelectedRows(),I=this.session,D=[],k=T.first;k<=T.last;k++)D.push(I.getLine(k));D.sort(function(H,se){return H.toLowerCase()<se.toLowerCase()?-1:H.toLowerCase()>se.toLowerCase()?1:0});var U=new x(0,0,0,0);for(k=T.first;k<=T.last;k++){var G=I.getLine(k);U.start.row=k,U.end.row=k,U.end.column=G.length,I.replace(U,D[k-T.first])}},this.toggleCommentLines=function(){var T=this.session.getState(this.getCursorPosition().row),I=this.$getSelectedRows();this.session.getMode().toggleCommentLines(T,this.session,I.first,I.last)},this.toggleBlockComment=function(){var T=this.getCursorPosition(),I=this.session.getState(T.row),D=this.getSelectionRange();this.session.getMode().toggleBlockComment(I,this.session,D,T)},this.getNumberAt=function(T,I){var D=/[\-]?[0-9]+(?:\.[0-9]+)?/g;D.lastIndex=0;for(var k=this.session.getLine(T);D.lastIndex<I;){var U=D.exec(k);if(U.index<=I&&U.index+U[0].length>=I)return{value:U[0],start:U.index,end:U.index+U[0].length}}return null},this.modifyNumber=function(T){var I=this.selection.getCursor().row,D=this.selection.getCursor().column,k=new x(I,D-1,I,D),U=this.session.getTextRange(k);if(!isNaN(parseFloat(U))&&isFinite(U)){var G=this.getNumberAt(I,D);if(G){var H=G.value.indexOf(".")>=0?G.start+G.value.indexOf(".")+1:G.end,se=G.start+G.value.length-H,ee=parseFloat(G.value);ee*=Math.pow(10,se),H!==G.end&&D<H?T*=Math.pow(10,G.end-D-1):T*=Math.pow(10,G.end-D),ee+=T;var Z=(ee/=Math.pow(10,se)).toFixed(se),ne=new x(I,G.start,I,G.end);this.session.replace(ne,Z),this.moveCursorTo(I,Math.max(G.start+1,D+Z.length-G.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var T=this.selection.getCursor().row,I=this.selection.getCursor().column;this.selection.selectWord();var D=this.getSelectedText(),k=this.selection.getWordRange().start.column,U=D.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),G=I-k-1;G<0&&(G=0);var H=0,se=0,ee=this;D.match(/[A-Za-z0-9_]+/)&&U.forEach(function(ue,Be){se=H+ue.length,G>=H&&G<=se&&(D=ue,ee.selection.clearSelection(),ee.moveCursorTo(T,H+k),ee.selection.selectTo(T,se+k)),H=se});for(var Z,ne=this.$toggleWordPairs,W=0;W<ne.length;W++)for(var K=ne[W],re=0;re<=1;re++){var oe=+!re,de=D.match(new RegExp("^\\s?_?("+p.escapeRegExp(K[re])+")\\s?$","i"));de&&D.match(new RegExp("([_]|^|\\s)("+p.escapeRegExp(de[1])+")($|\\s)","g"))&&(Z=D.replace(new RegExp(p.escapeRegExp(K[re]),"i"),function(ue){var Be=K[oe];return ue.toUpperCase()==ue?Be=Be.toUpperCase():ue.charAt(0).toUpperCase()==ue.charAt(0)&&(Be=Be.substr(0,0)+K[oe].charAt(0).toUpperCase()+Be.substr(1)),Be}),this.insert(Z),Z="")}},this.removeLines=function(){var T=this.$getSelectedRows();this.session.removeFullLines(T.first,T.last),this.clearSelection()},this.duplicateSelection=function(){var T=this.selection,I=this.session,D=T.getRange(),k=T.isBackwards();if(D.isEmpty()){var U=D.start.row;I.duplicateLines(U,U)}else{var G=k?D.start:D.end,H=I.insert(G,I.getTextRange(D),!1);D.start=G,D.end=H,T.setSelectionRange(D,k)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(T,I,D){return this.session.moveText(T,I,D)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(T,I){var D,k,U=this.selection;if(!U.inMultiSelectMode||this.inVirtualSelectionMode){var G=U.toOrientedRange();D=this.$getSelectedRows(G),k=this.session.$moveLines(D.first,D.last,I?0:T),I&&T==-1&&(k=0),G.moveBy(k,0),U.fromOrientedRange(G)}else{var H=U.rangeList.ranges;U.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var se=0,ee=0,Z=H.length,ne=0;ne<Z;ne++){var W=ne;H[ne].moveBy(se,0);for(var K=(D=this.$getSelectedRows(H[ne])).first,re=D.last;++ne<Z;){ee&&H[ne].moveBy(ee,0);var oe=this.$getSelectedRows(H[ne]);if(I&&oe.first!=re||!I&&oe.first>re+1)break;re=oe.last}for(ne--,se=this.session.$moveLines(K,re,I?0:T),I&&T==-1&&(W=ne+1);W<=ne;)H[W].moveBy(se,0),W++;I||(se=0),ee+=se}U.fromOrientedRange(U.ranges[0]),U.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(T){return T=(T||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(T.start.row),last:this.session.getRowFoldEnd(T.end.row)}},this.onCompositionStart=function(T){this.renderer.showComposition(T)},this.onCompositionUpdate=function(T){this.renderer.setCompositionText(T)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(T){return T>=this.getFirstVisibleRow()&&T<=this.getLastVisibleRow()},this.isRowFullyVisible=function(T){return T>=this.renderer.getFirstFullyVisibleRow()&&T<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(T,I){var D=this.renderer,k=this.renderer.layerConfig,U=T*Math.floor(k.height/k.lineHeight);I===!0?this.selection.$moveSelection(function(){this.moveCursorBy(U,0)}):I===!1&&(this.selection.moveCursorBy(U,0),this.selection.clearSelection());var G=D.scrollTop;D.scrollBy(0,U*k.lineHeight),I!=null&&D.scrollCursorIntoView(null,.5),D.animateScrolling(G)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(T){this.renderer.scrollToRow(T)},this.scrollToLine=function(T,I,D,k){this.renderer.scrollToLine(T,I,D,k)},this.centerSelection=function(){var T=this.getSelectionRange(),I={row:Math.floor(T.start.row+(T.end.row-T.start.row)/2),column:Math.floor(T.start.column+(T.end.column-T.start.column)/2)};this.renderer.alignCursor(I,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(T,I){this.selection.moveCursorTo(T,I)},this.moveCursorToPosition=function(T){this.selection.moveCursorToPosition(T)},this.jumpToMatching=function(T,I){var D=this.getCursorPosition(),k=new A(this.session,D.row,D.column),U=k.getCurrentToken(),G=U||k.stepForward();if(G){var H,se,ee=!1,Z={},ne=D.column-G.start,W={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(G.value.match(/[{}()\[\]]/g)){for(;ne<G.value.length&&!ee;ne++)if(W[G.value[ne]])switch(se=W[G.value[ne]]+"."+G.type.replace("rparen","lparen"),isNaN(Z[se])&&(Z[se]=0),G.value[ne]){case"(":case"[":case"{":Z[se]++;break;case")":case"]":case"}":Z[se]--,Z[se]===-1&&(H="bracket",ee=!0)}}else G.type.indexOf("tag-name")!==-1&&(isNaN(Z[G.value])&&(Z[G.value]=0),U.value==="<"?Z[G.value]++:U.value==="</"&&Z[G.value]--,Z[G.value]===-1&&(H="tag",ee=!0));ee||(U=G,G=k.stepForward(),ne=0)}while(G&&!ee);if(H){var K,re;if(H==="bracket")(K=this.session.getBracketRange(D))||(re=(K=new x(k.getCurrentTokenRow(),k.getCurrentTokenColumn()+ne-1,k.getCurrentTokenRow(),k.getCurrentTokenColumn()+ne-1)).start,(I||re.row===D.row&&Math.abs(re.column-D.column)<2)&&(K=this.session.getBracketRange(re)));else if(H==="tag"){if(!G||G.type.indexOf("tag-name")===-1)return;var oe=G.value;if((K=new x(k.getCurrentTokenRow(),k.getCurrentTokenColumn()-2,k.getCurrentTokenRow(),k.getCurrentTokenColumn()-2)).compare(D.row,D.column)===0){ee=!1;do G=U,(U=k.stepBackward())&&(U.type.indexOf("tag-close")!==-1&&K.setEnd(k.getCurrentTokenRow(),k.getCurrentTokenColumn()+1),G.value===oe&&G.type.indexOf("tag-name")!==-1&&(U.value==="<"?Z[oe]++:U.value==="</"&&Z[oe]--,Z[oe]===0&&(ee=!0)));while(U&&!ee)}G&&G.type.indexOf("tag-name")&&(re=K.start).row==D.row&&Math.abs(re.column-D.column)<2&&(re=K.end)}(re=K&&K.cursor||re)&&(T?K&&I?this.selection.setRange(K):K&&K.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(re.row,re.column):this.selection.moveTo(re.row,re.column))}}},this.gotoLine=function(T,I,D){this.selection.clearSelection(),this.session.unfold({row:T-1,column:I||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(T-1,I||0),this.isRowFullyVisible(T-1)||this.scrollToLine(T-1,!0,D)},this.navigateTo=function(T,I){this.selection.moveTo(T,I)},this.navigateUp=function(T){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var I=this.selection.anchor.getPosition();return this.moveCursorToPosition(I)}this.selection.clearSelection(),this.selection.moveCursorBy(-T||-1,0)},this.navigateDown=function(T){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var I=this.selection.anchor.getPosition();return this.moveCursorToPosition(I)}this.selection.clearSelection(),this.selection.moveCursorBy(T||1,0)},this.navigateLeft=function(T){if(this.selection.isEmpty())for(T=T||1;T--;)this.selection.moveCursorLeft();else{var I=this.getSelectionRange().start;this.moveCursorToPosition(I)}this.clearSelection()},this.navigateRight=function(T){if(this.selection.isEmpty())for(T=T||1;T--;)this.selection.moveCursorRight();else{var I=this.getSelectionRange().end;this.moveCursorToPosition(I)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(T,I){I&&this.$search.set(I);var D=this.$search.find(this.session),k=0;return D&&(this.$tryReplace(D,T)&&(k=1),this.selection.setSelectionRange(D),this.renderer.scrollSelectionIntoView(D.start,D.end)),k},this.replaceAll=function(T,I){I&&this.$search.set(I);var D=this.$search.findAll(this.session),k=0;if(!D.length)return k;var U=this.getSelectionRange();this.selection.moveTo(0,0);for(var G=D.length-1;G>=0;--G)this.$tryReplace(D[G],T)&&k++;return this.selection.setSelectionRange(U),k},this.$tryReplace=function(T,I){var D=this.session.getTextRange(T);return(I=this.$search.replace(D,I))!==null?(T.end=this.session.replace(T,I),T):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(T,I,D){I||(I={}),typeof T=="string"||T instanceof RegExp?I.needle=T:typeof T=="object"&&a.mixin(I,T);var k=this.selection.getRange();I.needle==null&&((T=this.session.getTextRange(k)||this.$search.$options.needle)||(k=this.session.getWordRange(k.start.row,k.start.column),T=this.session.getTextRange(k)),this.$search.set({needle:T})),this.$search.set(I),I.start||this.$search.set({start:k});var U=this.$search.find(this.session);return I.preventScroll?U:U?(this.revealRange(U,D),U):(I.backwards?k.start=k.end:k.end=k.start,void this.selection.setRange(k))},this.findNext=function(T,I){this.find({skipCurrent:!0,backwards:!1},T,I)},this.findPrevious=function(T,I){this.find(T,{skipCurrent:!0,backwards:!0},I)},this.revealRange=function(T,I){this.session.unfold(T),this.selection.setSelectionRange(T);var D=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(T.start,T.end,.5),I!==!1&&this.renderer.animateScrolling(D)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(T){if(T){var I,D=this,k=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var U=this.$scrollAnchor;U.style.cssText="position:absolute",this.container.insertBefore(U,this.container.firstChild);var G=this.on("changeSelection",function(){k=!0}),H=this.renderer.on("beforeRender",function(){k&&(I=D.renderer.container.getBoundingClientRect())}),se=this.renderer.on("afterRender",function(){if(k&&I&&(D.isFocused()||D.searchBox&&D.searchBox.isFocused())){var ee=D.renderer,Z=ee.$cursorLayer.$pixelPos,ne=ee.layerConfig,W=Z.top-ne.offset;(k=Z.top>=0&&W+I.top<0||!(Z.top<ne.height&&Z.top+I.top+ne.lineHeight>window.innerHeight)&&null)!=null&&(U.style.top=W+"px",U.style.left=Z.left+"px",U.style.height=ne.lineHeight+"px",U.scrollIntoView(k)),k=I=null}});this.setAutoScrollEditorIntoView=function(ee){ee||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",G),this.renderer.off("afterRender",se),this.renderer.off("beforeRender",H))}}},this.$resetCursorStyle=function(){var T=this.$cursorStyle||"ace",I=this.renderer.$cursorLayer;I&&(I.setSmoothBlinking(/smooth/.test(T)),I.isBlinking=!this.$readOnly&&T!="wide",E.setCssClass(I.element,"ace_slim-cursors",/slim/.test(T)))},this.prompt=function(T,I,D){var k=this;L.loadModule("./ext/prompt",function(U){U.prompt(k,T,I,D)})}}.call(P.prototype),L.defineOptions(P.prototype,"editor",{selectionStyle:{set:function(T){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:T})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(T){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(T){this.textInput.setReadOnly(T),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(T){this.textInput.setCopyWithEmptySelection(T)},initialValue:!1},cursorStyle:{set:function(T){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(T){this.setAutoScrollEditorIntoView(T)}},keyboardHandler:{set:function(T){this.setKeyboardHandler(T)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(T){this.session.setValue(T)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(T){this.setSession(T)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(T){this.renderer.$gutterLayer.setShowLineNumbers(T),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),T&&this.$relativeLineNumbers?B.attach(this):B.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(T){this.$showLineNumbers&&T?B.attach(this):B.detach(this)}},placeholder:{set:function(T){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var I=this.renderer.$composition||this.getValue();if(I&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),E.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!I&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),E.addCssClass(this.container,"ace_hasPlaceholder");var D=E.createElement("div");D.className="ace_placeholder",D.textContent=this.$placeholder||"",this.renderer.placeholderNode=D,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var B={getText:function(T,I){return(Math.abs(T.selection.lead.row-I)||I+1+(I<9?"\xB7":""))+""},getWidth:function(T,I,D){return Math.max(I.toString().length,(D.lastRow+1).toString().length,2)*D.characterWidth},update:function(T,I){I.renderer.$loop.schedule(I.renderer.CHANGE_GUTTER)},attach:function(T){T.renderer.$gutterLayer.$renderer=this,T.on("changeSelection",this.update),this.update(null,T)},detach:function(T){T.renderer.$gutterLayer.$renderer==this&&(T.renderer.$gutterLayer.$renderer=null),T.off("changeSelection",this.update),this.update(null,T)}};f.Editor=P}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(u,f,M){var a=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(S){this.$session=S},this.add=function(S,L,A){this.$fromUndo||S!=this.$lastDelta&&(L!==!1&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),S.id=this.$rev=++this.$maxRev),S.action!="remove"&&S.action!="insert"||(this.$lastDelta=S),this.lastDeltas.push(S))},this.addSelection=function(S,L){this.selections.push({value:S,rev:L||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(S,L){L==null&&(L=this.$rev+1);for(var A=this.$undoStack,y=A.length;y--;){var P=A[y][0];if(P.id<=S)break;P.id<L&&(P.ignore=!0)}this.lastDeltas=null},this.getSelection=function(S,L){for(var A=this.selections,y=A.length;y--;){var P=A[y];if(P.rev<S)return L&&(P=A[y+1]),P}},this.getRevision=function(){return this.$rev},this.getDeltas=function(S,L){L==null&&(L=this.$rev+1);for(var A=this.$undoStack,y=null,P=0,B=A.length;B--;){var T=A[B][0];if(T.id<L&&!y&&(y=B+1),T.id<=S){P=B+1;break}}return A.slice(P,y)},this.getChangedRanges=function(S,L){L==null&&(L=this.$rev+1)},this.getChangedLines=function(S,L){L==null&&(L=this.$rev+1)},this.undo=function(S,L){this.lastDeltas=null;var A=this.$undoStack;if(function(B,T){for(var I=T;I--;){var D=B[I];if(D&&!D[0].ignore){for(;I<T-1;){var k=c(B[I],B[I+1]);B[I]=k[0],B[I+1]=k[1],I++}return!0}}}(A,A.length)){S||(S=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var y=A.pop(),P=null;return y&&y.length&&(P=S.undoChanges(y,L),this.$redoStack.push(y),this.$syncRev()),this.$fromUndo=!1,P}},this.redo=function(S,L){if(this.lastDeltas=null,S||(S=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var A=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);(function(B,T){for(var I=0;I<T.length;I++)for(var D=T[I],k=0;k<D.length;k++)R(B,D[k])})(this.$redoStack,A),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(B){B[0].id=++this.$maxRev},this)}var y=this.$redoStack.pop(),P=null;return y&&(P=S.redoChanges(y,L),this.$undoStack.push(y),this.$syncRev()),this.$fromUndo=!1,P},this.$syncRev=function(){var S=this.$undoStack,L=S[S.length-1],A=L&&L[0].id||0;this.$redoStackBaseRev=A,this.$rev=A},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(S){S==null&&(S=this.$rev),this.mark=S},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(S){return S?s(S):s(this.$undoStack)+`
---
`+s(this.$redoStack)}}).call(a.prototype);var E=u("./range").Range,p=E.comparePoints;function d(S){return{row:S.row,column:S.column}}function s(S){if(S=S||this,Array.isArray(S))return S.map(s).join(`
`);var L="";return S.action?(L=S.action=="insert"?"+":"-",L+="["+S.lines+"]"):S.value&&(L=Array.isArray(S.value)?S.value.map(r).join(`
`):r(S.value)),S.start&&(L+=r(S)),(S.id||S.rev)&&(L+="	("+(S.id||S.rev)+")"),L}function r(S){return S.start.row+":"+S.start.column+"=>"+S.end.row+":"+S.end.column}function t(S,L){var A=S.action=="insert",y=L.action=="insert";if(A&&y)if(p(L.start,S.end)>=0)v(L,S,-1);else{if(!(p(L.start,S.start)<=0))return null;v(S,L,1)}else if(A&&!y)if(p(L.start,S.end)>=0)v(L,S,-1);else{if(!(p(L.end,S.start)<=0))return null;v(S,L,-1)}else if(!A&&y)if(p(L.start,S.start)>=0)v(L,S,1);else{if(!(p(L.start,S.start)<=0))return null;v(S,L,1)}else if(!A&&!y)if(p(L.start,S.start)>=0)v(L,S,1);else{if(!(p(L.end,S.start)<=0))return null;v(S,L,-1)}return[L,S]}function c(S,L){for(var A=S.length;A--;)for(var y=0;y<L.length;y++)if(!t(S[A],L[y])){for(;A<S.length;){for(;y--;)t(L[y],S[A]);y=L.length,A++}return[S,L]}return S.selectionBefore=L.selectionBefore=S.selectionAfter=L.selectionAfter=null,[L,S]}function m(S,L){var A=S.action=="insert",y=L.action=="insert";if(A&&y)p(S.start,L.start)<0?v(L,S,1):v(S,L,1);else if(A&&!y)p(S.start,L.end)>=0?v(S,L,-1):(p(S.start,L.start)<=0||v(S,E.fromPoints(L.start,S.start),-1),v(L,S,1));else if(!A&&y)p(L.start,S.end)>=0?v(L,S,-1):(p(L.start,S.start)<=0||v(L,E.fromPoints(S.start,L.start),-1),v(S,L,1));else if(!A&&!y)if(p(L.start,S.end)>=0)v(L,S,-1);else{var P,B;if(!(p(L.end,S.start)<=0))return p(S.start,L.start)<0&&(P=S,S=w(S,L.start)),p(S.end,L.end)>0&&(B=w(S,L.end)),x(L.end,S.start,S.end,-1),B&&!P&&(S.lines=B.lines,S.start=B.start,S.end=B.end,B=S),[L,P,B].filter(Boolean);v(S,L,-1)}return[L,S]}function v(S,L,A){x(S.start,L.start,L.end,A),x(S.end,L.start,L.end,A)}function x(S,L,A,y){S.row==(y==1?L:A).row&&(S.column+=y*(A.column-L.column)),S.row+=y*(A.row-L.row)}function w(S,L){var A=S.lines,y=S.end;S.end=d(L);var P=S.end.row-S.start.row,B=A.splice(P,A.length),T=P?L.column:L.column-S.start.column;return A.push(B[0].substring(0,T)),B[0]=B[0].substr(T),{start:d(L),end:y,lines:B,action:S.action}}function R(S,L){L=function(T){return{start:d(T.start),end:d(T.end),action:T.action,lines:T.lines.slice()}}(L);for(var A=S.length;A--;){for(var y=S[A],P=0;P<y.length;P++){var B=m(y[P],L);L=B[0],B.length!=2&&(B[2]?(y.splice(P+1,1,B[1],B[2]),P++):B[1]||(y.splice(P,1),P--))}y.length||S.splice(A,1)}return S}E.comparePoints,f.UndoManager=a}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(u,f,M){var a=u("../lib/dom"),E=function(p,d){this.element=p,this.canvasHeight=d||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(p){a.translate(this.element,0,-p.firstRowScreen*p.lineHeight%this.canvasHeight-p.offset*this.$offsetCoefficient)},this.pageChanged=function(p,d){return Math.floor(p.firstRowScreen*p.lineHeight/this.canvasHeight)!==Math.floor(d.firstRowScreen*d.lineHeight/this.canvasHeight)},this.computeLineTop=function(p,d,s){var r=d.firstRowScreen*d.lineHeight,t=Math.floor(r/this.canvasHeight);return s.documentToScreenRow(p,0)*d.lineHeight-t*this.canvasHeight},this.computeLineHeight=function(p,d,s){return d.lineHeight*s.getRowLength(p)},this.getLength=function(){return this.cells.length},this.get=function(p){return this.cells[p]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(p){if(Array.isArray(p)){this.cells.push.apply(this.cells,p);for(var d=a.createFragment(this.element),s=0;s<p.length;s++)d.appendChild(p[s].element);this.element.appendChild(d)}else this.cells.push(p),this.element.appendChild(p.element)},this.unshift=function(p){if(Array.isArray(p)){this.cells.unshift.apply(this.cells,p);for(var d=a.createFragment(this.element),s=0;s<p.length;s++)d.appendChild(p[s].element);this.element.firstChild?this.element.insertBefore(d,this.element.firstChild):this.element.appendChild(d)}else this.cells.unshift(p),this.element.insertAdjacentElement("afterbegin",p.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(p){p&&(p.element.remove(),this.cellCache.push(p))},this.createCell=function(p,d,s,r){var t=this.cellCache.pop();if(!t){var c=a.createElement("div");r&&r(c),this.element.appendChild(c),t={element:c,text:"",row:p}}return t.row=p,t}}).call(E.prototype),f.Lines=E}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(u,f,M){var a=u("../lib/dom"),E=u("../lib/oop"),p=u("../lib/lang"),d=u("../lib/event_emitter").EventEmitter,s=u("./lines").Lines,r=function(c){this.element=a.createElement("div"),this.element.className="ace_layer ace_gutter-layer",c.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new s(this.element),this.$lines.$offsetCoefficient=1};function t(c){var m=document.createTextNode("");c.appendChild(m);var v=a.createElement("span");return c.appendChild(v),c}(function(){E.implement(this,d),this.setSession=function(c){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=c,c&&c.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(c,m){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(c,m)},this.removeGutterDecoration=function(c,m){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(c,m)},this.setAnnotations=function(c){this.$annotations=[];for(var m=0;m<c.length;m++){var v=c[m],x=v.row,w=this.$annotations[x];w||(w=this.$annotations[x]={text:[]});var R=v.text;R=R?p.escapeHTML(R):v.html||"",w.text.indexOf(R)===-1&&w.text.push(R);var S=v.type;S=="error"?w.className=" ace_error":S=="warning"&&w.className!=" ace_error"?w.className=" ace_warning":S!="info"||w.className||(w.className=" ace_info")}},this.$updateAnnotations=function(c){if(this.$annotations.length){var m=c.start.row,v=c.end.row-m;if(v!==0)if(c.action=="remove")this.$annotations.splice(m,v+1,null);else{var x=new Array(v+1);x.unshift(m,1),this.$annotations.splice.apply(this.$annotations,x)}}},this.update=function(c){this.config=c;var m=this.session,v=c.firstRow,x=Math.min(c.lastRow+c.gutterOffset,m.getLength()-1);this.oldLastRow=x,this.config=c,this.$lines.moveContainer(c),this.$updateCursorRow();for(var w=m.getNextFoldLine(v),R=w?w.start.row:1/0,S=null,L=-1,A=v;;){if(A>R&&(A=w.end.row+1,R=(w=m.getNextFoldLine(A,w))?w.start.row:1/0),A>x){for(;this.$lines.getLength()>L+1;)this.$lines.pop();break}(S=this.$lines.get(++L))?S.row=A:(S=this.$lines.createCell(A,c,this.session,t),this.$lines.push(S)),this.$renderCell(S,c,w,A),A++}this._signal("afterRender"),this.$updateGutterWidth(c)},this.$updateGutterWidth=function(c){var m=this.session,v=m.gutterRenderer||this.$renderer,x=m.$firstLineNumber,w=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||m.$useWrapMode)&&(w=m.getLength()+x-1);var R=v?v.getWidth(m,w,c):w.toString().length*c.characterWidth,S=this.$padding||this.$computePadding();(R+=S.left+S.right)===this.gutterWidth||isNaN(R)||(this.gutterWidth=R,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",R))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var c=this.session.selection.getCursor();this.$cursorRow!==c.row&&(this.$cursorRow=c.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var c=this.session.selection.cursor.row;if(this.$cursorRow=c,!this.$cursorCell||this.$cursorCell.row!=c){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var m=this.$lines.cells;this.$cursorCell=null;for(var v=0;v<m.length;v++){var x=m[v];if(x.row>=this.$cursorRow){if(x.row>this.$cursorRow){var w=this.session.getFoldLine(this.$cursorRow);if(!(v>0&&w&&w.start.row==m[v-1].row))break;x=m[v-1]}x.element.className="ace_gutter-active-line "+x.element.className,this.$cursorCell=x;break}}}}},this.scrollLines=function(c){var m=this.config;if(this.config=c,this.$updateCursorRow(),this.$lines.pageChanged(m,c))return this.update(c);this.$lines.moveContainer(c);var v=Math.min(c.lastRow+c.gutterOffset,this.session.getLength()-1),x=this.oldLastRow;if(this.oldLastRow=v,!m||x<c.firstRow)return this.update(c);if(v<m.firstRow)return this.update(c);if(m.firstRow<c.firstRow)for(var w=this.session.getFoldedRowCount(m.firstRow,c.firstRow-1);w>0;w--)this.$lines.shift();if(x>v)for(w=this.session.getFoldedRowCount(v+1,x);w>0;w--)this.$lines.pop();c.firstRow<m.firstRow&&this.$lines.unshift(this.$renderLines(c,c.firstRow,m.firstRow-1)),v>x&&this.$lines.push(this.$renderLines(c,x+1,v)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(c)},this.$renderLines=function(c,m,v){for(var x=[],w=m,R=this.session.getNextFoldLine(w),S=R?R.start.row:1/0;w>S&&(w=R.end.row+1,S=(R=this.session.getNextFoldLine(w,R))?R.start.row:1/0),!(w>v);){var L=this.$lines.createCell(w,c,this.session,t);this.$renderCell(L,c,R,w),x.push(L),w++}return x},this.$renderCell=function(c,m,v,x){var w=c.element,R=this.session,S=w.childNodes[0],L=w.childNodes[1],A=R.$firstLineNumber,y=R.$breakpoints,P=R.$decorations,B=R.gutterRenderer||this.$renderer,T=this.$showFoldWidgets&&R.foldWidgets,I=v?v.start.row:Number.MAX_VALUE,D="ace_gutter-cell ";if(this.$highlightGutterLine&&(x==this.$cursorRow||v&&x<this.$cursorRow&&x>=I&&this.$cursorRow<=v.end.row)&&(D+="ace_gutter-active-line ",this.$cursorCell!=c&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=c)),y[x]&&(D+=y[x]),P[x]&&(D+=P[x]),this.$annotations[x]&&(D+=this.$annotations[x].className),w.className!=D&&(w.className=D),T){var k=T[x];k==null&&(k=T[x]=R.getFoldWidget(x))}if(k){D="ace_fold-widget ace_"+k,k=="start"&&x==I&&x<v.end.row?D+=" ace_closed":D+=" ace_open",L.className!=D&&(L.className=D);var U=m.lineHeight+"px";a.setStyle(L.style,"height",U),a.setStyle(L.style,"display","inline-block")}else L&&a.setStyle(L.style,"display","none");var G=(B?B.getText(R,x):x+A).toString();return G!==S.data&&(S.data=G),a.setStyle(c.element.style,"height",this.$lines.computeLineHeight(x,m,R)+"px"),a.setStyle(c.element.style,"top",this.$lines.computeLineTop(x,m,R)+"px"),c.text=G,c},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(c){this.$highlightGutterLine=c},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(c){this.$renderer=!c&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(c){c?a.addCssClass(this.element,"ace_folding-enabled"):a.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=c,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var c=a.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(c.borderLeftWidth)||0)+(parseInt(c.paddingLeft)||0)+1,this.$padding.right=(parseInt(c.borderRightWidth)||0)+(parseInt(c.paddingRight)||0),this.$padding},this.getRegion=function(c){var m=this.$padding||this.$computePadding(),v=this.element.getBoundingClientRect();return c.x<m.left+v.left?"markers":this.$showFoldWidgets&&c.x>v.right-m.right?"foldWidgets":void 0}}).call(r.prototype),f.Gutter=r}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(u,f,M){var a=u("../range").Range,E=u("../lib/dom"),p=function(d){this.element=E.createElement("div"),this.element.className="ace_layer ace_marker-layer",d.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(d){this.$padding=d},this.setSession=function(d){this.session=d},this.setMarkers=function(d){this.markers=d},this.elt=function(d,s){var r=this.i!=-1&&this.element.childNodes[this.i];r?this.i++:(r=document.createElement("div"),this.element.appendChild(r),this.i=-1),r.style.cssText=s,r.className=d},this.update=function(d){if(d){var s;for(var r in this.config=d,this.i=0,this.markers){var t=this.markers[r];if(t.range){var c=t.range.clipRows(d.firstRow,d.lastRow);if(!c.isEmpty())if(c=c.toScreenRange(this.session),t.renderer){var m=this.$getTop(c.start.row,d),v=this.$padding+c.start.column*d.characterWidth;t.renderer(s,c,v,m,d)}else t.type=="fullLine"?this.drawFullLineMarker(s,c,t.clazz,d):t.type=="screenLine"?this.drawScreenLineMarker(s,c,t.clazz,d):c.isMultiLine()?t.type=="text"?this.drawTextMarker(s,c,t.clazz,d):this.drawMultiLineMarker(s,c,t.clazz,d):this.drawSingleLineMarker(s,c,t.clazz+" ace_start ace_br15",d)}else t.update(s,this,this.session,d)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(d,s){return(d-s.firstRowScreen)*s.lineHeight},this.drawTextMarker=function(d,s,r,t,c){for(var m=this.session,v=s.start.row,x=s.end.row,w=v,R=0,S=0,L=m.getScreenLastRowColumn(w),A=new a(w,s.start.column,w,S);w<=x;w++)A.start.row=A.end.row=w,A.start.column=w==v?s.start.column:m.getRowWrapIndent(w),A.end.column=L,R=S,S=L,L=w+1<x?m.getScreenLastRowColumn(w+1):w==x?0:s.end.column,this.drawSingleLineMarker(d,A,r+(w==v?" ace_start":"")+" ace_br"+((w==v||w==v+1&&s.start.column?1:0)|(R<S?2:0)|(S>L?4:0)|(w==x?8:0)),t,w==x?0:1,c)},this.drawMultiLineMarker=function(d,s,r,t,c){var m=this.$padding,v=t.lineHeight,x=this.$getTop(s.start.row,t),w=m+s.start.column*t.characterWidth;if(c=c||"",this.session.$bidiHandler.isBidiRow(s.start.row)?((R=s.clone()).end.row=R.start.row,R.end.column=this.session.getLine(R.start.row).length,this.drawBidiSingleLineMarker(d,R,r+" ace_br1 ace_start",t,null,c)):this.elt(r+" ace_br1 ace_start","height:"+v+"px;right:0;top:"+x+"px;left:"+w+"px;"+(c||"")),this.session.$bidiHandler.isBidiRow(s.end.row)){var R;(R=s.clone()).start.row=R.end.row,R.start.column=0,this.drawBidiSingleLineMarker(d,R,r+" ace_br12",t,null,c)}else{x=this.$getTop(s.end.row,t);var S=s.end.column*t.characterWidth;this.elt(r+" ace_br12","height:"+v+"px;width:"+S+"px;top:"+x+"px;left:"+m+"px;"+(c||""))}if(!((v=(s.end.row-s.start.row-1)*t.lineHeight)<=0)){x=this.$getTop(s.start.row+1,t);var L=(s.start.column?1:0)|(s.end.column?0:8);this.elt(r+(L?" ace_br"+L:""),"height:"+v+"px;right:0;top:"+x+"px;left:"+m+"px;"+(c||""))}},this.drawSingleLineMarker=function(d,s,r,t,c,m){if(this.session.$bidiHandler.isBidiRow(s.start.row))return this.drawBidiSingleLineMarker(d,s,r,t,c,m);var v=t.lineHeight,x=(s.end.column+(c||0)-s.start.column)*t.characterWidth,w=this.$getTop(s.start.row,t),R=this.$padding+s.start.column*t.characterWidth;this.elt(r,"height:"+v+"px;width:"+x+"px;top:"+w+"px;left:"+R+"px;"+(m||""))},this.drawBidiSingleLineMarker=function(d,s,r,t,c,m){var v=t.lineHeight,x=this.$getTop(s.start.row,t),w=this.$padding;this.session.$bidiHandler.getSelections(s.start.column,s.end.column).forEach(function(R){this.elt(r,"height:"+v+"px;width:"+R.width+(c||0)+"px;top:"+x+"px;left:"+(w+R.left)+"px;"+(m||""))},this)},this.drawFullLineMarker=function(d,s,r,t,c){var m=this.$getTop(s.start.row,t),v=t.lineHeight;s.start.row!=s.end.row&&(v+=this.$getTop(s.end.row,t)-m),this.elt(r,"height:"+v+"px;top:"+m+"px;left:0;right:0;"+(c||""))},this.drawScreenLineMarker=function(d,s,r,t,c){var m=this.$getTop(s.start.row,t),v=t.lineHeight;this.elt(r,"height:"+v+"px;top:"+m+"px;left:0;right:0;"+(c||""))}}).call(p.prototype),f.Marker=p}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(u,f,M){var a=u("../lib/oop"),E=u("../lib/dom"),p=u("../lib/lang"),d=u("./lines").Lines,s=u("../lib/event_emitter").EventEmitter,r=function(t){this.dom=E,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new d(this.element)};(function(){a.implement(this,s),this.EOF_CHAR="\xB6",this.EOL_CHAR_LF="\xAC",this.EOL_CHAR_CRLF="\xA4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xB7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var t=this.session.doc,c=t.getNewLineCharacter()==`
`&&t.getNewLineMode()!="windows"?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=c)return this.EOL_CHAR=c,!0},this.setPadding=function(t){this.$padding=t,this.element.style.margin="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",function(c){this._signal("changeCharacterSize",c)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var c=this.$tabStrings=[0],m=1;m<t+1;m++)this.showInvisibles?((v=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",v.textContent=p.stringRepeat(this.TAB_CHAR,m),c.push(v)):c.push(this.dom.createTextNode(p.stringRepeat(" ",m),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var v,x="ace_indent-guide",w="",R="";if(this.showInvisibles){x+=" ace_invisible",w=" ace_invisible_space",R=" ace_invisible_tab";var S=p.stringRepeat(this.SPACE_CHAR,this.tabSize),L=p.stringRepeat(this.TAB_CHAR,this.tabSize)}else L=S=p.stringRepeat(" ",this.tabSize);(v=this.dom.createElement("span")).className=x+w,v.textContent=S,this.$tabStrings[" "]=v,(v=this.dom.createElement("span")).className=x+R,v.textContent=L,this.$tabStrings["	"]=v}},this.updateLines=function(t,c,m){if(this.config.lastRow!=t.lastRow||this.config.firstRow!=t.firstRow)return this.update(t);this.config=t;for(var v=Math.max(c,t.firstRow),x=Math.min(m,t.lastRow),w=this.element.childNodes,R=0,S=t.firstRow;S<v;S++){if(L=this.session.getFoldLine(S)){if(L.containsRow(v)){v=L.start.row;break}S=L.end.row}R++}for(var L,A=!1,y=(S=v,(L=this.session.getNextFoldLine(S))?L.start.row:1/0);S>y&&(S=L.end.row+1,y=(L=this.session.getNextFoldLine(S,L))?L.start.row:1/0),!(S>x);){var P=w[R++];if(P){this.dom.removeChildren(P),this.$renderLine(P,S,S==y&&L),A&&(P.style.top=this.$lines.computeLineTop(S,t,this.session)+"px");var B=t.lineHeight*this.session.getRowLength(S)+"px";P.style.height!=B&&(A=!0,P.style.height=B)}S++}if(A)for(;R<this.$lines.cells.length;){var T=this.$lines.cells[R++];T.element.style.top=this.$lines.computeLineTop(T.row,t,this.session)+"px"}},this.scrollLines=function(t){var c=this.config;if(this.config=t,this.$lines.pageChanged(c,t))return this.update(t);this.$lines.moveContainer(t);var m=t.lastRow,v=c?c.lastRow:-1;if(!c||v<t.firstRow)return this.update(t);if(m<c.firstRow)return this.update(t);if(!c||c.lastRow<t.firstRow)return this.update(t);if(t.lastRow<c.firstRow)return this.update(t);if(c.firstRow<t.firstRow)for(var x=this.session.getFoldedRowCount(c.firstRow,t.firstRow-1);x>0;x--)this.$lines.shift();if(c.lastRow>t.lastRow)for(x=this.session.getFoldedRowCount(t.lastRow+1,c.lastRow);x>0;x--)this.$lines.pop();t.firstRow<c.firstRow&&this.$lines.unshift(this.$renderLinesFragment(t,t.firstRow,c.firstRow-1)),t.lastRow>c.lastRow&&this.$lines.push(this.$renderLinesFragment(t,c.lastRow+1,t.lastRow))},this.$renderLinesFragment=function(t,c,m){for(var v=[],x=c,w=this.session.getNextFoldLine(x),R=w?w.start.row:1/0;x>R&&(x=w.end.row+1,R=(w=this.session.getNextFoldLine(x,w))?w.start.row:1/0),!(x>m);){var S=this.$lines.createCell(x,t,this.session),L=S.element;this.dom.removeChildren(L),E.setStyle(L.style,"height",this.$lines.computeLineHeight(x,t,this.session)+"px"),E.setStyle(L.style,"top",this.$lines.computeLineTop(x,t,this.session)+"px"),this.$renderLine(L,x,x==R&&w),this.$useLineGroups()?L.className="ace_line_group":L.className="ace_line",v.push(S),x++}return v},this.update=function(t){this.$lines.moveContainer(t),this.config=t;for(var c=t.firstRow,m=t.lastRow,v=this.$lines;v.getLength();)v.pop();v.push(this.$renderLinesFragment(t,c,m))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,c,m,v){for(var x,w=this,R=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,S=this.dom.createFragment(this.element),L=0;x=R.exec(v);){var A=x[1],y=x[2],P=x[3],B=x[4],T=x[5];if(w.showInvisibles||!y){var I=L!=x.index?v.slice(L,x.index):"";if(L=x.index+x[0].length,I&&S.appendChild(this.dom.createTextNode(I,this.element)),A){var D=w.session.getScreenTabSize(c+x.index);S.appendChild(w.$tabStrings[D].cloneNode(!0)),c+=D-1}else y?w.showInvisibles?((U=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",U.textContent=p.stringRepeat(w.SPACE_CHAR,y.length),S.appendChild(U)):S.appendChild(this.com.createTextNode(y,this.element)):P?((U=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",U.textContent=p.stringRepeat(w.SPACE_CHAR,P.length),S.appendChild(U)):B?(c+=1,(U=this.dom.createElement("span")).style.width=2*w.config.characterWidth+"px",U.className=w.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",U.textContent=w.showInvisibles?w.SPACE_CHAR:B,S.appendChild(U)):T&&(c+=1,(U=this.dom.createElement("span")).style.width=2*w.config.characterWidth+"px",U.className="ace_cjk",U.textContent=T,S.appendChild(U))}}if(S.appendChild(this.dom.createTextNode(L?v.slice(L):v,this.element)),this.$textToken[m.type])t.appendChild(S);else{var k="ace_"+m.type.replace(/\./g," ace_"),U=this.dom.createElement("span");m.type=="fold"&&(U.style.width=m.value.length*this.config.characterWidth+"px"),U.className=k,U.appendChild(S),t.appendChild(U)}return c+v.length},this.renderIndentGuide=function(t,c,m){var v=c.search(this.$indentGuideRe);if(v<=0||v>=m)return c;if(c[0]==" "){for(var x=(v-=v%this.tabSize)/this.tabSize,w=0;w<x;w++)t.appendChild(this.$tabStrings[" "].cloneNode(!0));return c.substr(v)}if(c[0]=="	"){for(w=0;w<v;w++)t.appendChild(this.$tabStrings["	"].cloneNode(!0));return c.substr(v)}return c},this.$createLineElement=function(t){var c=this.dom.createElement("div");return c.className="ace_line",c.style.height=this.config.lineHeight+"px",c},this.$renderWrappedLine=function(t,c,m){var v=0,x=0,w=m[0],R=0,S=this.$createLineElement();t.appendChild(S);for(var L=0;L<c.length;L++){var A=c[L],y=A.value;if(L==0&&this.displayIndentGuides){if(v=y.length,!(y=this.renderIndentGuide(S,y,w)))continue;v-=y.length}if(v+y.length<w)R=this.$renderToken(S,R,A,y),v+=y.length;else{for(;v+y.length>=w;)R=this.$renderToken(S,R,A,y.substring(0,w-v)),y=y.substring(w-v),v=w,S=this.$createLineElement(),t.appendChild(S),S.appendChild(this.dom.createTextNode(p.stringRepeat("\xA0",m.indent),this.element)),R=0,w=m[++x]||Number.MAX_VALUE;y.length!=0&&(v+=y.length,R=this.$renderToken(S,R,A,y))}}m[m.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(S,R,null,"",!0)},this.$renderSimpleLine=function(t,c){var m=0,v=c[0],x=v.value;this.displayIndentGuides&&(x=this.renderIndentGuide(t,x)),x&&(m=this.$renderToken(t,m,v,x));for(var w=1;w<c.length;w++){if(m+(x=(v=c[w]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(t,m,v,x);m=this.$renderToken(t,m,v,x)}},this.$renderOverflowMessage=function(t,c,m,v,x){m&&this.$renderToken(t,c,m,v.slice(0,this.MAX_LINE_LENGTH-c));var w=this.dom.createElement("span");w.className="ace_inline_button ace_keyword ace_toggle_wrap",w.textContent=x?"<hide>":"<click to see more...>",t.appendChild(w)},this.$renderLine=function(t,c,m){if(m||m==0||(m=this.session.getFoldLine(c)),m)var v=this.$getFoldLineTokens(c,m);else v=this.session.getTokens(c);var x=t;if(v.length){var w=this.session.getRowSplitData(c);w&&w.length?(this.$renderWrappedLine(t,v,w),x=t.lastChild):(x=t,this.$useLineGroups()&&(x=this.$createLineElement(),t.appendChild(x)),this.$renderSimpleLine(x,v))}else this.$useLineGroups()&&(x=this.$createLineElement(),t.appendChild(x));if(this.showInvisibles&&x){m&&(c=m.end.row);var R=this.dom.createElement("span");R.className="ace_invisible ace_invisible_eol",R.textContent=c==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,x.appendChild(R)}},this.$getFoldLineTokens=function(t,c){var m=this.session,v=[],x=m.getTokens(t);return c.walk(function(w,R,S,L,A){w!=null?v.push({type:"fold",value:w}):(A&&(x=m.getTokens(R)),x.length&&function(y,P,B){for(var T=0,I=0;I+y[T].value.length<P;)if(I+=y[T].value.length,++T==y.length)return;for(I!=P&&((D=y[T].value.substring(P-I)).length>B-P&&(D=D.substring(0,B-P)),v.push({type:y[T].type,value:D}),I=P+D.length,T+=1);I<B&&T<y.length;){var D;(D=y[T].value).length+I>B?v.push({type:y[T].type,value:D.substring(0,B-I)}):v.push(y[T]),I+=D.length,T+=1}}(x,L,S))},c.end.row,this.session.getLine(c.end.row).length),v},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(r.prototype),f.Text=r}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(u,f,M){var a=u("../lib/dom"),E=function(p){this.element=a.createElement("div"),this.element.className="ace_layer ace_cursor-layer",p.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),a.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(p){for(var d=this.cursors,s=d.length;s--;)a.setStyle(d[s].style,"opacity",p?"":"0")},this.$startCssAnimation=function(){for(var p=this.cursors,d=p.length;d--;)p[d].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){a.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){a.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(p){this.$padding=p},this.setSession=function(p){this.session=p},this.setBlinking=function(p){p!=this.isBlinking&&(this.isBlinking=p,this.restartTimer())},this.setBlinkInterval=function(p){p!=this.blinkInterval&&(this.blinkInterval=p,this.restartTimer())},this.setSmoothBlinking=function(p){p!=this.smoothBlinking&&(this.smoothBlinking=p,a.setCssClass(this.element,"ace_smooth-blinking",p),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var p=a.createElement("div");return p.className="ace_cursor",this.element.appendChild(p),this.cursors.push(p),p},this.removeCursor=function(){if(this.cursors.length>1){var p=this.cursors.pop();return p.parentNode.removeChild(p),p}},this.hideCursor=function(){this.isVisible=!1,a.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,a.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var p=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&a.removeCssClass(this.element,"ace_smooth-blinking"),p(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout(function(){a.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)),a.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var d=function(){this.timeoutId=setTimeout(function(){p(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){p(!0),d()},this.blinkInterval),d()}else this.$stopCssAnimation()},this.getPixelPosition=function(p,d){if(!this.config||!this.session)return{left:0,top:0};p||(p=this.session.selection.getCursor());var s=this.session.documentToScreenPosition(p);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(s.row,p.row)?this.session.$bidiHandler.getPosLeft(s.column):s.column*this.config.characterWidth),top:(s.row-(d?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(p,d){return p.top>=0&&p.top<d.maxHeight},this.update=function(p){this.config=p;var d=this.session.$selectionMarkers,s=0,r=0;d!==void 0&&d.length!==0||(d=[{cursor:null}]),s=0;for(var t=d.length;s<t;s++){var c=this.getPixelPosition(d[s].cursor,!0);if(!((c.top>p.height+p.offset||c.top<0)&&s>1)){var m=this.cursors[r++]||this.addCursor(),v=m.style;this.drawCursor?this.drawCursor(m,c,p,d[s],this.session):this.isCursorInView(c,p)?(a.setStyle(v,"display","block"),a.translate(m,c.left,c.top),a.setStyle(v,"width",Math.round(p.characterWidth)+"px"),a.setStyle(v,"height",p.lineHeight+"px")):a.setStyle(v,"display","none")}}for(;this.cursors.length>r;)this.removeCursor();var x=this.session.getOverwrite();this.$setOverwrite(x),this.$pixelPos=c,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(p){p!=this.overwrite&&(this.overwrite=p,p?a.addCssClass(this.element,"ace_overwrite-cursors"):a.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(E.prototype),f.Cursor=E}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(u,f,M){var a=u("./lib/oop"),E=u("./lib/dom"),p=u("./lib/event"),d=u("./lib/event_emitter").EventEmitter,s=32768,r=function(m){this.element=E.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=E.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),m.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,p.addListener(this.element,"scroll",this.onScroll.bind(this)),p.addListener(this.element,"mousedown",p.preventDefault)};(function(){a.implement(this,d),this.setVisible=function(m){this.element.style.display=m?"":"none",this.isVisible=m,this.coeff=1}}).call(r.prototype);var t=function(m,v){r.call(this,m),this.scrollTop=0,this.scrollHeight=0,v.$scrollbarWidth=this.width=E.scrollbarWidth(m.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};a.inherits(t,r),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var m=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-m)/(this.coeff-m)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(m){this.element.style.height=m+"px"},this.setInnerHeight=this.setScrollHeight=function(m){this.scrollHeight=m,m>s?(this.coeff=s/m,m=s):this.coeff!=1&&(this.coeff=1),this.inner.style.height=m+"px"},this.setScrollTop=function(m){this.scrollTop!=m&&(this.skipEvent=!0,this.scrollTop=m,this.element.scrollTop=m*this.coeff)}}.call(t.prototype);var c=function(m,v){r.call(this,m),this.scrollLeft=0,this.height=v.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};a.inherits(c,r),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(m){this.element.style.width=m+"px"},this.setInnerWidth=function(m){this.inner.style.width=m+"px"},this.setScrollWidth=function(m){this.inner.style.width=m+"px"},this.setScrollLeft=function(m){this.scrollLeft!=m&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=m)}}.call(c.prototype),f.ScrollBar=t,f.ScrollBarV=t,f.ScrollBarH=c,f.VScrollBar=t,f.HScrollBar=c}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(u,f,M){var a=u("./lib/event"),E=function(p,d){this.onRender=p,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=d||window;var s=this;this._flush=function(r){s.pending=!1;var t=s.changes;if(t&&(a.blockIdle(100),s.changes=0,s.onRender(t)),s.changes){if(s.$recursionLimit--<0)return;s.schedule()}else s.$recursionLimit=2}};(function(){this.schedule=function(p){this.changes=this.changes|p,this.changes&&!this.pending&&(a.nextFrame(this._flush),this.pending=!0)},this.clear=function(p){var d=this.changes;return this.changes=0,d}}).call(E.prototype),f.RenderLoop=E}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(u,f,M){var a=u("../lib/oop"),E=u("../lib/dom"),p=u("../lib/lang"),d=u("../lib/event"),s=u("../lib/useragent"),r=u("../lib/event_emitter").EventEmitter,t=256,c=typeof ResizeObserver=="function",m=200,v=f.FontMetrics=function(x){this.el=E.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=E.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=E.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),x.appendChild(this.el),this.$measureNode.innerHTML=p.stringRepeat("X",t),this.$characterSize={width:0,height:0},c?this.$addObserver():this.checkForSizeChanges()};(function(){a.implement(this,r),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(x,w){x.width=x.height="auto",x.left=x.top="0px",x.visibility="hidden",x.position="absolute",x.whiteSpace="pre",s.isIE<8?x["font-family"]="inherit":x.font="inherit",x.overflow=w?"hidden":"visible"},this.checkForSizeChanges=function(x){if(x===void 0&&(x=this.$measureSizes()),x&&(this.$characterSize.width!==x.width||this.$characterSize.height!==x.height)){this.$measureNode.style.fontWeight="bold";var w=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=x,this.charSizes=Object.create(null),this.allowBoldFonts=w&&w.width===x.width&&w.height===x.height,this._emit("changeCharacterSize",{data:x})}},this.$addObserver=function(){var x=this;this.$observer=new window.ResizeObserver(function(w){var R=w[0].contentRect;x.checkForSizeChanges({height:R.height,width:R.width/t})}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var x=this;return this.$pollSizeChangesTimer=d.onIdle(function w(){x.checkForSizeChanges(),d.onIdle(w,500)},500)},this.setPolling=function(x){x?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(x){var w={height:(x||this.$measureNode).clientHeight,width:(x||this.$measureNode).clientWidth/t};return w.width===0||w.height===0?null:w},this.$measureCharWidth=function(x){return this.$main.innerHTML=p.stringRepeat(x,t),this.$main.getBoundingClientRect().width/t},this.getCharacterWidth=function(x){var w=this.charSizes[x];return w===void 0&&(w=this.charSizes[x]=this.$measureCharWidth(x)/this.$characterSize.width),w},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function x(w){return w?(window.getComputedStyle(w).zoom||1)*x(w.parentElement):1},this.$initTransformMeasureNodes=function(){var x=function(w,R){return["div",{style:"position: absolute;top:"+w+"px;left:"+R+"px;"}]};this.els=E.buildDom([x(0,0),x(m,0),x(0,m),x(m,m)],this.el)},this.transformCoordinates=function(x,w){function R(ne,W,K){var re=ne[1]*W[0]-ne[0]*W[1];return[(-W[1]*K[0]+W[0]*K[1])/re,(+ne[1]*K[0]-ne[0]*K[1])/re]}function S(ne,W){return[ne[0]-W[0],ne[1]-W[1]]}function L(ne,W){return[ne[0]+W[0],ne[1]+W[1]]}function A(ne,W){return[ne*W[0],ne*W[1]]}function y(ne){var W=ne.getBoundingClientRect();return[W.left,W.top]}x&&(x=A(1/this.$getZoom(this.el),x)),this.els||this.$initTransformMeasureNodes();var P=y(this.els[0]),B=y(this.els[1]),T=y(this.els[2]),I=y(this.els[3]),D=R(S(I,B),S(I,T),S(L(B,T),L(I,P))),k=A(1+D[0],S(B,P)),U=A(1+D[1],S(T,P));if(w){var G=w,H=D[0]*G[0]/m+D[1]*G[1]/m+1,se=L(A(G[0],k),A(G[1],U));return L(A(1/H/m,se),P)}var ee=S(x,P),Z=R(S(k,A(D[0],ee)),S(U,A(D[1],ee)),ee);return A(m,Z)}}).call(v.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],function(u,f,M){var a=u("./lib/oop"),E=u("./lib/dom"),p=u("./config"),d=u("./layer/gutter").Gutter,s=u("./layer/marker").Marker,r=u("./layer/text").Text,t=u("./layer/cursor").Cursor,c=u("./scrollbar").HScrollBar,m=u("./scrollbar").VScrollBar,v=u("./renderloop").RenderLoop,x=u("./layer/font_metrics").FontMetrics,w=u("./lib/event_emitter").EventEmitter,R=`.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;perspective: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);opacity: 0.7;transform-origin: left;text-indent: 10px;}`,S=u("./lib/useragent"),L=S.isIE;E.importCssString(R,"ace_editor.css");var A=function(y,P){var B=this;this.container=y||E.createElement("div"),E.addCssClass(this.container,"ace_editor"),E.HI_DPI&&E.addCssClass(this.container,"ace_hidpi"),this.setTheme(P),this.$gutter=E.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=E.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=E.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new d(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new s(this.content);var T=this.$textLayer=new r(this.content);this.canvas=T.element,this.$markerFront=new s(this.content),this.$cursorLayer=new t(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new m(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function(I){B.$scrollAnimation||B.session.setScrollTop(I.data-B.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(I){B.$scrollAnimation||B.session.setScrollLeft(I.data-B.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new x(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(I){B.updateCharacterSize(),B.onResize(!0,B.gutterWidth,B.$size.width,B.$size.height),B._signal("changeCharacterSize",I)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new v(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),p.resetOptions(this),p._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,a.implement(this,w),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),E.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(y){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=y,y&&this.scrollMargin.top&&y.getScrollTop()<=0&&y.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(y),this.$markerBack.setSession(y),this.$markerFront.setSession(y),this.$gutterLayer.setSession(y),this.$textLayer.setSession(y),y&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(y,P,B){if(P===void 0&&(P=1/0),this.$changedLines?(this.$changedLines.firstRow>y&&(this.$changedLines.firstRow=y),this.$changedLines.lastRow<P&&(this.$changedLines.lastRow=P)):this.$changedLines={firstRow:y,lastRow:P},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!B)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(y){y?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(y,P,B,T){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=y?1:0;var I=this.container;T||(T=I.clientHeight||I.scrollHeight),B||(B=I.clientWidth||I.scrollWidth);var D=this.$updateCachedSize(y,P,B,T);if(!this.$size.scrollerHeight||!B&&!T)return this.resizing=0;y&&(this.$gutterLayer.$padding=null),y?this.$renderChanges(D|this.$changes,!0):this.$loop.schedule(D|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(y,P,B,T){T-=this.$extraHeight||0;var I=0,D=this.$size,k={width:D.width,height:D.height,scrollerHeight:D.scrollerHeight,scrollerWidth:D.scrollerWidth};if(T&&(y||D.height!=T)&&(D.height=T,I|=this.CHANGE_SIZE,D.scrollerHeight=D.height,this.$horizScroll&&(D.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",I|=this.CHANGE_SCROLL),B&&(y||D.width!=B)){I|=this.CHANGE_SIZE,D.width=B,P==null&&(P=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=P,E.setStyle(this.scrollBarH.element.style,"left",P+"px"),E.setStyle(this.scroller.style,"left",P+this.margin.left+"px"),D.scrollerWidth=Math.max(0,B-P-this.scrollBarV.getWidth()-this.margin.h),E.setStyle(this.$gutter.style,"left",this.margin.left+"px");var U=this.scrollBarV.getWidth()+"px";E.setStyle(this.scrollBarH.element.style,"right",U),E.setStyle(this.scroller.style,"right",U),E.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||y)&&(I|=this.CHANGE_FULL)}return D.$dirty=!B||!T,I&&this._signal("resize",k),I},this.onGutterResize=function(y){var P=this.$showGutter?y:0;P!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,P,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var y=this.$size.scrollerWidth-2*this.$padding,P=Math.floor(y/this.characterWidth);return this.session.adjustWrapLimit(P,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(y){this.setOption("animatedScroll",y)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(y){this.setOption("showInvisibles",y),this.session.$bidiHandler.setShowInvisibles(y)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(y){this.setOption("displayIndentGuides",y)},this.setShowPrintMargin=function(y){this.setOption("showPrintMargin",y)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(y){this.setOption("printMarginColumn",y)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(y){return this.setOption("showGutter",y)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(y){this.setOption("fadeFoldWidgets",y)},this.setHighlightGutterLine=function(y){this.setOption("highlightGutterLine",y)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var y=E.createElement("div");y.className="ace_layer ace_print-margin-layer",this.$printMarginEl=E.createElement("div"),this.$printMarginEl.className="ace_print-margin",y.appendChild(this.$printMarginEl),this.content.insertBefore(y,this.content.firstChild)}var P=this.$printMarginEl.style;P.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",P.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var y=this.textarea.style,P=this.$composition;if(this.$keepTextAreaAtCursor||P){var B=this.$cursorLayer.$pixelPos;if(B){P&&P.markerRange&&(B=this.$cursorLayer.getPixelPosition(P.markerRange.start,!0));var T=this.layerConfig,I=B.top,D=B.left;I-=T.offset;var k=P&&P.useTextareaForIME?this.lineHeight:L?0:1;if(I<0||I>T.height-k)E.translate(this.textarea,0,0);else{var U=1,G=this.$size.height-k;if(P)if(P.useTextareaForIME){var H=this.textarea.value;U=this.characterWidth*this.session.$getStringScreenWidth(H)[0]}else I+=this.lineHeight+2;else I+=this.lineHeight;(D-=this.scrollLeft)>this.$size.scrollerWidth-U&&(D=this.$size.scrollerWidth-U),D+=this.gutterWidth+this.margin.left,E.setStyle(y,"height",k+"px"),E.setStyle(y,"width",U+"px"),E.translate(this.textarea,Math.min(D,this.$size.scrollerWidth-U),Math.min(I,G))}}}else E.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var y=this.layerConfig,P=y.lastRow;return this.session.documentToScreenRow(P,0)*y.lineHeight-this.session.getScrollTop()>y.height-y.lineHeight?P-1:P},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(y){this.$padding=y,this.$textLayer.setPadding(y),this.$cursorLayer.setPadding(y),this.$markerFront.setPadding(y),this.$markerBack.setPadding(y),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(y,P,B,T){var I=this.scrollMargin;I.top=0|y,I.bottom=0|P,I.right=0|T,I.left=0|B,I.v=I.top+I.bottom,I.h=I.left+I.right,I.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-I.top),this.updateFull()},this.setMargin=function(y,P,B,T){var I=this.margin;I.top=0|y,I.bottom=0|P,I.right=0|T,I.left=0|B,I.v=I.top+I.bottom,I.h=I.left+I.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(y){this.setOption("hScrollBarAlwaysVisible",y)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(y){this.setOption("vScrollBarAlwaysVisible",y)},this.$updateScrollBarV=function(){var y=this.layerConfig.maxHeight,P=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(y-=(P-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>y-P&&(y=this.scrollTop+P,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(y+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(y,P){if(this.$changes&&(y|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(y||P)){if(this.$size.$dirty)return this.$changes|=y,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender"),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var B=this.layerConfig;if(y&this.CHANGE_FULL||y&this.CHANGE_SIZE||y&this.CHANGE_TEXT||y&this.CHANGE_LINES||y&this.CHANGE_SCROLL||y&this.CHANGE_H_SCROLL){if(y|=this.$computeLayerConfig()|this.$loop.clear(),B.firstRow!=this.layerConfig.firstRow&&B.firstRowScreen==this.layerConfig.firstRowScreen){var T=this.scrollTop+(B.firstRow-this.layerConfig.firstRow)*this.lineHeight;T>0&&(this.scrollTop=T,y|=this.CHANGE_SCROLL,y|=this.$computeLayerConfig()|this.$loop.clear())}B=this.layerConfig,this.$updateScrollBarV(),y&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),E.translate(this.content,-this.scrollLeft,-B.offset);var I=B.width+2*this.$padding+"px",D=B.minHeight+"px";E.setStyle(this.content.style,"width",I),E.setStyle(this.content.style,"height",D)}if(y&this.CHANGE_H_SCROLL&&(E.translate(this.content,-this.scrollLeft,-B.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),y&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(B),this.$showGutter&&this.$gutterLayer.update(B),this.$markerBack.update(B),this.$markerFront.update(B),this.$cursorLayer.update(B),this.$moveTextAreaToCursor(),void this._signal("afterRender");if(y&this.CHANGE_SCROLL)return this.$changedLines=null,y&this.CHANGE_TEXT||y&this.CHANGE_LINES?this.$textLayer.update(B):this.$textLayer.scrollLines(B),this.$showGutter&&(y&this.CHANGE_GUTTER||y&this.CHANGE_LINES?this.$gutterLayer.update(B):this.$gutterLayer.scrollLines(B)),this.$markerBack.update(B),this.$markerFront.update(B),this.$cursorLayer.update(B),this.$moveTextAreaToCursor(),void this._signal("afterRender");y&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(B),this.$showGutter&&this.$gutterLayer.update(B)):y&this.CHANGE_LINES?(this.$updateLines()||y&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(B):y&this.CHANGE_TEXT||y&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(B):y&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(B),y&this.CHANGE_CURSOR&&(this.$cursorLayer.update(B),this.$moveTextAreaToCursor()),y&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(B),y&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(B),this._signal("afterRender")}else this.$changes|=y},this.$autosize=function(){var y=this.session.getScreenLength()*this.lineHeight,P=this.$maxLines*this.lineHeight,B=Math.min(P,Math.max((this.$minLines||1)*this.lineHeight,y))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(B+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&B>this.$maxPixelHeight&&(B=this.$maxPixelHeight);var T=!(B<=2*this.lineHeight)&&y>P;if(B!=this.desiredHeight||this.$size.height!=this.desiredHeight||T!=this.$vScroll){T!=this.$vScroll&&(this.$vScroll=T,this.scrollBarV.setVisible(T));var I=this.container.clientWidth;this.container.style.height=B+"px",this.$updateCachedSize(!0,this.$gutterWidth,I,B),this.desiredHeight=B,this._signal("autosize")}},this.$computeLayerConfig=function(){var y=this.session,P=this.$size,B=P.height<=2*this.lineHeight,T=this.session.getScreenLength()*this.lineHeight,I=this.$getLongestLine(),D=!B&&(this.$hScrollBarAlwaysVisible||P.scrollerWidth-I-2*this.$padding<0),k=this.$horizScroll!==D;k&&(this.$horizScroll=D,this.scrollBarH.setVisible(D));var U=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var G=P.scrollerHeight+this.lineHeight,H=!this.$maxLines&&this.$scrollPastEnd?(P.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;T+=H;var se=this.scrollMargin;this.session.setScrollTop(Math.max(-se.top,Math.min(this.scrollTop,T-P.scrollerHeight+se.bottom))),this.session.setScrollLeft(Math.max(-se.left,Math.min(this.scrollLeft,I+2*this.$padding-P.scrollerWidth+se.right)));var ee=!B&&(this.$vScrollBarAlwaysVisible||P.scrollerHeight-T+H<0||this.scrollTop>se.top),Z=U!==ee;Z&&(this.$vScroll=ee,this.scrollBarV.setVisible(ee));var ne,W,K=this.scrollTop%this.lineHeight,re=Math.ceil(G/this.lineHeight)-1,oe=Math.max(0,Math.round((this.scrollTop-K)/this.lineHeight)),de=oe+re,ue=this.lineHeight;oe=y.screenToDocumentRow(oe,0);var Be=y.getFoldLine(oe);Be&&(oe=Be.start.row),ne=y.documentToScreenRow(oe,0),W=y.getRowLength(oe)*ue,de=Math.min(y.screenToDocumentRow(de,0),y.getLength()-1),G=P.scrollerHeight+y.getRowLength(de)*ue+W,K=this.scrollTop-ne*ue;var Ge=0;return(this.layerConfig.width!=I||k)&&(Ge=this.CHANGE_H_SCROLL),(k||Z)&&(Ge|=this.$updateCachedSize(!0,this.gutterWidth,P.width,P.height),this._signal("scrollbarVisibilityChanged"),Z&&(I=this.$getLongestLine())),this.layerConfig={width:I,padding:this.$padding,firstRow:oe,firstRowScreen:ne,lastRow:de,lineHeight:ue,characterWidth:this.characterWidth,minHeight:G,maxHeight:T,offset:K,gutterOffset:ue?Math.max(0,Math.ceil((K+P.height-P.scrollerHeight)/ue)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(I-this.$padding),Ge},this.$updateLines=function(){if(this.$changedLines){var y=this.$changedLines.firstRow,P=this.$changedLines.lastRow;this.$changedLines=null;var B=this.layerConfig;if(!(y>B.lastRow+1||P<B.firstRow))return P===1/0?(this.$showGutter&&this.$gutterLayer.update(B),void this.$textLayer.update(B)):(this.$textLayer.updateLines(B,y,P),!0)}},this.$getLongestLine=function(){var y=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(y+=1),this.$textLayer&&y>this.$textLayer.MAX_LINE_LENGTH&&(y=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(y*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(y,P){this.$gutterLayer.addGutterDecoration(y,P)},this.removeGutterDecoration=function(y,P){this.$gutterLayer.removeGutterDecoration(y,P)},this.updateBreakpoints=function(y){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(y){this.$gutterLayer.setAnnotations(y),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(y,P,B){this.scrollCursorIntoView(y,B),this.scrollCursorIntoView(P,B)},this.scrollCursorIntoView=function(y,P,B){if(this.$size.scrollerHeight!==0){var T=this.$cursorLayer.getPixelPosition(y),I=T.left,D=T.top,k=B&&B.top||0,U=B&&B.bottom||0,G=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;G+k>D?(P&&G+k>D+this.lineHeight&&(D-=P*this.$size.scrollerHeight),D===0&&(D=-this.scrollMargin.top),this.session.setScrollTop(D)):G+this.$size.scrollerHeight-U<D+this.lineHeight&&(P&&G+this.$size.scrollerHeight-U<D-this.lineHeight&&(D+=P*this.$size.scrollerHeight),this.session.setScrollTop(D+this.lineHeight+U-this.$size.scrollerHeight));var H=this.scrollLeft;H>I?(I<this.$padding+2*this.layerConfig.characterWidth&&(I=-this.scrollMargin.left),this.session.setScrollLeft(I)):H+this.$size.scrollerWidth<I+this.characterWidth?this.session.setScrollLeft(Math.round(I+this.characterWidth-this.$size.scrollerWidth)):H<=this.$padding&&I-H<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(y){this.session.setScrollTop(y*this.lineHeight)},this.alignCursor=function(y,P){typeof y=="number"&&(y={row:y,column:0});var B=this.$cursorLayer.getPixelPosition(y),T=this.$size.scrollerHeight-this.lineHeight,I=B.top-T*(P||0);return this.session.setScrollTop(I),I},this.STEPS=8,this.$calcSteps=function(y,P){var B,T,I=0,D=this.STEPS,k=[];for(I=0;I<D;++I)k.push((B=I/this.STEPS,T=y,(P-y)*(Math.pow(B-1,3)+1)+T));return k},this.scrollToLine=function(y,P,B,T){var I=this.$cursorLayer.getPixelPosition({row:y,column:0}).top;P&&(I-=this.$size.scrollerHeight/2);var D=this.scrollTop;this.session.setScrollTop(I),B!==!1&&this.animateScrolling(D,T)},this.animateScrolling=function(y,P){var B=this.scrollTop;if(this.$animatedScroll){var T=this;if(y!=B){if(this.$scrollAnimation){var I=this.$scrollAnimation.steps;if(I.length&&(y=I[0])==B)return}var D=T.$calcSteps(y,B);this.$scrollAnimation={from:y,to:B,steps:D},clearInterval(this.$timer),T.session.setScrollTop(D.shift()),T.session.$scrollTop=B,this.$timer=setInterval(function(){D.length?(T.session.setScrollTop(D.shift()),T.session.$scrollTop=B):B!=null?(T.session.$scrollTop=-1,T.session.setScrollTop(B),B=null):(T.$timer=clearInterval(T.$timer),T.$scrollAnimation=null,P&&P())},10)}}},this.scrollToY=function(y){this.scrollTop!==y&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=y)},this.scrollToX=function(y){this.scrollLeft!==y&&(this.scrollLeft=y),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(y,P){this.session.setScrollTop(P),this.session.setScrollLeft(P)},this.scrollBy=function(y,P){P&&this.session.setScrollTop(this.session.getScrollTop()+P),y&&this.session.setScrollLeft(this.session.getScrollLeft()+y)},this.isScrollableBy=function(y,P){return P<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||P>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||y<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||y>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0},this.pixelToScreenCoordinates=function(y,P){var B;if(this.$hasCssTransforms){B={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([y,P]);y=T[1]-this.gutterWidth-this.margin.left,P=T[0]}else B=this.scroller.getBoundingClientRect();var I=y+this.scrollLeft-B.left-this.$padding,D=I/this.characterWidth,k=Math.floor((P+this.scrollTop-B.top)/this.lineHeight),U=this.$blockCursor?Math.floor(D):Math.round(D);return{row:k,column:U,side:D-U>0?1:-1,offsetX:I}},this.screenToTextCoordinates=function(y,P){var B;if(this.$hasCssTransforms){B={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([y,P]);y=T[1]-this.gutterWidth-this.margin.left,P=T[0]}else B=this.scroller.getBoundingClientRect();var I=y+this.scrollLeft-B.left-this.$padding,D=I/this.characterWidth,k=this.$blockCursor?Math.floor(D):Math.round(D),U=Math.floor((P+this.scrollTop-B.top)/this.lineHeight);return this.session.screenToDocumentPosition(U,Math.max(k,0),I)},this.textToScreenCoordinates=function(y,P){var B=this.scroller.getBoundingClientRect(),T=this.session.documentToScreenPosition(y,P),I=this.$padding+(this.session.$bidiHandler.isBidiRow(T.row,y)?this.session.$bidiHandler.getPosLeft(T.column):Math.round(T.column*this.characterWidth)),D=T.row*this.lineHeight;return{pageX:B.left+I-this.scrollLeft,pageY:B.top+D-this.scrollTop}},this.visualizeFocus=function(){E.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){E.removeCssClass(this.container,"ace_focus")},this.showComposition=function(y){this.$composition=y,y.cssText||(y.cssText=this.textarea.style.cssText),y.useTextareaForIME=this.$useTextareaForIME,this.$useTextareaForIME?(E.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):y.markerId=this.session.addMarker(y.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(y){var P=this.session.selection.cursor;this.addToken(y,"composition_placeholder",P.row,P.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),E.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText,this.$composition=null,this.$cursorLayer.element.style.display="")},this.addToken=function(y,P,B,T){var I=this.session;I.bgTokenizer.lines[B]=null;var D={type:P,value:y},k=I.getTokens(B);if(T==null)k.push(D);else for(var U=0,G=0;G<k.length;G++){var H=k[G];if(T<=(U+=H.value.length)){var se=H.value.length-(U-T),ee=H.value.slice(0,se),Z=H.value.slice(se);k.splice(G,1,{type:H.type,value:ee},D,{type:H.type,value:Z});break}}this.updateLines(B,B)},this.setTheme=function(y,P){var B=this;if(this.$themeId=y,B._dispatchEvent("themeChange",{theme:y}),y&&typeof y!="string")I(y);else{var T=y||this.$options.theme.initialValue;p.loadModule(["theme",T],I)}function I(D){if(B.$themeId!=y)return P&&P();if(!D||!D.cssClass)throw new Error("couldn't load module "+y+" or it didn't call define");D.$id&&(B.$themeId=D.$id),E.importCssString(D.cssText,D.cssClass,B.container),B.theme&&E.removeCssClass(B.container,B.theme.cssClass);var k="padding"in D?D.padding:"padding"in(B.theme||{})?4:B.$padding;B.$padding&&k!=B.$padding&&B.setPadding(k),B.$theme=D.cssClass,B.theme=D,E.addCssClass(B.container,D.cssClass),E.setCssClass(B.container,"ace_dark",D.isDark),B.$size&&(B.$size.width=0,B.$updateSizeAsync()),B._dispatchEvent("themeLoaded",{theme:D}),P&&P()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(y,P){E.setCssClass(this.container,y,P!==!1)},this.unsetStyle=function(y){E.removeCssClass(this.container,y)},this.setCursorStyle=function(y){E.setStyle(this.scroller.style,"cursor",y)},this.setMouseCursor=function(y){E.setStyle(this.scroller.style,"cursor",y)},this.attachToShadowRoot=function(){E.importCssString(R,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy()}}).call(A.prototype),p.defineOptions(A.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(y){this.$textLayer.setShowInvisibles(y)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(y){typeof y=="number"&&(this.$printMarginColumn=y),this.$showPrintMargin=!!y,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(y){this.$gutter.style.display=y?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(y){E.setCssClass(this.$gutter,"ace_fade-fold-widgets",y)},initialValue:!1},showFoldWidgets:{set:function(y){this.$gutterLayer.setShowFoldWidgets(y),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(y){this.$textLayer.setDisplayIndentGuides(y)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(y){this.$gutterLayer.setHighlightGutterLine(y),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(y){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(y){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(y){typeof y=="number"&&(y+="px"),this.container.style.fontSize=y,this.updateFontSize()},initialValue:12},fontFamily:{set:function(y){this.container.style.fontFamily=y,this.updateFontSize()}},maxLines:{set:function(y){this.updateFull()}},minLines:{set:function(y){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(y){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(y){y=+y||0,this.$scrollPastEnd!=y&&(this.$scrollPastEnd=y,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(y){this.$gutterLayer.$fixedWidth=!!y,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(y){this.setTheme(y)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),f.VirtualRenderer=A}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(u,f,M){var a=u("../lib/oop"),E=u("../lib/net"),p=u("../lib/event_emitter").EventEmitter,d=u("../config");function s(t){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(d.get("loadWorkerFromBlob")){var c=function(v){var x="importScripts('"+E.qualifyURL(v)+"');";try{return new Blob([x],{type:"application/javascript"})}catch{var w=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return w.append(x),w.getBlob("application/javascript")}}(t),m=(window.URL||window.webkitURL).createObjectURL(c);return new Worker(m)}return new Worker(t)}var r=function(t){t.postMessage||(t=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=t,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){a.implement(this,p),this.$createWorkerFromOldConfig=function(t,c,m,v,x){if(u.nameToUrl&&!u.toUrl&&(u.toUrl=u.nameToUrl),d.get("packaged")||!u.toUrl)v=v||d.moduleUrl(c,"worker");else{var w=this.$normalizePath;v=v||w(u.toUrl("ace/worker/worker.js",null,"_"));var R={};t.forEach(function(S){R[S]=w(u.toUrl(S,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=s(v),x&&this.send("importScripts",x),this.$worker.postMessage({init:!0,tlns:R,module:c,classname:m}),this.$worker},this.onMessage=function(t){var c=t.data;switch(c.type){case"event":this._signal(c.name,{data:c.data});break;case"call":var m=this.callbacks[c.id];m&&(m(c.data),delete this.callbacks[c.id]);break;case"error":this.reportError(c.data);break;case"log":window.console&&console.log&&console.log.apply(console,c.data)}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return E.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,c){this.$worker.postMessage({command:t,args:c})},this.call=function(t,c,m){if(m){var v=this.callbackId++;this.callbacks[v]=m,c.push(v)}this.send(t,c)},this.emit=function(t,c){try{c.data&&c.data.err&&(c.data.err={message:c.data.err.message,stack:c.data.err.stack,code:c.data.err.code}),this.$worker.postMessage({event:t,data:{data:c.data}})}catch(m){console.error(m.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),t.action=="insert"?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))}}).call(r.prototype),f.UIWorkerClient=function(t,c,m){var v=null,x=!1,w=Object.create(p),R=[],S=new r({messageBuffer:R,terminate:function(){},postMessage:function(A){R.push(A),v&&(x?setTimeout(L):L())}});S.setEmitSync=function(A){x=A};var L=function(){var A=R.shift();A.command?v[A.command].apply(v,A.args):A.event&&w._signal(A.event,A.data)};return w.postMessage=function(A){S.onMessage({data:A})},w.callback=function(A,y){this.postMessage({type:"call",id:y,data:A})},w.emit=function(A,y){this.postMessage({type:"event",name:A,data:y})},d.loadModule(["worker",c],function(A){for(v=new A[m](w);R.length;)L()}),S},f.WorkerClient=r,f.createWorker=s}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(u,f,M){var a=u("./range").Range,E=u("./lib/event_emitter").EventEmitter,p=u("./lib/oop"),d=function(s,r,t,c,m,v){var x=this;this.length=r,this.session=s,this.doc=s.getDocument(),this.mainClass=m,this.othersClass=v,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=c,this.$onCursorChange=function(){setTimeout(function(){x.onCursorChange()})},this.$pos=t;var w=s.getUndoManager().$undoStack||s.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=w.length,this.setup(),s.selection.on("changeCursor",this.$onCursorChange)};(function(){p.implement(this,E),this.setup=function(){var s=this,r=this.doc,t=this.session;this.selectionBefore=t.selection.toJSON(),t.selection.inMultiSelectMode&&t.selection.toSingleRange(),this.pos=r.createAnchor(this.$pos.row,this.$pos.column);var c=this.pos;c.$insertRight=!0,c.detach(),c.markerId=t.addMarker(new a(c.row,c.column,c.row,c.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(m){var v=r.createAnchor(m.row,m.column);v.$insertRight=!0,v.detach(),s.others.push(v)}),t.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var s=this.session,r=this;this.othersActive=!0,this.others.forEach(function(t){t.markerId=s.addMarker(new a(t.row,t.column,t.row,t.column+r.length),r.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var s=0;s<this.others.length;s++)this.session.removeMarker(this.others[s].markerId)}},this.onUpdate=function(s){if(this.$updating)return this.updateAnchors(s);var r=s;if(r.start.row===r.end.row&&r.start.row===this.pos.row){this.$updating=!0;var t=s.action==="insert"?r.end.column-r.start.column:r.start.column-r.end.column,c=r.start.column>=this.pos.column&&r.start.column<=this.pos.column+this.length+1,m=r.start.column-this.pos.column;if(this.updateAnchors(s),c&&(this.length+=t),c&&!this.session.$fromUndo){if(s.action==="insert")for(var v=this.others.length-1;v>=0;v--){var x={row:(w=this.others[v]).row,column:w.column+m};this.doc.insertMergedLines(x,s.lines)}else if(s.action==="remove")for(v=this.others.length-1;v>=0;v--){var w;x={row:(w=this.others[v]).row,column:w.column+m},this.doc.remove(new a(x.row,x.column,x.row,x.column-t))}}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(s){this.pos.onChange(s);for(var r=this.others.length;r--;)this.others[r].onChange(s);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var s=this,r=this.session,t=function(m,v){r.removeMarker(m.markerId),m.markerId=r.addMarker(new a(m.row,m.column,m.row,m.column+s.length),v,null,!1)};t(this.pos,this.mainClass);for(var c=this.others.length;c--;)t(this.others[c],this.othersClass)}},this.onCursorChange=function(s){if(!this.$updating&&this.session){var r=this.session.selection.getCursor();r.row===this.pos.row&&r.column>=this.pos.column&&r.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",s)):(this.hideOtherMarkers(),this._emit("cursorLeave",s))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth!==-1){for(var s=this.session.getUndoManager(),r=(s.$undoStack||s.$undostack).length-this.$undoStackDepth,t=0;t<r;t++)s.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(d.prototype),f.PlaceHolder=d}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(u,f,M){var a=u("../lib/event"),E=u("../lib/useragent");function p(d,s){return d.row==s.row&&d.column==s.column}f.onMouseDown=function(d){var s=d.domEvent,r=s.altKey,t=s.shiftKey,c=s.ctrlKey,m=d.getAccelKey(),v=d.getButton();if(c&&E.isMac&&(v=s.button),d.editor.inMultiSelectMode&&v==2)d.editor.textInput.onContextMenu(d.domEvent);else if(c||r||m){if(v===0){var x,w=d.editor,R=w.selection,S=w.inMultiSelectMode,L=d.getDocumentPosition(),A=R.getCursor(),y=d.inSelection()||R.isEmpty()&&p(L,A),P=d.x,B=d.y,T=w.session,I=w.renderer.pixelToScreenCoordinates(P,B),D=I;if(w.$mouseHandler.$enableJumpToDef)c&&r||m&&r?x=t?"block":"add":r&&w.$blockSelectEnabled&&(x="block");else if(m&&!r){if(x="add",!S&&t)return}else r&&w.$blockSelectEnabled&&(x="block");if(x&&E.isMac&&s.ctrlKey&&w.$mouseHandler.cancelContextMenu(),x=="add"){if(!S&&y)return;if(!S){var k=R.toOrientedRange();w.addSelectionMarker(k)}var U=R.rangeList.rangeAtPoint(L);w.inVirtualSelectionMode=!0,t&&(U=null,k=R.ranges[0]||k,w.removeSelectionMarker(k)),w.once("mouseup",function(){var ne=R.toOrientedRange();U&&ne.isEmpty()&&p(U.cursor,ne.cursor)?R.substractPoint(ne.cursor):(t?R.substractPoint(k.cursor):k&&(w.removeSelectionMarker(k),R.addRange(k)),R.addRange(ne)),w.inVirtualSelectionMode=!1})}else if(x=="block"){var G;d.stop(),w.inVirtualSelectionMode=!0;var H=[],se=function(){var ne=w.renderer.pixelToScreenCoordinates(P,B),W=T.screenToDocumentPosition(ne.row,ne.column,ne.offsetX);p(D,ne)&&p(W,R.lead)||(D=ne,w.selection.moveToPosition(W),w.renderer.scrollCursorIntoView(),w.removeSelectionMarkers(H),H=R.rectangularRangeBlock(D,I),w.$mouseHandler.$clickSelection&&H.length==1&&H[0].isEmpty()&&(H[0]=w.$mouseHandler.$clickSelection.clone()),H.forEach(w.addSelectionMarker,w),w.updateSelectionMarkers())};S&&!m?R.toSingleRange():!S&&m&&(G=R.toOrientedRange(),w.addSelectionMarker(G)),t?I=T.documentToScreenPosition(R.lead):R.moveToPosition(L),D={row:-1,column:-1};var ee=se;a.capture(w.container,function(ne){P=ne.clientX,B=ne.clientY},function(ne){se(),clearInterval(Z),w.removeSelectionMarkers(H),H.length||(H=[R.toOrientedRange()]),G&&(w.removeSelectionMarker(G),R.toSingleRange(G));for(var W=0;W<H.length;W++)R.addRange(H[W]);w.inVirtualSelectionMode=!1,w.$mouseHandler.$clickSelection=null});var Z=setInterval(function(){ee()},20);return d.preventDefault()}}}else v===0&&d.editor.inMultiSelectMode&&d.editor.exitMultiSelectMode()}}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(u,f,M){f.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(E){E.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(E){E.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(E){E.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(E){E.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(E){E.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(E){E.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(E){E.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(E){E.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",description:"Split into lines",exec:function(E){E.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(E){E.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(E){E.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],f.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(E){E.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(E){return E&&E.inMultiSelectMode}}];var a=u("../keyboard/hash_handler").HashHandler;f.keyboardHandler=new a(f.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(u,f,M){var a=u("./range_list").RangeList,E=u("./range").Range,p=u("./selection").Selection,d=u("./mouse/multi_select_handler").onMouseDown,s=u("./lib/event"),r=u("./lib/lang"),t=u("./commands/multi_select_commands");f.commands=t.defaultCommands.concat(t.multiSelectCommands);var c=new(u("./search")).Search,m=u("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(m.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(w,R){if(w){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(w),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),R||this.fromOrientedRange(w);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}w.cursor||(w.cursor=w.end);var L=this.rangeList.add(w);return this.$onAddRange(w),L.length&&this.$onRemoveRange(L),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),R||this.fromOrientedRange(w)}},this.toSingleRange=function(w){w=w||this.ranges[0];var R=this.rangeList.removeAll();R.length&&this.$onRemoveRange(R),w&&this.fromOrientedRange(w)},this.substractPoint=function(w){var R=this.rangeList.substractPoint(w);if(R)return this.$onRemoveRange(R),R[0]},this.mergeOverlappingRanges=function(){var w=this.rangeList.merge();w.length&&this.$onRemoveRange(w)},this.$onAddRange=function(w){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(w),this._signal("addRange",{range:w})},this.$onRemoveRange=function(w){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var R=this.rangeList.ranges.pop();w.push(R),this.rangeCount=0}for(var S=w.length;S--;){var L=this.ranges.indexOf(w[S]);this.ranges.splice(L,1)}this._signal("removeRange",{ranges:w}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(R=R||this.ranges[0])&&!R.isEqual(this.getRange())&&this.fromOrientedRange(R)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var w=this.rangeList.ranges,R=w[w.length-1],S=E.fromPoints(w[0].start,R.end);this.toSingleRange(),this.setSelectionRange(S,R.cursor==R.start)}else{S=this.getRange();var L=this.isBackwards(),A=S.start.row,y=S.end.row;if(A==y){if(L)var P=S.end,B=S.start;else P=S.start,B=S.end;return this.addRange(E.fromPoints(B,B)),void this.addRange(E.fromPoints(P,P))}var T=[],I=this.getLineRange(A,!0);I.start.column=S.start.column,T.push(I);for(var D=A+1;D<y;D++)T.push(this.getLineRange(D,!0));(I=this.getLineRange(y,!0)).end.column=S.end.column,T.push(I),T.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var w=this.rangeList.ranges,R=w[w.length-1],S=E.fromPoints(w[0].start,R.end);this.toSingleRange(),this.setSelectionRange(S,R.cursor==R.start)}else{var L=this.session.documentToScreenPosition(this.cursor),A=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(L,A).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(w,R,S){var L=[],A=w.column<R.column;if(A)var y=w.column,P=R.column,B=w.offsetX,T=R.offsetX;else y=R.column,P=w.column,B=R.offsetX,T=w.offsetX;var I,D,k,U=w.row<R.row;if(U)var G=w.row,H=R.row;else G=R.row,H=w.row;y<0&&(y=0),G<0&&(G=0),G==H&&(S=!0);for(var se=G;se<=H;se++){var ee=E.fromPoints(this.session.screenToDocumentPosition(se,y,B),this.session.screenToDocumentPosition(se,P,T));if(ee.isEmpty()){if(I&&(k=I,(D=ee.end).row==k.row&&D.column==k.column))break;I=ee.end}ee.cursor=A?ee.start:ee.end,L.push(ee)}if(U&&L.reverse(),!S){for(var Z=L.length-1;L[Z].isEmpty()&&Z>0;)Z--;if(Z>0)for(var ne=0;L[ne].isEmpty();)ne++;for(var W=Z;W>=ne;W--)L[W].isEmpty()&&L.splice(W,1)}return L}}.call(p.prototype);var v=u("./editor").Editor;function x(w){w.$multiselectOnSessionChange||(w.$onAddRange=w.$onAddRange.bind(w),w.$onRemoveRange=w.$onRemoveRange.bind(w),w.$onMultiSelect=w.$onMultiSelect.bind(w),w.$onSingleSelect=w.$onSingleSelect.bind(w),w.$multiselectOnSessionChange=f.onSessionChange.bind(w),w.$checkMultiselectChange=w.$checkMultiselectChange.bind(w),w.$multiselectOnSessionChange(w),w.on("changeSession",w.$multiselectOnSessionChange),w.on("mousedown",d),w.commands.addCommands(t.defaultCommands),function(R){if(R.textInput){var S=R.textInput.getElement(),L=!1;s.addListener(S,"keydown",function(y){var P=y.keyCode==18&&!(y.ctrlKey||y.shiftKey||y.metaKey);R.$blockSelectEnabled&&P?L||(R.renderer.setMouseCursor("crosshair"),L=!0):L&&A()}),s.addListener(S,"keyup",A),s.addListener(S,"blur",A)}function A(y){L&&(R.renderer.setMouseCursor(""),L=!1)}}(w))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(w){w.cursor||(w.cursor=w.end);var R=this.getSelectionStyle();return w.marker=this.session.addMarker(w,"ace_selection",R),this.session.$selectionMarkers.push(w),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,w},this.removeSelectionMarker=function(w){if(w.marker){this.session.removeMarker(w.marker);var R=this.session.$selectionMarkers.indexOf(w);R!=-1&&this.session.$selectionMarkers.splice(R,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(w){for(var R=this.session.$selectionMarkers,S=w.length;S--;){var L=w[S];if(L.marker){this.session.removeMarker(L.marker);var A=R.indexOf(L);A!=-1&&R.splice(A,1)}}this.session.selectionMarkerCount=R.length},this.$onAddRange=function(w){this.addSelectionMarker(w.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(w){this.removeSelectionMarkers(w.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(w){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(t.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(w){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(t.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(w){var R=w.command,S=w.editor;if(S.multiSelect){if(R.multiSelectAction)R.multiSelectAction=="forEach"?L=S.forEachSelection(R,w.args):R.multiSelectAction=="forEachLine"?L=S.forEachSelection(R,w.args,!0):R.multiSelectAction=="single"?(S.exitMultiSelectMode(),L=R.exec(S,w.args||{})):L=R.multiSelectAction(S,w.args||{});else{var L=R.exec(S,w.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return L}},this.forEachSelection=function(w,R,S){if(!this.inVirtualSelectionMode){var L,A=S&&S.keepOrder,y=S==1||S&&S.$byLines,P=this.session,B=this.selection,T=B.rangeList,I=(A?B:T).ranges;if(!I.length)return w.exec?w.exec(this,R||{}):w(this,R||{});var D=B._eventRegistry;B._eventRegistry={};var k=new p(P);this.inVirtualSelectionMode=!0;for(var U=I.length;U--;){if(y)for(;U>0&&I[U].start.row==I[U-1].end.row;)U--;k.fromOrientedRange(I[U]),k.index=U,this.selection=P.selection=k;var G=w.exec?w.exec(this,R||{}):w(this,R||{});L||G===void 0||(L=G),k.toOrientedRange(I[U])}k.detach(),this.selection=P.selection=B,this.inVirtualSelectionMode=!1,B._eventRegistry=D,B.mergeOverlappingRanges(),B.ranges[0]&&B.fromOrientedRange(B.ranges[0]);var H=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),H&&H.from==H.to&&this.renderer.animateScrolling(H.from),L}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var w="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var R=this.multiSelect.rangeList.ranges,S=[],L=0;L<R.length;L++)S.push(this.session.getTextRange(R[L]));var A=this.session.getDocument().getNewLineCharacter();(w=S.join(A)).length==(S.length-1)*A.length&&(w="")}else this.selection.isEmpty()||(w=this.session.getTextRange(this.getSelectionRange()));return w},this.$checkMultiselectChange=function(w,R){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&R==this.multiSelect.anchor)return;var L=R==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;L.row!=R.row||this.session.$clipPositionToDocument(L.row,L.column).column!=R.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(w,R,S){if((R=R||{}).needle=w||R.needle,R.needle==null){var L=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();R.needle=this.session.getTextRange(L)}this.$search.set(R);var A=this.$search.findAll(this.session);if(!A.length)return 0;var y=this.multiSelect;S||y.toSingleRange(A[0]);for(var P=A.length;P--;)y.addRange(A[P],!0);return L&&y.rangeList.rangeAtPoint(L.start)&&y.addRange(L,!0),A.length},this.selectMoreLines=function(w,R){var S=this.selection.toOrientedRange(),L=S.cursor==S.end,A=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(A.column=this.selection.$desiredColumn);var y,P=this.session.screenToDocumentPosition(A.row+w,A.column);if(S.isEmpty())T=P;else var B=this.session.documentToScreenPosition(L?S.end:S.start),T=this.session.screenToDocumentPosition(B.row+w,B.column);if(L?(y=E.fromPoints(P,T)).cursor=y.start:(y=E.fromPoints(T,P)).cursor=y.end,y.desiredColumn=A.column,this.selection.inMultiSelectMode){if(R)var I=S.cursor}else this.selection.addRange(S);this.selection.addRange(y),I&&this.selection.substractPoint(I)},this.transposeSelections=function(w){for(var R=this.session,S=R.multiSelect,L=S.ranges,A=L.length;A--;)if((B=L[A]).isEmpty()){var y=R.getWordRange(B.start.row,B.start.column);B.start.row=y.start.row,B.start.column=y.start.column,B.end.row=y.end.row,B.end.column=y.end.column}S.mergeOverlappingRanges();var P=[];for(A=L.length;A--;){var B=L[A];P.unshift(R.getTextRange(B))}for(w<0?P.unshift(P.pop()):P.push(P.shift()),A=L.length;A--;)y=(B=L[A]).clone(),R.replace(B,P[A]),B.start.row=y.start.row,B.start.column=y.start.column;S.fromOrientedRange(S.ranges[0])},this.selectMore=function(w,R,S){var L=this.session,A=L.multiSelect.toOrientedRange();if(!A.isEmpty()||((A=L.getWordRange(A.start.row,A.start.column)).cursor=w==-1?A.start:A.end,this.multiSelect.addRange(A),!S)){var y=L.getTextRange(A),P=function(B,T,I){return c.$options.wrap=!0,c.$options.needle=T,c.$options.backwards=I==-1,c.find(B)}(L,y,w);P&&(P.cursor=w==-1?P.start:P.end,this.session.unfold(P),this.multiSelect.addRange(P),this.renderer.scrollCursorIntoView(null,.5)),R&&this.multiSelect.substractPoint(A.cursor)}},this.alignCursors=function(){var w=this.session,R=w.multiSelect,S=R.ranges,L=-1,A=S.filter(function(se){if(se.cursor.row==L)return!0;L=se.cursor.row});if(S.length&&A.length!=S.length-1){A.forEach(function(se){R.substractPoint(se.cursor)});var y=0,P=1/0,B=S.map(function(se){var ee=se.cursor,Z=w.getLine(ee.row).substr(ee.column).search(/\S/g);return Z==-1&&(Z=0),ee.column>y&&(y=ee.column),Z<P&&(P=Z),Z});S.forEach(function(se,ee){var Z=se.cursor,ne=y-Z.column,W=B[ee]-P;ne>W?w.insert(Z,r.stringRepeat(" ",ne-W)):w.remove(new E(Z.row,Z.column,Z.row,Z.column-ne+W)),se.start.column=se.end.column=y,se.start.row=se.end.row=Z.row,se.cursor=se.end}),R.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var T=this.selection.getRange(),I=T.start.row,D=T.end.row,k=I==D;if(k){var U,G=this.session.getLength();do U=this.session.getLine(D);while(/[=:]/.test(U)&&++D<G);do U=this.session.getLine(I);while(/[=:]/.test(U)&&--I>0);I<0&&(I=0),D>=G&&(D=G-1)}var H=this.session.removeFullLines(I,D);H=this.$reAlignText(H,k),this.session.insert({row:I,column:0},H.join(`
`)+`
`),k||(T.start.column=0,T.end.column=H[H.length-1].length),this.selection.setRange(T)}},this.$reAlignText=function(w,R){var S,L,A,y=!0,P=!0;return w.map(function(I){var D=I.match(/(\s*)(.*?)(\s*)([=:].*)/);return D?S==null?(S=D[1].length,L=D[2].length,A=D[3].length,D):(S+L+A!=D[1].length+D[2].length+D[3].length&&(P=!1),S!=D[1].length&&(y=!1),S>D[1].length&&(S=D[1].length),L<D[2].length&&(L=D[2].length),A>D[3].length&&(A=D[3].length),D):[I]}).map(R?T:y?P?function(I){return I[2]?B(S+L-I[2].length)+I[2]+B(A)+I[4].replace(/^([=:])\s+/,"$1 "):I[0]}:T:function(I){return I[2]?B(S)+I[2]+B(A)+I[4].replace(/^([=:])\s+/,"$1 "):I[0]});function B(I){return r.stringRepeat(" ",I)}function T(I){return I[2]?B(S)+I[2]+B(L-I[2].length+A)+I[4].replace(/^([=:])\s+/,"$1 "):I[0]}}}).call(v.prototype),f.onSessionChange=function(w){var R=w.session;R&&!R.multiSelect&&(R.$selectionMarkers=[],R.selection.$initRangeList(),R.multiSelect=R.selection),this.multiSelect=R&&R.multiSelect;var S=w.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),R&&(R.multiSelect.on("addRange",this.$onAddRange),R.multiSelect.on("removeRange",this.$onRemoveRange),R.multiSelect.on("multiSelect",this.$onMultiSelect),R.multiSelect.on("singleSelect",this.$onSingleSelect),R.multiSelect.lead.on("change",this.$checkMultiselectChange),R.multiSelect.anchor.on("change",this.$checkMultiselectChange)),R&&this.inMultiSelectMode!=R.selection.inMultiSelectMode&&(R.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},f.MultiSelect=x,u("./config").defineOptions(v.prototype,"editor",{enableMultiselect:{set:function(w){x(this),w?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",d)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",d))},value:!0},enableBlockSelect:{set:function(w){this.$blockSelectEnabled=w},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(u,f,M){var a=u("../../range").Range,E=f.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(p,d,s){var r=p.getLine(s);return this.foldingStartMarker.test(r)?"start":d=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(p,d,s){return null},this.indentationBlock=function(p,d,s){var r=/\S/,t=p.getLine(d),c=t.search(r);if(c!=-1){for(var m=s||t.length,v=p.getLength(),x=d,w=d;++d<v;){var R=p.getLine(d).search(r);if(R!=-1){if(R<=c){var S=p.getTokenAt(d,0);if(!S||S.type!=="string")break}w=d}}if(w>x){var L=p.getLine(w).length;return new a(x,m,w,L)}}},this.openingBracketBlock=function(p,d,s,r,t){var c={row:s,column:r+1},m=p.$findClosingBracket(d,c,t);if(m){var v=p.foldWidgets[m.row];return v==null&&(v=p.getFoldWidget(m.row)),v=="start"&&m.row>c.row&&(m.row--,m.column=p.getLine(m.row).length),a.fromPoints(c,m)}},this.closingBracketBlock=function(p,d,s,r,t){var c={row:s,column:r},m=p.$findOpeningBracket(d,c);if(m)return m.column++,c.column--,a.fromPoints(m,c)}}).call(E.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(u,f,M){f.isDark=!1,f.cssClass="ace-tm",f.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',f.$id="ace/theme/textmate",u("../lib/dom").importCssString(f.cssText,f.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(u,f,M){u("./lib/oop");var a=u("./lib/dom");function E(p){this.session=p,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}u("./range").Range,function(){this.getRowLength=function(p){var d;return d=this.lineWidgets&&this.lineWidgets[p]&&this.lineWidgets[p].rowCount||0,this.$useWrapMode&&this.$wrapData[p]?this.$wrapData[p].length+1+d:1+d},this.$getWidgetScreenLength=function(){var p=0;return this.lineWidgets.forEach(function(d){d&&d.rowCount&&!d.hidden&&(p+=d.rowCount)}),p},this.$onChangeEditor=function(p){this.attach(p.editor)},this.attach=function(p){p&&p.widgetManager&&p.widgetManager!=this&&p.widgetManager.detach(),this.editor!=p&&(this.detach(),this.editor=p,p&&(p.widgetManager=this,p.renderer.on("beforeRender",this.measureWidgets),p.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(p){var d=this.editor;if(d){this.editor=null,d.widgetManager=null,d.renderer.off("beforeRender",this.measureWidgets),d.renderer.off("afterRender",this.renderWidgets);var s=this.session.lineWidgets;s&&s.forEach(function(r){r&&r.el&&r.el.parentNode&&(r._inDocument=!1,r.el.parentNode.removeChild(r.el))})}},this.updateOnFold=function(p,d){var s=d.lineWidgets;if(s&&p.action){for(var r=p.data,t=r.start.row,c=r.end.row,m=p.action=="add",v=t+1;v<c;v++)s[v]&&(s[v].hidden=m);s[c]&&(m?s[t]?s[c].hidden=m:s[t]=s[c]:(s[t]==s[c]&&(s[t]=void 0),s[c].hidden=m))}},this.updateOnChange=function(p){var d=this.session.lineWidgets;if(d){var s=p.start.row,r=p.end.row-s;if(r!==0)if(p.action=="remove")d.splice(s+1,r).forEach(function(c){c&&this.removeLineWidget(c)},this),this.$updateRows();else{var t=new Array(r);t.unshift(s,0),d.splice.apply(d,t),this.$updateRows()}}},this.$updateRows=function(){var p=this.session.lineWidgets;if(p){var d=!0;p.forEach(function(s,r){if(s)for(d=!1,s.row=r;s.$oldWidget;)s.$oldWidget.row=r,s=s.$oldWidget}),d&&(this.session.lineWidgets=null)}},this.addLineWidget=function(p){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var d=this.session.lineWidgets[p.row];d&&(p.$oldWidget=d,d.el&&d.el.parentNode&&(d.el.parentNode.removeChild(d.el),d._inDocument=!1)),this.session.lineWidgets[p.row]=p,p.session=this.session;var s=this.editor.renderer;p.html&&!p.el&&(p.el=a.createElement("div"),p.el.innerHTML=p.html),p.el&&(a.addCssClass(p.el,"ace_lineWidgetContainer"),p.el.style.position="absolute",p.el.style.zIndex=5,s.container.appendChild(p.el),p._inDocument=!0),p.coverGutter||(p.el.style.zIndex=3),p.pixelHeight==null&&(p.pixelHeight=p.el.offsetHeight),p.rowCount==null&&(p.rowCount=p.pixelHeight/s.layerConfig.lineHeight);var r=this.session.getFoldAt(p.row,0);if(p.$fold=r,r){var t=this.session.lineWidgets;p.row!=r.end.row||t[r.start.row]?p.hidden=!0:t[r.start.row]=p}return this.session._emit("changeFold",{data:{start:{row:p.row}}}),this.$updateRows(),this.renderWidgets(null,s),this.onWidgetChanged(p),p},this.removeLineWidget=function(p){if(p._inDocument=!1,p.session=null,p.el&&p.el.parentNode&&p.el.parentNode.removeChild(p.el),p.editor&&p.editor.destroy)try{p.editor.destroy()}catch{}if(this.session.lineWidgets){var d=this.session.lineWidgets[p.row];if(d==p)this.session.lineWidgets[p.row]=p.$oldWidget,p.$oldWidget&&this.onWidgetChanged(p.$oldWidget);else for(;d;){if(d.$oldWidget==p){d.$oldWidget=p.$oldWidget;break}d=d.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:p.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(p){for(var d=this.session.lineWidgets,s=d&&d[p],r=[];s;)r.push(s),s=s.$oldWidget;return r},this.onWidgetChanged=function(p){this.session._changedWidgets.push(p),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(p,d){var s=this.session._changedWidgets,r=d.layerConfig;if(s&&s.length){for(var t=1/0,c=0;c<s.length;c++){var m=s[c];if(m&&m.el&&m.session==this.session){if(!m._inDocument){if(this.session.lineWidgets[m.row]!=m)continue;m._inDocument=!0,d.container.appendChild(m.el)}m.h=m.el.offsetHeight,m.fixedWidth||(m.w=m.el.offsetWidth,m.screenWidth=Math.ceil(m.w/r.characterWidth));var v=m.h/r.lineHeight;m.coverLine&&(v-=this.session.getRowLineCount(m.row))<0&&(v=0),m.rowCount!=v&&(m.rowCount=v,m.row<t&&(t=m.row))}}t!=1/0&&(this.session._emit("changeFold",{data:{start:{row:t}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(p,d){var s=d.layerConfig,r=this.session.lineWidgets;if(r){for(var t=Math.min(this.firstRow,s.firstRow),c=Math.max(this.lastRow,s.lastRow,r.length);t>0&&!r[t];)t--;this.firstRow=s.firstRow,this.lastRow=s.lastRow,d.$cursorLayer.config=s;for(var m=t;m<=c;m++){var v=r[m];if(v&&v.el)if(v.hidden)v.el.style.top=-100-(v.pixelHeight||0)+"px";else{v._inDocument||(v._inDocument=!0,d.container.appendChild(v.el));var x=d.$cursorLayer.getPixelPosition({row:m,column:0},!0).top;v.coverLine||(x+=s.lineHeight*this.session.getRowLineCount(v.row)),v.el.style.top=x-s.offset+"px";var w=v.coverGutter?0:d.gutterWidth;v.fixedWidth||(w-=d.scrollLeft),v.el.style.left=w+"px",v.fullWidth&&v.screenWidth&&(v.el.style.minWidth=s.width+2*s.padding+"px"),v.fixedWidth?v.el.style.right=d.scrollBar.getWidth()+"px":v.el.style.right=""}}}}}.call(E.prototype),f.LineWidgets=E}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(u,f,M){var a=u("../line_widgets").LineWidgets,E=u("../lib/dom"),p=u("../range").Range;f.showErrorMarker=function(d,s){var r=d.session;r.widgetManager||(r.widgetManager=new a(r),r.widgetManager.attach(d));var t=d.getCursorPosition(),c=t.row,m=r.widgetManager.getWidgetsAtRow(c).filter(function(P){return P.type=="errorMarker"})[0];m?m.destroy():c-=s;var v,x=function(P,B,T){var I=P.getAnnotations().sort(p.comparePoints);if(I.length){var D=function(G,H,se){for(var ee=0,Z=G.length-1;ee<=Z;){var ne=ee+Z>>1,W=se(H,G[ne]);if(W>0)ee=ne+1;else{if(!(W<0))return ne;Z=ne-1}}return-(ee+1)}(I,{row:B,column:-1},p.comparePoints);D<0&&(D=-D-1),D>=I.length?D=T>0?0:I.length-1:D===0&&T<0&&(D=I.length-1);var k=I[D];if(k&&T){if(k.row===B){do k=I[D+=T];while(k&&k.row===B);if(!k)return I.slice()}var U=[];B=k.row;do U[T<0?"unshift":"push"](k),k=I[D+=T];while(k&&k.row==B);return U.length&&U}}}(r,c,s);if(x){var w=x[0];t.column=(w.pos&&typeof w.column!="number"?w.pos.sc:w.column)||0,t.row=w.row,v=d.renderer.$gutterLayer.$annotations[t.row]}else{if(m)return;v={text:["Looks good!"],className:"ace_ok"}}d.session.unfold(t.row),d.selection.moveToPosition(t);var R={row:t.row,fixedWidth:!0,coverGutter:!0,el:E.createElement("div"),type:"errorMarker"},S=R.el.appendChild(E.createElement("div")),L=R.el.appendChild(E.createElement("div"));L.className="error_widget_arrow "+v.className;var A=d.renderer.$cursorLayer.getPixelPosition(t).left;L.style.left=A+d.renderer.gutterWidth-5+"px",R.el.className="error_widget_wrapper",S.className="error_widget "+v.className,S.innerHTML=v.text.join("<br>"),S.appendChild(E.createElement("div"));var y=function(P,B,T){if(B===0&&(T==="esc"||T==="return"))return R.destroy(),{command:"null"}};R.destroy=function(){d.$mouseHandler.isMousePressed||(d.keyBinding.removeKeyboardHandler(y),r.widgetManager.removeLineWidget(R),d.off("changeSelection",R.destroy),d.off("changeSession",R.destroy),d.off("mouseup",R.destroy),d.off("change",R.destroy))},d.keyBinding.addKeyboardHandler(y),d.on("changeSelection",R.destroy),d.on("changeSession",R.destroy),d.on("mouseup",R.destroy),d.on("change",R.destroy),d.session.widgetManager.addLineWidget(R),R.el.onmousedown=d.focus.bind(d),d.renderer.scrollCursorIntoView(null,.5,{bottom:R.el.offsetHeight})},E.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(u,f,M){u("./lib/fixoldbrowsers");var a=u("./lib/dom"),E=u("./lib/event"),p=u("./range").Range,d=u("./editor").Editor,s=u("./edit_session").EditSession,r=u("./undomanager").UndoManager,t=u("./virtual_renderer").VirtualRenderer;u("./worker/worker_client"),u("./keyboard/hash_handler"),u("./placeholder"),u("./multi_select"),u("./mode/folding/fold_mode"),u("./theme/textmate"),u("./ext/error_marker"),f.config=u("./config"),f.require=u,f.define=g.amdD,f.edit=function(c,m){if(typeof c=="string"){var v=c;if(!(c=document.getElementById(v)))throw new Error("ace.edit can't find div #"+v)}if(c&&c.env&&c.env.editor instanceof d)return c.env.editor;var x="";if(c&&/input|textarea/i.test(c.tagName)){var w=c;x=w.value,c=a.createElement("pre"),w.parentNode.replaceChild(c,w)}else c&&(x=c.textContent,c.innerHTML="");var R=f.createEditSession(x),S=new d(new t(c),R,m),L={document:R,editor:S,onResize:S.resize.bind(S,null)};return w&&(L.textarea=w),E.addListener(window,"resize",L.onResize),S.on("destroy",function(){E.removeListener(window,"resize",L.onResize),L.editor.container.env=null}),S.container.env=S.env=L,S},f.createEditSession=function(c,m){var v=new s(c,m);return v.setUndoManager(new r),v},f.Range=p,f.Editor=d,f.EditSession=s,f.UndoManager=r,f.VirtualRenderer=t,f.version=f.config.version}),ace.require(["ace/ace"],function(u){for(var f in u&&(u.config.init(!0),u.define=ace.define),window.ace||(window.ace=u),u)u.hasOwnProperty(f)&&(window.ace[f]=u[f]);window.ace.default=window.ace,h&&(h.exports=window.ace)}),h.exports={ace}},655:(h,_,g)=>{var u=g(379),f=g.n(u),M=g(795),a=g.n(M),E=g(569),p=g.n(E),d=g(565),s=g.n(d),r=g(216),t=g.n(r),c=g(589),m=g.n(c),v=g(827),x={};x.styleTagTransform=m(),x.setAttributes=s(),x.insert=p().bind(null,"html"),x.domAPI=a(),x.insertStyleElement=t(),f()(v.Z,x),v.Z&&v.Z.locals&&v.Z.locals},379:h=>{var _=[];function g(M){for(var a=-1,E=0;E<_.length;E++)if(_[E].identifier===M){a=E;break}return a}function u(M,a){for(var E={},p=[],d=0;d<M.length;d++){var s=M[d],r=a.base?s[0]+a.base:s[0],t=E[r]||0,c="".concat(r," ").concat(t);E[r]=t+1;var m=g(c),v={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(m!==-1)_[m].references++,_[m].updater(v);else{var x=f(v,a);a.byIndex=d,_.splice(d,0,{identifier:c,updater:x,references:1})}p.push(c)}return p}function f(M,a){var E=a.domAPI(a);return E.update(M),function(p){if(p){if(p.css===M.css&&p.media===M.media&&p.sourceMap===M.sourceMap&&p.supports===M.supports&&p.layer===M.layer)return;E.update(M=p)}else E.remove()}}h.exports=function(M,a){var E=u(M=M||[],a=a||{});return function(p){p=p||[];for(var d=0;d<E.length;d++){var s=g(E[d]);_[s].references--}for(var r=u(p,a),t=0;t<E.length;t++){var c=g(E[t]);_[c].references===0&&(_[c].updater(),_.splice(c,1))}E=r}}},569:h=>{var _={};h.exports=function(g,u){var f=function(M){if(_[M]===void 0){var a=document.querySelector(M);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch{a=null}_[M]=a}return _[M]}(g);if(!f)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");f.appendChild(u)}},216:h=>{h.exports=function(_){var g=document.createElement("style");return _.setAttributes(g,_.attributes),_.insert(g,_.options),g}},565:(h,_,g)=>{h.exports=function(u){var f=g.nc;f&&u.setAttribute("nonce",f)}},795:h=>{h.exports=function(_){var g=_.insertStyleElement(_);return{update:function(u){(function(f,M,a){var E="";a.supports&&(E+="@supports (".concat(a.supports,") {")),a.media&&(E+="@media ".concat(a.media," {"));var p=a.layer!==void 0;p&&(E+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),E+=a.css,p&&(E+="}"),a.media&&(E+="}"),a.supports&&(E+="}");var d=a.sourceMap;d&&typeof btoa<"u"&&(E+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(d))))," */")),M.styleTagTransform(E,f,M.options)})(g,_,u)},remove:function(){(function(u){if(u.parentNode===null)return!1;u.parentNode.removeChild(u)})(g)}}}},589:h=>{h.exports=function(_,g){if(g.styleSheet)g.styleSheet.cssText=_;else{for(;g.firstChild;)g.removeChild(g.firstChild);g.appendChild(document.createTextNode(_))}}},986:(h,_,g)=>{g.r(_),g.d(_,{EmbeddedFrontend:()=>wi,Spector:()=>Ti});class u{static isBuildableProgram(o){return!!o&&!!o[this.rebuildProgramFunctionName]}static rebuildProgram(o,b,N,F,$){this.isBuildableProgram(o)&&o[this.rebuildProgramFunctionName](b,N,F,$)}}var f;u.rebuildProgramFunctionName="__SPECTOR_rebuildProgram",function(De){De[De.noLog=0]="noLog",De[De.error=1]="error",De[De.warning=2]="warning",De[De.info=3]="info"}(f||(f={}));class M{static error(o,...b){this.level>0&&console.error(o,b)}static warn(o,...b){this.level>1&&console.warn(o,b)}static info(o,...b){this.level>2&&console.log(o,b)}}M.level=f.warning;class a{constructor(){this.callbacks=[],this.counter=-1}add(o,b){return this.counter++,b&&(o=o.bind(b)),this.callbacks[this.counter]=o,this.counter}remove(o){delete this.callbacks[o]}clear(){this.callbacks={}}trigger(o){for(const b in this.callbacks)this.callbacks.hasOwnProperty(b)&&this.callbacks[b](o)}}class E{constructor(){if(window.performance&&window.performance.now)this.nowFunction=this.dateBasedPerformanceNow.bind(this);else{const o=new Date;this.nowFunction=o.getTime.bind(o)}}dateBasedPerformanceNow(){return performance.timing.navigationStart+performance.now()}static get now(){return E.instance.nowFunction()}}E.instance=new E;class p{constructor(o){this.options=o}appendAnalysis(o){o.analyses=o.analyses||[];const b=this.getAnalysis(o);o.analyses.push(b)}getAnalysis(o){const b={analyserName:this.analyserName};return this.appendToAnalysis(o,b),b}}class d extends p{get analyserName(){return d.analyserName}appendToAnalysis(o,b){if(!o.commands)return;const N={};for(const $ of o.commands)N[$.name]=N[$.name]||0,N[$.name]++;const F=Object.keys(N).map($=>[$,N[$]]);F.sort(($,J)=>{const ae=J[1]-$[1];return ae===0?$[0].localeCompare(J[0]):ae});for(const $ of F)b[$[0]]=$[1]}}d.analyserName="Commands";const s=["drawArrays","drawElements","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","drawRangeElements","multiDrawArraysWEBGL","multiDrawElementsWEBGL","multiDrawArraysInstancedWEBGL","multiDrawElementsInstancedWEBGL","multiDrawArraysInstancedBaseInstanceWEBGL","multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL","drawArraysInstancedBaseInstanceWEBGL","drawElementsInstancedBaseVertexBaseInstanceWEBGL"];class r extends p{get analyserName(){return r.analyserName}appendToAnalysis(o,b){if(o.commands){b.total=o.commands.length,b.draw=0,b.clear=0;for(const N of o.commands)N.name==="clear"?b.clear++:s.indexOf(N.name)>-1&&b.draw++}}}r.analyserName="CommandsSummary";class t{static isWebGlConstant(o){return m[o]!==null&&m[o]!==void 0}static stringifyWebGlConstant(o,b){if(o==null)return"";if(o===0)return this.zeroMeaningByCommand[b]||"0";if(o===1)return this.oneMeaningByCommand[b]||"1";const N=m[o];return N?N.name:o+""}}t.DEPTH_BUFFER_BIT={name:"DEPTH_BUFFER_BIT",value:256,description:"Passed to clear to clear the current depth buffer."},t.STENCIL_BUFFER_BIT={name:"STENCIL_BUFFER_BIT",value:1024,description:"Passed to clear to clear the current stencil buffer."},t.COLOR_BUFFER_BIT={name:"COLOR_BUFFER_BIT",value:16384,description:"Passed to clear to clear the current color buffer."},t.POINTS={name:"POINTS",value:0,description:"Passed to drawElements or drawArrays to draw single points."},t.LINES={name:"LINES",value:1,description:"Passed to drawElements or drawArrays to draw lines. Each vertex connects to the one after it."},t.LINE_LOOP={name:"LINE_LOOP",value:2,description:"Passed to drawElements or drawArrays to draw lines. Each set of two vertices is treated as a separate line segment."},t.LINE_STRIP={name:"LINE_STRIP",value:3,description:"Passed to drawElements or drawArrays to draw a connected group of line segments from the first vertex to the last."},t.TRIANGLES={name:"TRIANGLES",value:4,description:"Passed to drawElements or drawArrays to draw triangles. Each set of three vertices creates a separate triangle."},t.TRIANGLE_STRIP={name:"TRIANGLE_STRIP",value:5,description:"Passed to drawElements or drawArrays to draw a connected group of triangles."},t.TRIANGLE_FAN={name:"TRIANGLE_FAN",value:6,description:"Passed to drawElements or drawArrays to draw a connected group of triangles. Each vertex connects to the previous and the first vertex in the fan."},t.ZERO={name:"ZERO",value:0,description:"Passed to blendFunc or blendFuncSeparate to turn off a component."},t.ONE={name:"ONE",value:1,description:"Passed to blendFunc or blendFuncSeparate to turn on a component."},t.SRC_COLOR={name:"SRC_COLOR",value:768,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the source elements color."},t.ONE_MINUS_SRC_COLOR={name:"ONE_MINUS_SRC_COLOR",value:769,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source elements color."},t.SRC_ALPHA={name:"SRC_ALPHA",value:770,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the source's alpha."},t.ONE_MINUS_SRC_ALPHA={name:"ONE_MINUS_SRC_ALPHA",value:771,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source's alpha."},t.DST_ALPHA={name:"DST_ALPHA",value:772,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's alpha."},t.ONE_MINUS_DST_ALPHA={name:"ONE_MINUS_DST_ALPHA",value:773,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's alpha."},t.DST_COLOR={name:"DST_COLOR",value:774,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's color."},t.ONE_MINUS_DST_COLOR={name:"ONE_MINUS_DST_COLOR",value:775,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's color."},t.SRC_ALPHA_SATURATE={name:"SRC_ALPHA_SATURATE",value:776,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the minimum of source's alpha or one minus the destination's alpha."},t.CONSTANT_COLOR={name:"CONSTANT_COLOR",value:32769,description:"Passed to blendFunc or blendFuncSeparate to specify a constant color blend function."},t.ONE_MINUS_CONSTANT_COLOR={name:"ONE_MINUS_CONSTANT_COLOR",value:32770,description:"Passed to blendFunc or blendFuncSeparate to specify one minus a constant color blend function."},t.CONSTANT_ALPHA={name:"CONSTANT_ALPHA",value:32771,description:"Passed to blendFunc or blendFuncSeparate to specify a constant alpha blend function."},t.ONE_MINUS_CONSTANT_ALPHA={name:"ONE_MINUS_CONSTANT_ALPHA",value:32772,description:"Passed to blendFunc or blendFuncSeparate to specify one minus a constant alpha blend function."},t.FUNC_ADD={name:"FUNC_ADD",value:32774,description:"Passed to blendEquation or blendEquationSeparate to set an addition blend function."},t.FUNC_SUBSTRACT={name:"FUNC_SUBSTRACT",value:32778,description:"Passed to blendEquation or blendEquationSeparate to specify a subtraction blend function (source - destination)."},t.FUNC_REVERSE_SUBTRACT={name:"FUNC_REVERSE_SUBTRACT",value:32779,description:"Passed to blendEquation or blendEquationSeparate to specify a reverse subtraction blend function (destination - source)."},t.BLEND_EQUATION={name:"BLEND_EQUATION",value:32777,description:"Passed to getParameter to get the current RGB blend function."},t.BLEND_EQUATION_RGB={name:"BLEND_EQUATION_RGB",value:32777,description:"Passed to getParameter to get the current RGB blend function. Same as BLEND_EQUATION"},t.BLEND_EQUATION_ALPHA={name:"BLEND_EQUATION_ALPHA",value:34877,description:"Passed to getParameter to get the current alpha blend function. Same as BLEND_EQUATION"},t.BLEND_DST_RGB={name:"BLEND_DST_RGB",value:32968,description:"Passed to getParameter to get the current destination RGB blend function."},t.BLEND_SRC_RGB={name:"BLEND_SRC_RGB",value:32969,description:"Passed to getParameter to get the current destination RGB blend function."},t.BLEND_DST_ALPHA={name:"BLEND_DST_ALPHA",value:32970,description:"Passed to getParameter to get the current destination alpha blend function."},t.BLEND_SRC_ALPHA={name:"BLEND_SRC_ALPHA",value:32971,description:"Passed to getParameter to get the current source alpha blend function."},t.BLEND_COLOR={name:"BLEND_COLOR",value:32773,description:"Passed to getParameter to return a the current blend color."},t.ARRAY_BUFFER_BINDING={name:"ARRAY_BUFFER_BINDING",value:34964,description:"Passed to getParameter to get the array buffer binding."},t.ELEMENT_ARRAY_BUFFER_BINDING={name:"ELEMENT_ARRAY_BUFFER_BINDING",value:34965,description:"Passed to getParameter to get the current element array buffer."},t.LINE_WIDTH={name:"LINE_WIDTH",value:2849,description:"Passed to getParameter to get the current lineWidth (set by the lineWidth method)."},t.ALIASED_POINT_SIZE_RANGE={name:"ALIASED_POINT_SIZE_RANGE",value:33901,description:"Passed to getParameter to get the current size of a point drawn with gl.POINTS"},t.ALIASED_LINE_WIDTH_RANGE={name:"ALIASED_LINE_WIDTH_RANGE",value:33902,description:"Passed to getParameter to get the range of available widths for a line. Returns a length-2 array with the lo value at 0, and hight at 1."},t.CULL_FACE_MODE={name:"CULL_FACE_MODE",value:2885,description:"Passed to getParameter to get the current value of cullFace. Should return FRONT, BACK, or FRONT_AND_BACK"},t.FRONT_FACE={name:"FRONT_FACE",value:2886,description:"Passed to getParameter to determine the current value of frontFace. Should return CW or CCW."},t.DEPTH_RANGE={name:"DEPTH_RANGE",value:2928,description:"Passed to getParameter to return a length-2 array of floats giving the current depth range."},t.DEPTH_WRITEMASK={name:"DEPTH_WRITEMASK",value:2930,description:"Passed to getParameter to determine if the depth write mask is enabled."},t.DEPTH_CLEAR_VALUE={name:"DEPTH_CLEAR_VALUE",value:2931,description:"Passed to getParameter to determine the current depth clear value."},t.DEPTH_FUNC={name:"DEPTH_FUNC",value:2932,description:"Passed to getParameter to get the current depth function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL."},t.STENCIL_CLEAR_VALUE={name:"STENCIL_CLEAR_VALUE",value:2961,description:"Passed to getParameter to get the value the stencil will be cleared to."},t.STENCIL_FUNC={name:"STENCIL_FUNC",value:2962,description:"Passed to getParameter to get the current stencil function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL."},t.STENCIL_FAIL={name:"STENCIL_FAIL",value:2964,description:"Passed to getParameter to get the current stencil fail function. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},t.STENCIL_PASS_DEPTH_FAIL={name:"STENCIL_PASS_DEPTH_FAIL",value:2965,description:"Passed to getParameter to get the current stencil fail function should the depth buffer test fail. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},t.STENCIL_PASS_DEPTH_PASS={name:"STENCIL_PASS_DEPTH_PASS",value:2966,description:"Passed to getParameter to get the current stencil fail function should the depth buffer test pass. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},t.STENCIL_REF={name:"STENCIL_REF",value:2967,description:"Passed to getParameter to get the reference value used for stencil tests."},t.STENCIL_VALUE_MASK={name:"STENCIL_VALUE_MASK",value:2963,description:"\xA0"},t.STENCIL_WRITEMASK={name:"STENCIL_WRITEMASK",value:2968,description:"\xA0"},t.STENCIL_BACK_FUNC={name:"STENCIL_BACK_FUNC",value:34816,description:"\xA0"},t.STENCIL_BACK_FAIL={name:"STENCIL_BACK_FAIL",value:34817,description:"\xA0"},t.STENCIL_BACK_PASS_DEPTH_FAIL={name:"STENCIL_BACK_PASS_DEPTH_FAIL",value:34818,description:"\xA0"},t.STENCIL_BACK_PASS_DEPTH_PASS={name:"STENCIL_BACK_PASS_DEPTH_PASS",value:34819,description:"\xA0"},t.STENCIL_BACK_REF={name:"STENCIL_BACK_REF",value:36003,description:"\xA0"},t.STENCIL_BACK_VALUE_MASK={name:"STENCIL_BACK_VALUE_MASK",value:36004,description:"\xA0"},t.STENCIL_BACK_WRITEMASK={name:"STENCIL_BACK_WRITEMASK",value:36005,description:"\xA0"},t.VIEWPORT={name:"VIEWPORT",value:2978,description:"Returns an Int32Array with four elements for the current viewport dimensions."},t.SCISSOR_BOX={name:"SCISSOR_BOX",value:3088,description:"Returns an Int32Array with four elements for the current scissor box dimensions."},t.COLOR_CLEAR_VALUE={name:"COLOR_CLEAR_VALUE",value:3106,description:"\xA0"},t.COLOR_WRITEMASK={name:"COLOR_WRITEMASK",value:3107,description:"\xA0"},t.UNPACK_ALIGNMENT={name:"UNPACK_ALIGNMENT",value:3317,description:"\xA0"},t.PACK_ALIGNMENT={name:"PACK_ALIGNMENT",value:3333,description:"\xA0"},t.MAX_TEXTURE_SIZE={name:"MAX_TEXTURE_SIZE",value:3379,description:"\xA0"},t.MAX_VIEWPORT_DIMS={name:"MAX_VIEWPORT_DIMS",value:3386,description:"\xA0"},t.SUBPIXEL_BITS={name:"SUBPIXEL_BITS",value:3408,description:"\xA0"},t.RED_BITS={name:"RED_BITS",value:3410,description:"\xA0"},t.GREEN_BITS={name:"GREEN_BITS",value:3411,description:"\xA0"},t.BLUE_BITS={name:"BLUE_BITS",value:3412,description:"\xA0"},t.ALPHA_BITS={name:"ALPHA_BITS",value:3413,description:"\xA0"},t.DEPTH_BITS={name:"DEPTH_BITS",value:3414,description:"\xA0"},t.STENCIL_BITS={name:"STENCIL_BITS",value:3415,description:"\xA0"},t.POLYGON_OFFSET_UNITS={name:"POLYGON_OFFSET_UNITS",value:10752,description:"\xA0"},t.POLYGON_OFFSET_FACTOR={name:"POLYGON_OFFSET_FACTOR",value:32824,description:"\xA0"},t.TEXTURE_BINDING_2D={name:"TEXTURE_BINDING_2D",value:32873,description:"\xA0"},t.SAMPLE_BUFFERS={name:"SAMPLE_BUFFERS",value:32936,description:"\xA0"},t.SAMPLES={name:"SAMPLES",value:32937,description:"\xA0"},t.SAMPLE_COVERAGE_VALUE={name:"SAMPLE_COVERAGE_VALUE",value:32938,description:"\xA0"},t.SAMPLE_COVERAGE_INVERT={name:"SAMPLE_COVERAGE_INVERT",value:32939,description:"\xA0"},t.COMPRESSED_TEXTURE_FORMATS={name:"COMPRESSED_TEXTURE_FORMATS",value:34467,description:"\xA0"},t.VENDOR={name:"VENDOR",value:7936,description:"\xA0"},t.RENDERER={name:"RENDERER",value:7937,description:"\xA0"},t.VERSION={name:"VERSION",value:7938,description:"\xA0"},t.IMPLEMENTATION_COLOR_READ_TYPE={name:"IMPLEMENTATION_COLOR_READ_TYPE",value:35738,description:"\xA0"},t.IMPLEMENTATION_COLOR_READ_FORMAT={name:"IMPLEMENTATION_COLOR_READ_FORMAT",value:35739,description:"\xA0"},t.BROWSER_DEFAULT_WEBGL={name:"BROWSER_DEFAULT_WEBGL",value:37444,description:"\xA0"},t.STATIC_DRAW={name:"STATIC_DRAW",value:35044,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and not change often."},t.STREAM_DRAW={name:"STREAM_DRAW",value:35040,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to not be used often."},t.DYNAMIC_DRAW={name:"DYNAMIC_DRAW",value:35048,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and change often."},t.ARRAY_BUFFER={name:"ARRAY_BUFFER",value:34962,description:"Passed to bindBuffer or bufferData to specify the type of buffer being used."},t.ELEMENT_ARRAY_BUFFER={name:"ELEMENT_ARRAY_BUFFER",value:34963,description:"Passed to bindBuffer or bufferData to specify the type of buffer being used."},t.BUFFER_SIZE={name:"BUFFER_SIZE",value:34660,description:"Passed to getBufferParameter to get a buffer's size."},t.BUFFER_USAGE={name:"BUFFER_USAGE",value:34661,description:"Passed to\xA0getBufferParameter to get the hint for the buffer passed in when it was created."},t.CURRENT_VERTEX_ATTRIB={name:"CURRENT_VERTEX_ATTRIB",value:34342,description:"Passed to getVertexAttrib to read back the current vertex attribute."},t.VERTEX_ATTRIB_ARRAY_ENABLED={name:"VERTEX_ATTRIB_ARRAY_ENABLED",value:34338,description:"\xA0"},t.VERTEX_ATTRIB_ARRAY_SIZE={name:"VERTEX_ATTRIB_ARRAY_SIZE",value:34339,description:"\xA0"},t.VERTEX_ATTRIB_ARRAY_STRIDE={name:"VERTEX_ATTRIB_ARRAY_STRIDE",value:34340,description:"\xA0"},t.VERTEX_ATTRIB_ARRAY_TYPE={name:"VERTEX_ATTRIB_ARRAY_TYPE",value:34341,description:"\xA0"},t.VERTEX_ATTRIB_ARRAY_NORMALIZED={name:"VERTEX_ATTRIB_ARRAY_NORMALIZED",value:34922,description:"\xA0"},t.VERTEX_ATTRIB_ARRAY_POINTER={name:"VERTEX_ATTRIB_ARRAY_POINTER",value:34373,description:"\xA0"},t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING={name:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",value:34975,description:"\xA0"},t.CULL_FACE={name:"CULL_FACE",value:2884,description:"Passed to enable/disable to turn on/off culling. Can also be used with getParameter to find the current culling method."},t.FRONT={name:"FRONT",value:1028,description:"Passed to cullFace to specify that only front faces should be drawn."},t.BACK={name:"BACK",value:1029,description:"Passed to cullFace to specify that only back faces should be drawn."},t.FRONT_AND_BACK={name:"FRONT_AND_BACK",value:1032,description:"Passed to\xA0cullFace to specify that front and back faces should be drawn."},t.BLEND={name:"BLEND",value:3042,description:"Passed to enable/disable to turn on/off blending. Can also be used with getParameter to find the current blending method."},t.DEPTH_TEST={name:"DEPTH_TEST",value:2929,description:"Passed to enable/disable to turn on/off the depth test. Can also be used with getParameter to query the depth test."},t.DITHER={name:"DITHER",value:3024,description:"Passed to enable/disable to turn on/off dithering. Can also be used with getParameter to find the current dithering method."},t.POLYGON_OFFSET_FILL={name:"POLYGON_OFFSET_FILL",value:32823,description:"Passed to enable/disable to turn on/off the polygon offset. Useful for rendering hidden-line images, decals, and or solids with highlighted edges. Can also be used with getParameter to query the scissor test."},t.SAMPLE_ALPHA_TO_COVERAGE={name:"SAMPLE_ALPHA_TO_COVERAGE",value:32926,description:"Passed to enable/disable to turn on/off the alpha to coverage. Used in multi-sampling alpha channels."},t.SAMPLE_COVERAGE={name:"SAMPLE_COVERAGE",value:32928,description:"Passed to enable/disable to turn on/off the sample coverage. Used in multi-sampling."},t.SCISSOR_TEST={name:"SCISSOR_TEST",value:3089,description:"Passed to enable/disable to turn on/off the scissor test. Can also be used with getParameter to query the scissor test."},t.STENCIL_TEST={name:"STENCIL_TEST",value:2960,description:"Passed to enable/disable to turn on/off the stencil test. Can also be used with getParameter to query the stencil test."},t.NO_ERROR={name:"NO_ERROR",value:0,description:"Returned from getError."},t.INVALID_ENUM={name:"INVALID_ENUM",value:1280,description:"Returned from getError."},t.INVALID_VALUE={name:"INVALID_VALUE",value:1281,description:"Returned from getError."},t.INVALID_OPERATION={name:"INVALID_OPERATION",value:1282,description:"Returned from getError."},t.OUT_OF_MEMORY={name:"OUT_OF_MEMORY",value:1285,description:"Returned from getError."},t.CONTEXT_LOST_WEBGL={name:"CONTEXT_LOST_WEBGL",value:37442,description:"Returned from getError."},t.CW={name:"CW",value:2304,description:"Passed to frontFace to specify the front face of a polygon is drawn in the clockwise direction"},t.CCW={name:"CCW",value:2305,description:"Passed to frontFace to specify the front face of a polygon is drawn in the counter clockwise direction"},t.DONT_CARE={name:"DONT_CARE",value:4352,description:"There is no preference for this behavior."},t.FASTEST={name:"FASTEST",value:4353,description:"The most efficient behavior should be used."},t.NICEST={name:"NICEST",value:4354,description:"The most correct or the highest quality option should be used."},t.GENERATE_MIPMAP_HINT={name:"GENERATE_MIPMAP_HINT",value:33170,description:"Hint for the quality of filtering when generating mipmap images with WebGLRenderingContext.generateMipmap()."},t.BYTE={name:"BYTE",value:5120,description:"\xA0"},t.UNSIGNED_BYTE={name:"UNSIGNED_BYTE",value:5121,description:"\xA0"},t.SHORT={name:"SHORT",value:5122,description:"\xA0"},t.UNSIGNED_SHORT={name:"UNSIGNED_SHORT",value:5123,description:"\xA0"},t.INT={name:"INT",value:5124,description:"\xA0"},t.UNSIGNED_INT={name:"UNSIGNED_INT",value:5125,description:"\xA0"},t.FLOAT={name:"FLOAT",value:5126,description:"\xA0"},t.DEPTH_COMPONENT={name:"DEPTH_COMPONENT",value:6402,description:"\xA0"},t.ALPHA={name:"ALPHA",value:6406,description:"\xA0"},t.RGB={name:"RGB",value:6407,description:"\xA0"},t.RGBA={name:"RGBA",value:6408,description:"\xA0"},t.LUMINANCE={name:"LUMINANCE",value:6409,description:"\xA0"},t.LUMINANCE_ALPHA={name:"LUMINANCE_ALPHA",value:6410,description:"\xA0"},t.UNSIGNED_SHORT_4_4_4_4={name:"UNSIGNED_SHORT_4_4_4_4",value:32819,description:"\xA0"},t.UNSIGNED_SHORT_5_5_5_1={name:"UNSIGNED_SHORT_5_5_5_1",value:32820,description:"\xA0"},t.UNSIGNED_SHORT_5_6_5={name:"UNSIGNED_SHORT_5_6_5",value:33635,description:"\xA0"},t.FRAGMENT_SHADER={name:"FRAGMENT_SHADER",value:35632,description:"Passed to createShader to define a fragment shader."},t.VERTEX_SHADER={name:"VERTEX_SHADER",value:35633,description:"Passed to createShader to define a vertex shader"},t.COMPILE_STATUS={name:"COMPILE_STATUS",value:35713,description:"Passed to getShaderParamter to get the status of the compilation. Returns false if the shader was not compiled. You can then query getShaderInfoLog to find the exact error"},t.DELETE_STATUS={name:"DELETE_STATUS",value:35712,description:"Passed to getShaderParamter to determine if a shader was deleted via deleteShader. Returns true if it was, false otherwise."},t.LINK_STATUS={name:"LINK_STATUS",value:35714,description:"Passed to getProgramParameter after calling linkProgram to determine if a program was linked correctly. Returns false if there were errors. Use getProgramInfoLog to find the exact error."},t.VALIDATE_STATUS={name:"VALIDATE_STATUS",value:35715,description:"Passed to getProgramParameter after calling validateProgram to determine if it is valid. Returns false if errors were found."},t.ATTACHED_SHADERS={name:"ATTACHED_SHADERS",value:35717,description:"Passed to getProgramParameter after calling attachShader to determine if the shader was attached correctly. Returns false if errors occurred."},t.ACTIVE_ATTRIBUTES={name:"ACTIVE_ATTRIBUTES",value:35721,description:"Passed to getProgramParameter to get the number of attributes active in a program."},t.ACTIVE_UNIFORMS={name:"ACTIVE_UNIFORMS",value:35718,description:"Passed to getProgramParamter to get the number of uniforms active in a program."},t.MAX_VERTEX_ATTRIBS={name:"MAX_VERTEX_ATTRIBS",value:34921,description:"\xA0"},t.MAX_VERTEX_UNIFORM_VECTORS={name:"MAX_VERTEX_UNIFORM_VECTORS",value:36347,description:"\xA0"},t.MAX_VARYING_VECTORS={name:"MAX_VARYING_VECTORS",value:36348,description:"\xA0"},t.MAX_COMBINED_TEXTURE_IMAGE_UNITS={name:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",value:35661,description:"\xA0"},t.MAX_VERTEX_TEXTURE_IMAGE_UNITS={name:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",value:35660,description:"\xA0"},t.MAX_TEXTURE_IMAGE_UNITS={name:"MAX_TEXTURE_IMAGE_UNITS",value:34930,description:"Implementation dependent number of maximum texture units. At least 8."},t.MAX_FRAGMENT_UNIFORM_VECTORS={name:"MAX_FRAGMENT_UNIFORM_VECTORS",value:36349,description:"\xA0"},t.SHADER_TYPE={name:"SHADER_TYPE",value:35663,description:"\xA0"},t.SHADING_LANGUAGE_VERSION={name:"SHADING_LANGUAGE_VERSION",value:35724,description:"\xA0"},t.CURRENT_PROGRAM={name:"CURRENT_PROGRAM",value:35725,description:"\xA0"},t.NEVER={name:"NEVER",value:512,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will never pass. i.e. Nothing will be drawn."},t.ALWAYS={name:"ALWAYS",value:519,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will always pass. i.e. Pixels will be drawn in the order they are drawn."},t.LESS={name:"LESS",value:513,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than the stored value."},t.EQUAL={name:"EQUAL",value:514,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is equals to the stored value."},t.LEQUAL={name:"LEQUAL",value:515,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than or equal to the stored value."},t.GREATER={name:"GREATER",value:516,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than the stored value."},t.GEQUAL={name:"GEQUAL",value:518,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than or equal to the stored value."},t.NOTEQUAL={name:"NOTEQUAL",value:517,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is not equal to the stored value."},t.KEEP={name:"KEEP",value:7680,description:"\xA0"},t.REPLACE={name:"REPLACE",value:7681,description:"\xA0"},t.INCR={name:"INCR",value:7682,description:"\xA0"},t.DECR={name:"DECR",value:7683,description:"\xA0"},t.INVERT={name:"INVERT",value:5386,description:"\xA0"},t.INCR_WRAP={name:"INCR_WRAP",value:34055,description:"\xA0"},t.DECR_WRAP={name:"DECR_WRAP",value:34056,description:"\xA0"},t.NEAREST={name:"NEAREST",value:9728,description:"\xA0"},t.LINEAR={name:"LINEAR",value:9729,description:"\xA0"},t.NEAREST_MIPMAP_NEAREST={name:"NEAREST_MIPMAP_NEAREST",value:9984,description:"\xA0"},t.LINEAR_MIPMAP_NEAREST={name:"LINEAR_MIPMAP_NEAREST",value:9985,description:"\xA0"},t.NEAREST_MIPMAP_LINEAR={name:"NEAREST_MIPMAP_LINEAR",value:9986,description:"\xA0"},t.LINEAR_MIPMAP_LINEAR={name:"LINEAR_MIPMAP_LINEAR",value:9987,description:"\xA0"},t.TEXTURE_MAG_FILTER={name:"TEXTURE_MAG_FILTER",value:10240,description:"\xA0"},t.TEXTURE_MIN_FILTER={name:"TEXTURE_MIN_FILTER",value:10241,description:"\xA0"},t.TEXTURE_WRAP_S={name:"TEXTURE_WRAP_S",value:10242,description:"\xA0"},t.TEXTURE_WRAP_T={name:"TEXTURE_WRAP_T",value:10243,description:"\xA0"},t.TEXTURE_2D={name:"TEXTURE_2D",value:3553,description:"\xA0"},t.TEXTURE={name:"TEXTURE",value:5890,description:"\xA0"},t.TEXTURE_CUBE_MAP={name:"TEXTURE_CUBE_MAP",value:34067,description:"\xA0"},t.TEXTURE_BINDING_CUBE_MAP={name:"TEXTURE_BINDING_CUBE_MAP",value:34068,description:"\xA0"},t.TEXTURE_CUBE_MAP_POSITIVE_X={name:"TEXTURE_CUBE_MAP_POSITIVE_X",value:34069,description:"\xA0"},t.TEXTURE_CUBE_MAP_NEGATIVE_X={name:"TEXTURE_CUBE_MAP_NEGATIVE_X",value:34070,description:"\xA0"},t.TEXTURE_CUBE_MAP_POSITIVE_Y={name:"TEXTURE_CUBE_MAP_POSITIVE_Y",value:34071,description:"\xA0"},t.TEXTURE_CUBE_MAP_NEGATIVE_Y={name:"TEXTURE_CUBE_MAP_NEGATIVE_Y",value:34072,description:"\xA0"},t.TEXTURE_CUBE_MAP_POSITIVE_Z={name:"TEXTURE_CUBE_MAP_POSITIVE_Z",value:34073,description:"\xA0"},t.TEXTURE_CUBE_MAP_NEGATIVE_Z={name:"TEXTURE_CUBE_MAP_NEGATIVE_Z",value:34074,description:"\xA0"},t.MAX_CUBE_MAP_TEXTURE_SIZE={name:"MAX_CUBE_MAP_TEXTURE_SIZE",value:34076,description:"\xA0"},t.TEXTURE0={name:"TEXTURE0",value:33984,description:"A texture unit."},t.TEXTURE1={name:"TEXTURE1",value:33985,description:"A texture unit."},t.TEXTURE2={name:"TEXTURE2",value:33986,description:"A texture unit."},t.TEXTURE3={name:"TEXTURE3",value:33987,description:"A texture unit."},t.TEXTURE4={name:"TEXTURE4",value:33988,description:"A texture unit."},t.TEXTURE5={name:"TEXTURE5",value:33989,description:"A texture unit."},t.TEXTURE6={name:"TEXTURE6",value:33990,description:"A texture unit."},t.TEXTURE7={name:"TEXTURE7",value:33991,description:"A texture unit."},t.TEXTURE8={name:"TEXTURE8",value:33992,description:"A texture unit."},t.TEXTURE9={name:"TEXTURE9",value:33993,description:"A texture unit."},t.TEXTURE10={name:"TEXTURE10",value:33994,description:"A texture unit."},t.TEXTURE11={name:"TEXTURE11",value:33995,description:"A texture unit."},t.TEXTURE12={name:"TEXTURE12",value:33996,description:"A texture unit."},t.TEXTURE13={name:"TEXTURE13",value:33997,description:"A texture unit."},t.TEXTURE14={name:"TEXTURE14",value:33998,description:"A texture unit."},t.TEXTURE15={name:"TEXTURE15",value:33999,description:"A texture unit."},t.TEXTURE16={name:"TEXTURE16",value:34e3,description:"A texture unit."},t.TEXTURE17={name:"TEXTURE17",value:34001,description:"A texture unit."},t.TEXTURE18={name:"TEXTURE18",value:34002,description:"A texture unit."},t.TEXTURE19={name:"TEXTURE19",value:34003,description:"A texture unit."},t.TEXTURE20={name:"TEXTURE20",value:34004,description:"A texture unit."},t.TEXTURE21={name:"TEXTURE21",value:34005,description:"A texture unit."},t.TEXTURE22={name:"TEXTURE22",value:34006,description:"A texture unit."},t.TEXTURE23={name:"TEXTURE23",value:34007,description:"A texture unit."},t.TEXTURE24={name:"TEXTURE24",value:34008,description:"A texture unit."},t.TEXTURE25={name:"TEXTURE25",value:34009,description:"A texture unit."},t.TEXTURE26={name:"TEXTURE26",value:34010,description:"A texture unit."},t.TEXTURE27={name:"TEXTURE27",value:34011,description:"A texture unit."},t.TEXTURE28={name:"TEXTURE28",value:34012,description:"A texture unit."},t.TEXTURE29={name:"TEXTURE29",value:34013,description:"A texture unit."},t.TEXTURE30={name:"TEXTURE30",value:34014,description:"A texture unit."},t.TEXTURE31={name:"TEXTURE31",value:34015,description:"A texture unit."},t.ACTIVE_TEXTURE={name:"ACTIVE_TEXTURE",value:34016,description:"The current active texture unit."},t.REPEAT={name:"REPEAT",value:10497,description:"\xA0"},t.CLAMP_TO_EDGE={name:"CLAMP_TO_EDGE",value:33071,description:"\xA0"},t.MIRRORED_REPEAT={name:"MIRRORED_REPEAT",value:33648,description:"\xA0"},t.FLOAT_VEC2={name:"FLOAT_VEC2",value:35664,description:"\xA0"},t.FLOAT_VEC3={name:"FLOAT_VEC3",value:35665,description:"\xA0"},t.FLOAT_VEC4={name:"FLOAT_VEC4",value:35666,description:"\xA0"},t.INT_VEC2={name:"INT_VEC2",value:35667,description:"\xA0"},t.INT_VEC3={name:"INT_VEC3",value:35668,description:"\xA0"},t.INT_VEC4={name:"INT_VEC4",value:35669,description:"\xA0"},t.BOOL={name:"BOOL",value:35670,description:"\xA0"},t.BOOL_VEC2={name:"BOOL_VEC2",value:35671,description:"\xA0"},t.BOOL_VEC3={name:"BOOL_VEC3",value:35672,description:"\xA0"},t.BOOL_VEC4={name:"BOOL_VEC4",value:35673,description:"\xA0"},t.FLOAT_MAT2={name:"FLOAT_MAT2",value:35674,description:"\xA0"},t.FLOAT_MAT3={name:"FLOAT_MAT3",value:35675,description:"\xA0"},t.FLOAT_MAT4={name:"FLOAT_MAT4",value:35676,description:"\xA0"},t.SAMPLER_2D={name:"SAMPLER_2D",value:35678,description:"\xA0"},t.SAMPLER_CUBE={name:"SAMPLER_CUBE",value:35680,description:"\xA0"},t.LOW_FLOAT={name:"LOW_FLOAT",value:36336,description:"\xA0"},t.MEDIUM_FLOAT={name:"MEDIUM_FLOAT",value:36337,description:"\xA0"},t.HIGH_FLOAT={name:"HIGH_FLOAT",value:36338,description:"\xA0"},t.LOW_INT={name:"LOW_INT",value:36339,description:"\xA0"},t.MEDIUM_INT={name:"MEDIUM_INT",value:36340,description:"\xA0"},t.HIGH_INT={name:"HIGH_INT",value:36341,description:"\xA0"},t.FRAMEBUFFER={name:"FRAMEBUFFER",value:36160,description:"\xA0"},t.RENDERBUFFER={name:"RENDERBUFFER",value:36161,description:"\xA0"},t.RGBA4={name:"RGBA4",value:32854,description:"\xA0"},t.RGB5_A1={name:"RGB5_A1",value:32855,description:"\xA0"},t.RGB565={name:"RGB565",value:36194,description:"\xA0"},t.DEPTH_COMPONENT16={name:"DEPTH_COMPONENT16",value:33189,description:"\xA0"},t.STENCIL_INDEX={name:"STENCIL_INDEX",value:6401,description:"\xA0"},t.STENCIL_INDEX8={name:"STENCIL_INDEX8",value:36168,description:"\xA0"},t.DEPTH_STENCIL={name:"DEPTH_STENCIL",value:34041,description:"\xA0"},t.RENDERBUFFER_WIDTH={name:"RENDERBUFFER_WIDTH",value:36162,description:"\xA0"},t.RENDERBUFFER_HEIGHT={name:"RENDERBUFFER_HEIGHT",value:36163,description:"\xA0"},t.RENDERBUFFER_INTERNAL_FORMAT={name:"RENDERBUFFER_INTERNAL_FORMAT",value:36164,description:"\xA0"},t.RENDERBUFFER_RED_SIZE={name:"RENDERBUFFER_RED_SIZE",value:36176,description:"\xA0"},t.RENDERBUFFER_GREEN_SIZE={name:"RENDERBUFFER_GREEN_SIZE",value:36177,description:"\xA0"},t.RENDERBUFFER_BLUE_SIZE={name:"RENDERBUFFER_BLUE_SIZE",value:36178,description:"\xA0"},t.RENDERBUFFER_ALPHA_SIZE={name:"RENDERBUFFER_ALPHA_SIZE",value:36179,description:"\xA0"},t.RENDERBUFFER_DEPTH_SIZE={name:"RENDERBUFFER_DEPTH_SIZE",value:36180,description:"\xA0"},t.RENDERBUFFER_STENCIL_SIZE={name:"RENDERBUFFER_STENCIL_SIZE",value:36181,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE={name:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",value:36048,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME={name:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",value:36049,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",value:36050,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",value:36051,description:"\xA0"},t.COLOR_ATTACHMENT0={name:"COLOR_ATTACHMENT0",value:36064,description:"\xA0"},t.DEPTH_ATTACHMENT={name:"DEPTH_ATTACHMENT",value:36096,description:"\xA0"},t.STENCIL_ATTACHMENT={name:"STENCIL_ATTACHMENT",value:36128,description:"\xA0"},t.DEPTH_STENCIL_ATTACHMENT={name:"DEPTH_STENCIL_ATTACHMENT",value:33306,description:"\xA0"},t.NONE={name:"NONE",value:0,description:"\xA0"},t.FRAMEBUFFER_COMPLETE={name:"FRAMEBUFFER_COMPLETE",value:36053,description:"\xA0"},t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT={name:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",value:36054,description:"\xA0"},t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT={name:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",value:36055,description:"\xA0"},t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS={name:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",value:36057,description:"\xA0"},t.FRAMEBUFFER_UNSUPPORTED={name:"FRAMEBUFFER_UNSUPPORTED",value:36061,description:"\xA0"},t.FRAMEBUFFER_BINDING={name:"FRAMEBUFFER_BINDING",value:36006,description:"\xA0"},t.RENDERBUFFER_BINDING={name:"RENDERBUFFER_BINDING",value:36007,description:"\xA0"},t.MAX_RENDERBUFFER_SIZE={name:"MAX_RENDERBUFFER_SIZE",value:34024,description:"\xA0"},t.INVALID_FRAMEBUFFER_OPERATION={name:"INVALID_FRAMEBUFFER_OPERATION",value:1286,description:"\xA0"},t.UNPACK_FLIP_Y_WEBGL={name:"UNPACK_FLIP_Y_WEBGL",value:37440,description:"\xA0"},t.UNPACK_PREMULTIPLY_ALPHA_WEBGL={name:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",value:37441,description:"\xA0"},t.UNPACK_COLORSPACE_CONVERSION_WEBGL={name:"UNPACK_COLORSPACE_CONVERSION_WEBGL",value:37443,description:"\xA0"},t.READ_BUFFER={name:"READ_BUFFER",value:3074,description:"\xA0"},t.UNPACK_ROW_LENGTH={name:"UNPACK_ROW_LENGTH",value:3314,description:"\xA0"},t.UNPACK_SKIP_ROWS={name:"UNPACK_SKIP_ROWS",value:3315,description:"\xA0"},t.UNPACK_SKIP_PIXELS={name:"UNPACK_SKIP_PIXELS",value:3316,description:"\xA0"},t.PACK_ROW_LENGTH={name:"PACK_ROW_LENGTH",value:3330,description:"\xA0"},t.PACK_SKIP_ROWS={name:"PACK_SKIP_ROWS",value:3331,description:"\xA0"},t.PACK_SKIP_PIXELS={name:"PACK_SKIP_PIXELS",value:3332,description:"\xA0"},t.TEXTURE_BINDING_3D={name:"TEXTURE_BINDING_3D",value:32874,description:"\xA0"},t.UNPACK_SKIP_IMAGES={name:"UNPACK_SKIP_IMAGES",value:32877,description:"\xA0"},t.UNPACK_IMAGE_HEIGHT={name:"UNPACK_IMAGE_HEIGHT",value:32878,description:"\xA0"},t.MAX_3D_TEXTURE_SIZE={name:"MAX_3D_TEXTURE_SIZE",value:32883,description:"\xA0"},t.MAX_ELEMENTS_VERTICES={name:"MAX_ELEMENTS_VERTICES",value:33e3,description:"\xA0"},t.MAX_ELEMENTS_INDICES={name:"MAX_ELEMENTS_INDICES",value:33001,description:"\xA0"},t.MAX_TEXTURE_LOD_BIAS={name:"MAX_TEXTURE_LOD_BIAS",value:34045,description:"\xA0"},t.MAX_FRAGMENT_UNIFORM_COMPONENTS={name:"MAX_FRAGMENT_UNIFORM_COMPONENTS",value:35657,description:"\xA0"},t.MAX_VERTEX_UNIFORM_COMPONENTS={name:"MAX_VERTEX_UNIFORM_COMPONENTS",value:35658,description:"\xA0"},t.MAX_ARRAY_TEXTURE_LAYERS={name:"MAX_ARRAY_TEXTURE_LAYERS",value:35071,description:"\xA0"},t.MIN_PROGRAM_TEXEL_OFFSET={name:"MIN_PROGRAM_TEXEL_OFFSET",value:35076,description:"\xA0"},t.MAX_PROGRAM_TEXEL_OFFSET={name:"MAX_PROGRAM_TEXEL_OFFSET",value:35077,description:"\xA0"},t.MAX_VARYING_COMPONENTS={name:"MAX_VARYING_COMPONENTS",value:35659,description:"\xA0"},t.FRAGMENT_SHADER_DERIVATIVE_HINT={name:"FRAGMENT_SHADER_DERIVATIVE_HINT",value:35723,description:"\xA0"},t.RASTERIZER_DISCARD={name:"RASTERIZER_DISCARD",value:35977,description:"\xA0"},t.VERTEX_ARRAY_BINDING={name:"VERTEX_ARRAY_BINDING",value:34229,description:"\xA0"},t.MAX_VERTEX_OUTPUT_COMPONENTS={name:"MAX_VERTEX_OUTPUT_COMPONENTS",value:37154,description:"\xA0"},t.MAX_FRAGMENT_INPUT_COMPONENTS={name:"MAX_FRAGMENT_INPUT_COMPONENTS",value:37157,description:"\xA0"},t.MAX_SERVER_WAIT_TIMEOUT={name:"MAX_SERVER_WAIT_TIMEOUT",value:37137,description:"\xA0"},t.MAX_ELEMENT_INDEX={name:"MAX_ELEMENT_INDEX",value:36203,description:"\xA0"},t.RED={name:"RED",value:6403,description:"\xA0"},t.RGB8={name:"RGB8",value:32849,description:"\xA0"},t.RGBA8={name:"RGBA8",value:32856,description:"\xA0"},t.RGB10_A2={name:"RGB10_A2",value:32857,description:"\xA0"},t.TEXTURE_3D={name:"TEXTURE_3D",value:32879,description:"\xA0"},t.TEXTURE_WRAP_R={name:"TEXTURE_WRAP_R",value:32882,description:"\xA0"},t.TEXTURE_MIN_LOD={name:"TEXTURE_MIN_LOD",value:33082,description:"\xA0"},t.TEXTURE_MAX_LOD={name:"TEXTURE_MAX_LOD",value:33083,description:"\xA0"},t.TEXTURE_BASE_LEVEL={name:"TEXTURE_BASE_LEVEL",value:33084,description:"\xA0"},t.TEXTURE_MAX_LEVEL={name:"TEXTURE_MAX_LEVEL",value:33085,description:"\xA0"},t.TEXTURE_COMPARE_MODE={name:"TEXTURE_COMPARE_MODE",value:34892,description:"\xA0"},t.TEXTURE_COMPARE_FUNC={name:"TEXTURE_COMPARE_FUNC",value:34893,description:"\xA0"},t.SRGB={name:"SRGB",value:35904,description:"\xA0"},t.SRGB8={name:"SRGB8",value:35905,description:"\xA0"},t.SRGB8_ALPHA8={name:"SRGB8_ALPHA8",value:35907,description:"\xA0"},t.COMPARE_REF_TO_TEXTURE={name:"COMPARE_REF_TO_TEXTURE",value:34894,description:"\xA0"},t.RGBA32F={name:"RGBA32F",value:34836,description:"\xA0"},t.RGB32F={name:"RGB32F",value:34837,description:"\xA0"},t.RGBA16F={name:"RGBA16F",value:34842,description:"\xA0"},t.RGB16F={name:"RGB16F",value:34843,description:"\xA0"},t.TEXTURE_2D_ARRAY={name:"TEXTURE_2D_ARRAY",value:35866,description:"\xA0"},t.TEXTURE_BINDING_2D_ARRAY={name:"TEXTURE_BINDING_2D_ARRAY",value:35869,description:"\xA0"},t.R11F_G11F_B10F={name:"R11F_G11F_B10F",value:35898,description:"\xA0"},t.RGB9_E5={name:"RGB9_E5",value:35901,description:"\xA0"},t.RGBA32UI={name:"RGBA32UI",value:36208,description:"\xA0"},t.RGB32UI={name:"RGB32UI",value:36209,description:"\xA0"},t.RGBA16UI={name:"RGBA16UI",value:36214,description:"\xA0"},t.RGB16UI={name:"RGB16UI",value:36215,description:"\xA0"},t.RGBA8UI={name:"RGBA8UI",value:36220,description:"\xA0"},t.RGB8UI={name:"RGB8UI",value:36221,description:"\xA0"},t.RGBA32I={name:"RGBA32I",value:36226,description:"\xA0"},t.RGB32I={name:"RGB32I",value:36227,description:"\xA0"},t.RGBA16I={name:"RGBA16I",value:36232,description:"\xA0"},t.RGB16I={name:"RGB16I",value:36233,description:"\xA0"},t.RGBA8I={name:"RGBA8I",value:36238,description:"\xA0"},t.RGB8I={name:"RGB8I",value:36239,description:"\xA0"},t.RED_INTEGER={name:"RED_INTEGER",value:36244,description:"\xA0"},t.RGB_INTEGER={name:"RGB_INTEGER",value:36248,description:"\xA0"},t.RGBA_INTEGER={name:"RGBA_INTEGER",value:36249,description:"\xA0"},t.R8={name:"R8",value:33321,description:"\xA0"},t.RG8={name:"RG8",value:33323,description:"\xA0"},t.R16F={name:"R16F",value:33325,description:"\xA0"},t.R32F={name:"R32F",value:33326,description:"\xA0"},t.RG16F={name:"RG16F",value:33327,description:"\xA0"},t.RG32F={name:"RG32F",value:33328,description:"\xA0"},t.R8I={name:"R8I",value:33329,description:"\xA0"},t.R8UI={name:"R8UI",value:33330,description:"\xA0"},t.R16I={name:"R16I",value:33331,description:"\xA0"},t.R16UI={name:"R16UI",value:33332,description:"\xA0"},t.R32I={name:"R32I",value:33333,description:"\xA0"},t.R32UI={name:"R32UI",value:33334,description:"\xA0"},t.RG8I={name:"RG8I",value:33335,description:"\xA0"},t.RG8UI={name:"RG8UI",value:33336,description:"\xA0"},t.RG16I={name:"RG16I",value:33337,description:"\xA0"},t.RG16UI={name:"RG16UI",value:33338,description:"\xA0"},t.RG32I={name:"RG32I",value:33339,description:"\xA0"},t.RG32UI={name:"RG32UI",value:33340,description:"\xA0"},t.R8_SNORM={name:"R8_SNORM",value:36756,description:"\xA0"},t.RG8_SNORM={name:"RG8_SNORM",value:36757,description:"\xA0"},t.RGB8_SNORM={name:"RGB8_SNORM",value:36758,description:"\xA0"},t.RGBA8_SNORM={name:"RGBA8_SNORM",value:36759,description:"\xA0"},t.RGB10_A2UI={name:"RGB10_A2UI",value:36975,description:"\xA0"},t.TEXTURE_IMMUTABLE_FORMAT={name:"TEXTURE_IMMUTABLE_FORMAT",value:37167,description:"\xA0"},t.TEXTURE_IMMUTABLE_LEVELS={name:"TEXTURE_IMMUTABLE_LEVELS",value:33503,description:"\xA0"},t.UNSIGNED_INT_2_10_10_10_REV={name:"UNSIGNED_INT_2_10_10_10_REV",value:33640,description:"\xA0"},t.UNSIGNED_INT_10F_11F_11F_REV={name:"UNSIGNED_INT_10F_11F_11F_REV",value:35899,description:"\xA0"},t.UNSIGNED_INT_5_9_9_9_REV={name:"UNSIGNED_INT_5_9_9_9_REV",value:35902,description:"\xA0"},t.FLOAT_32_UNSIGNED_INT_24_8_REV={name:"FLOAT_32_UNSIGNED_INT_24_8_REV",value:36269,description:"\xA0"},t.UNSIGNED_INT_24_8={name:"UNSIGNED_INT_24_8",value:34042,description:"\xA0"},t.HALF_FLOAT={name:"HALF_FLOAT",value:5131,description:"\xA0"},t.RG={name:"RG",value:33319,description:"\xA0"},t.RG_INTEGER={name:"RG_INTEGER",value:33320,description:"\xA0"},t.INT_2_10_10_10_REV={name:"INT_2_10_10_10_REV",value:36255,description:"\xA0"},t.CURRENT_QUERY={name:"CURRENT_QUERY",value:34917,description:"\xA0"},t.QUERY_RESULT={name:"QUERY_RESULT",value:34918,description:"\xA0"},t.QUERY_RESULT_AVAILABLE={name:"QUERY_RESULT_AVAILABLE",value:34919,description:"\xA0"},t.ANY_SAMPLES_PASSED={name:"ANY_SAMPLES_PASSED",value:35887,description:"\xA0"},t.ANY_SAMPLES_PASSED_CONSERVATIVE={name:"ANY_SAMPLES_PASSED_CONSERVATIVE",value:36202,description:"\xA0"},t.MAX_DRAW_BUFFERS={name:"MAX_DRAW_BUFFERS",value:34852,description:"\xA0"},t.DRAW_BUFFER0={name:"DRAW_BUFFER0",value:34853,description:"\xA0"},t.DRAW_BUFFER1={name:"DRAW_BUFFER1",value:34854,description:"\xA0"},t.DRAW_BUFFER2={name:"DRAW_BUFFER2",value:34855,description:"\xA0"},t.DRAW_BUFFER3={name:"DRAW_BUFFER3",value:34856,description:"\xA0"},t.DRAW_BUFFER4={name:"DRAW_BUFFER4",value:34857,description:"\xA0"},t.DRAW_BUFFER5={name:"DRAW_BUFFER5",value:34858,description:"\xA0"},t.DRAW_BUFFER6={name:"DRAW_BUFFER6",value:34859,description:"\xA0"},t.DRAW_BUFFER7={name:"DRAW_BUFFER7",value:34860,description:"\xA0"},t.DRAW_BUFFER8={name:"DRAW_BUFFER8",value:34861,description:"\xA0"},t.DRAW_BUFFER9={name:"DRAW_BUFFER9",value:34862,description:"\xA0"},t.DRAW_BUFFER10={name:"DRAW_BUFFER10",value:34863,description:"\xA0"},t.DRAW_BUFFER11={name:"DRAW_BUFFER11",value:34864,description:"\xA0"},t.DRAW_BUFFER12={name:"DRAW_BUFFER12",value:34865,description:"\xA0"},t.DRAW_BUFFER13={name:"DRAW_BUFFER13",value:34866,description:"\xA0"},t.DRAW_BUFFER14={name:"DRAW_BUFFER14",value:34867,description:"\xA0"},t.DRAW_BUFFER15={name:"DRAW_BUFFER15",value:34868,description:"\xA0"},t.MAX_COLOR_ATTACHMENTS={name:"MAX_COLOR_ATTACHMENTS",value:36063,description:"\xA0"},t.COLOR_ATTACHMENT1={name:"COLOR_ATTACHMENT1",value:36065,description:"\xA0"},t.COLOR_ATTACHMENT2={name:"COLOR_ATTACHMENT2",value:36066,description:"\xA0"},t.COLOR_ATTACHMENT3={name:"COLOR_ATTACHMENT3",value:36067,description:"\xA0"},t.COLOR_ATTACHMENT4={name:"COLOR_ATTACHMENT4",value:36068,description:"\xA0"},t.COLOR_ATTACHMENT5={name:"COLOR_ATTACHMENT5",value:36069,description:"\xA0"},t.COLOR_ATTACHMENT6={name:"COLOR_ATTACHMENT6",value:36070,description:"\xA0"},t.COLOR_ATTACHMENT7={name:"COLOR_ATTACHMENT7",value:36071,description:"\xA0"},t.COLOR_ATTACHMENT8={name:"COLOR_ATTACHMENT8",value:36072,description:"\xA0"},t.COLOR_ATTACHMENT9={name:"COLOR_ATTACHMENT9",value:36073,description:"\xA0"},t.COLOR_ATTACHMENT10={name:"COLOR_ATTACHMENT10",value:36074,description:"\xA0"},t.COLOR_ATTACHMENT11={name:"COLOR_ATTACHMENT11",value:36075,description:"\xA0"},t.COLOR_ATTACHMENT12={name:"COLOR_ATTACHMENT12",value:36076,description:"\xA0"},t.COLOR_ATTACHMENT13={name:"COLOR_ATTACHMENT13",value:36077,description:"\xA0"},t.COLOR_ATTACHMENT14={name:"COLOR_ATTACHMENT14",value:36078,description:"\xA0"},t.COLOR_ATTACHMENT15={name:"COLOR_ATTACHMENT15",value:36079,description:"\xA0"},t.SAMPLER_3D={name:"SAMPLER_3D",value:35679,description:"\xA0"},t.SAMPLER_2D_SHADOW={name:"SAMPLER_2D_SHADOW",value:35682,description:"\xA0"},t.SAMPLER_2D_ARRAY={name:"SAMPLER_2D_ARRAY",value:36289,description:"\xA0"},t.SAMPLER_2D_ARRAY_SHADOW={name:"SAMPLER_2D_ARRAY_SHADOW",value:36292,description:"\xA0"},t.SAMPLER_CUBE_SHADOW={name:"SAMPLER_CUBE_SHADOW",value:36293,description:"\xA0"},t.INT_SAMPLER_2D={name:"INT_SAMPLER_2D",value:36298,description:"\xA0"},t.INT_SAMPLER_3D={name:"INT_SAMPLER_3D",value:36299,description:"\xA0"},t.INT_SAMPLER_CUBE={name:"INT_SAMPLER_CUBE",value:36300,description:"\xA0"},t.INT_SAMPLER_2D_ARRAY={name:"INT_SAMPLER_2D_ARRAY",value:36303,description:"\xA0"},t.UNSIGNED_INT_SAMPLER_2D={name:"UNSIGNED_INT_SAMPLER_2D",value:36306,description:"\xA0"},t.UNSIGNED_INT_SAMPLER_3D={name:"UNSIGNED_INT_SAMPLER_3D",value:36307,description:"\xA0"},t.UNSIGNED_INT_SAMPLER_CUBE={name:"UNSIGNED_INT_SAMPLER_CUBE",value:36308,description:"\xA0"},t.UNSIGNED_INT_SAMPLER_2D_ARRAY={name:"UNSIGNED_INT_SAMPLER_2D_ARRAY",value:36311,description:"\xA0"},t.MAX_SAMPLES={name:"MAX_SAMPLES",value:36183,description:"\xA0"},t.SAMPLER_BINDING={name:"SAMPLER_BINDING",value:35097,description:"\xA0"},t.PIXEL_PACK_BUFFER={name:"PIXEL_PACK_BUFFER",value:35051,description:"\xA0"},t.PIXEL_UNPACK_BUFFER={name:"PIXEL_UNPACK_BUFFER",value:35052,description:"\xA0"},t.PIXEL_PACK_BUFFER_BINDING={name:"PIXEL_PACK_BUFFER_BINDING",value:35053,description:"\xA0"},t.PIXEL_UNPACK_BUFFER_BINDING={name:"PIXEL_UNPACK_BUFFER_BINDING",value:35055,description:"\xA0"},t.COPY_READ_BUFFER={name:"COPY_READ_BUFFER",value:36662,description:"\xA0"},t.COPY_WRITE_BUFFER={name:"COPY_WRITE_BUFFER",value:36663,description:"\xA0"},t.COPY_READ_BUFFER_BINDING={name:"COPY_READ_BUFFER_BINDING",value:36662,description:"\xA0"},t.COPY_WRITE_BUFFER_BINDING={name:"COPY_WRITE_BUFFER_BINDING",value:36663,description:"\xA0"},t.FLOAT_MAT2x3={name:"FLOAT_MAT2x3",value:35685,description:"\xA0"},t.FLOAT_MAT2x4={name:"FLOAT_MAT2x4",value:35686,description:"\xA0"},t.FLOAT_MAT3x2={name:"FLOAT_MAT3x2",value:35687,description:"\xA0"},t.FLOAT_MAT3x4={name:"FLOAT_MAT3x4",value:35688,description:"\xA0"},t.FLOAT_MAT4x2={name:"FLOAT_MAT4x2",value:35689,description:"\xA0"},t.FLOAT_MAT4x3={name:"FLOAT_MAT4x3",value:35690,description:"\xA0"},t.UNSIGNED_INT_VEC2={name:"UNSIGNED_INT_VEC2",value:36294,description:"\xA0"},t.UNSIGNED_INT_VEC3={name:"UNSIGNED_INT_VEC3",value:36295,description:"\xA0"},t.UNSIGNED_INT_VEC4={name:"UNSIGNED_INT_VEC4",value:36296,description:"\xA0"},t.UNSIGNED_NORMALIZED={name:"UNSIGNED_NORMALIZED",value:35863,description:"\xA0"},t.SIGNED_NORMALIZED={name:"SIGNED_NORMALIZED",value:36764,description:"\xA0"},t.VERTEX_ATTRIB_ARRAY_INTEGER={name:"VERTEX_ATTRIB_ARRAY_INTEGER",value:35069,description:"\xA0"},t.VERTEX_ATTRIB_ARRAY_DIVISOR={name:"VERTEX_ATTRIB_ARRAY_DIVISOR",value:35070,description:"\xA0"},t.TRANSFORM_FEEDBACK_BUFFER_MODE={name:"TRANSFORM_FEEDBACK_BUFFER_MODE",value:35967,description:"\xA0"},t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS={name:"MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",value:35968,description:"\xA0"},t.TRANSFORM_FEEDBACK_VARYINGS={name:"TRANSFORM_FEEDBACK_VARYINGS",value:35971,description:"\xA0"},t.TRANSFORM_FEEDBACK_BUFFER_START={name:"TRANSFORM_FEEDBACK_BUFFER_START",value:35972,description:"\xA0"},t.TRANSFORM_FEEDBACK_BUFFER_SIZE={name:"TRANSFORM_FEEDBACK_BUFFER_SIZE",value:35973,description:"\xA0"},t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN={name:"TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",value:35976,description:"\xA0"},t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS={name:"MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",value:35978,description:"\xA0"},t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS={name:"MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",value:35979,description:"\xA0"},t.INTERLEAVED_ATTRIBS={name:"INTERLEAVED_ATTRIBS",value:35980,description:"\xA0"},t.SEPARATE_ATTRIBS={name:"SEPARATE_ATTRIBS",value:35981,description:"\xA0"},t.TRANSFORM_FEEDBACK_BUFFER={name:"TRANSFORM_FEEDBACK_BUFFER",value:35982,description:"\xA0"},t.TRANSFORM_FEEDBACK_BUFFER_BINDING={name:"TRANSFORM_FEEDBACK_BUFFER_BINDING",value:35983,description:"\xA0"},t.TRANSFORM_FEEDBACK={name:"TRANSFORM_FEEDBACK",value:36386,description:"\xA0"},t.TRANSFORM_FEEDBACK_PAUSED={name:"TRANSFORM_FEEDBACK_PAUSED",value:36387,description:"\xA0"},t.TRANSFORM_FEEDBACK_ACTIVE={name:"TRANSFORM_FEEDBACK_ACTIVE",value:36388,description:"\xA0"},t.TRANSFORM_FEEDBACK_BINDING={name:"TRANSFORM_FEEDBACK_BINDING",value:36389,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING={name:"FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",value:33296,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE={name:"FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",value:33297,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_RED_SIZE={name:"FRAMEBUFFER_ATTACHMENT_RED_SIZE",value:33298,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE={name:"FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",value:33299,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE={name:"FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",value:33300,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE={name:"FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",value:33301,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE={name:"FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",value:33302,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE={name:"FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",value:33303,description:"\xA0"},t.FRAMEBUFFER_DEFAULT={name:"FRAMEBUFFER_DEFAULT",value:33304,description:"\xA0"},t.DEPTH24_STENCIL8={name:"DEPTH24_STENCIL8",value:35056,description:"\xA0"},t.DRAW_FRAMEBUFFER_BINDING={name:"DRAW_FRAMEBUFFER_BINDING",value:36006,description:"\xA0"},t.READ_FRAMEBUFFER={name:"READ_FRAMEBUFFER",value:36008,description:"\xA0"},t.DRAW_FRAMEBUFFER={name:"DRAW_FRAMEBUFFER",value:36009,description:"\xA0"},t.READ_FRAMEBUFFER_BINDING={name:"READ_FRAMEBUFFER_BINDING",value:36010,description:"\xA0"},t.RENDERBUFFER_SAMPLES={name:"RENDERBUFFER_SAMPLES",value:36011,description:"\xA0"},t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",value:36052,description:"\xA0"},t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE={name:"FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",value:36182,description:"\xA0"},t.UNIFORM_BUFFER={name:"UNIFORM_BUFFER",value:35345,description:"\xA0"},t.UNIFORM_BUFFER_BINDING={name:"UNIFORM_BUFFER_BINDING",value:35368,description:"\xA0"},t.UNIFORM_BUFFER_START={name:"UNIFORM_BUFFER_START",value:35369,description:"\xA0"},t.UNIFORM_BUFFER_SIZE={name:"UNIFORM_BUFFER_SIZE",value:35370,description:"\xA0"},t.MAX_VERTEX_UNIFORM_BLOCKS={name:"MAX_VERTEX_UNIFORM_BLOCKS",value:35371,description:"\xA0"},t.MAX_FRAGMENT_UNIFORM_BLOCKS={name:"MAX_FRAGMENT_UNIFORM_BLOCKS",value:35373,description:"\xA0"},t.MAX_COMBINED_UNIFORM_BLOCKS={name:"MAX_COMBINED_UNIFORM_BLOCKS",value:35374,description:"\xA0"},t.MAX_UNIFORM_BUFFER_BINDINGS={name:"MAX_UNIFORM_BUFFER_BINDINGS",value:35375,description:"\xA0"},t.MAX_UNIFORM_BLOCK_SIZE={name:"MAX_UNIFORM_BLOCK_SIZE",value:35376,description:"\xA0"},t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS={name:"MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",value:35377,description:"\xA0"},t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS={name:"MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",value:35379,description:"\xA0"},t.UNIFORM_BUFFER_OFFSET_ALIGNMENT={name:"UNIFORM_BUFFER_OFFSET_ALIGNMENT",value:35380,description:"\xA0"},t.ACTIVE_UNIFORM_BLOCKS={name:"ACTIVE_UNIFORM_BLOCKS",value:35382,description:"\xA0"},t.UNIFORM_TYPE={name:"UNIFORM_TYPE",value:35383,description:"\xA0"},t.UNIFORM_SIZE={name:"UNIFORM_SIZE",value:35384,description:"\xA0"},t.UNIFORM_BLOCK_INDEX={name:"UNIFORM_BLOCK_INDEX",value:35386,description:"\xA0"},t.UNIFORM_OFFSET={name:"UNIFORM_OFFSET",value:35387,description:"\xA0"},t.UNIFORM_ARRAY_STRIDE={name:"UNIFORM_ARRAY_STRIDE",value:35388,description:"\xA0"},t.UNIFORM_MATRIX_STRIDE={name:"UNIFORM_MATRIX_STRIDE",value:35389,description:"\xA0"},t.UNIFORM_IS_ROW_MAJOR={name:"UNIFORM_IS_ROW_MAJOR",value:35390,description:"\xA0"},t.UNIFORM_BLOCK_BINDING={name:"UNIFORM_BLOCK_BINDING",value:35391,description:"\xA0"},t.UNIFORM_BLOCK_DATA_SIZE={name:"UNIFORM_BLOCK_DATA_SIZE",value:35392,description:"\xA0"},t.UNIFORM_BLOCK_ACTIVE_UNIFORMS={name:"UNIFORM_BLOCK_ACTIVE_UNIFORMS",value:35394,description:"\xA0"},t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES={name:"UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",value:35395,description:"\xA0"},t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER={name:"UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",value:35396,description:"\xA0"},t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER={name:"UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",value:35398,description:"\xA0"},t.OBJECT_TYPE={name:"OBJECT_TYPE",value:37138,description:"\xA0"},t.SYNC_CONDITION={name:"SYNC_CONDITION",value:37139,description:"\xA0"},t.SYNC_STATUS={name:"SYNC_STATUS",value:37140,description:"\xA0"},t.SYNC_FLAGS={name:"SYNC_FLAGS",value:37141,description:"\xA0"},t.SYNC_FENCE={name:"SYNC_FENCE",value:37142,description:"\xA0"},t.SYNC_GPU_COMMANDS_COMPLETE={name:"SYNC_GPU_COMMANDS_COMPLETE",value:37143,description:"\xA0"},t.UNSIGNALED={name:"UNSIGNALED",value:37144,description:"\xA0"},t.SIGNALED={name:"SIGNALED",value:37145,description:"\xA0"},t.ALREADY_SIGNALED={name:"ALREADY_SIGNALED",value:37146,description:"\xA0"},t.TIMEOUT_EXPIRED={name:"TIMEOUT_EXPIRED",value:37147,description:"\xA0"},t.CONDITION_SATISFIED={name:"CONDITION_SATISFIED",value:37148,description:"\xA0"},t.WAIT_FAILED={name:"WAIT_FAILED",value:37149,description:"\xA0"},t.SYNC_FLUSH_COMMANDS_BIT={name:"SYNC_FLUSH_COMMANDS_BIT",value:1,description:"\xA0"},t.COLOR={name:"COLOR",value:6144,description:"\xA0"},t.DEPTH={name:"DEPTH",value:6145,description:"\xA0"},t.STENCIL={name:"STENCIL",value:6146,description:"\xA0"},t.MIN={name:"MIN",value:32775,description:"\xA0"},t.MAX={name:"MAX",value:32776,description:"\xA0"},t.DEPTH_COMPONENT24={name:"DEPTH_COMPONENT24",value:33190,description:"\xA0"},t.STREAM_READ={name:"STREAM_READ",value:35041,description:"\xA0"},t.STREAM_COPY={name:"STREAM_COPY",value:35042,description:"\xA0"},t.STATIC_READ={name:"STATIC_READ",value:35045,description:"\xA0"},t.STATIC_COPY={name:"STATIC_COPY",value:35046,description:"\xA0"},t.DYNAMIC_READ={name:"DYNAMIC_READ",value:35049,description:"\xA0"},t.DYNAMIC_COPY={name:"DYNAMIC_COPY",value:35050,description:"\xA0"},t.DEPTH_COMPONENT32F={name:"DEPTH_COMPONENT32F",value:36012,description:"\xA0"},t.DEPTH32F_STENCIL8={name:"DEPTH32F_STENCIL8",value:36013,description:"\xA0"},t.INVALID_INDEX={name:"INVALID_INDEX",value:4294967295,description:"\xA0"},t.TIMEOUT_IGNORED={name:"TIMEOUT_IGNORED",value:-1,description:"\xA0"},t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL={name:"MAX_CLIENT_WAIT_TIMEOUT_WEBGL",value:37447,description:"\xA0"},t.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE={name:"VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",value:35070,description:"Describes the frequency divisor used for instanced rendering.",extensionName:"ANGLE_instanced_arrays"},t.UNMASKED_VENDOR_WEBGL={name:"UNMASKED_VENDOR_WEBGL",value:37445,description:"Passed to getParameter to get the vendor string of the graphics driver.",extensionName:"ANGLE_instanced_arrays"},t.UNMASKED_RENDERER_WEBGL={name:"UNMASKED_RENDERER_WEBGL",value:37446,description:"Passed to getParameter to get the renderer string of the graphics driver.",extensionName:"WEBGL_debug_renderer_info"},t.MAX_TEXTURE_MAX_ANISOTROPY_EXT={name:"MAX_TEXTURE_MAX_ANISOTROPY_EXT",value:34047,description:"Returns the maximum available anisotropy.",extensionName:"EXT_texture_filter_anisotropic"},t.TEXTURE_MAX_ANISOTROPY_EXT={name:"TEXTURE_MAX_ANISOTROPY_EXT",value:34046,description:"Passed to texParameter to set the desired maximum anisotropy for a texture.",extensionName:"EXT_texture_filter_anisotropic"},t.COMPRESSED_RGB_S3TC_DXT1_EXT={name:"COMPRESSED_RGB_S3TC_DXT1_EXT",value:33776,description:"A DXT1-compressed image in an RGB image format.",extensionName:"WEBGL_compressed_texture_s3tc"},t.COMPRESSED_RGBA_S3TC_DXT1_EXT={name:"COMPRESSED_RGBA_S3TC_DXT1_EXT",value:33777,description:"A DXT1-compressed image in an RGB image format with a simple on/off alpha value.",extensionName:"WEBGL_compressed_texture_s3tc"},t.COMPRESSED_RGBA_S3TC_DXT3_EXT={name:"COMPRESSED_RGBA_S3TC_DXT3_EXT",value:33778,description:"A DXT3-compressed image in an RGBA image format. Compared to a 32-bit RGBA texture, it offers 4:1 compression.",extensionName:"WEBGL_compressed_texture_s3tc"},t.COMPRESSED_RGBA_S3TC_DXT5_EXT={name:"COMPRESSED_RGBA_S3TC_DXT5_EXT",value:33779,description:"A DXT5-compressed image in an RGBA image format. It also provides a 4:1 compression, but differs to the DXT3 compression in how the alpha compression is done.",extensionName:"WEBGL_compressed_texture_s3tc"},t.COMPRESSED_R11_EAC={name:"COMPRESSED_R11_EAC",value:37488,description:"One-channel (red) unsigned format compression.",extensionName:"WEBGL_compressed_texture_etc"},t.COMPRESSED_SIGNED_R11_EAC={name:"COMPRESSED_SIGNED_R11_EAC",value:37489,description:"One-channel (red) signed format compression.",extensionName:"WEBGL_compressed_texture_etc"},t.COMPRESSED_RG11_EAC={name:"COMPRESSED_RG11_EAC",value:37490,description:"Two-channel (red and green) unsigned format compression.",extensionName:"WEBGL_compressed_texture_etc"},t.COMPRESSED_SIGNED_RG11_EAC={name:"COMPRESSED_SIGNED_RG11_EAC",value:37491,description:"Two-channel (red and green) signed format compression.",extensionName:"WEBGL_compressed_texture_etc"},t.COMPRESSED_RGB8_ETC2={name:"COMPRESSED_RGB8_ETC2",value:37492,description:"Compresses RBG8 data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc"},t.COMPRESSED_RGBA8_ETC2_EAC={name:"COMPRESSED_RGBA8_ETC2_EAC",value:37493,description:"Compresses RGBA8 data. The RGB part is encoded the same as RGB_ETC2, but the alpha part is encoded separately.",extensionName:"WEBGL_compressed_texture_etc"},t.COMPRESSED_SRGB8_ETC2={name:"COMPRESSED_SRGB8_ETC2",value:37494,description:"Compresses sRBG8 data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc"},t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC={name:"COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",value:37495,description:"Compresses sRGBA8 data. The sRGB part is encoded the same as SRGB_ETC2, but the alpha part is encoded separately.",extensionName:"WEBGL_compressed_texture_etc"},t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:"COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",value:37496,description:"Similar to RGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.",extensionName:"WEBGL_compressed_texture_etc"},t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:"COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",value:37497,description:"Similar to SRGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.",extensionName:"WEBGL_compressed_texture_etc"},t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG={name:"COMPRESSED_RGB_PVRTC_4BPPV1_IMG",value:35840,description:"RGB compression in 4-bit mode. One block for each 4\xD74 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG={name:"COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",value:35842,description:"RGBA compression in 4-bit mode. One block for each 4\xD74 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG={name:"COMPRESSED_RGB_PVRTC_2BPPV1_IMG",value:35841,description:"RGB compression in 2-bit mode. One block for each 8\xD74 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG={name:"COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",value:35843,description:"RGBA compression in 2-bit mode. One block for each 8\xD74 pixe",extensionName:"WEBGL_compressed_texture_pvrtc"},t.COMPRESSED_RGB_ETC1_WEBGL={name:"COMPRESSED_RGB_ETC1_WEBGL",value:36196,description:"Compresses 24-bit RGB data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc1"},t.COMPRESSED_RGB_ATC_WEBGL={name:"COMPRESSED_RGB_ATC_WEBGL",value:35986,description:"Compresses RGB textures with no alpha channel.",extensionName:"WEBGL_compressed_texture_atc"},t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL={name:"COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",value:35986,description:"Compresses RGBA textures using explicit alpha encoding (useful when alpha transitions are sharp).",extensionName:"WEBGL_compressed_texture_atc"},t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL={name:"COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",value:34798,description:"Compresses RGBA textures using interpolated alpha encoding (useful when alpha transitions are gradient).",extensionName:"WEBGL_compressed_texture_atc"},t.UNSIGNED_INT_24_8_WEBGL={name:"UNSIGNED_INT_24_8_WEBGL",value:34042,description:"Unsigned integer type for 24-bit depth texture data.",extensionName:"WEBGL_depth_texture"},t.HALF_FLOAT_OES={name:"HALF_FLOAT_OES",value:36193,description:"Half floating-point type (16-bit).",extensionName:"OES_texture_half_float"},t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT={name:"FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",value:33297,description:"\xA0",extensionName:"WEBGL_color_buffer_float"},t.UNSIGNED_NORMALIZED_EXT={name:"UNSIGNED_NORMALIZED_EXT",value:35863,description:"\xA0",extensionName:"WEBGL_color_buffer_float"},t.MIN_EXT={name:"MIN_EXT",value:32775,description:"Produces the minimum color components of the source and destination colors.",extensionName:"EXT_blend_minmax"},t.MAX_EXT={name:"MAX_EXT",value:32776,description:"Produces the maximum color components of the source and destination colors.",extensionName:"EXT_blend_minmax"},t.SRGB_EXT={name:"SRGB_EXT",value:35904,description:"Unsized sRGB format that leaves the precision up to the driver.",extensionName:"EXT_sRGB"},t.SRGB_ALPHA_EXT={name:"SRGB_ALPHA_EXT",value:35906,description:"Unsized sRGB format with unsized alpha component.",extensionName:"EXT_sRGB"},t.SRGB8_ALPHA8_EXT={name:"SRGB8_ALPHA8_EXT",value:35907,description:"Sized (8-bit) sRGB and alpha formats.",extensionName:"EXT_sRGB"},t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT={name:"FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",value:33296,description:"Returns the framebuffer color encoding.",extensionName:"EXT_sRGB"},t.FRAGMENT_SHADER_DERIVATIVE_HINT_OES={name:"FRAGMENT_SHADER_DERIVATIVE_HINT_OES",value:35723,description:"Indicates the accuracy of the derivative calculation for the GLSL built-in functions: dFdx, dFdy, and fwidth.",extensionName:"OES_standard_derivatives"},t.COLOR_ATTACHMENT0_WEBGL={name:"COLOR_ATTACHMENT0_WEBGL",value:36064,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT1_WEBGL={name:"COLOR_ATTACHMENT1_WEBGL",value:36065,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT2_WEBGL={name:"COLOR_ATTACHMENT2_WEBGL",value:36066,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT3_WEBGL={name:"COLOR_ATTACHMENT3_WEBGL",value:36067,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT4_WEBGL={name:"COLOR_ATTACHMENT4_WEBGL",value:36068,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT5_WEBGL={name:"COLOR_ATTACHMENT5_WEBGL",value:36069,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT6_WEBGL={name:"COLOR_ATTACHMENT6_WEBGL",value:36070,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT7_WEBGL={name:"COLOR_ATTACHMENT7_WEBGL",value:36071,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT8_WEBGL={name:"COLOR_ATTACHMENT8_WEBGL",value:36072,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT9_WEBGL={name:"COLOR_ATTACHMENT9_WEBGL",value:36073,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT10_WEBGL={name:"COLOR_ATTACHMENT10_WEBGL",value:36074,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT11_WEBGL={name:"COLOR_ATTACHMENT11_WEBGL",value:36075,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT12_WEBGL={name:"COLOR_ATTACHMENT12_WEBGL",value:36076,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT13_WEBGL={name:"COLOR_ATTACHMENT13_WEBGL",value:36077,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT14_WEBGL={name:"COLOR_ATTACHMENT14_WEBGL",value:36078,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.COLOR_ATTACHMENT15_WEBGL={name:"COLOR_ATTACHMENT15_WEBGL",value:36079,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER0_WEBGL={name:"DRAW_BUFFER0_WEBGL",value:34853,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER1_WEBGL={name:"DRAW_BUFFER1_WEBGL",value:34854,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER2_WEBGL={name:"DRAW_BUFFER2_WEBGL",value:34855,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER3_WEBGL={name:"DRAW_BUFFER3_WEBGL",value:34856,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER4_WEBGL={name:"DRAW_BUFFER4_WEBGL",value:34857,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER5_WEBGL={name:"DRAW_BUFFER5_WEBGL",value:34858,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER6_WEBGL={name:"DRAW_BUFFER6_WEBGL",value:34859,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER7_WEBGL={name:"DRAW_BUFFER7_WEBGL",value:34860,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER8_WEBGL={name:"DRAW_BUFFER8_WEBGL",value:34861,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER9_WEBGL={name:"DRAW_BUFFER9_WEBGL",value:34862,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER10_WEBGL={name:"DRAW_BUFFER10_WEBGL",value:34863,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER11_WEBGL={name:"DRAW_BUFFER11_WEBGL",value:34864,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER12_WEBGL={name:"DRAW_BUFFER12_WEBGL",value:34865,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER13_WEBGL={name:"DRAW_BUFFER13_WEBGL",value:34866,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER14_WEBGL={name:"DRAW_BUFFER14_WEBGL",value:34867,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.DRAW_BUFFER15_WEBGL={name:"DRAW_BUFFER15_WEBGL",value:34868,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},t.MAX_COLOR_ATTACHMENTS_WEBGL={name:"MAX_COLOR_ATTACHMENTS_WEBGL",value:36063,description:"Maximum number of framebuffer color attachment points",extensionName:"WEBGL_draw_buffers"},t.MAX_DRAW_BUFFERS_WEBGL={name:"MAX_DRAW_BUFFERS_WEBGL",value:34852,description:"Maximum number of draw buffers",extensionName:"WEBGL_draw_buffers"},t.VERTEX_ARRAY_BINDING_OES={name:"VERTEX_ARRAY_BINDING_OES",value:34229,description:"The bound vertex array object (VAO).",extensionName:"VERTEX_ARRAY_BINDING_OES"},t.QUERY_COUNTER_BITS_EXT={name:"QUERY_COUNTER_BITS_EXT",value:34916,description:"The number of bits used to hold the query result for the given target.",extensionName:"EXT_disjoint_timer_query"},t.CURRENT_QUERY_EXT={name:"CURRENT_QUERY_EXT",value:34917,description:"The currently active query.",extensionName:"EXT_disjoint_timer_query"},t.QUERY_RESULT_EXT={name:"QUERY_RESULT_EXT",value:34918,description:"The query result.",extensionName:"EXT_disjoint_timer_query"},t.QUERY_RESULT_AVAILABLE_EXT={name:"QUERY_RESULT_AVAILABLE_EXT",value:34919,description:"A Boolean indicating whether or not a query result is available.",extensionName:"EXT_disjoint_timer_query"},t.TIME_ELAPSED_EXT={name:"TIME_ELAPSED_EXT",value:35007,description:"Elapsed time (in nanoseconds).",extensionName:"EXT_disjoint_timer_query"},t.TIMESTAMP_EXT={name:"TIMESTAMP_EXT",value:36392,description:"The current time.",extensionName:"EXT_disjoint_timer_query"},t.GPU_DISJOINT_EXT={name:"GPU_DISJOINT_EXT",value:36795,description:"A Boolean indicating whether or not the GPU performed any disjoint operation.",extensionName:"EXT_disjoint_timer_query"},t.zeroMeaningByCommand={getError:"NO_ERROR",blendFunc:"ZERO",blendFuncSeparate:"ZERO",readBuffer:"NONE",getFramebufferAttachmentParameter:"NONE",texParameterf:"NONE",texParameteri:"NONE",drawArrays:"POINTS",drawElements:"POINTS",drawArraysInstanced:"POINTS",drawArraysInstancedAngle:"POINTS",drawBuffers:"POINTS",drawElementsInstanced:"POINTS",drawRangeElements:"POINTS"},t.oneMeaningByCommand={blendFunc:"ONE",blendFuncSeparate:"ONE",drawArrays:"LINES",drawElements:"LINES",drawArraysInstanced:"LINES",drawArraysInstancedAngle:"LINES",drawBuffers:"LINES",drawElementsInstanced:"LINES",drawRangeElements:"LINES"};const c={},m={};(function(){for(const De in t)if(t.hasOwnProperty(De)){const o=t[De];c[o.name]=o,m[o.value]=o}})();class v extends p{get analyserName(){return v.analyserName}appendToAnalysis(o,b){if(!o.commands)return;const N={total:0,totalTriangles:0,totalTriangleStrip:0,totalTriangleFan:0,totalLines:0,totalLineStrip:0,totalLineLoop:0,totalPoints:0};for(const F of o.commands)F.name==="drawArrays"&&F.commandArguments.length>=3||F.name==="drawArraysInstanced"&&F.commandArguments.length>=3||F.name==="drawArraysInstancedANGLE"&&F.commandArguments.length>=3?this.appendToPrimitives(N,F.commandArguments[0],F.commandArguments[2]):F.name==="drawElements"&&F.commandArguments.length>=2||F.name==="drawElementsInstanced"&&F.commandArguments.length>=2||F.name==="drawElementsInstancedANGLE"&&F.commandArguments.length>=2?this.appendToPrimitives(N,F.commandArguments[0],F.commandArguments[1]):F.name==="drawRangeElements"&&F.commandArguments.length>=4&&this.appendToPrimitives(N,F.commandArguments[0],F.commandArguments[3]);b.total=N.total,b.triangles=N.totalTriangles,b.triangleStrip=N.totalTriangleStrip,b.triangleFan=N.totalTriangleFan,b.lines=N.totalLines,b.lineStrip=N.totalLineStrip,b.lineLoop=N.totalLineLoop,b.points=N.totalPoints}appendToPrimitives(o,b,N){b===t.POINTS.value?o.totalPoints+=N:b===t.LINES.value?o.totalLines+=N:b===t.LINE_STRIP.value?o.totalLineStrip+=N:b===t.LINE_LOOP.value?o.totalLineLoop+=N:b===t.TRIANGLES.value?o.totalTriangles+=N:b===t.TRIANGLE_STRIP.value?o.totalTriangleStrip+=N:b===t.TRIANGLE_FAN.value&&(o.totalTriangleFan+=N),o.total+=N}}v.analyserName="Primitives";class x{constructor(o){this.contextInformation=o,this.analysers=[],this.initAnalysers()}appendAnalyses(o){for(const b in this.analysers)this.analysers.hasOwnProperty(b)&&this.analysers[b].appendAnalysis(o)}initAnalysers(){this.analysers.push(new d(this.contextInformation),new r(this.contextInformation),new v(this.contextInformation))}}class w{static getWebGlObjectTag(o){return o[w.SPECTOROBJECTTAGKEY]}static attachWebGlObjectTag(o,b){b.displayText=w.stringifyWebGlObjectTag(b),o[w.SPECTOROBJECTTAGKEY]=b}static stringifyWebGlObjectTag(o){return o?`${o.typeName} - ID: ${o.id}`:"No tag available."}}w.SPECTOROBJECTTAGKEY="__SPECTOR_Object_TAG";class R{constructor(){this.id=0}get type(){return window[this.typeName]||null}tagWebGlObject(o){if(!this.type)return;let b;if(!o||(b=w.getWebGlObjectTag(o),b))return b;if(o instanceof this.type){const N=this.getNextId();return b={typeName:this.typeName,id:N},w.attachWebGlObjectTag(o,b),b}return b}getNextId(){return this.id++}}class S{constructor(o){this.options=o}createCapture(o,b,N){const F=class{static getStackTrace(ae=0,_e=0){const Ae=[];try{throw new Error("Errorator.")}catch(Ie){if(Ie.stack){const Fe=Ie.stack.split(`
`);for(let ve=0,je=Fe.length;ve<je;ve++)Fe[ve].match(/^\s*[A-Za-z0-9\-_\$]+\(/)?Ae.push(Fe[ve]):Fe[ve].indexOf("    at ")===0?(Fe[ve]=Fe[ve].replace("    at ",""),Ae.push(Fe[ve])):Fe[ve].indexOf("/<@http")!==-1?(Fe[ve]=Fe[ve].substring(Fe[ve].indexOf("/<@http")+3),Ae.push(Fe[ve])):Fe[ve].indexOf("@http")!==-1&&(Fe[ve]=Fe[ve].replace("@http"," (http"),Fe[ve]=Fe[ve]+")",Ae.push(Fe[ve]))}else if(Ie.message){const Fe=Ie.message.split(`
`);for(let ve=0,je=Fe.length;ve<je;ve++)if(Fe[ve].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){let St=Fe[ve];Fe[ve+1]&&(St+=" at "+Fe[ve+1],ve++),Ae.push(St)}}}if(!Ae){let Ie=arguments.callee.caller;for(;Ie;){const Fe=Ie.toString(),ve=Fe.substring(Fe.indexOf("function")+8,Fe.indexOf(""))||"anonymous";Ae.push(ve),Ie=Ie.caller}}if(Ae){Ae.shift();for(let Ie=0;Ie<ae&&Ae.length>0;Ie++)Ae.shift();for(let Ie=0;Ie<_e&&Ae.length>0;Ie++)Ae.pop()}return Ae}}.getStackTrace(4,1),$=o.name.indexOf("uniform")===0?this.stringifyUniform(o.arguments):this.stringify(o.arguments,o.result),J={id:b,startTime:o.startTime,commandEndTime:o.endTime,endTime:0,name:o.name,commandArguments:o.arguments,result:o.result,stackTrace:F,status:0,marker:N,text:$};this.transformCapture(J);for(let ae=0;ae<J.commandArguments.length;ae++){const _e=J.commandArguments[ae];_e&&_e.length&&_e.length>50&&(J.commandArguments[ae]="Array Length: "+_e.length)}if(J.commandArguments){const ae=[];for(let _e=0;_e<J.commandArguments.length;_e++){const Ae=J.commandArguments[_e];Ae===void 0?ae.push(void 0):Ae===null?ae.push(null):ae.push(JSON.parse(this.stringifyJSON(Ae)))}J.commandArguments=ae}return J.result&&(J.result=JSON.parse(this.stringifyJSON(J.result))),J}stringifyJSON(o){try{return JSON.stringify(o)}catch{return null}}transformCapture(o){}stringify(o,b){let N=this.spiedCommandName;return o&&o.length>0&&(N+=": "+this.stringifyArgs(o).join(", ")),b!=null&&(N+=" -> "+this.stringifyResult(b)),N}stringifyUniform(o){let b=this.spiedCommandName;if(o&&o.length>0){const N=[];N.push(this.stringifyValue(o[0]));for(let F=1;F<o.length;F++)if(typeof o[F]=="number"){const $=o[F]+"";N.push($)}else{const $=this.stringifyValue(o[F]);N.push($)}b+=": "+N.join(", ")}return b}stringifyArgs(o){const b=[];for(let N=0;N<o.length;N++){const F=o[N],$=this.stringifyValue(F);b.push($)}return b}stringifyResult(o){if(o)return this.stringifyValue(o)}stringifyValue(o){if(o===null)return"null";if(o===void 0)return"undefined";const b=w.getWebGlObjectTag(o);return b?b.displayText:typeof o=="number"&&t.isWebGlConstant(o)?t.stringifyWebGlConstant(o,this.spiedCommandName):typeof o=="string"?o:o instanceof HTMLImageElement?o.src:o instanceof ArrayBuffer?"[--("+o.byteLength+")--]":o.length?"[..("+o.length+")..]":o.byteLength?"[..("+o.byteLength+")..]":o}}class L extends S{get spiedCommandName(){return L.commandName}stringifyArgs(o){var b,N;const F=[];for(let $=0;$<o.length;$++){const J=o[$];if($>0&&typeof J=="number")F.push((N=(b=o[$])===null||b===void 0?void 0:b.toFixed(0))!==null&&N!==void 0?N:"0");else{const ae=this.stringifyValue(J);F.push(ae)}}return F}}L.commandName="bufferSubData";class A{static storeOriginFunction(o,b){if(!o||!o[b])return;const N=this.getOriginFunctionName(b);o[N]||(o[N]=o[b])}static resetOriginFunction(o,b){if(!o||!o[b])return;const N=this.getOriginFunctionName(b);o[N]&&(o[b]=o[N],delete o[N])}static storePrototypeOriginFunction(o,b){if(!o||!o.prototype[b])return;const N=this.getOriginFunctionName(b);o.prototype[N]||(o.prototype[N]=o.prototype[b])}static executePrototypeOriginFunction(o,b,N,F){if(!o)return;const $=this.getOriginFunctionName(N);return b.prototype[$]?(o[$]||(o[$]=b.prototype[$]),this.executeFunction(o,$,F)):void 0}static executeOriginFunction(o,b,N){if(!o)return;const F=this.getOriginFunctionName(b);return o[F]?this.executeFunction(o,F,N):void 0}static executeFunction(o,b,N){const F=N;if(F===void 0||F.length===0)return o[b]();switch(F.length){case 1:return o[b](F[0]);case 2:return o[b](F[0],F[1]);case 3:return o[b](F[0],F[1],F[2]);case 4:return o[b](F[0],F[1],F[2],F[3]);case 5:return o[b](F[0],F[1],F[2],F[3],F[4]);case 6:return o[b](F[0],F[1],F[2],F[3],F[4],F[5]);case 7:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6]);case 8:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7]);case 9:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8]);case 10:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9]);case 11:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10]);case 12:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11]);case 13:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11],F[12]);case 14:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11],F[12],F[13]);case 15:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11],F[12],F[13],F[14]);case 16:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11],F[12],F[13],F[14],F[15]);case 17:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11],F[12],F[13],F[14],F[15],F[16]);case 18:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11],F[12],F[13],F[14],F[15],F[16],F[17]);case 19:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11],F[12],F[13],F[14],F[15],F[16],F[17],F[18]);case 20:return o[b](F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11],F[12],F[13],F[14],F[15],F[16],F[17],F[18],F[19]);default:return o[b].apply(o,F)}}static getOriginFunctionName(o){return this.originFunctionPrefix+o}}A.originFunctionPrefix="__SPECTOR_Origin_";class y extends S{get spiedCommandName(){return y.commandName}stringifyArgs(o){const b=[];if(o.length>0){const N=o[0],F=this.stringifyValue(N);b.push(F)}if(o.length>1){const N=""+o[1];b.push(N)}return o.length>2&&b.push(o[2]),b}}y.commandName="bindAttribLocation";class P extends S{get spiedCommandName(){return P.commandName}stringifyArgs(o){const b=[],N=this.options.context.getParameter(t.READ_FRAMEBUFFER_BINDING.value),F=this.options.tagWebGlObject(N);b.push("READ FROM: "+this.stringifyValue(F));const $=this.options.context.getParameter(t.DRAW_FRAMEBUFFER_BINDING.value),J=this.options.tagWebGlObject($);b.push("WRITE TO: "+this.stringifyValue(J));for(let ae=0;ae<8;ae++)b.push(o[ae]);return(o[8]&t.DEPTH_BUFFER_BIT.value)===t.DEPTH_BUFFER_BIT.value&&b.push(t.DEPTH_BUFFER_BIT.name),(o[8]&t.STENCIL_BUFFER_BIT.value)===t.STENCIL_BUFFER_BIT.value&&b.push(t.STENCIL_BUFFER_BIT.name),(o[8]&t.COLOR_BUFFER_BIT.value)===t.COLOR_BUFFER_BIT.value&&b.push(t.COLOR_BUFFER_BIT.name),b.push(t.stringifyWebGlConstant(o[9],"blitFrameBuffer")),b}}P.commandName="blitFrameBuffer";class B extends S{get spiedCommandName(){return B.commandName}stringifyArgs(o){const b=[];return(o[0]&t.DEPTH_BUFFER_BIT.value)===t.DEPTH_BUFFER_BIT.value&&b.push(t.DEPTH_BUFFER_BIT.name),(o[0]&t.STENCIL_BUFFER_BIT.value)===t.STENCIL_BUFFER_BIT.value&&b.push(t.STENCIL_BUFFER_BIT.name),(o[0]&t.COLOR_BUFFER_BIT.value)===t.COLOR_BUFFER_BIT.value&&b.push(t.COLOR_BUFFER_BIT.name),b}}B.commandName="clear";const T=["lineWidth"];class I extends S{constructor(o,b){super(o),this.internalSpiedCommandName=b,this.isDeprecated=T.indexOf(this.spiedCommandName)>-1}get spiedCommandName(){return this.internalSpiedCommandName}transformCapture(o){this.isDeprecated&&(o.status=50)}}class D extends S{get spiedCommandName(){return D.commandName}stringifyArgs(o){const b=[];return b.push(o[0]),b}}D.commandName="disableVertexAttribArray";class k extends S{get spiedCommandName(){return k.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawArrays")),b.push(o[1]+" indices"),b.push(o[2]),b}}k.commandName="drawArrays";class U extends S{get spiedCommandName(){return U.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawArraysInstanced")),b.push(o[1]),b.push(o[2]),b.push(o[3]),b}}U.commandName="drawArraysInstanced";class G extends S{get spiedCommandName(){return G.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawArraysInstancedANGLE")),b.push(o[1]),b.push(o[2]),b.push(o[3]),b}}G.commandName="drawArraysInstancedANGLE";class H extends S{get spiedCommandName(){return H.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawElements")),b.push(o[1]+" indices"),b.push(t.stringifyWebGlConstant(o[2],"drawElements")),b.push(o[3]),b}}H.commandName="drawElements";class se extends S{get spiedCommandName(){return se.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawElementsInstancedANGLE")),b.push(o[1]+" indices"),b.push(t.stringifyWebGlConstant(o[2],"drawElementsInstancedANGLE")),b.push(o[3]),b.push(o[4]),b}}se.commandName="drawElementsInstancedANGLE";class ee extends S{get spiedCommandName(){return ee.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawElementsInstanced")),b.push(o[1]+" indices"),b.push(t.stringifyWebGlConstant(o[2],"drawElementsInstanced")),b.push(o[3]),b.push(o[4]),b}}ee.commandName="drawElementsInstanced";class Z extends S{get spiedCommandName(){return Z.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawRangeElements")),b.push(o[1]),b.push(o[2]),b.push(o[3]),b.push(t.stringifyWebGlConstant(o[4],"drawRangeElements")),b.push(o[5]),b}}Z.commandName="drawRangeElements";class ne extends S{get spiedCommandName(){return ne.commandName}stringifyResult(o){if(o)return`name: ${o.name}, size: ${o.size}, type: ${o.type}`}}ne.commandName="getActiveAttrib";class W extends S{get spiedCommandName(){return W.commandName}stringifyResult(o){if(o)return`name: ${o.name}, size: ${o.size}, type: ${o.type}`}}W.commandName="getActiveUniform";class K extends S{get spiedCommandName(){return K.commandName}stringifyResult(o){var b;if(o!=null)return(b=o==null?void 0:o.toFixed(0))!==null&&b!==void 0?b:"0"}}K.commandName="getAttribLocation";class re extends S{get spiedCommandName(){return re.commandName}stringifyResult(o){return o?"true":"false"}}re.commandName="getExtension";class oe extends S{get spiedCommandName(){return oe.commandName}stringifyResult(o){if(!o)return"null";const b=w.getWebGlObjectTag(o);return b?b.displayText:o}}oe.commandName="getParameter";class de extends S{get spiedCommandName(){return de.commandName}stringifyResult(o){if(o)return`min: ${o.rangeMin}, max: ${o.rangeMax}, precision: ${o.precision}`}}de.commandName="getShaderPrecisionFormat";class ue extends S{get spiedCommandName(){return ue.commandName}stringifyResult(o){if(o)return`name: ${o.name}, size: ${o.size}, type: ${o.type}`}}ue.commandName="getTransformFeedbackVarying";class Be extends S{get spiedCommandName(){return Be.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"multiDrawArraysInstancedBaseInstanceWEBGL")),b.push(`drawCount=${o[9]}`),b.push(o[2]),b.push(o[4]),b.push(o[6]),b.push(o[8]),b}}Be.commandName="multiDrawArraysInstancedBaseInstanceWEBGL";class Ge extends S{get spiedCommandName(){return Ge.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawArrays")),b.push(`drawCount=${o[7]}`),b.push(o[2]),b.push(o[4]),b.push(o[6]),b}}Ge.commandName="multiDrawArraysInstancedWEBGL";class ke extends S{get spiedCommandName(){return ke.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawArrays")),b.push(`drawCount=${o[5]}`),b.push(o[2]),b.push(o[4]),b}}ke.commandName="multiDrawArraysWEBGL";class _t extends S{get spiedCommandName(){return _t.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawArrays")),b.push(t.stringifyWebGlConstant(o[3],"drawArrays")),b.push(`drawCount=${o[11]}`),b.push(o[2]),b.push(o[4]),b.push(o[6]),b.push(o[8]),b.push(o[10]),b}}_t.commandName="multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL";class wt extends S{get spiedCommandName(){return wt.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawArrays")),b.push(t.stringifyWebGlConstant(o[3],"drawArrays")),b.push(`drawCount=${o[8]}`),b.push(o[2]),b.push(o[5]),b.push(o[7]),b}}wt.commandName="multiDrawElementsInstancedWEBGL";class it extends S{get spiedCommandName(){return it.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawArrays")),b.push(t.stringifyWebGlConstant(o[3],"drawArrays")),b.push(`drawCount=${o[6]}`),b.push(o[2]),b.push(o[5]),b}}it.commandName="multiDrawElementsWEBGL";class Vt extends S{get spiedCommandName(){return Vt.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawArraysInstanced")),b.push(o[1]),b.push(o[2]),b.push(o[3]),b.push(`baseInstance = ${o[4]}`),b}}Vt.commandName="drawArraysInstancedBaseInstanceWEBGL";class Lt extends S{get spiedCommandName(){return Lt.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"drawElementsInstanced")),b.push(o[1]+" indices"),b.push(t.stringifyWebGlConstant(o[2],"drawElementsInstanced")),b.push(o[3]),b.push(o[4]),b.push(`baseVertex = ${o[5]}`),b.push(`baseInstance = ${o[6]}`),b}}Lt.commandName="drawElementsInstancedBaseVertexBaseInstanceWEBGL";class mt extends S{get spiedCommandName(){return mt.commandName}stringifyArgs(o){var b,N;const F=[];for(let $=0;$<4;$++)F.push((N=(b=o[$])===null||b===void 0?void 0:b.toFixed(0))!==null&&N!==void 0?N:"0");return F}}function Le(De){return De==null?"":`${De.toFixed(0)} (0b${(De>>>0).toString(2)})`}mt.commandName="scissor";class Xe extends S{get spiedCommandName(){return Xe.commandName}stringifyArgs(o){const b=[];return b.push(Le(o[0])),b}}Xe.commandName="stencilMask";class q extends S{get spiedCommandName(){return q.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"stencilMaskSeparate")),b.push(Le(o[1])),b}}q.commandName="stencilMaskSeparate";class X extends S{get spiedCommandName(){return X.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"stencilFunc")),b.push(Le(o[1])),b.push(Le(o[2])),b}}X.commandName="stencilFunc";class he extends S{get spiedCommandName(){return he.commandName}stringifyArgs(o){const b=[];return b.push(t.stringifyWebGlConstant(o[0],"stencilFuncSeparate")),b.push(t.stringifyWebGlConstant(o[1],"stencilFuncSeparate")),b.push(Le(o[2])),b.push(Le(o[3])),b}}he.commandName="stencilFuncSeparate";class be extends S{get spiedCommandName(){return be.commandName}stringifyArgs(o){const b=[];return b.push(o[0]),b.push(o[1]),b.push(t.stringifyWebGlConstant(o[2],"vertexAttribPointer")),b.push(o[3]),b.push(o[4]),b.push(o[5]),b}}be.commandName="vertexAttribPointer";class Te extends S{get spiedCommandName(){return Te.commandName}stringifyArgs(o){const b=[];for(let N=0;N<4;N++)b.push(o[N].toFixed(0));return b}}Te.commandName="viewport";class Re extends S{get spiedCommandName(){return Re.commandName}stringifyArgs(o){const b=[];return b.push(o[0]),b}}Re.commandName="enableVertexAttribArray";class Ue{constructor(o){this.spiedCommandName=o.spiedCommandName,this.spiedCommandRunningContext=o.spiedCommandRunningContext,this.spiedCommand=this.spiedCommandRunningContext[this.spiedCommandName],A.storeOriginFunction(this.spiedCommandRunningContext,this.spiedCommandName),this.callback=o.callback,this.commandOptions={context:o.context,contextVersion:o.contextVersion,extensions:o.extensions,toggleCapture:o.toggleCapture},this.initCustomCommands(),this.initCommand()}spy(){this.spiedCommandRunningContext[this.spiedCommandName]=this.overloadedCommand}unSpy(){this.spiedCommandRunningContext[this.spiedCommandName]=this.spiedCommand}createCapture(o,b,N){return this.command.createCapture(o,b,N)}initCommand(){Ue.customCommandsConstructors[this.spiedCommandName]?this.command=Ue.customCommandsConstructors[this.spiedCommandName](this.commandOptions):this.command=new I(this.commandOptions,this.spiedCommandName),this.overloadedCommand=this.getSpy()}getSpy(){const o=this;return function(){const b=E.now,N=A.executeOriginFunction(o.spiedCommandRunningContext,o.spiedCommandName,arguments),F=E.now,$={name:o.spiedCommandName,arguments,result:N,startTime:b,endTime:F};return o.callback(o,$),N}}initCustomCommands(){Ue.customCommandsConstructors||(Ue.customCommandsConstructors={[y.commandName]:o=>new y(o),[P.commandName]:o=>new P(o),[L.commandName]:o=>new L(o),[B.commandName]:o=>new B(o),[D.commandName]:o=>new D(o),[k.commandName]:o=>new k(o),[U.commandName]:o=>new U(o),[G.commandName]:o=>new G(o),[H.commandName]:o=>new H(o),[ee.commandName]:o=>new ee(o),[se.commandName]:o=>new se(o),[Z.commandName]:o=>new Z(o),[ne.commandName]:o=>new ne(o),[W.commandName]:o=>new W(o),[K.commandName]:o=>new K(o),[re.commandName]:o=>new re(o),[oe.commandName]:o=>new oe(o),[de.commandName]:o=>new de(o),[ue.commandName]:o=>new ue(o),[Be.commandName]:o=>new Be(o),[Ge.commandName]:o=>new Ge(o),[ke.commandName]:o=>new ke(o),[_t.commandName]:o=>new _t(o),[wt.commandName]:o=>new wt(o),[it.commandName]:o=>new it(o),[Vt.commandName]:o=>new Vt(o),[Lt.commandName]:o=>new Lt(o),[mt.commandName]:o=>new mt(o),[Xe.commandName]:o=>new Xe(o),[q.commandName]:o=>new q(o),[X.commandName]:o=>new X(o),[he.commandName]:o=>new he(o),[be.commandName]:o=>new be(o),[Te.commandName]:o=>new Te(o),[Re.commandName]:o=>new Re(o)})}}class j{constructor(o){this.options=o,this.context=o.context,this.contextVersion=o.contextVersion,this.extensions=o.extensions,this.toggleCapture=o.toggleCapture,this.consumeCommands=this.getConsumeCommands(),this.changeCommandsByState=this.getChangeCommandsByState(),this.commandNameToStates=this.getCommandNameToStates()}get requireStartAndStopStates(){return!0}startCapture(o,b,N){return this.quickCapture=b,this.fullCapture=N,this.capturedCommandsByState={},o&&this.requireStartAndStopStates&&(this.currentState={},this.readFromContextNoSideEffects()),this.copyCurrentStateToPrevious(),this.currentState={},this.previousState}stopCapture(){return this.requireStartAndStopStates&&this.readFromContextNoSideEffects(),this.analyse(void 0),this.currentState}registerCallbacks(o){for(const b in this.changeCommandsByState)if(this.changeCommandsByState.hasOwnProperty(b))for(const N of this.changeCommandsByState[b])o[N]=o[N]||[],o[N].push(this.onChangeCommand.bind(this));for(const b of this.consumeCommands)o[b]=o[b]||[],o[b].push(this.onConsumeCommand.bind(this))}getStateData(){return this.currentState}getConsumeCommands(){return[]}getChangeCommandsByState(){return{}}copyCurrentStateToPrevious(){this.currentState&&(this.previousState=this.currentState)}onChangeCommand(o){const b=this.commandNameToStates[o.name];for(const N of b){if(!this.isValidChangeCommand(o,N))return;this.capturedCommandsByState[N]=this.capturedCommandsByState[N]||[],this.capturedCommandsByState[N].push(o)}}isValidChangeCommand(o,b){return!0}onConsumeCommand(o){this.isValidConsumeCommand(o)&&(this.readFromContextNoSideEffects(),this.analyse(o),this.storeCommandIds(),o[this.stateName]=this.currentState,this.startCapture(!1,this.quickCapture,this.fullCapture))}isValidConsumeCommand(o){return this.lastCommandName=o==null?void 0:o.name,!0}analyse(o){for(const b in this.capturedCommandsByState)if(this.capturedCommandsByState.hasOwnProperty(b)){const N=this.capturedCommandsByState[b],F=N.length-1;if(F>=0)if(o){for(let ae=0;ae<F;ae++){const _e=N[ae];_e.consumeCommandId=o.id,this.changeCommandCaptureStatus(_e,30)}const $=this.isStateEnableNoSideEffects(b,o.commandArguments),J=N[F];J.consumeCommandId=o.id,this.areStatesEquals(this.currentState[b],this.previousState[b])?this.changeCommandCaptureStatus(J,30):$?this.changeCommandCaptureStatus(J,40):this.changeCommandCaptureStatus(J,20)}else for(let $=0;$<N.length;$++){const J=N[$];this.changeCommandCaptureStatus(J,10)}}}storeCommandIds(){const o=["unusedCommandIds","disabledCommandIds","redundantCommandIds","validCommandIds"];for(const b of o)this.currentState[b]=[];for(const b in this.capturedCommandsByState)if(this.capturedCommandsByState.hasOwnProperty(b)){const N=this.capturedCommandsByState[b];for(const F of N)switch(F.status){case 10:this.currentState.unusedCommandIds.push(F.id);break;case 20:this.currentState.disabledCommandIds.push(F.id);break;case 30:this.currentState.redundantCommandIds.push(F.id);break;case 40:this.currentState.validCommandIds.push(F.id)}}for(const b of o)this.currentState[b].length||delete this.currentState[b]}changeCommandCaptureStatus(o,b){return o.status<b&&(o.status=b,!0)}areStatesEquals(o,b){if(typeof o!=typeof b||o&&!b||b&&!o)return!1;if(o==null)return!0;if(o.length&&b.length&&typeof o!="string"){if(o.length!==b.length)return!1;for(let N=0;N<o.length;N++)if(o[N]!==b[N])return!1;return!0}return o===b}isStateEnable(o,b){return!0}getSpectorData(o){if(o)return{__SPECTOR_Object_TAG:w.getWebGlObjectTag(o)||this.options.tagWebGlObject(o),__SPECTOR_Object_CustomData:o.__SPECTOR_Object_CustomData,__SPECTOR_Metadata:o.__SPECTOR_Metadata}}readFromContextNoSideEffects(){this.toggleCapture(!1),this.readFromContext(),this.toggleCapture(!0)}isStateEnableNoSideEffects(o,b){this.toggleCapture(!1);const N=this.isStateEnable(o,b);return this.toggleCapture(!0),N}getCommandNameToStates(){const o={};for(const b in this.changeCommandsByState)if(this.changeCommandsByState.hasOwnProperty(b))for(const N of this.changeCommandsByState[b])o[N]=o[N]||[],o[N].push(b);return o}}class xe extends j{getWebgl1Parameters(){return[]}getWebgl2Parameters(){return[]}getChangeCommandsByState(){this.parameters=[],this.parameters.push(this.getWebgl1Parameters()),this.contextVersion>1&&this.parameters.push(this.getWebgl2Parameters());const o={};for(let b=1;b<=this.contextVersion&&!(b>this.parameters.length);b++)if(this.parameters[b-1]){for(const N of this.parameters[b-1])if(N.changeCommands)for(const F of N.changeCommands)o[N.constant.name]=o[N.constant.name]||[],o[N.constant.name].push(F)}return o}readFromContext(){for(let o=1;o<=this.contextVersion&&!(o>this.parameters.length);o++)for(const b of this.parameters[o-1]){const N=this.readParameterFromContext(b);if(N==null){const $=this.stringifyParameterValue(N,b);this.currentState[b.constant.name]=$;continue}const F=w.getWebGlObjectTag(N);if(F)this.currentState[b.constant.name]=F;else{const $=this.stringifyParameterValue(N,b);this.currentState[b.constant.name]=$}}}readParameterFromContext(o){return o.constant.extensionName&&!this.extensions[o.constant.extensionName]?`Extension ${o.constant.extensionName} is unavailable.`:this.context.getParameter(o.constant.value)}stringifyParameterValue(o,b){if(o===null)return"null";if(o===void 0)return"undefined";if(b.returnType===30)return Le(o);if(typeof o=="number"&&t.isWebGlConstant(o)){if(b.returnType===20){const N=b.changeCommands&&b.changeCommands[0]||"";return t.stringifyWebGlConstant(o,N)}return o}if(o.length&&typeof o!="string"){const N=[];for(let F=0;F<o.length;F++)N.push(o[F]);return N}return o}}class Pe extends xe{get stateName(){return Pe.stateName}getWebgl1Parameters(){return[{constant:t.PACK_ALIGNMENT,changeCommands:["pixelStorei"]},{constant:t.UNPACK_ALIGNMENT,changeCommands:["pixelStorei"]},{constant:t.UNPACK_COLORSPACE_CONVERSION_WEBGL,returnType:20,changeCommands:["pixelStorei"]},{constant:t.UNPACK_FLIP_Y_WEBGL,changeCommands:["pixelStorei"]},{constant:t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,changeCommands:["pixelStorei"]}]}getWebgl2Parameters(){return[{constant:t.PACK_ROW_LENGTH,changeCommands:["pixelStorei"]},{constant:t.PACK_SKIP_PIXELS,changeCommands:["pixelStorei"]},{constant:t.PACK_SKIP_ROWS,changeCommands:["pixelStorei"]},{constant:t.UNPACK_IMAGE_HEIGHT,changeCommands:["pixelStorei"]},{constant:t.UNPACK_SKIP_PIXELS,changeCommands:["pixelStorei"]},{constant:t.UNPACK_SKIP_ROWS,changeCommands:["pixelStorei"]},{constant:t.UNPACK_SKIP_IMAGES,changeCommands:["pixelStorei"]}]}getConsumeCommands(){return["readPixels","texImage2D","texSubImage2D"]}isValidChangeCommand(o,b){return c[b].value===o.commandArguments[0]}}Pe.stateName="AlignmentState";class We extends xe{get stateName(){return We.stateName}getWebgl1Parameters(){return[{constant:t.BLEND,changeCommands:["enable","disable"]},{constant:t.BLEND_COLOR,changeCommands:["blendColor"]},{constant:t.BLEND_DST_ALPHA,returnType:20,changeCommands:["blendFunc","blendFuncSeparate"]},{constant:t.BLEND_DST_RGB,returnType:20,changeCommands:["blendFunc","blendFuncSeparate"]},{constant:t.BLEND_EQUATION_ALPHA,returnType:20,changeCommands:["blendEquation","blendEquationSeparate"]},{constant:t.BLEND_EQUATION_RGB,returnType:20,changeCommands:["blendEquation","blendEquationSeparate"]},{constant:t.BLEND_SRC_ALPHA,returnType:20,changeCommands:["blendFunc","blendFuncSeparate"]},{constant:t.BLEND_SRC_RGB,returnType:20,changeCommands:["blendFunc","blendFuncSeparate"]}]}isValidChangeCommand(o,b){return o.name!=="enable"&&o.name!=="disable"||o.commandArguments[0]===t.BLEND.value}getConsumeCommands(){return s}isStateEnable(o,b){return this.context.isEnabled(t.BLEND.value)}}We.stateName="BlendState";class $e extends xe{get stateName(){return $e.stateName}getWebgl1Parameters(){return[{constant:t.COLOR_CLEAR_VALUE,changeCommands:["clearColor"]},{constant:t.DEPTH_CLEAR_VALUE,changeCommands:["clearDepth"]},{constant:t.STENCIL_CLEAR_VALUE,changeCommands:["clearStencil"]}]}getConsumeCommands(){return["clear"]}isStateEnable(o,b){switch(o){case t.COLOR_CLEAR_VALUE.name:return t.COLOR_BUFFER_BIT.value===(b[0]&t.COLOR_BUFFER_BIT.value);case t.DEPTH_CLEAR_VALUE.name:return t.DEPTH_BUFFER_BIT.value===(b[0]&t.DEPTH_BUFFER_BIT.value);case t.STENCIL_CLEAR_VALUE.name:return t.STENCIL_BUFFER_BIT.value===(b[0]&t.STENCIL_BUFFER_BIT.value)}return!1}}$e.stateName="ClearState";class Qe extends xe{get stateName(){return Qe.stateName}getWebgl1Parameters(){return[{constant:t.COLOR_WRITEMASK,changeCommands:["colorMask"]}]}getConsumeCommands(){return s}}Qe.stateName="ColorState";class ft extends xe{get stateName(){return ft.stateName}getWebgl1Parameters(){return[{constant:t.SAMPLE_COVERAGE_VALUE,changeCommands:["sampleCoverage"]},{constant:t.SAMPLE_COVERAGE_INVERT,changeCommands:["sampleCoverage"]}]}getWebgl2Parameters(){return[{constant:t.SAMPLE_COVERAGE,changeCommands:["enable","disable"]},{constant:t.SAMPLE_ALPHA_TO_COVERAGE,changeCommands:["enable","disable"]}]}isValidChangeCommand(o,b){return o.name!=="enable"&&o.name!=="disable"||(o.commandArguments[0]===t.SAMPLE_COVERAGE.value?b===t.SAMPLE_COVERAGE.name:o.commandArguments[0]===t.SAMPLE_ALPHA_TO_COVERAGE.value&&b===t.SAMPLE_ALPHA_TO_COVERAGE.name)}getConsumeCommands(){return s}isStateEnable(o,b){return this.contextVersion===2&&this.context.isEnabled(t.SAMPLE_COVERAGE.value)}}ft.stateName="CoverageState";class Ft extends xe{get stateName(){return Ft.stateName}getWebgl1Parameters(){return[{constant:t.CULL_FACE,changeCommands:["enable","disable"]},{constant:t.CULL_FACE_MODE,returnType:20,changeCommands:["cullFace"]}]}getConsumeCommands(){return s}isValidChangeCommand(o,b){return o.name!=="enable"&&o.name!=="disable"||o.commandArguments[0]===t.CULL_FACE.value}isStateEnable(o,b){return this.context.isEnabled(t.CULL_FACE.value)}}Ft.stateName="CullState";class le extends xe{get stateName(){return le.stateName}getWebgl1Parameters(){return[{constant:t.DEPTH_TEST,changeCommands:["enable","disable"]},{constant:t.DEPTH_FUNC,returnType:20,changeCommands:["depthFunc"]},{constant:t.DEPTH_RANGE,changeCommands:["depthRange"]},{constant:t.DEPTH_WRITEMASK,changeCommands:["depthMask"]}]}getConsumeCommands(){return s}isValidChangeCommand(o,b){return o.name!=="enable"&&o.name!=="disable"||o.commandArguments[0]===t.DEPTH_TEST.value}isStateEnable(o,b){return this.context.isEnabled(t.DEPTH_TEST.value)}}le.stateName="DepthState";class Oe extends xe{get stateName(){return Oe.stateName}getWebgl1Parameters(){return[{constant:t.DITHER,changeCommands:["enable","disable"]},{constant:t.VIEWPORT,changeCommands:["viewPort"]},{constant:t.FRONT_FACE,returnType:20,changeCommands:["frontFace"]},{constant:t.FRAGMENT_SHADER_DERIVATIVE_HINT_OES,changeCommands:["hint"]}]}getWebgl2Parameters(){return[{constant:t.RASTERIZER_DISCARD,changeCommands:["enable","disable"]},{constant:t.FRAGMENT_SHADER_DERIVATIVE_HINT,changeCommands:["hint"]}]}isValidChangeCommand(o,b){return o.name==="enable"||o.name==="disable"?o.commandArguments[0]===t.DITHER.value?b===t.DITHER.name:o.commandArguments[0]===t.RASTERIZER_DISCARD.value&&b===t.RASTERIZER_DISCARD.name:o.name!=="hint"||(o.commandArguments[0]===t.FRAGMENT_SHADER_DERIVATIVE_HINT_OES.value?b===t.FRAGMENT_SHADER_DERIVATIVE_HINT_OES.name:o.commandArguments[0]===t.FRAGMENT_SHADER_DERIVATIVE_HINT.value&&b===t.FRAGMENT_SHADER_DERIVATIVE_HINT.name)}getConsumeCommands(){return s}isStateEnable(o,b){switch(o){case t.DITHER.name:return this.context.isEnabled(t.DITHER.value);case t.RASTERIZER_DISCARD.name:return this.context.isEnabled(t.RASTERIZER_DISCARD.value)}return!0}}Oe.stateName="DrawState";class Se extends xe{get stateName(){return Se.stateName}getWebgl1Parameters(){return[{constant:t.GENERATE_MIPMAP_HINT,changeCommands:["hint"]}]}getConsumeCommands(){return["generateMipmap"]}}Se.stateName="MipmapHintState";class ze extends xe{get stateName(){return ze.stateName}getWebgl1Parameters(){return[{constant:t.POLYGON_OFFSET_FILL,changeCommands:["enable","disable"]},{constant:t.POLYGON_OFFSET_FACTOR,changeCommands:["polygonOffset"]},{constant:t.POLYGON_OFFSET_UNITS,changeCommands:["polygonOffset"]}]}isValidChangeCommand(o,b){return o.name!=="enable"&&o.name!=="disable"||o.commandArguments[0]===t.POLYGON_OFFSET_FILL.value}getConsumeCommands(){return s}isStateEnable(o,b){return this.context.isEnabled(t.POLYGON_OFFSET_FILL.value)}}ze.stateName="PolygonOffsetState";class Ve extends xe{get stateName(){return Ve.stateName}getWebgl1Parameters(){return[{constant:t.SCISSOR_TEST,changeCommands:["enable","disable"]},{constant:t.SCISSOR_BOX,changeCommands:["scissor"]}]}isValidChangeCommand(o,b){return o.name!=="enable"&&o.name!=="disable"||o.commandArguments[0]===t.SCISSOR_TEST.value}getConsumeCommands(){return[...s,"clear"]}isStateEnable(o,b){return this.context.isEnabled(t.SCISSOR_TEST.value)}}Ve.stateName="ScissorState";class st extends xe{get stateName(){return st.stateName}getWebgl1Parameters(){return[{constant:t.STENCIL_TEST,changeCommands:["enable","disable"]},{constant:t.STENCIL_BACK_FAIL,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:t.STENCIL_BACK_FUNC,returnType:20,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:t.STENCIL_BACK_PASS_DEPTH_FAIL,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:t.STENCIL_BACK_PASS_DEPTH_PASS,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:t.STENCIL_BACK_REF,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:t.STENCIL_BACK_VALUE_MASK,returnType:30,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:t.STENCIL_BACK_WRITEMASK,returnType:30,changeCommands:["stencilMask","stencilMaskSeparate"]},{constant:t.STENCIL_FAIL,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:t.STENCIL_FUNC,returnType:20,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:t.STENCIL_PASS_DEPTH_FAIL,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:t.STENCIL_PASS_DEPTH_PASS,returnType:20,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:t.STENCIL_REF,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:t.STENCIL_VALUE_MASK,returnType:30,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:t.STENCIL_WRITEMASK,returnType:30,changeCommands:["stencilMask","stencilMaskSeparate"]}]}readFromContext(){super.readFromContext();const o=this.context,b=t.FRAMEBUFFER.value,N=t.STENCIL_ATTACHMENT.value;let F=0;o.getParameter(t.FRAMEBUFFER_BINDING.value)?this.context.getFramebufferAttachmentParameter(b,N,t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value)!==t.NONE.value&&(this.contextVersion>1?F=this.context.getFramebufferAttachmentParameter(b,N,t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE.value):this.context.getFramebufferAttachmentParameter(b,N,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value)===t.RENDERBUFFER.value&&(F=o.getRenderbufferParameter(o.RENDERBUFFER,o.RENDERBUFFER_STENCIL_SIZE))):F=this.readParameterFromContext({constant:t.STENCIL_BITS}),this.currentState[t.STENCIL_BITS.name]=""+F}isValidChangeCommand(o,b){return o.name==="enable"||o.name==="disable"?o.commandArguments[0]===t.STENCIL_TEST.value:o.name==="stencilOp"||o.name==="stencilOpSeparate"?st.stencilOpStates.indexOf(o.commandArguments[0])>0:o.name==="stencilFunc"||o.name==="stencilFuncSeparate"?st.stencilFuncStates.indexOf(o.commandArguments[0])>0:o.name!=="stencilMask"&&o.name!=="stencilMaskSeparate"||st.stencilMaskStates.indexOf(o.commandArguments[0])>0}getConsumeCommands(){return s}isStateEnable(o,b){return this.context.isEnabled(t.STENCIL_TEST.value)}}st.stateName="StencilState",st.stencilOpStates=[t.STENCIL_BACK_FAIL.value,t.STENCIL_BACK_PASS_DEPTH_FAIL.value,t.STENCIL_BACK_PASS_DEPTH_PASS.value,t.STENCIL_FAIL.value,t.STENCIL_PASS_DEPTH_FAIL.value,t.STENCIL_PASS_DEPTH_PASS.value],st.stencilFuncStates=[t.STENCIL_BACK_FUNC.value,t.STENCIL_BACK_REF.value,t.STENCIL_BACK_VALUE_MASK.value,t.STENCIL_FUNC.value,t.STENCIL_REF.value,t.STENCIL_VALUE_MASK.value],st.stencilMaskStates=[t.STENCIL_BACK_WRITEMASK.value,t.STENCIL_WRITEMASK.value];class Dt{static isSupportedCombination(o,b,N){return o=o||t.UNSIGNED_BYTE.value,((b=b||t.RGBA.value)===t.RGB.value||b===t.RGBA.value)&&(N===t.RGB.value||N===t.RGBA.value||N===t.RGBA8.value||N===t.RGBA16F.value||N===t.RGBA32F.value||N===t.RGB16F.value||N===t.RGB32F.value||N===t.R11F_G11F_B10F.value||N===t.SRGB8.value||N===t.SRGB8_ALPHA8.value)&&this.isSupportedComponentType(o)}static readPixels(o,b,N,F,$,J){o.getError(),J===t.UNSIGNED_NORMALIZED.value&&(J=t.UNSIGNED_BYTE.value);const ae=F*$*4;let _e;if(J===t.UNSIGNED_BYTE.value?_e=new Uint8Array(ae):(J=t.FLOAT.value,_e=new Float32Array(ae)),o.readPixels(b,N,F,$,o.RGBA,J,_e),o.getError())return;if(J===t.UNSIGNED_BYTE.value)return _e;const Ae=new Uint8Array(F*$*4);for(let Ie=0;Ie<$;Ie++)for(let Fe=0;Fe<F;Fe++)Ae[Ie*F*4+4*Fe+0]=255*Math.min(Math.max(_e[Ie*F*4+4*Fe+0],0),1),Ae[Ie*F*4+4*Fe+1]=255*Math.min(Math.max(_e[Ie*F*4+4*Fe+1],0),1),Ae[Ie*F*4+4*Fe+2]=255*Math.min(Math.max(_e[Ie*F*4+4*Fe+2],0),1),Ae[Ie*F*4+4*Fe+3]=255*Math.min(Math.max(_e[Ie*F*4+4*Fe+3],0),1);return Ae}static isSupportedComponentType(o){return o===t.UNSIGNED_BYTE.value||o===t.UNSIGNED_SHORT_4_4_4_4.value||o===t.UNSIGNED_SHORT_5_5_5_1.value||o===t.UNSIGNED_SHORT_5_6_5.value||o===t.HALF_FLOAT.value||o===t.HALF_FLOAT_OES.value||o===t.FLOAT.value}}class pt extends j{constructor(o){super(o),this.captureFrameBuffer=o.context.createFramebuffer(),this.workingCanvas=document.createElement("canvas"),this.workingContext2D=this.workingCanvas.getContext("2d"),this.captureCanvas=document.createElement("canvas"),this.captureContext2D=this.captureCanvas.getContext("2d"),this.captureContext2D.imageSmoothingEnabled=!0,this.captureContext2D.mozImageSmoothingEnabled=!0,this.captureContext2D.oImageSmoothingEnabled=!0,this.captureContext2D.webkitImageSmoothingEnabled=!0,this.captureContext2D.msImageSmoothingEnabled=!0}get stateName(){return pt.stateName}getConsumeCommands(){return["clear","clearBufferfv","clearBufferiv","clearBufferuiv","clearBufferfi",...s]}readFromContext(){const o=this.context;this.currentState.Attachments=[];const b=this.context.getParameter(t.FRAMEBUFFER_BINDING.value);if(!b)return this.currentState.FrameBuffer=null,void this.getCapture(o,"Canvas COLOR_ATTACHMENT",0,0,o.drawingBufferWidth,o.drawingBufferHeight,0,0,t.UNSIGNED_BYTE.value);const N=o.getParameter(o.VIEWPORT),F=N[0],$=N[1],J=N[2],ae=N[3];this.currentState.FrameBuffer=this.getSpectorData(b);const _e=this.context.checkFramebufferStatus(t.FRAMEBUFFER.value);if(this.currentState.FrameBufferStatus=m[_e].name,_e===t.FRAMEBUFFER_COMPLETE.value)if(this.extensions[t.MAX_DRAW_BUFFERS_WEBGL.extensionName]){const Ae=this.context.getParameter(t.MAX_DRAW_BUFFERS_WEBGL.value);for(let Ie=0;Ie<Ae;Ie++)this.readFrameBufferAttachmentFromContext(this.context,b,c["COLOR_ATTACHMENT"+Ie+"_WEBGL"],F,$,J,ae)}else if(this.contextVersion>1){const Ae=this.context.getParameter(t.MAX_DRAW_BUFFERS.value);for(let Ie=0;Ie<Ae;Ie++)this.readFrameBufferAttachmentFromContext(this.context,b,c["COLOR_ATTACHMENT"+Ie],F,$,J,ae)}else this.readFrameBufferAttachmentFromContext(this.context,b,c.COLOR_ATTACHMENT0,F,$,J,ae)}readFrameBufferAttachmentFromContext(o,b,N,F,$,J,ae){const _e=t.FRAMEBUFFER.value,Ae=this.context.getFramebufferAttachmentParameter(_e,N.value,t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(Ae===t.NONE.value)return;const Ie=this.context.getFramebufferAttachmentParameter(_e,N.value,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(!Ie)return;const Fe=this.contextVersion>1?this.context.getFramebufferAttachmentParameter(_e,N.value,t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value):t.UNSIGNED_BYTE.value;Ae===t.RENDERBUFFER.value?this.readFrameBufferAttachmentFromRenderBuffer(o,b,N,F,$,J,ae,_e,Fe,Ie):Ae===t.TEXTURE.value&&this.readFrameBufferAttachmentFromTexture(o,b,N,F,$,J,ae,_e,Fe,Ie)}readFrameBufferAttachmentFromRenderBuffer(o,b,N,F,$,J,ae,_e,Ae,Ie){let Fe=0,ve=0;if(Ie.__SPECTOR_Object_CustomData){const je=Ie.__SPECTOR_Object_CustomData;if(J=je.width,ae=je.height,Fe=je.samples,ve=je.internalFormat,!Fe&&!Dt.isSupportedCombination(Ae,t.RGBA.value,ve))return}else J+=F,ae+=$;if(F=$=0,Fe){const je=o,St=o.createRenderbuffer(),vt=o.getParameter(o.RENDERBUFFER_BINDING);o.bindRenderbuffer(o.RENDERBUFFER,St),o.renderbufferStorage(o.RENDERBUFFER,ve,J,ae),o.bindRenderbuffer(o.RENDERBUFFER,vt),o.bindFramebuffer(t.FRAMEBUFFER.value,this.captureFrameBuffer),o.framebufferRenderbuffer(t.FRAMEBUFFER.value,t.COLOR_ATTACHMENT0.value,t.RENDERBUFFER.value,St);const jt=je.getParameter(je.READ_FRAMEBUFFER_BINDING),ir=je.getParameter(je.DRAW_FRAMEBUFFER_BINDING);je.bindFramebuffer(je.READ_FRAMEBUFFER,b),je.bindFramebuffer(je.DRAW_FRAMEBUFFER,this.captureFrameBuffer),je.blitFramebuffer(0,0,J,ae,0,0,J,ae,o.COLOR_BUFFER_BIT,o.NEAREST),je.bindFramebuffer(t.FRAMEBUFFER.value,this.captureFrameBuffer),je.bindFramebuffer(je.READ_FRAMEBUFFER,jt),je.bindFramebuffer(je.DRAW_FRAMEBUFFER,ir),this.context.checkFramebufferStatus(t.FRAMEBUFFER.value)===t.FRAMEBUFFER_COMPLETE.value&&this.getCapture(o,N.name,F,$,J,ae,0,0,Ae),o.bindFramebuffer(t.FRAMEBUFFER.value,b),o.deleteRenderbuffer(St)}else o.bindFramebuffer(t.FRAMEBUFFER.value,this.captureFrameBuffer),o.framebufferRenderbuffer(t.FRAMEBUFFER.value,t.COLOR_ATTACHMENT0.value,t.RENDERBUFFER.value,Ie),this.context.checkFramebufferStatus(t.FRAMEBUFFER.value)===t.FRAMEBUFFER_COMPLETE.value&&this.getCapture(o,N.name,F,$,J,ae,0,0,Ae),o.bindFramebuffer(t.FRAMEBUFFER.value,b)}readFrameBufferAttachmentFromTexture(o,b,N,F,$,J,ae,_e,Ae,Ie){let Fe=0;this.contextVersion>1&&(Fe=this.context.getFramebufferAttachmentParameter(_e,N.value,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value));const ve=this.context.getFramebufferAttachmentParameter(_e,N.value,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value),je=this.context.getFramebufferAttachmentParameter(_e,N.value,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value);je>0?m[je].name:t.TEXTURE_2D.name;let St=!1,vt=Ae;if(Ie.__SPECTOR_Object_CustomData){const jt=Ie.__SPECTOR_Object_CustomData;if(J=jt.width,ae=jt.height,jt.type!==void 0&&(vt=jt.type),St=jt.target===t.TEXTURE_2D_ARRAY.name,!Dt.isSupportedCombination(jt.type,jt.format,jt.internalFormat))return}else J+=F,ae+=$;F=$=0,o.bindFramebuffer(t.FRAMEBUFFER.value,this.captureFrameBuffer),Fe>0||St?o.framebufferTextureLayer(t.FRAMEBUFFER.value,t.COLOR_ATTACHMENT0.value,Ie,ve,Fe):o.framebufferTexture2D(t.FRAMEBUFFER.value,t.COLOR_ATTACHMENT0.value,je||t.TEXTURE_2D.value,Ie,ve),this.context.checkFramebufferStatus(t.FRAMEBUFFER.value)===t.FRAMEBUFFER_COMPLETE.value&&this.getCapture(o,N.name,F,$,J,ae,je,Fe,vt),o.bindFramebuffer(t.FRAMEBUFFER.value,b)}getCapture(o,b,N,F,$,J,ae,_e,Ae){const Ie={attachmentName:b,src:null,textureCubeMapFace:ae?m[ae].name:null,textureLayer:_e};if(!this.quickCapture)try{const Fe=Dt.readPixels(o,N,F,$,J,Ae);if(Fe){this.workingCanvas.width=$,this.workingCanvas.height=J;const ve=this.workingContext2D.createImageData(Math.ceil($),Math.ceil(J));if(ve.data.set(Fe),this.workingContext2D.putImageData(ve,0,0),this.fullCapture)this.captureCanvas.width=this.workingCanvas.width,this.captureCanvas.height=this.workingCanvas.height;else{const je=$/J;je<1?(this.captureCanvas.width=pt.captureBaseSize*je,this.captureCanvas.height=pt.captureBaseSize):je>1?(this.captureCanvas.width=pt.captureBaseSize,this.captureCanvas.height=pt.captureBaseSize/je):(this.captureCanvas.width=pt.captureBaseSize,this.captureCanvas.height=pt.captureBaseSize)}this.captureCanvas.width=Math.max(this.captureCanvas.width,1),this.captureCanvas.height=Math.max(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation="copy",this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this.captureContext2D.drawImage(this.workingCanvas,0,0,$,J,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation="source-over",Ie.src=this.captureCanvas.toDataURL()}}catch(Fe){M.warn("Spector can not capture the visual state: "+Fe)}this.currentState.Attachments.push(Ie)}analyse(o){}}pt.stateName="VisualState",pt.captureBaseSize=256;class an{constructor(o){this.context=o.context,this.captureFrameBuffer=o.context.createFramebuffer(),this.workingCanvas=document.createElement("canvas"),this.workingContext2D=this.workingCanvas.getContext("2d"),this.captureCanvas=document.createElement("canvas"),this.captureContext2D=this.captureCanvas.getContext("2d"),this._setSmoothing(!0)}appendTextureState(o,b,N=null,F){if(!b)return;const $=b.__SPECTOR_Object_CustomData;if($&&(this.fullCapture=F,$.type&&(o.textureType=this.getWebGlConstant($.type)),$.format&&(o.format=this.getWebGlConstant($.format)),$.internalFormat&&(o.internalFormat=this.getWebGlConstant($.internalFormat)),o.width=$.width,o.height=$.height,$.depth&&(o.depth=$.depth),N)){const J=o.samplerMagFilter==="NEAREST"||o.magFilter==="NEAREST";o.visual=this.getTextureVisualState(N,b,$,J)}}getTextureVisualState(o,b,N,F){try{const $=this.context,J={};if(!Dt.isSupportedCombination(N.type,N.format,N.internalFormat))return J;const ae=this.context.getParameter(t.FRAMEBUFFER_BINDING.value);$.bindFramebuffer(t.FRAMEBUFFER.value,this.captureFrameBuffer);try{const Ae=N.width,Ie=N.height;if(o===t.TEXTURE_3D&&N.depth){const Fe=$;for(let ve=0;ve<N.depth;ve++)ve>2&&ve<N.depth-3||(Fe.framebufferTextureLayer(t.FRAMEBUFFER.value,t.COLOR_ATTACHMENT0.value,b,0,ve),J["3D Layer "+ve]=this.getCapture($,0,0,Ae,Ie,N.type,F))}else if(o===t.TEXTURE_2D_ARRAY&&N.depth){const Fe=$;for(let ve=0;ve<N.depth;ve++)ve>2&&ve<N.depth-3||(Fe.framebufferTextureLayer(t.FRAMEBUFFER.value,t.COLOR_ATTACHMENT0.value,b,0,ve),J["Layer "+ve]=this.getCapture($,0,0,Ae,Ie,N.type,F))}else if(o===t.TEXTURE_CUBE_MAP)for(const Fe of an.cubeMapFaces)$.framebufferTexture2D(t.FRAMEBUFFER.value,t.COLOR_ATTACHMENT0.value,Fe.value,b,0),J[Fe.name]=this.getCapture($,0,0,Ae,Ie,N.type,F);else $.framebufferTexture2D(t.FRAMEBUFFER.value,t.COLOR_ATTACHMENT0.value,t.TEXTURE_2D.value,b,0),J[t.TEXTURE_2D.name]=this.getCapture($,0,0,Ae,Ie,N.type,F)}catch{}return $.bindFramebuffer(t.FRAMEBUFFER.value,ae),J}catch{}}getCapture(o,b,N,F,$,J,ae){try{if(this.context.checkFramebufferStatus(t.FRAMEBUFFER.value)!==t.FRAMEBUFFER_COMPLETE.value)return;J=J||t.UNSIGNED_BYTE.value;const _e=Dt.readPixels(o,b,N,F,$,J);if(!_e)return;this.workingCanvas.width=F,this.workingCanvas.height=$;const Ae=this.workingContext2D.createImageData(F,$);if(Ae.data.set(_e),this.workingContext2D.putImageData(Ae,0,0),this.fullCapture)this.captureCanvas.width=this.workingCanvas.width,this.captureCanvas.height=this.workingCanvas.height;else{const Ie=F/$;Ie<1?(this.captureCanvas.width=pt.captureBaseSize*Ie,this.captureCanvas.height=pt.captureBaseSize):Ie>1?(this.captureCanvas.width=pt.captureBaseSize,this.captureCanvas.height=pt.captureBaseSize/Ie):(this.captureCanvas.width=pt.captureBaseSize,this.captureCanvas.height=pt.captureBaseSize)}return this.captureCanvas.width=Math.max(this.captureCanvas.width,1),this.captureCanvas.height=Math.max(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation="copy",this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this._setSmoothing(!ae),this.captureContext2D.drawImage(this.workingCanvas,0,0,F,$,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation="source-over",this.captureCanvas.toDataURL()}catch{}}getWebGlConstant(o){const b=m[o];return b?b.name:o+""}_setSmoothing(o){this.captureContext2D.imageSmoothingEnabled=o,this.captureContext2D.mozImageSmoothingEnabled=o,this.captureContext2D.oImageSmoothingEnabled=o,this.captureContext2D.webkitImageSmoothingEnabled=o,this.captureContext2D.msImageSmoothingEnabled=o}}an.captureBaseSize=64,an.cubeMapFaces=[t.TEXTURE_CUBE_MAP_POSITIVE_X,t.TEXTURE_CUBE_MAP_POSITIVE_Y,t.TEXTURE_CUBE_MAP_POSITIVE_Z,t.TEXTURE_CUBE_MAP_NEGATIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.TEXTURE_CUBE_MAP_NEGATIVE_Z];class Ot{constructor(o){this.context=o.context}getUboValue(o,b,N,F){const $=Ot.uboTypes[F];if(!$)return;const J=new $.arrayBufferView(N*$.lengthMultiplier),ae=this.context,_e=ae.getIndexedParameter(t.UNIFORM_BUFFER_BINDING.value,o);if(_e){const Ae=ae.getIndexedParameter(t.UNIFORM_BUFFER_START.value,o),Ie=ae.getParameter(t.UNIFORM_BUFFER_BINDING.value);try{ae.bindBuffer(t.UNIFORM_BUFFER.value,_e),ae.getBufferSubData(t.UNIFORM_BUFFER.value,Ae+b,J)}catch{return}Ie&&ae.bindBuffer(t.UNIFORM_BUFFER.value,Ie)}return Array.prototype.slice.call(J)}}Ot.uboTypes={[t.BOOL.value]:{arrayBufferView:Uint8Array,lengthMultiplier:1},[t.BOOL_VEC2.value]:{arrayBufferView:Uint8Array,lengthMultiplier:2},[t.BOOL_VEC3.value]:{arrayBufferView:Uint8Array,lengthMultiplier:3},[t.BOOL_VEC4.value]:{arrayBufferView:Uint8Array,lengthMultiplier:4},[t.INT.value]:{arrayBufferView:Int32Array,lengthMultiplier:1},[t.INT_VEC2.value]:{arrayBufferView:Int32Array,lengthMultiplier:2},[t.INT_VEC3.value]:{arrayBufferView:Int32Array,lengthMultiplier:3},[t.INT_VEC4.value]:{arrayBufferView:Int32Array,lengthMultiplier:4},[t.UNSIGNED_INT.value]:{arrayBufferView:Uint32Array,lengthMultiplier:1},[t.UNSIGNED_INT_VEC2.value]:{arrayBufferView:Uint32Array,lengthMultiplier:2},[t.UNSIGNED_INT_VEC3.value]:{arrayBufferView:Uint32Array,lengthMultiplier:3},[t.UNSIGNED_INT_VEC4.value]:{arrayBufferView:Uint32Array,lengthMultiplier:4},[t.FLOAT.value]:{arrayBufferView:Float32Array,lengthMultiplier:1},[t.FLOAT_VEC2.value]:{arrayBufferView:Float32Array,lengthMultiplier:2},[t.FLOAT_VEC3.value]:{arrayBufferView:Float32Array,lengthMultiplier:3},[t.FLOAT_VEC4.value]:{arrayBufferView:Float32Array,lengthMultiplier:4},[t.FLOAT_MAT2.value]:{arrayBufferView:Float32Array,lengthMultiplier:4},[t.FLOAT_MAT2x3.value]:{arrayBufferView:Float32Array,lengthMultiplier:6},[t.FLOAT_MAT2x4.value]:{arrayBufferView:Float32Array,lengthMultiplier:8},[t.FLOAT_MAT3.value]:{arrayBufferView:Float32Array,lengthMultiplier:9},[t.FLOAT_MAT3x2.value]:{arrayBufferView:Float32Array,lengthMultiplier:6},[t.FLOAT_MAT3x4.value]:{arrayBufferView:Float32Array,lengthMultiplier:12},[t.FLOAT_MAT4.value]:{arrayBufferView:Float32Array,lengthMultiplier:16},[t.FLOAT_MAT4x2.value]:{arrayBufferView:Float32Array,lengthMultiplier:8},[t.FLOAT_MAT4x3.value]:{arrayBufferView:Float32Array,lengthMultiplier:12},[t.SAMPLER_2D.value]:{arrayBufferView:Uint8Array,lengthMultiplier:1},[t.SAMPLER_CUBE.value]:{arrayBufferView:Uint8Array,lengthMultiplier:1}};class Sn extends R{get typeName(){return"WebGLBuffer"}}class nn extends R{get typeName(){return"WebGLFramebuffer"}}class li extends R{get typeName(){return"WebGLProgram"}static saveInGlobalStore(o){const b=w.getWebGlObjectTag(o);b&&(this.store[b.id]=o)}static getFromGlobalStore(o){return this.store[o]}static updateInGlobalStore(o,b){if(!b)return;const N=this.getFromGlobalStore(o);if(!N)return;const F=w.getWebGlObjectTag(N);F&&(w.attachWebGlObjectTag(b,F),this.store[F.id]=b)}}li.store={};class bi extends R{get typeName(){return"WebGLQuery"}}class hs extends R{get typeName(){return"WebGLRenderbuffer"}}class Zs extends R{get typeName(){return"WebGLSampler"}}class In extends R{get typeName(){return"WebGLShader"}}class Js extends R{get typeName(){return"WebGLSync"}}class Q extends R{get typeName(){return"WebGLTexture"}}class fe extends R{get typeName(){return"WebGLTransformFeedback"}}class Ee extends R{get typeName(){return"WebGLUniformLocation"}}class ge extends R{get typeName(){return"WebGLVertexArrayObject"}}class Ce{static getProgramData(o,b){const N={LINK_STATUS:o.getProgramParameter(b,t.LINK_STATUS.value),VALIDATE_STATUS:o.getProgramParameter(b,t.VALIDATE_STATUS.value)},F=o.getAttachedShaders(b),$=new Array(2);let J=0;for(const ae of F){const _e=this.readShaderFromContext(o,ae);J+=_e.source.length,_e.shaderType===t.FRAGMENT_SHADER.name?$[1]=_e:$[0]=_e}return{programStatus:N,shaders:$,length:J}}static readShaderFromContext(o,b){const N=o.getShaderSource(b),F=o.getExtension("WEBGL_debug_shaders"),$=F?F.getTranslatedShaderSource(b):null,J=o.getShaderParameter(b,t.SHADER_TYPE.value)===t.FRAGMENT_SHADER.value;let ae=b&&b.__SPECTOR_Metadata&&b.__SPECTOR_Metadata.name?b.__SPECTOR_Metadata.name:this.readNameFromShaderSource(N);return ae||(ae=J?"Fragment":"Vertex"),{COMPILE_STATUS:o.getShaderParameter(b,t.COMPILE_STATUS.value),shaderType:J?t.FRAGMENT_SHADER.name:t.VERTEX_SHADER.name,name:ae,source:N,translatedSource:$}}static readNameFromShaderSource(o){try{let b,N="";const F=/#define[\s]+SHADER_NAME[\s]+([\S]+)(\n|$)/gi;if(b=F.exec(o),b!==null&&(b.index===F.lastIndex&&F.lastIndex++,N=b[1]),N===""){const $=/#define[\s]+SHADER_NAME_B64[\s]+([\S]+)(\n|$)/gi;b=$.exec(o),b!==null&&(b.index===$.lastIndex&&$.lastIndex++,N=b[1]),N&&(N=decodeURIComponent(atob(N)))}return N}catch{return null}}}class Ze extends j{constructor(o){super(o),this.drawCallTextureInputState=new an(o),this.drawCallUboInputState=new Ot(o)}get stateName(){return Ze.stateName}get requireStartAndStopStates(){return!1}getConsumeCommands(){return s}getChangeCommandsByState(){return{}}readFromContext(){var o,b;const N=this.context.getParameter(t.CURRENT_PROGRAM.value);if(!N)return;this.currentState.frameBuffer=this.readFrameBufferFromContext();const F=N.__SPECTOR_Object_CustomData?N.__SPECTOR_Object_CustomData:Ce.getProgramData(this.context,N);if(this.currentState.programStatus=Object.assign({},F.programStatus),this.currentState.programStatus.program=this.getSpectorData(N),this.currentState.programStatus.RECOMPILABLE=u.isBuildableProgram(N),this.currentState.programStatus.RECOMPILABLE&&li.saveInGlobalStore(N),this.currentState.shaders=F.shaders,((o=this.lastCommandName)===null||o===void 0?void 0:o.indexOf("Elements"))>=0){const _e=this.context.getParameter(this.context.ELEMENT_ARRAY_BUFFER_BINDING);_e&&(this.currentState.elementArray={},this.currentState.elementArray.arrayBuffer=this.getSpectorData(_e))}const $=this.context.getProgramParameter(N,t.ACTIVE_ATTRIBUTES.value);this.currentState.attributes=[];for(let _e=0;_e<$;_e++){const Ae=this.readAttributeFromContext(N,_e);this.currentState.attributes.push(Ae)}const J=this.context.getProgramParameter(N,t.ACTIVE_UNIFORMS.value);this.currentState.uniforms=[];const ae=[];for(let _e=0;_e<J;_e++){ae.push(_e);const Ae=this.readUniformFromContext(N,_e);this.currentState.uniforms.push(Ae)}if(this.contextVersion>1){const _e=this.context.getProgramParameter(N,t.ACTIVE_UNIFORM_BLOCKS.value);this.currentState.uniformBlocks=[];for(let Ae=0;Ae<_e;Ae++){const Ie=this.readUniformBlockFromContext(N,Ae);this.currentState.uniformBlocks.push(Ie)}if(this.readUniformsFromContextIntoState(N,ae,this.currentState.uniforms,this.currentState.uniformBlocks),this.context.getParameter(t.TRANSFORM_FEEDBACK_ACTIVE.value)){const Ae=this.context.getProgramParameter(N,t.TRANSFORM_FEEDBACK_BUFFER_MODE.value);this.currentState.transformFeedbackMode=this.getWebGlConstant(Ae),this.currentState.transformFeedbacks=[];const Ie=this.context.getProgramParameter(N,t.TRANSFORM_FEEDBACK_VARYINGS.value);for(let Fe=0;Fe<Ie;Fe++){const ve=this.readTransformFeedbackFromContext(N,Fe);this.currentState.transformFeedbacks.push(ve)}}}for(let _e=0;_e<ae.length;_e++){const Ae=this.currentState.uniforms[_e],Ie=(b=Ae.value)!==null&&b!==void 0?b:Ae.values;if(Ie!=null){const Fe=Ze.samplerTypes[Ae.typeValue];if(Fe)if(Ie.length){Ae.textures=[];for(let ve=0;ve<Ie.length;ve++)Ae.textures.push(this.readTextureFromContext(Ie[ve].value,Fe))}else Ae.texture=this.readTextureFromContext(Ie,Fe)}delete Ae.typeValue}}readFrameBufferFromContext(){const o=this.context.getParameter(t.FRAMEBUFFER_BINDING.value);if(!o)return null;const b={};if(b.frameBuffer=this.getSpectorData(o),this.readFrameBufferAttachmentFromContext(t.DEPTH_ATTACHMENT.value)&&(b.depthAttachment=this.readFrameBufferAttachmentFromContext(t.DEPTH_ATTACHMENT.value)),this.readFrameBufferAttachmentFromContext(t.STENCIL_ATTACHMENT.value)&&(b.stencilAttachment=this.readFrameBufferAttachmentFromContext(t.STENCIL_ATTACHMENT.value)),this.extensions[t.MAX_DRAW_BUFFERS_WEBGL.extensionName]){b.colorAttachments=[];const N=this.context.getParameter(t.MAX_DRAW_BUFFERS_WEBGL.value);for(let F=0;F<N;F++){const $=this.readFrameBufferAttachmentFromContext(c["COLOR_ATTACHMENT"+F+"_WEBGL"].value);$&&b.colorAttachments.push($)}}else if(this.contextVersion>1){const N=this.context;b.colorAttachments=[];const F=N.getParameter(t.MAX_DRAW_BUFFERS.value);for(let $=0;$<F;$++){const J=this.readFrameBufferAttachmentFromContext(c["COLOR_ATTACHMENT"+$].value);J&&b.colorAttachments.push(J)}}else{const N=this.readFrameBufferAttachmentFromContext(c.COLOR_ATTACHMENT0.value);N&&(b.colorAttachments=[N])}return b}readFrameBufferAttachmentFromContext(o){const b=t.FRAMEBUFFER.value,N=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(N===t.NONE.value)return;const F={},$=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(N===t.RENDERBUFFER.value){if(F.type="RENDERBUFFER",F.buffer=this.getSpectorData($),$){const J=$.__SPECTOR_Object_CustomData;J&&(J.internalFormat&&(F.internalFormat=this.getWebGlConstant(J.internalFormat)),F.width=J.width,F.height=J.height,F.msaaSamples=J.samples)}}else if(N===t.TEXTURE.value){F.type="TEXTURE",F.texture=this.getSpectorData($),F.textureLevel=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value);const J=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value);F.textureCubeMapFace=this.getWebGlConstant(J),this.drawCallTextureInputState.appendTextureState(F,$,null,this.fullCapture)}return this.extensions.EXT_sRGB&&(F.encoding=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT.value))),this.contextVersion>1&&(F.alphaSize=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE.value),F.blueSize=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE.value),F.encoding=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING.value)),F.componentType=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value)),F.depthSize=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE.value),F.greenSize=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE.value),F.redSize=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_RED_SIZE.value),F.stencilSize=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE.value),N===t.TEXTURE.value&&(F.textureLayer=this.context.getFramebufferAttachmentParameter(b,o,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value))),F}readAttributeFromContext(o,b){const N=this.context.getActiveAttrib(o,b),F=this.context.getAttribLocation(o,N.name);if(F===-1)return{name:N.name,size:N.size,type:this.getWebGlConstant(N.type),location:-1};const $=this.context.getVertexAttrib(F,t.CURRENT_VERTEX_ATTRIB.value),J=this.context.getVertexAttrib(F,t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING.value),ae={name:N.name,size:N.size,type:this.getWebGlConstant(N.type),location:F,offsetPointer:this.context.getVertexAttribOffset(F,t.VERTEX_ATTRIB_ARRAY_POINTER.value),bufferBinding:this.getSpectorData(J),enabled:this.context.getVertexAttrib(F,t.VERTEX_ATTRIB_ARRAY_ENABLED.value),arraySize:this.context.getVertexAttrib(F,t.VERTEX_ATTRIB_ARRAY_SIZE.value),stride:this.context.getVertexAttrib(F,t.VERTEX_ATTRIB_ARRAY_STRIDE.value),arrayType:this.getWebGlConstant(this.context.getVertexAttrib(F,t.VERTEX_ATTRIB_ARRAY_TYPE.value)),normalized:this.context.getVertexAttrib(F,t.VERTEX_ATTRIB_ARRAY_NORMALIZED.value),vertexAttrib:Array.prototype.slice.call($)};return this.extensions[t.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE.extensionName]?ae.divisor=this.context.getVertexAttrib(F,t.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE.value):this.contextVersion>1&&(ae.integer=this.context.getVertexAttrib(F,t.VERTEX_ATTRIB_ARRAY_INTEGER.value),ae.divisor=this.context.getVertexAttrib(F,t.VERTEX_ATTRIB_ARRAY_DIVISOR.value)),this.appendBufferCustomData(ae,J),ae}readUniformFromContext(o,b){const N=this.context.getActiveUniform(o,b),F=this.context.getUniformLocation(o,N.name);if(F){if(N.size>1&&N.name&&N.name.indexOf("[0]")===N.name.length-3){const $=[];for(let J=0;J<N.size;J++){const ae=this.context.getUniformLocation(o,N.name.replace("[0]","["+J+"]"));if(ae){let _e=this.context.getUniform(o,ae);_e.length&&(_e=Array.prototype.slice.call(_e)),$.push({value:_e})}}return{name:N.name.replace("[0]",""),size:N.size,type:this.getWebGlConstant(N.type),typeValue:N.type,location:this.getSpectorData(F),values:$}}{let $=this.context.getUniform(o,F);return $.length&&($=Array.prototype.slice.call($)),{name:N.name,size:N.size,type:this.getWebGlConstant(N.type),typeValue:N.type,location:this.getSpectorData(F),value:$}}}return{name:N.name,size:N.size,type:this.getWebGlConstant(N.type),typeValue:N.type}}readTextureFromContext(o,b){const N=this.context.getParameter(t.ACTIVE_TEXTURE.value);this.context.activeTexture(t.TEXTURE0.value+o);const F={magFilter:this.getWebGlConstant(this.context.getTexParameter(b.value,t.TEXTURE_MAG_FILTER.value)),minFilter:this.getWebGlConstant(this.context.getTexParameter(b.value,t.TEXTURE_MIN_FILTER.value)),wrapS:this.getWebGlConstant(this.context.getTexParameter(b.value,t.TEXTURE_WRAP_S.value)),wrapT:this.getWebGlConstant(this.context.getTexParameter(b.value,t.TEXTURE_WRAP_T.value))};if(this.extensions[t.TEXTURE_MAX_ANISOTROPY_EXT.extensionName]&&(F.anisotropy=this.context.getTexParameter(b.value,t.TEXTURE_MAX_ANISOTROPY_EXT.value)),this.contextVersion>1){F.baseLevel=this.context.getTexParameter(b.value,t.TEXTURE_BASE_LEVEL.value),F.immutable=this.context.getTexParameter(b.value,t.TEXTURE_IMMUTABLE_FORMAT.value),F.immutableLevels=this.context.getTexParameter(b.value,t.TEXTURE_IMMUTABLE_LEVELS.value),F.maxLevel=this.context.getTexParameter(b.value,t.TEXTURE_MAX_LEVEL.value);const J=this.context.getParameter(t.SAMPLER_BINDING.value);if(J){F.sampler=this.getSpectorData(J);const ae=this.context;F.samplerMaxLod=ae.getSamplerParameter(J,t.TEXTURE_MAX_LOD.value),F.samplerMinLod=ae.getSamplerParameter(J,t.TEXTURE_MIN_LOD.value),F.samplerCompareFunc=this.getWebGlConstant(ae.getSamplerParameter(J,t.TEXTURE_COMPARE_FUNC.value)),F.samplerCompareMode=this.getWebGlConstant(ae.getSamplerParameter(J,t.TEXTURE_COMPARE_MODE.value)),F.samplerWrapS=this.getWebGlConstant(ae.getSamplerParameter(J,t.TEXTURE_WRAP_S.value)),F.samplerWrapT=this.getWebGlConstant(ae.getSamplerParameter(J,t.TEXTURE_WRAP_T.value)),F.samplerWrapR=this.getWebGlConstant(ae.getSamplerParameter(J,t.TEXTURE_WRAP_R.value)),F.samplerMagFilter=this.getWebGlConstant(ae.getSamplerParameter(J,t.TEXTURE_MAG_FILTER.value)),F.samplerMinFilter=this.getWebGlConstant(ae.getSamplerParameter(J,t.TEXTURE_MIN_FILTER.value))}else F.maxLod=this.context.getTexParameter(b.value,t.TEXTURE_MAX_LOD.value),F.minLod=this.context.getTexParameter(b.value,t.TEXTURE_MIN_LOD.value),F.compareFunc=this.getWebGlConstant(this.context.getTexParameter(b.value,t.TEXTURE_COMPARE_FUNC.value)),F.compareMode=this.getWebGlConstant(this.context.getTexParameter(b.value,t.TEXTURE_COMPARE_MODE.value)),F.wrapR=this.getWebGlConstant(this.context.getTexParameter(b.value,t.TEXTURE_WRAP_R.value))}const $=this.getTextureStorage(b);if($){const J=this.quickCapture?null:b;this.drawCallTextureInputState.appendTextureState(F,$,J,this.fullCapture)}return this.context.activeTexture(N),F}getTextureStorage(o){return o===t.TEXTURE_2D?this.context.getParameter(t.TEXTURE_BINDING_2D.value):o===t.TEXTURE_CUBE_MAP?this.context.getParameter(t.TEXTURE_BINDING_CUBE_MAP.value):o===t.TEXTURE_3D?this.context.getParameter(t.TEXTURE_BINDING_3D.value):o===t.TEXTURE_2D_ARRAY?this.context.getParameter(t.TEXTURE_BINDING_2D_ARRAY.value):void 0}readUniformsFromContextIntoState(o,b,N,F){const $=this.context,J=$.getActiveUniforms(o,b,t.UNIFORM_TYPE.value),ae=$.getActiveUniforms(o,b,t.UNIFORM_SIZE.value),_e=$.getActiveUniforms(o,b,t.UNIFORM_BLOCK_INDEX.value),Ae=$.getActiveUniforms(o,b,t.UNIFORM_OFFSET.value),Ie=$.getActiveUniforms(o,b,t.UNIFORM_ARRAY_STRIDE.value),Fe=$.getActiveUniforms(o,b,t.UNIFORM_MATRIX_STRIDE.value),ve=$.getActiveUniforms(o,b,t.UNIFORM_IS_ROW_MAJOR.value);for(let je=0;je<b.length;je++){const St=N[je];if(St.type=this.getWebGlConstant(J[je]),St.size=ae[je],St.blockIndice=_e[je],St.blockIndice>-1&&(St.blockName=$.getActiveUniformBlockName(o,St.blockIndice)),St.offset=Ae[je],St.arrayStride=Ie[je],St.matrixStride=Fe[je],St.rowMajor=ve[je],St.blockIndice>-1){const vt=F[_e[je]].bindingPoint;St.value=this.drawCallUboInputState.getUboValue(vt,St.offset,St.size,J[je])}}}readTransformFeedbackFromContext(o,b){const N=this.context,F=N.getTransformFeedbackVarying(o,b),$=N.getIndexedParameter(t.TRANSFORM_FEEDBACK_BUFFER_BINDING.value,b),J={name:F.name,size:F.size,type:this.getWebGlConstant(F.type),buffer:this.getSpectorData($),bufferSize:N.getIndexedParameter(t.TRANSFORM_FEEDBACK_BUFFER_SIZE.value,b),bufferStart:N.getIndexedParameter(t.TRANSFORM_FEEDBACK_BUFFER_START.value,b)};return this.appendBufferCustomData(J,$),J}readUniformBlockFromContext(o,b){const N=this.context,F=N.getActiveUniformBlockParameter(o,b,t.UNIFORM_BLOCK_BINDING.value),$=N.getIndexedParameter(t.UNIFORM_BUFFER_BINDING.value,F),J={name:N.getActiveUniformBlockName(o,b),bindingPoint:F,size:N.getActiveUniformBlockParameter(o,b,t.UNIFORM_BLOCK_DATA_SIZE.value),activeUniformCount:N.getActiveUniformBlockParameter(o,b,t.UNIFORM_BLOCK_ACTIVE_UNIFORMS.value),vertex:N.getActiveUniformBlockParameter(o,b,t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER.value),fragment:N.getActiveUniformBlockParameter(o,b,t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER.value),buffer:this.getSpectorData($)};return this.appendBufferCustomData(J,$),J}appendBufferCustomData(o,b){if(b){const N=b.__SPECTOR_Object_CustomData;N&&(N.usage&&(o.bufferUsage=this.getWebGlConstant(N.usage)),o.bufferLength=N.length,N.offset&&(o.bufferOffset=N.offset),N.sourceLength&&(o.bufferSourceLength=N.sourceLength))}}getWebGlConstant(o){const b=m[o];return b?b.name:o}}Ze.stateName="DrawCall",Ze.samplerTypes={[t.SAMPLER_2D.value]:t.TEXTURE_2D,[t.SAMPLER_CUBE.value]:t.TEXTURE_CUBE_MAP,[t.SAMPLER_3D.value]:t.TEXTURE_3D,[t.SAMPLER_2D_SHADOW.value]:t.TEXTURE_2D,[t.SAMPLER_2D_ARRAY.value]:t.TEXTURE_2D_ARRAY,[t.SAMPLER_2D_ARRAY_SHADOW.value]:t.TEXTURE_2D_ARRAY,[t.SAMPLER_CUBE_SHADOW.value]:t.TEXTURE_CUBE_MAP,[t.INT_SAMPLER_2D.value]:t.TEXTURE_2D,[t.INT_SAMPLER_3D.value]:t.TEXTURE_3D,[t.INT_SAMPLER_CUBE.value]:t.TEXTURE_CUBE_MAP,[t.INT_SAMPLER_2D_ARRAY.value]:t.TEXTURE_2D_ARRAY,[t.UNSIGNED_INT_SAMPLER_2D.value]:t.TEXTURE_2D,[t.UNSIGNED_INT_SAMPLER_3D.value]:t.TEXTURE_3D,[t.UNSIGNED_INT_SAMPLER_CUBE.value]:t.TEXTURE_CUBE_MAP,[t.UNSIGNED_INT_SAMPLER_2D_ARRAY.value]:t.TEXTURE_2D_ARRAY};class at{constructor(o){this.contextInformation=o,this.stateTrackers=[],this.onCommandCapturedCallbacks={},this.initStateTrackers()}startCapture(o,b,N){for(const F of this.stateTrackers){const $=F.startCapture(!0,b,N);F.requireStartAndStopStates&&(o.initState[F.stateName]=$)}}stopCapture(o){for(const b of this.stateTrackers){const N=b.stopCapture();b.requireStartAndStopStates&&(o.endState[b.stateName]=N)}}captureState(o){const b=this.onCommandCapturedCallbacks[o.name];if(b)for(const N of b)N(o)}initStateTrackers(){this.stateTrackers.push(new Pe(this.contextInformation),new We(this.contextInformation),new $e(this.contextInformation),new Qe(this.contextInformation),new ft(this.contextInformation),new Ft(this.contextInformation),new le(this.contextInformation),new Oe(this.contextInformation),new Se(this.contextInformation),new ze(this.contextInformation),new Ve(this.contextInformation),new st(this.contextInformation),new pt(this.contextInformation),new Ze(this.contextInformation));for(const o of this.stateTrackers)o.registerCallbacks(this.onCommandCapturedCallbacks)}}class tt{constructor(o){this.options=o,this.createCommandNames=this.getCreateCommandNames(),this.updateCommandNames=this.getUpdateCommandNames(),this.deleteCommandNames=this.getDeleteCommandNames(),this.startTime=E.now,this.memoryPerSecond={},this.totalMemory=0,this.frameMemory=0,this.capturing=!1,tt.initializeByteSizeFormat()}static initializeByteSizeFormat(){this.byteSizePerInternalFormat||(this.byteSizePerInternalFormat={[t.R8.value]:1,[t.R16F.value]:2,[t.R32F.value]:4,[t.R8UI.value]:1,[t.RG8.value]:2,[t.RG16F.value]:4,[t.RG32F.value]:8,[t.ALPHA.value]:1,[t.RGB.value]:3,[t.RGBA.value]:4,[t.LUMINANCE.value]:1,[t.LUMINANCE_ALPHA.value]:2,[t.DEPTH_COMPONENT.value]:1,[t.DEPTH_STENCIL.value]:2,[t.SRGB_EXT.value]:3,[t.SRGB_ALPHA_EXT.value]:4,[t.RGB8.value]:3,[t.SRGB8.value]:3,[t.RGB565.value]:2,[t.R11F_G11F_B10F.value]:4,[t.RGB9_E5.value]:2,[t.RGB16F.value]:6,[t.RGB32F.value]:12,[t.RGB8UI.value]:3,[t.RGBA8.value]:4,[t.RGB5_A1.value]:2,[t.RGBA16F.value]:8,[t.RGBA32F.value]:16,[t.RGBA8UI.value]:4,[t.COMPRESSED_R11_EAC.value]:4,[t.COMPRESSED_SIGNED_R11_EAC.value]:4,[t.COMPRESSED_RG11_EAC.value]:4,[t.COMPRESSED_SIGNED_RG11_EAC.value]:4,[t.COMPRESSED_RGB8_ETC2.value]:4,[t.COMPRESSED_RGBA8_ETC2_EAC.value]:4,[t.COMPRESSED_SRGB8_ETC2.value]:4,[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC.value]:4,[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2.value]:4,[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2.value]:4,[t.COMPRESSED_RGB_S3TC_DXT1_EXT.value]:.5,[t.COMPRESSED_RGBA_S3TC_DXT3_EXT.value]:1,[t.COMPRESSED_RGBA_S3TC_DXT5_EXT.value]:1,[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG.value]:.5,[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG.value]:.5,[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG.value]:.25,[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG.value]:.25,[t.COMPRESSED_RGB_ETC1_WEBGL.value]:.5,[t.COMPRESSED_RGB_ATC_WEBGL.value]:.5,[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL.value]:1,[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL.value]:1})}registerCallbacks(o){for(const b of this.createCommandNames)o[b]=o[b]||[],o[b].push(this.createWithoutSideEffects.bind(this));for(const b of this.updateCommandNames)o[b]=o[b]||[],o[b].push(this.updateWithoutSideEffects.bind(this));for(const b of this.deleteCommandNames)o[b]=o[b]||[],o[b].push(this.deleteWithoutSideEffects.bind(this))}startCapture(){this.frameMemory=0,this.capturing=!0}stopCapture(){this.frameMemory=0,this.capturing=!1}appendRecordedInformation(o){o.frameMemory[this.objectName]=this.frameMemory,o.memory[this.objectName]=this.memoryPerSecond}create(o){}createWithoutSideEffects(o){this.options.toggleCapture(!1),this.create(o),this.options.toggleCapture(!0)}updateWithoutSideEffects(o){if(!o||o.arguments.length===0)return;this.options.toggleCapture(!1);const b=o.arguments[0],N=this.getBoundInstance(b);if(!N)return void this.options.toggleCapture(!0);if(!w.getWebGlObjectTag(N))return void this.options.toggleCapture(!0);const F=this.getWebGlConstant(b),$=this.update(o,F,N);this.changeMemorySize($),this.options.toggleCapture(!0)}deleteWithoutSideEffects(o){if(!o||!o.arguments||o.arguments.length<1)return;const b=o.arguments[0];if(!b)return;this.options.toggleCapture(!1);const N=this.delete(b);this.changeMemorySize(-N),this.options.toggleCapture(!0)}changeMemorySize(o){this.totalMemory+=o,this.capturing&&(this.frameMemory+=o);const b=E.now-this.startTime,N=Math.round(b/1e3);this.memoryPerSecond[N]=this.totalMemory}getWebGlConstant(o){const b=m[o];return b?b.name:o+""}getByteSizeForInternalFormat(o){return tt.byteSizePerInternalFormat[o]||4}}class ut extends tt{get objectName(){return"Buffer"}getCreateCommandNames(){return["createBuffer"]}getUpdateCommandNames(){return["bufferData"]}getDeleteCommandNames(){return["deleteBuffer"]}getBoundInstance(o){const b=this.options.context;return o===t.ARRAY_BUFFER.value?b.getParameter(t.ARRAY_BUFFER_BINDING.value):o===t.ELEMENT_ARRAY_BUFFER.value?b.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING.value):o===t.COPY_READ_BUFFER.value?b.getParameter(t.COPY_READ_BUFFER_BINDING.value):o===t.COPY_WRITE_BUFFER.value?b.getParameter(t.COPY_WRITE_BUFFER_BINDING.value):o===t.TRANSFORM_FEEDBACK_BUFFER.value?b.getParameter(t.TRANSFORM_FEEDBACK_BUFFER_BINDING.value):o===t.UNIFORM_BUFFER.value?b.getParameter(t.UNIFORM_BUFFER_BINDING.value):o===t.PIXEL_PACK_BUFFER.value?b.getParameter(t.PIXEL_PACK_BUFFER_BINDING.value):o===t.PIXEL_UNPACK_BUFFER.value?b.getParameter(t.PIXEL_UNPACK_BUFFER_BINDING.value):void 0}delete(o){const b=o.__SPECTOR_Object_CustomData;return b?b.length:0}update(o,b,N){const F=this.getCustomData(b,o);if(!F)return 0;const $=N.__SPECTOR_Object_CustomData?N.__SPECTOR_Object_CustomData.length:0;return N.__SPECTOR_Object_CustomData=F,F.length-$}getCustomData(o,b){const N=this.getLength(b);return b.arguments.length>=4?{target:o,length:N,usage:b.arguments[2],offset:b.arguments[3],sourceLength:b.arguments[1]?b.arguments[1].length:-1}:b.arguments.length===3?{target:o,length:N,usage:b.arguments[2]}:void 0}getLength(o){let b=-1,N=0;return o.arguments.length===5&&(b=o.arguments[4],N=o.arguments[3]),b<=0&&(b=typeof o.arguments[1]=="number"?o.arguments[1]:o.arguments[1]&&(o.arguments[1].byteLength||o.arguments[1].length)||0),b-N}}class Mt extends tt{get objectName(){return"Renderbuffer"}getCreateCommandNames(){return["createRenderbuffer"]}getUpdateCommandNames(){return["renderbufferStorage","renderbufferStorageMultisample"]}getDeleteCommandNames(){return["deleteRenderbuffer"]}getBoundInstance(o){const b=this.options.context;if(o===t.RENDERBUFFER.value)return b.getParameter(t.RENDERBUFFER_BINDING.value)}delete(o){const b=o.__SPECTOR_Object_CustomData;return b?b.length:0}update(o,b,N){const F=this.getCustomData(o,b);if(!F)return 0;const $=N.__SPECTOR_Object_CustomData?N.__SPECTOR_Object_CustomData.length:0;return F.length=F.width*F.height*this.getByteSizeForInternalFormat(F.internalFormat),N.__SPECTOR_Object_CustomData=F,F.length-$}getCustomData(o,b){return o.arguments.length===4?{target:b,internalFormat:o.arguments[1],width:o.arguments[2],height:o.arguments[3],length:0,samples:0}:{target:b,internalFormat:o.arguments[2],width:o.arguments[3],height:o.arguments[4],length:0,samples:o.arguments[1]}}}class bt extends tt{get objectName(){return"Texture2d"}getCreateCommandNames(){return["createTexture"]}getUpdateCommandNames(){return["texImage2D","compressedTexImage2D","texStorage2D"]}getDeleteCommandNames(){return["deleteTexture"]}getBoundInstance(o){const b=this.options.context;return o===t.TEXTURE_2D.value?b.getParameter(t.TEXTURE_BINDING_2D.value):o===t.TEXTURE_CUBE_MAP_POSITIVE_X.value||o===t.TEXTURE_CUBE_MAP_POSITIVE_Y.value||o===t.TEXTURE_CUBE_MAP_POSITIVE_Z.value||o===t.TEXTURE_CUBE_MAP_NEGATIVE_X.value||o===t.TEXTURE_CUBE_MAP_NEGATIVE_Y.value||o===t.TEXTURE_CUBE_MAP_NEGATIVE_Z.value?b.getParameter(t.TEXTURE_BINDING_CUBE_MAP.value):void 0}delete(o){const b=o.__SPECTOR_Object_CustomData;return b?b.target===t.TEXTURE_2D_ARRAY.name||b.target===t.TEXTURE_3D.name?0:b.length:0}update(o,b,N){const F=this.getCustomData(o,b,N);if(!F)return 0;const $=N.__SPECTOR_Object_CustomData?N.__SPECTOR_Object_CustomData.length:0;if(F.isCompressed){if(o.arguments.length>=7){const J=o.arguments[6];F.length=typeof J=="number"?J:J==null?void 0:J.byteLength}}else{const J=b==="TEXTURE_2D"?1:6;let ae=F.internalFormat;ae===t.RGBA.value&&(F.type===t.FLOAT.value&&(ae=t.RGBA32F.value),F.type===t.HALF_FLOAT_OES.value&&(ae=t.RGBA16F.value)),F.length=F.width*F.height*J*this.getByteSizeForInternalFormat(ae)}return F.length=0|F.length,N.__SPECTOR_Object_CustomData=F,F.length-$}getCustomData(o,b,N){return o.name==="texImage2D"?this.getTexImage2DCustomData(o,b,N):o.name==="compressedTexImage2D"?this.getCompressedTexImage2DCustomData(o,b,N):o.name==="texStorage2D"?this.getTexStorage2DCustomData(o,b,N):void 0}getTexStorage2DCustomData(o,b,N){let F;return o.arguments.length===5&&(F={target:b,internalFormat:o.arguments[2],width:o.arguments[3],height:o.arguments[4],length:0,isCompressed:!1}),F}getCompressedTexImage2DCustomData(o,b,N){if(o.arguments[1]!==0)return;let F;return o.arguments.length>=7&&(F={target:b,internalFormat:o.arguments[2],width:o.arguments[3],height:o.arguments[4],length:0,isCompressed:!0}),F}getTexImage2DCustomData(o,b,N){if(o.arguments[1]!==0)return;let F;return o.arguments.length>=8?F={target:b,internalFormat:o.arguments[2],width:o.arguments[3],height:o.arguments[4],format:o.arguments[6],type:o.arguments[7],length:0,isCompressed:!1}:o.arguments.length===6&&(F={target:b,internalFormat:o.arguments[2],width:o.arguments[5].width,height:o.arguments[5].height,format:o.arguments[3],type:o.arguments[4],length:0,isCompressed:!1}),F}}class yt extends tt{get objectName(){return"Texture3d"}getCreateCommandNames(){return["createTexture"]}getUpdateCommandNames(){return["texImage3D","compressedTexImage3D","texStorage3D"]}getDeleteCommandNames(){return["deleteTexture"]}getBoundInstance(o){const b=this.options.context;return o===t.TEXTURE_2D_ARRAY.value?b.getParameter(t.TEXTURE_BINDING_2D_ARRAY.value):o===t.TEXTURE_3D.value?b.getParameter(t.TEXTURE_BINDING_3D.value):void 0}delete(o){const b=o.__SPECTOR_Object_CustomData;return b?b.target!==t.TEXTURE_2D_ARRAY.name&&b.target!==t.TEXTURE_3D.name?0:b.length:0}update(o,b,N){if(o.arguments.length>=2&&o.arguments[1]!==0)return 0;const F=this.getCustomData(o,b,N);if(!F)return 0;const $=N.__SPECTOR_Object_CustomData?N.__SPECTOR_Object_CustomData.length:0;if(F.isCompressed){if(o.arguments.length>=7){const J=o.arguments[6];F.length=typeof J=="number"?J:J==null?void 0:J.byteLength}}else F.length=F.width*F.height*F.depth*this.getByteSizeForInternalFormat(F.internalFormat);return F.length=0|F.length,N.__SPECTOR_Object_CustomData=F,F.length-$}getCustomData(o,b,N){return o.name==="texImage3D"?this.getTexImage3DCustomData(o,b,N):o.name==="compressedTexImage3D"?this.getCompressedTexImage3DCustomData(o,b,N):o.name==="texStorage3D"?this.getTexStorage3DCustomData(o,b,N):void 0}getTexStorage3DCustomData(o,b,N){let F;return o.arguments.length===6&&(F={target:b,internalFormat:o.arguments[2],width:o.arguments[3],height:o.arguments[4],depth:o.arguments[5],length:0,isCompressed:!1}),F}getCompressedTexImage3DCustomData(o,b,N){if(o.arguments[1]!==0)return;let F;return o.arguments.length>=8&&(F={target:b,internalFormat:o.arguments[2],width:o.arguments[3],height:o.arguments[4],depth:o.arguments[5],length:0,isCompressed:!0}),F}getTexImage3DCustomData(o,b,N){if(o.arguments[1]!==0)return;let F;return o.arguments.length>=9&&(F={target:b,internalFormat:o.arguments[2],width:o.arguments[3],height:o.arguments[4],depth:o.arguments[5],format:o.arguments[7],type:o.arguments[8],length:0,isCompressed:!1}),F}}class $t extends tt{get objectName(){return"Program"}getCreateCommandNames(){return["createProgram"]}getUpdateCommandNames(){return["linkProgram"]}getDeleteCommandNames(){return["deleteProgram"]}getBoundInstance(o){return o}delete(o){const b=o.__SPECTOR_Object_CustomData;return b?b.length:0}update(o,b,N){if(o.arguments.length>=1&&!o.arguments[0])return 0;const F=this.getCustomData(N);if(!F)return 0;const $=N.__SPECTOR_Object_CustomData?N.__SPECTOR_Object_CustomData.length:0;return N.__SPECTOR_Object_CustomData=F,F.length-$}getCustomData(o){const b=this.options.context;return Ce.getProgramData(b,o)}}class Bn{constructor(o){this.contextInformation=o,this.onCommandCallbacks={},this.recorders=[],this.initRecorders()}recordCommand(o){const b=this.onCommandCallbacks[o.name];if(b)for(const N of b)N(o)}startCapture(){for(const o of this.recorders)o.startCapture()}stopCapture(){for(const o of this.recorders)o.stopCapture()}appendRecordedInformation(o){for(const b of this.recorders)b.appendRecordedInformation(o)}initRecorders(){this.recorders.push(new ut(this.contextInformation),new Mt(this.contextInformation),new bt(this.contextInformation),new yt(this.contextInformation),new $t(this.contextInformation));for(const o of this.recorders)o.registerCallbacks(this.onCommandCallbacks)}}class Yn{constructor(o){this.contextInformation=o,this.webGlObjects=[],this.initWebglObjects()}tagWebGlObjects(o){for(const b of this.webGlObjects){for(let N=0;N<o.arguments.length;N++){const F=o.arguments[N];if(b.tagWebGlObject(F))break}if(b.tagWebGlObject(o.result))break}}tagWebGlObject(o){for(const b of this.webGlObjects){const N=b.tagWebGlObject(o);if(N)return N}}initWebglObjects(){this.webGlObjects.push(new Sn,new nn,new li,new bi,new hs,new Zs,new Js,new Q,new fe,new Ee,new ge,new In)}}class Zn extends j{constructor(o){super(o),this.extensionDefinition=[[{name:"ANGLE_instanced_arrays",description:""},{name:"EXT_blend_minmax",description:""},{name:"EXT_color_buffer_float",description:""},{name:"EXT_color_buffer_half_float",description:""},{name:"EXT_disjoint_timer_query",description:""},{name:"EXT_frag_depth",description:""},{name:"EXT_sRGB",description:""},{name:"EXT_shader_texture_lod",description:""},{name:"EXT_texture_filter_anisotropic",description:""},{name:"OES_element_index_uint",description:""},{name:"OES_standard_derivatives",description:""},{name:"OES_texture_float",description:""},{name:"OES_texture_float_linear",description:""},{name:"OES_texture_half_float",description:""},{name:"OES_texture_half_float_linear",description:""},{name:"OES_vertex_array_object",description:""},{name:"WEBGL_color_buffer_float",description:""},{name:"WEBGL_compressed_texture_astc",description:""},{name:"WEBGL_compressed_texture_atc",description:""},{name:"WEBGL_compressed_texture_etc",description:""},{name:"WEBGL_compressed_texture_etc1",description:""},{name:"WEBGL_compressed_texture_pvrtc",description:""},{name:"WEBGL_compressed_texture_s3tc",description:""},{name:"WEBGL_depth_texture",description:""},{name:"WEBGL_draw_buffers",description:""}],[{name:"EXT_color_buffer_float",description:""},{name:"EXT_disjoint_timer_query",description:""},{name:"EXT_disjoint_timer_query_webgl2",description:""},{name:"EXT_texture_filter_anisotropic",description:""},{name:"OES_texture_float_linear",description:""},{name:"WEBGL_compressed_texture_astc",description:""},{name:"WEBGL_compressed_texture_atc",description:""},{name:"WEBGL_compressed_texture_etc",description:""},{name:"WEBGL_compressed_texture_etc1",description:""},{name:"WEBGL_compressed_texture_pvrtc",description:""},{name:"WEBGL_compressed_texture_s3tc",description:""},{name:"WEBGL_multi_draw",description:""},{name:"WEBGL_multi_draw_instanced_base_vertex_base_instance",description:""},{name:"WEBGL_draw_instanced_base_vertex_base_instance",description:""}]],this.currentState=this.startCapture(!0,this.quickCapture,this.fullCapture)}get stateName(){return"Extensions"}getExtensions(){return this.extensions}readFromContext(){const o=this.contextVersion===1?this.extensionDefinition[0]:this.extensionDefinition[1];for(const b of o){const N=this.context.getExtension(b.name);N?(this.currentState[b.name]=!0,this.extensions[b.name]=N):this.currentState[b.name]=!1}}}class bn extends xe{get stateName(){return"CompressedTextures"}constructor(o){super(o),this.currentState=this.startCapture(!0,this.quickCapture,this.fullCapture)}getWebgl1Parameters(){return[{constant:t.COMPRESSED_TEXTURE_FORMATS}]}stringifyParameterValue(o,b){const N=[];for(const F of o)N.push(t.stringifyWebGlConstant(F,"getParameter"));return N}}class Tt extends xe{get stateName(){return"Capabilities"}constructor(o){super(o),this.currentState=this.startCapture(!0,this.quickCapture,this.fullCapture)}getWebgl1Parameters(){return[{constant:t.RENDERER},{constant:t.VENDOR},{constant:t.VERSION},{constant:t.SHADING_LANGUAGE_VERSION},{constant:t.SAMPLES},{constant:t.SAMPLE_BUFFERS},{constant:t.RED_BITS},{constant:t.GREEN_BITS},{constant:t.BLUE_BITS},{constant:t.ALPHA_BITS},{constant:t.DEPTH_BITS},{constant:t.STENCIL_BITS},{constant:t.SUBPIXEL_BITS},{constant:t.LINE_WIDTH},{constant:t.ALIASED_LINE_WIDTH_RANGE},{constant:t.ALIASED_POINT_SIZE_RANGE},{constant:t.IMPLEMENTATION_COLOR_READ_FORMAT,returnType:20},{constant:t.IMPLEMENTATION_COLOR_READ_TYPE,returnType:20},{constant:t.MAX_COMBINED_TEXTURE_IMAGE_UNITS},{constant:t.MAX_CUBE_MAP_TEXTURE_SIZE},{constant:t.MAX_FRAGMENT_UNIFORM_VECTORS},{constant:t.MAX_RENDERBUFFER_SIZE},{constant:t.MAX_TEXTURE_IMAGE_UNITS},{constant:t.MAX_TEXTURE_SIZE},{constant:t.MAX_VARYING_VECTORS},{constant:t.MAX_VERTEX_ATTRIBS},{constant:t.MAX_VERTEX_TEXTURE_IMAGE_UNITS},{constant:t.MAX_VERTEX_UNIFORM_VECTORS},{constant:t.MAX_VIEWPORT_DIMS},{constant:t.MAX_TEXTURE_MAX_ANISOTROPY_EXT},{constant:t.MAX_COLOR_ATTACHMENTS_WEBGL},{constant:t.MAX_DRAW_BUFFERS_WEBGL}]}getWebgl2Parameters(){return[{constant:t.MAX_3D_TEXTURE_SIZE},{constant:t.MAX_ARRAY_TEXTURE_LAYERS},{constant:t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL},{constant:t.MAX_COLOR_ATTACHMENTS},{constant:t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS},{constant:t.MAX_COMBINED_UNIFORM_BLOCKS},{constant:t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS},{constant:t.MAX_DRAW_BUFFERS},{constant:t.MAX_ELEMENT_INDEX},{constant:t.MAX_ELEMENTS_INDICES},{constant:t.MAX_ELEMENTS_VERTICES},{constant:t.MAX_FRAGMENT_INPUT_COMPONENTS},{constant:t.MAX_FRAGMENT_UNIFORM_BLOCKS},{constant:t.MAX_FRAGMENT_UNIFORM_COMPONENTS},{constant:t.MAX_PROGRAM_TEXEL_OFFSET},{constant:t.MAX_SAMPLES},{constant:t.MAX_SERVER_WAIT_TIMEOUT},{constant:t.MAX_TEXTURE_LOD_BIAS},{constant:t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS},{constant:t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS},{constant:t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS},{constant:t.MAX_UNIFORM_BLOCK_SIZE},{constant:t.MAX_UNIFORM_BUFFER_BINDINGS},{constant:t.MAX_VARYING_COMPONENTS},{constant:t.MAX_VERTEX_OUTPUT_COMPONENTS},{constant:t.MAX_VERTEX_UNIFORM_BLOCKS},{constant:t.MAX_VERTEX_UNIFORM_COMPONENTS},{constant:t.MIN_PROGRAM_TEXEL_OFFSET}]}}class fn{constructor(o){this.options=o,this.commandId=0,this.context=o.context,this.version=o.version,this.onMaxCommand=new a,this.capturing=!1,this.globalCapturing=!0,this.contextInformation={context:this.context,contextVersion:this.version,toggleCapture:this.toggleGlobalCapturing.bind(this),tagWebGlObject:this.tagWebGlObject.bind(this),extensions:{}},this.commandSpies={},this.stateSpy=new at(this.contextInformation),this.recorderSpy=new Bn(this.contextInformation),this.webGlObjectSpy=new Yn(this.contextInformation),this.analyser=new x(this.contextInformation),this.initStaticCapture(),o.recordAlways&&this.spy()}spy(){this.spyContext(this.context);const{extensions:o}=this.contextInformation;for(const b in o)o.hasOwnProperty(b)&&this.spyContext(o[b])}unSpy(){for(const o in this.commandSpies)this.commandSpies.hasOwnProperty(o)&&this.commandSpies[o].unSpy()}startCapture(o=0,b=!1,N=!1){const F=E.now;this.maxCommands=o,this.options.recordAlways||this.spy(),this.capturing=!0,this.commandId=0,this.currentCapture={canvas:this.canvasCapture,context:this.contextCapture,commands:[],initState:{},endState:{},startTime:F,listenCommandsStartTime:0,listenCommandsEndTime:0,endTime:0,analyses:[],frameMemory:{},memory:{}},this.currentCapture.canvas.width=this.context.canvas.width,this.currentCapture.canvas.height=this.context.canvas.height,this.currentCapture.canvas.clientWidth=this.context.canvas.clientWidth||this.context.canvas.width,this.currentCapture.canvas.clientHeight=this.context.canvas.clientHeight||this.context.canvas.height,this.stateSpy.startCapture(this.currentCapture,b,N),this.recorderSpy.startCapture(),this.currentCapture.listenCommandsStartTime=E.now}stopCapture(){const o=E.now;return this.options.recordAlways||this.unSpy(),this.capturing=!1,this.stateSpy.stopCapture(this.currentCapture),this.recorderSpy.stopCapture(),this.currentCapture.listenCommandsEndTime=o,this.currentCapture.endTime=E.now,this.recorderSpy.appendRecordedInformation(this.currentCapture),this.analyser.appendAnalyses(this.currentCapture),this.currentCapture}isCapturing(){return this.globalCapturing&&this.capturing}setMarker(o){this.marker=o}clearMarker(){this.marker=null}log(o){this.currentCapture.commands.push({name:"LOG",text:o,commandArguments:[],commandEndTime:E.now,endTime:E.now,stackTrace:[],marker:"",status:40,startTime:E.now,result:void 0,id:this.getNextCommandCaptureId()})}getNextCommandCaptureId(){return this.commandId++}onCommand(o,b){if(this.globalCapturing&&(this.webGlObjectSpy.tagWebGlObjects(b),this.recorderSpy.recordCommand(b),this.isCapturing())){const N=o.createCapture(b,this.getNextCommandCaptureId(),this.marker);this.stateSpy.captureState(N),this.currentCapture.commands.push(N),N.endTime=E.now,this.maxCommands>0&&this.currentCapture.commands.length===this.maxCommands&&this.onMaxCommand.trigger(this)}}spyContext(o){const b=[];for(const N in o)N&&b.push(N);for(let N=0;N<b.length;N++){const F=b[N];if(!~fn.unSpyableMembers.indexOf(F))try{typeof o[F]!="number"&&this.spyFunction(F,o)}catch($){M.error("Cant Spy member: "+F),M.error($)}}}initStaticCapture(){const o=new Zn(this.contextInformation),b=o.getExtensions();for(const $ in b)b.hasOwnProperty($)&&(this.contextInformation.extensions[$]=b[$]);const N=new Tt(this.contextInformation),F=new bn(this.contextInformation);this.contextCapture={version:this.version,contextAttributes:this.context.getContextAttributes(),capabilities:N.getStateData(),extensions:o.getStateData(),compressedTextures:F.getStateData()},this.canvasCapture={width:this.context.canvas.width,height:this.context.canvas.height,clientWidth:this.context.canvas.clientWidth||this.context.canvas.width,clientHeight:this.context.canvas.clientHeight||this.context.canvas.height,browserAgent:navigator?navigator.userAgent:""}}spyFunction(o,b){if(o.indexOf("__SPECTOR_Origin_")!==0){if(!this.commandSpies[o]){const N=function(F,$){const J={};for(const ae in F)F.hasOwnProperty(ae)&&(J[ae]=F[ae]);for(const ae in $)J.hasOwnProperty(ae)||(J[ae]=$[ae]);return J}(this.contextInformation,{spiedCommandName:o,spiedCommandRunningContext:b,callback:this.onCommand.bind(this)});this.commandSpies[o]=new Ue(N)}this.commandSpies[o].spy()}}toggleGlobalCapturing(o){this.globalCapturing=o}tagWebGlObject(o){return this.webGlObjectSpy.tagWebGlObject(o)}}fn.unSpyableMembers=["canvas","drawingBufferWidth","drawingBufferHeight","drawingBufferColorSpace","unpackColorSpace","glp"];class xt{constructor(o){this.spiedScope=o||window,this.lastFrame=0,this.speedRatio=1,this.willPlayNextFrame=!1,this.onFrameStart=new a,this.onFrameEnd=new a,this.onError=new a,this.lastSixtyFramesDuration=[],this.lastSixtyFramesCurrentIndex=0,this.lastSixtyFramesPreviousStart=0;for(let b=0;b<xt.fpsWindowSize;b++)this.lastSixtyFramesDuration[b]=0;this.init()}playNextFrame(){this.willPlayNextFrame=!0}changeSpeedRatio(o){this.speedRatio=o}static getRequestAnimationFrameFunctionNames(){return[...xt.requestAnimationFrameFunctions]}addRequestAnimationFrameFunctionName(o){xt.requestAnimationFrameFunctions.push(o)}getSpiedScope(){return this.spiedScope}setSpiedScope(o){this.spiedScope=o}getFps(){let o=0;for(let b=0;b<xt.fpsWindowSize;b++)o+=this.lastSixtyFramesDuration[b];return o===0?0:6e4/o}init(){for(const o of xt.requestAnimationFrameFunctions)this.spyRequestAnimationFrame(o,this.spiedScope);for(const o of xt.setTimerFunctions)this.spySetTimer(o);this.spiedScope.VRDisplay&&this.spiedScope.addEventListener("vrdisplaypresentchange",o=>{this.spyRequestAnimationFrame("requestAnimationFrame",o.display)})}spyRequestAnimationFrame(o,b){const N=this;A.storeOriginFunction(b,o),b[o]=function(){const F=arguments[0],$=N.getCallback(N,F,()=>{N.spiedScope[o](F)});return A.executeOriginFunction(b,o,[$])}}spySetTimer(o){const b=this,N=this.spiedScope,F=o==="setTimeout";A.storeOriginFunction(N,o),N[o]=function(){const $=arguments[0],J=arguments[1],ae=Array.prototype.slice.call(arguments);return xt.setTimerCommonValues.indexOf(J)>-1&&(ae[0]=b.getCallback(b,$,F?()=>{N[o]($)}:null)),A.executeOriginFunction(N,o,ae)}}getCallback(o,b,N=null){return function(){const F=E.now;if(o.lastFrame=++o.lastFrame%o.speedRatio,o.willPlayNextFrame||o.speedRatio&&!o.lastFrame){o.onFrameStart.trigger(o);try{b.apply(o.spiedScope,arguments)}catch($){o.onError.trigger($)}o.lastSixtyFramesCurrentIndex=(o.lastSixtyFramesCurrentIndex+1)%xt.fpsWindowSize,o.lastSixtyFramesDuration[o.lastSixtyFramesCurrentIndex]=F-o.lastSixtyFramesPreviousStart,o.onFrameEnd.trigger(o),o.willPlayNextFrame=!1}else N&&N();o.lastSixtyFramesPreviousStart=F}}}xt.requestAnimationFrameFunctions=["requestAnimationFrame","msRequestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame"],xt.setTimerFunctions=["setTimeout","setInterval"],xt.setTimerCommonValues=[0,15,16,33,32,40],xt.fpsWindowSize=60;class Zt{constructor(o){this.canvas=o,this.onContextRequested=new a,this.init()}init(){const o=this,b=function(){const N=this instanceof HTMLCanvasElement?HTMLCanvasElement:OffscreenCanvas,F=o.canvas?A.executeOriginFunction(this,"getContext",arguments):A.executePrototypeOriginFunction(this,N,"getContext",arguments);if(arguments.length>0&&arguments[0]==="2d")return F;if(F){const $=Array.prototype.slice.call(arguments),J=$[0]==="webgl2"||$[0]==="experimental-webgl2"?2:1;o.onContextRequested.trigger({context:F,contextVersion:J})}return F};this.canvas?(A.storeOriginFunction(this.canvas,"getContext"),this.canvas.getContext=b):(A.storePrototypeOriginFunction(HTMLCanvasElement,"getContext"),HTMLCanvasElement.prototype.getContext=b,typeof OffscreenCanvas<"u"&&(A.storePrototypeOriginFunction(OffscreenCanvas,"getContext"),OffscreenCanvas.prototype.getContext=b))}}var wn=g(379),Jn=g.n(wn),Ai=g(795),ht=g.n(Ai),Ht=g(569),ci=g.n(Ht),en=g(565),sn=g.n(en),ds=g(216),O=g.n(ds),fs=g(589),Tn=g.n(fs),Ci=g(866),me={};me.styleTagTransform=Tn(),me.setAttributes=sn(),me.insert=ci().bind(null,"html"),me.domAPI=ht(),me.insertStyleElement=O(),Jn()(Ci.Z,me),Ci.Z&&Ci.Z.locals&&Ci.Z.locals;class pe{constructor(o,b){this.placeHolder=o,this.stateStore=b}compose(o){const b=this.stateStore.getStatesToProcess();let N=!1;for(const $ in b)if(b.hasOwnProperty($)){const J=b[$],ae=this.stateStore.getLastOperation(J),_e=this.stateStore.getComponentInstance(J),Ae=this.stateStore.getData(J);_e.render(Ae,J,ae),N=!0}if(!N)return;const F=this.stateStore.getLastOperation(o);this.composeInContainer(this.placeHolder,Number.MAX_VALUE,o,F)}composeChildren(o,b){if(!b)return;const N=this.stateStore.getChildrenIds(o);let F=0;for(let $=0;$<N.length;$++){const J=N[$],ae=this.stateStore.getLastOperation(J);this.composeInContainer(b,F,J,ae),ae!==50&&F++}}composeInContainer(o,b,N,F){const $=this.stateStore.getComponentInstance(N).composeInContainer(o,b,F);this.composeChildren(N,$)}}class lt{constructor(){this.store={},this.idGenerator=0,this.pendingOperation={}}getLastOperation(o){return this.store[o].lastOperation}getData(o){return this.store[o].data}getComponentInstance(o){return this.store[o].componentInstance}getParentId(o){return this.store[o].parent?this.store[o].parent.id:-1}getChildrenIds(o){const b=[];for(const N of this.store[o].children)b.push(N.id);return b}hasChildren(o){return this.store[o].children.length>0}add(o,b){const N=this.getNewId();return this.pendingOperation[N]=N,this.store[N]={data:o,id:N,parent:null,children:[],componentInstance:b,lastOperation:20},N}update(o,b){this.store[o],this.pendingOperation[o]=o,this.store[o].data=b,this.store[o].lastOperation=40}addChild(o,b,N){const F=this.store[o],$=this.add(b,N);this.pendingOperation[$]=$;const J=this.store[$];return J.parent=F,F.children.push(J),$}insertChildAt(o,b,N,F){const $=this.store[o],J=this.add(N,F);this.pendingOperation[J]=J;const ae=this.store[J];return ae.parent=$,b>=$.children.length?$.children.push(ae):b>=0?$.children.splice(b,0,ae):$.children.unshift(ae),J}removeChildById(o,b){const N=this.store[o];for(let F=N.children.length-1;F>=0;F--)if(N.children[F].id===b){this.removeChildAt(o,F);break}}removeChildAt(o,b){const N=this.store[o];let F;b>N.children.length-1?(F=N.children[N.children.length-1],N.children[N.children.length-1].parent=null,N.children.splice(N.children.length-1,1)):b>=0?(F=N.children[b],N.children[b].parent=null,N.children.splice(b,1)):(F=N.children[0],N.children[0].parent=null,N.children.splice(0,1)),F.parent=null,this.remove(F.id)}remove(o){const b=this.store[o];b.parent?(this.store[b.parent.id],this.removeChildById(b.parent.id,o)):(this.removeChildren(o),this.store[o].lastOperation=50,this.pendingOperation[o]=o)}removeChildren(o){const b=this.store[o];for(;b.children.length;)this.remove(b.children[0].id)}getStatesToProcess(){return this.pendingOperation}flushPendingOperations(){for(const o in this.pendingOperation)this.pendingOperation[o]&&(this.store[o].lastOperation===50?delete this.store[o]:this.store[o].lastOperation=0);this.pendingOperation={}}getNewId(){return++this.idGenerator}}class mn{constructor(o){this.component=o}render(o,b,N){N!==0&&(N!==50?this.domNode=this.component.render(o,b):this.removeNode())}composeInContainer(o,b,N){if(N===50)return this.removeNode(),null;const F=this.cachedCurrentChildrenContainer;if(N===0)return F;const $=this.domNode,J=$.getAttribute("childrencontainer")?$:$.querySelector("[childrenContainer]");if(J&&F){const ae=F.children;for(;ae.length>0;)J.appendChild(ae[0])}if(this.cachedCurrentChildrenContainer=J,b>=o.children.length)o.appendChild($),this.cachedCurrentDomNode&&N===40&&(this.cachedCurrentDomNode.remove?this.cachedCurrentDomNode.remove():this.cachedCurrentDomNode.parentNode&&this.cachedCurrentDomNode.parentNode.removeChild(this.cachedCurrentDomNode));else{const ae=o.children[b];o.insertBefore($,ae),N===40&&o.removeChild(ae)}return this.cachedCurrentDomNode=this.domNode,J}removeNode(){this.domNode&&this.domNode.parentElement&&(this.domNode.remove?this.domNode.remove():this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode)),this.cachedCurrentDomNode&&this.cachedCurrentDomNode.parentElement&&(this.cachedCurrentDomNode.remove?this.cachedCurrentDomNode.remove():this.cachedCurrentDomNode.parentNode&&this.cachedCurrentDomNode.parentNode.removeChild(this.cachedCurrentDomNode))}}mn.idGenerator=0;class Gt{constructor(o){this.stateStore=new lt,this.compositor=new pe(o,this.stateStore),this.willRender=!1,this.rootStateId=-1}addRootState(o,b,N=!1){const F=new mn(b),$=this.stateStore.add(o,F);return this.rootStateId=$,this.setForRender(N),$}addChildState(o,b,N,F=!1){const $=this.insertChildState(o,b,Number.MAX_VALUE,N);return this.setForRender(F),$}insertChildState(o,b,N,F,$=!1){const J=new mn(F),ae=this.stateStore.insertChildAt(o,N,b,J);return this.setForRender($),ae}updateState(o,b,N=!1){this.stateStore.update(o,b),this.setForRender(N)}removeState(o,b=!1){this.stateStore.remove(o),this.setForRender(b)}removeChildrenStates(o,b=!1){this.stateStore.removeChildren(o),this.setForRender(b)}getState(o){return this.stateStore.getData(o)}getGenericState(o){return this.getState(o)}getChildrenState(o){return this.stateStore.getChildrenIds(o).map(b=>this.stateStore.getData(o))}getChildrenGenericState(o){return this.getChildrenState(o)}hasChildren(o){return this.stateStore.hasChildren(o)}updateAllChildrenState(o,b){const N=this.stateStore.getChildrenIds(o);for(const F of N){const $=this.getGenericState(F);b($),this.updateState(F,$)}}updateAllChildrenGenericState(o,b){this.updateAllChildrenState(o,b)}setForRender(o){this.willRender||(this.willRender=!0,o?this.compose():setTimeout(this.compose.bind(this),Gt.REFRESHRATEINMILLISECONDS))}compose(){this.willRender=!1,this.compositor.compose(this.rootStateId),this.stateStore.flushPendingOperations()}}Gt.REFRESHRATEINMILLISECONDS=100;class Wt extends class{constructor(){this.dummyTextGeneratorElement=document.createElement("div")}createFromHtml(o){const b=document.createElement("div");return b.innerHTML=o,b.firstElementChild}htmlTemplate(o,...b){const N=o.raw;let F="";return b.forEach(($,J)=>{let ae=N[J];Array.isArray($)&&($=$.join("")),ae&&ae.length>0&&ae[ae.length-1]==="$"?ae=ae.slice(0,-1):$=this.htmlEscape($),F+=ae,F+=$}),F+=N[N.length-1],F}htmlEscape(o){return o==null||o.length===0?o:(this.dummyTextGeneratorElement.innerText=o,this.dummyTextGeneratorElement.innerHTML)}}{constructor(){super(),this.events={}}addEventListener(o,b,N=null){return this.events[o]?this.events[o].add(b,N):-1}removeEventListener(o,b){this.events[o]&&this.events[o].remove(b)}renderElementFromTemplate(o,b,N){const F=this.createFromHtml(o);return this.bindCommands(F,b,N),F}bindCommands(o,b,N){o.getAttribute("commandname")&&this.bindCommand(o,b,N);const F=o.querySelectorAll("[commandName]");for(let $=0;$<F.length;$++){const J=F[$];this.bindCommand(J,b,N)}}bindCommand(o,b,N){const F=o.getAttribute("commandname");let $=o.getAttribute("commandeventbinding")||"";$.length===0&&($="click");const J=o.getAttribute("usecapture")==="true",ae=o.getAttribute("stoppropagation")==="true";this.createEvent(F),this.mapEventListener(o,$,F,b,N,J,ae)}mapEventListener(o,b,N,F,$,J=!1,ae=!1){const _e=this;ae?o.addEventListener(b,function(Ae){return Ae.stopPropagation(),Ae.preventDefault(),_e.triggerEvent(N,this,F,$),!1},J):o.addEventListener(b,function(){_e.triggerEvent(N,this,F,$)},J)}createEvent(o){if(!this.events[o]){const b=new a;this.events[o]=b}return this.events[o]}triggerEvent(o,b,N,F){this.events[o].trigger({sender:b,stateId:F,state:N})}}class yr extends Wt{render(o,b){const N=this.htmlTemplate`<div>
            <div childrenContainer="true" class="captureMenuComponent ${o?"active":""}">
            </div>
            <div class="captureMenuLogComponent ${o.logVisible?"active":""}">
                <span class="${o.logLevel===f.error?"error":""}">${o.logText}<span>
            </div>
        </div>`;return this.renderElementFromTemplate(N,o,b)}}class Me extends Wt{constructor(){super(),this.onCanvasSelected=this.createEvent("onCanvasSelected")}render(o,b){const N=document.createElement("li"),F=document.createElement("span");return F.innerText=`Id: ${o.id} - Size: ${o.width}*${o.height}`,N.appendChild(F),this.mapEventListener(N,"click","onCanvasSelected",o,b),N}}class wr extends Wt{constructor(){super(),this.onCaptureRequested=this.createEvent("onCaptureRequested"),this.onPlayRequested=this.createEvent("onPlayRequested"),this.onPauseRequested=this.createEvent("onPauseRequested"),this.onPlayNextFrameRequested=this.createEvent("onPlayNextFrameRequested")}render(o,b){const N=this.htmlTemplate`
        <div class="captureMenuActionsComponent">
            <div commandName="onCaptureRequested">
            </div>
            $${o?`<div commandName="onPauseRequested">
                </div>`:`<div commandName="onPlayRequested">
                </div>
                <div commandName="onPlayNextFrameRequested">
                </div>`}
        </div>`;return this.renderElementFromTemplate(N,o,b)}}class Tr extends Wt{constructor(){super(),this.onCanvasSelection=this.createEvent("onCanvasSelection")}render(o,b){const N=this.htmlTemplate`
        <div class="canvasListComponent">
            <span commandName="onCanvasSelection">
                ${o.currentCanvasInformation?`${o.currentCanvasInformation.id} (${o.currentCanvasInformation.width}*${o.currentCanvasInformation.height})`:"Choose Canvas..."}
            </span>
            <ul childrenContainer="true" style="${o.showList?"display:block;visibility:visible":"display:none;visibility:hidden"}"></ul>
        </div>`;return this.renderElementFromTemplate(N,o,b)}}class Rr extends Wt{render(o,b){const N=document.createElement("span");return N.className="fpsCounterComponent",N.innerText=o.toFixed(2)+" Fps",N}}class ln{constructor(o={}){this.options=o,this.rootPlaceHolder=o.rootPlaceHolder||document.body,this.mvx=new Gt(this.rootPlaceHolder),this.isTrackingCanvas=!1,this.onCanvasSelected=new a,this.onCaptureRequested=new a,this.onPauseRequested=new a,this.onPlayRequested=new a,this.onPlayNextFrameRequested=new a,this.captureMenuComponent=new yr,this.canvasListComponent=new Tr,this.canvasListItemComponent=new Me,this.actionsComponent=new wr,this.fpsCounterComponent=new Rr,this.rootStateId=this.mvx.addRootState({visible:!0,logLevel:f.info,logText:ln.SelectCanvasHelpText,logVisible:!this.options.hideLog},this.captureMenuComponent),this.canvasListStateId=this.mvx.addChildState(this.rootStateId,{currentCanvasInformation:null,showList:!1},this.canvasListComponent),this.actionsStateId=this.mvx.addChildState(this.rootStateId,!0,this.actionsComponent),this.fpsStateId=this.mvx.addChildState(this.rootStateId,0,this.fpsCounterComponent),this.actionsComponent.onCaptureRequested.add(()=>{const b=this.getSelectedCanvasInformation();b&&this.updateMenuStateLog(f.info,ln.PleaseWaitHelpText,!0),setTimeout(()=>{this.onCaptureRequested.trigger(b)},200)}),this.actionsComponent.onPauseRequested.add(()=>{this.onPauseRequested.trigger(this.getSelectedCanvasInformation()),this.mvx.updateState(this.actionsStateId,!1)}),this.actionsComponent.onPlayRequested.add(()=>{this.onPlayRequested.trigger(this.getSelectedCanvasInformation()),this.mvx.updateState(this.actionsStateId,!0)}),this.actionsComponent.onPlayNextFrameRequested.add(()=>{this.onPlayNextFrameRequested.trigger(this.getSelectedCanvasInformation())}),this.canvasListComponent.onCanvasSelection.add(b=>{this.mvx.updateState(this.canvasListStateId,{currentCanvasInformation:null,showList:!b.state.showList}),this.updateMenuStateLog(f.info,ln.SelectCanvasHelpText),this.onCanvasSelected.trigger(null),this.isTrackingCanvas&&this.trackPageCanvases(),b.state.showList?this.showMenuStateLog():this.hideMenuStateLog()}),this.canvasListItemComponent.onCanvasSelected.add(b=>{this.mvx.updateState(this.canvasListStateId,{currentCanvasInformation:b.state,showList:!1}),this.onCanvasSelected.trigger(b.state),this.updateMenuStateLog(f.info,ln.ActionsHelpText),this.showMenuStateLog()})}getSelectedCanvasInformation(){return this.mvx.getGenericState(this.canvasListStateId).currentCanvasInformation}trackPageCanvases(){if(this.isTrackingCanvas=!0,document.body){const o=document.body.querySelectorAll("canvas");this.updateCanvasesList(o)}}updateCanvasesList(o){this.updateCanvasesListInformationInternal(o,b=>({id:b.id,width:b.width,height:b.height,ref:b}))}updateCanvasesListInformation(o){this.updateCanvasesListInformationInternal(o,b=>({id:b.id,width:b.width,height:b.height,ref:b.ref}))}display(){this.updateMenuStateVisibility(!0)}hide(){this.updateMenuStateVisibility(!1)}captureComplete(o){o?this.updateMenuStateLog(f.error,o):this.updateMenuStateLog(f.info,ln.ActionsHelpText)}setFPS(o){this.mvx.updateState(this.fpsStateId,o)}updateCanvasesListInformationInternal(o,b){this.mvx.removeChildrenStates(this.canvasListStateId);const N=[];for(let J=0;J<o.length;J++){const ae=b(o[J]);N.push(ae),this.mvx.addChildState(this.canvasListStateId,ae,this.canvasListItemComponent)}const F=N.length,$=this.mvx.getGenericState(this.canvasListStateId).showList;if(!$)if(F===1){const J=N[0];this.mvx.updateState(this.canvasListStateId,{currentCanvasInformation:J,showList:$}),this.updateMenuStateLog(f.info,ln.ActionsHelpText),this.onCanvasSelected.trigger(J)}else this.updateMenuStateLog(f.info,ln.SelectCanvasHelpText),this.onCanvasSelected.trigger(null)}hideMenuStateLog(){const o=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:o.visible,logLevel:o.logLevel,logText:o.logText,logVisible:!1})}showMenuStateLog(){const o=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:o.visible,logLevel:o.logLevel,logText:o.logText,logVisible:!this.options.hideLog})}updateMenuStateLog(o,b,N=!1){const F=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:F.visible,logLevel:o,logText:b,logVisible:!this.options.hideLog},N)}updateMenuStateVisibility(o){const b=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:o,logLevel:b.logLevel,logText:b.logText,logVisible:b.logVisible})}}ln.SelectCanvasHelpText="Please, select a canvas in the list above.",ln.ActionsHelpText="Record with the red button, you can also pause or continue playing the current scene.",ln.PleaseWaitHelpText="Capturing, be patient (this can take up to 3 minutes)...";var Vi=g(625),ui={};ui.styleTagTransform=Tn(),ui.setAttributes=sn(),ui.insert=ci().bind(null,"html"),ui.domAPI=ht(),ui.insertStyleElement=O(),Jn()(Vi.Z,ui),Vi.Z&&Vi.Z.locals&&Vi.Z.locals;class Mr extends Wt{constructor(){super(),this.onCaptureLoaded=new a}render(o,b){const N=this.htmlTemplate`
        <div class="captureListComponent ${o?"active":""}">
            <div class="openCaptureFile">
                <Span>Drag files here to open a previously saved capture.</span>
            </div>
            <ul childrenContainer="true"></ul>
        </div>`,F=this.renderElementFromTemplate(N,o,b),$=F.querySelector(".openCaptureFile");return $.addEventListener("dragenter",J=>(this.drag(J),!1),!1),$.addEventListener("dragover",J=>(this.drag(J),!1),!1),$.addEventListener("drop",J=>{this.drop(J)},!1),F}drag(o){o.stopPropagation(),o.preventDefault()}drop(o){o.stopPropagation(),o.preventDefault(),this.loadFiles(o)}loadFiles(o){let b=null;if(o&&o.dataTransfer&&o.dataTransfer.files&&(b=o.dataTransfer.files),o&&o.target&&o.target.files&&(b=o.target.files),b&&b.length>0)for(let N=0;N<b.length;N++){const F=b[N].name.toLowerCase().split(".").pop();if(b[N].type,F==="json"){const $=b[N],J=new FileReader;J.onerror=ae=>{M.error("Error while reading file: "+$.name+ae)},J.onload=ae=>{try{const _e=JSON.parse(ae.target.result);this.onCaptureLoaded.trigger(_e)}catch(_e){M.error("Error while reading file: "+$.name+_e)}},J.readAsText($)}}}}class Lr extends Wt{constructor(){super(),this.onCaptureSelected=this.createEvent("onCaptureSelected"),this.onSaveRequested=this.createEvent("onSaveRequested")}render(o,b){const N=document.createElement("li");if(o.active&&(N.className="active"),o.capture.endState.VisualState.Attachments)for(const J of o.capture.endState.VisualState.Attachments){const ae=document.createElement("img");ae.src=encodeURI(J.src),N.appendChild(ae)}else{const J=document.createElement("span");J.innerText=o.capture.endState.VisualState.FrameBufferStatus,N.appendChild(J)}const F=document.createElement("span");F.innerText=new Date(o.capture.startTime).toTimeString().split(" ")[0],N.appendChild(F);const $=document.createElement("a");return $.href="#",$.className="captureListItemSave",this.mapEventListener($,"click","onSaveRequested",o,b,!1,!0),F.appendChild($),this.mapEventListener(N,"click","onCaptureSelected",o,b),N}}class Ir extends Wt{render(o,b){const N=this.htmlTemplate`
        <div class="visualStateListComponent">
            <ul childrenContainer="true"></ul>
        </div>`;return this.renderElementFromTemplate(N,o,b)}}class ms{static scrollIntoView(o){const b=o.getBoundingClientRect();let N=o.parentElement;for(;N&&N.clientHeight===N.offsetHeight;)N=N.parentElement;if(!N)return;const F=N.getBoundingClientRect();b.top<F.top?o.scrollIntoView(!0):b.bottom>F.bottom&&o.scrollIntoView(!1)}}class Qs extends Wt{constructor(){super(),this.onVisualStateSelected=this.createEvent("onVisualStateSelected")}render(o,b){const N=document.createElement("li");if(o.active&&(N.className="active",setTimeout(()=>{ms.scrollIntoView(N)},1)),o.VisualState.Attachments)for(const $ of o.VisualState.Attachments){if(!$.src)continue;const J=document.createElement("img");if(J.src=encodeURI($.src),N.appendChild(J),o.VisualState.Attachments.length>1){const ae=document.createElement("span");ae.innerText=$.attachmentName,N.appendChild(ae)}if($.textureLayer){const ae=document.createElement("span");ae.innerText="Layer: "+$.textureLayer,N.appendChild(ae)}if($.textureCubeMapFace){const ae=document.createElement("span");ae.innerText=$.textureCubeMapFace,N.appendChild(ae)}}else{const $=document.createElement("span");$.innerText=o.VisualState.FrameBufferStatus,N.appendChild($)}const F=document.createElement("span");return F.innerText=o.VisualState.FrameBuffer?"Frame buffer: "+o.VisualState.FrameBuffer.__SPECTOR_Object_TAG.id:"Canvas frame buffer",N.appendChild(F),this.mapEventListener(N,"click","onVisualStateSelected",o,b),N}}class Fr extends Wt{render(o,b){const N=this.htmlTemplate`
        <div class="commandListComponent">
            <ul childrenContainer="true"></ul>
        </div>`;return this.renderElementFromTemplate(N,o,b)}}class er extends Wt{constructor(){super(),this.onCommandSelected=this.createEvent("onCommandSelected"),this.onVertexSelected=this.createEvent("onVertexSelected"),this.onFragmentSelected=this.createEvent("onFragmentSelected")}render(o,b){const N=document.createElement("li");let F="unknown";switch(o.capture.status){case 50:F="deprecated";break;case 10:F="unused";break;case 20:F="disabled";break;case 30:F="redundant";break;case 40:F="valid"}if(o.capture.VisualState&&(N.className=" drawCall"),o.active&&(N.className=" active",setTimeout(()=>{ms.scrollIntoView(N)},1)),o.capture.marker){const $=document.createElement("span");$.className=F+" marker important",$.innerText=o.capture.marker+" ",$.style.fontWeight="1000",N.appendChild($)}if(o.capture.name==="LOG"){const $=document.createElement("span");$.className=F+" marker important",$.innerText=o.capture.text+" ",$.style.fontWeight="1000",N.appendChild($)}else{const $=document.createElement("span");let J=o.capture.text;J=J.replace(o.capture.name,`<span class=" ${F} important">${o.capture.name}</span>`),$.innerHTML=J,N.appendChild($)}if(o.capture.VisualState&&o.capture.name!=="clear")try{const $=o.capture.DrawCall.shaders[0],J=o.capture.DrawCall.shaders[1],ae=document.createElement("a");ae.innerText=$.name,ae.href="#",N.appendChild(ae),this.mapEventListener(ae,"click","onVertexSelected",o,b);const _e=document.createElement("a");_e.innerText=J.name,_e.href="#",N.appendChild(_e),this.mapEventListener(_e,"click","onFragmentSelected",o,b)}catch{}return this.mapEventListener(N,"click","onCommandSelected",o,b),N}}class tr extends Wt{render(o,b){const N=this.htmlTemplate`
        <div class="commandDetailComponent" childrenContainer="true">
        </div>`;return this.renderElementFromTemplate(N,o,b)}}class Nr extends Wt{render(o,b){const N=this.htmlTemplate`
        <div class="jsonContentComponent" childrenContainer="true">
        </div>`;return this.renderElementFromTemplate(N,o,b)}}class Pr extends Wt{render(o,b){const N=this.htmlTemplate`
        <div class="jsonGroupComponent">
            <div class="jsonGroupComponentTitle">${o?o.replace(/([A-Z])/g," $1").trim():""}</div>
            <ul childrenContainer="true"></ul>
        </div>`;return this.renderElementFromTemplate(N,o,b)}}class Dr extends Wt{render(o,b){const N=this.htmlTemplate`
            <li><span class="jsonItemComponentKey">${o.key}: </span><span class="jsonItemComponentValue">${o.value}</span><li>`;return this.renderElementFromTemplate(N,o,b)}}class Or extends Wt{render(o,b){const N=this.htmlTemplate`
        <li class="jsonItemImageHolder"><div class="jsonItemImage"><img src="${o.value}" style="${o.pixelated?"image-rendering: pixelated;":""}" /><span>${o.key}</span></div></li>`;return this.renderElementFromTemplate(N,o,b)}}class Br extends Wt{render(o,b){const N=this.htmlTemplate`
            <li><span class="jsonItemComponentKey">${o.key}: </span>
                <span class="jsonItemComponentValue">${o.value} (<a href="${o.help}" target="_blank" class="jsonSourceItemComponentOpen">Open help page</a>)
                </span>
            <li>`;return this.renderElementFromTemplate(N,o,b)}}class kr extends Wt{render(o,b){const N=document.createElement("div");if(N.className="jsonVisualStateItemComponent",o.Attachments)for(const $ of o.Attachments){if(!$.src)continue;const J=document.createElement("img");if(J.src=encodeURI($.src),N.appendChild(J),o.Attachments.length>1){const ae=document.createElement("span");ae.innerText=$.attachmentName,N.appendChild(ae)}}else{const $=document.createElement("span");$.innerText=o.FrameBufferStatus,N.appendChild($)}const F=document.createElement("span");return F.innerText=o.FrameBuffer?o.FrameBuffer.__SPECTOR_Object_TAG.displayText:"Canvas frame buffer",N.appendChild(F),N}}class Ur extends Wt{constructor(){super(),this.onCapturesClicked=this.createEvent("onCapturesClicked"),this.onCommandsClicked=this.createEvent("onCommandsClicked"),this.onInformationClicked=this.createEvent("onInformationClicked"),this.onInitStateClicked=this.createEvent("onInitStateClicked"),this.onEndStateClicked=this.createEvent("onEndStateClicked"),this.onCloseClicked=this.createEvent("onCloseClicked"),this.onSearchTextChanged=this.createEvent("onSearchTextChanged"),this.onSearchTextCleared=this.createEvent("onSearchTextCleared")}render(o,b){const N=this.htmlTemplate`<ul class="resultViewMenuComponent">
                <li class="resultViewMenuOpen resultViewMenuSmall"><a href="#" role="button">Menu</a></li>

                <li class="searchContainer">
                    <input type="text" placeHolder="Search..." value="${o.searchText}" commandName="onSearchTextChanged" commandEventBinding="change">
                    <a class="clearSearch" stoppropagation="true" CommandName="onSearchTextCleared">X</a>
                </li>
                <li><a class="${o.status===0?"active":""} href="#" role="button" commandName="onCapturesClicked">Captures</a></li>
                <li><a class="${o.status===10?"active":""} href="#" role="button" commandName="onInformationClicked">Information</a></li>
                <li><a class="${o.status===20?"active":""} href="#" role="button" commandName="onInitStateClicked">Init State</a></li>
                <li>
                    <a class="${o.status===40?"active":""} href="#" role="button" commandName="onCommandsClicked">
                        Commands${o.commandCount>0?" ("+o.commandCount+")":""}
                    </a>
                </li>
                <li><a class="${o.status===30?"active":""} href="#" role="button" commandName="onEndStateClicked">End State</a></li>
                <li><a role="button" commandName="onCloseClicked" stoppropagation="true">Close</a></li>
            </ul>`,F=this.renderElementFromTemplate(N,o,b),$=F.querySelector(".resultViewMenuOpen"),J=F.querySelectorAll("li:not(.resultViewMenuSmall)");return $.addEventListener("click",ae=>{if($.getAttribute("open")==="true"){$.setAttribute("open","false");for(let _e=0;_e<J.length;_e++)J[_e].style.display="none",J[_e].style.visibility="hidden"}else{$.setAttribute("open","true");for(let _e=0;_e<J.length;_e++)J[_e].style.display="block",J[_e].style.visibility="visible"}}),F}}class $r extends Wt{render(o,b){return this.renderElementFromTemplate('<div childrenContainer="true" class="resultViewContentComponent"></div>',o,b)}}class Gr extends Wt{render(o,b){const N=this.htmlTemplate`
            <div childrenContainer="true" class="resultViewComponent ${o?"active":""}">
            </div>`;return this.renderElementFromTemplate(N,o,b)}}var Wr=g(29),Fn=g.n(Wr);class rn extends Wt{constructor(){super(),this.onTranslatedVertexSourceClicked=this.createEvent("onTranslatedVertexSourceClicked"),this.onTranslatedFragmentSourceClicked=this.createEvent("onTranslatedFragmentSourceClicked"),this.onVertexSourceClicked=this.createEvent("onVertexSourceClicked"),this.onFragmentSourceClicked=this.createEvent("onFragmentSourceClicked"),this.onSourceCodeCloseClicked=this.createEvent("onSourceCodeCloseClicked"),this.onSourceCodeChanged=this.createEvent("onSourceCodeChanged"),this.onBeautifyChanged=this.createEvent("onBeautifyChanged"),this.onPreprocessChanged=this.createEvent("onPreprocessChanged")}showError(o){if(!this.editor)return;const b=[];if(o=o||""){const N=/^.*ERROR:\W([0-9]+):([0-9]+):(.*)$/gm;let F=N.exec(o);for(;F!=null;)b.push({row:+F[2]-1,column:F[1],text:F[3]||"Error",type:"error"}),F=N.exec(o)}this.editor.getSession().setAnnotations(b)}render(o,b){const N=o.fragment?o.sourceFragment:o.sourceVertex;let F,$=o.preprocessed;o.translated?(F=o.fragment?o.translatedSourceFragment:o.translatedSourceVertex,$=!1):F=N!=null?N:"";let J=F;if($)try{J=Fn()(J,{preserveComments:!1,stopOnError:!0})}catch(Ie){M.error("shader preprocess failed",Ie)}o.beautify&&(J=this._indentIfdef(this._beautify(J)));const ae=this.htmlTemplate`
        <div class="sourceCodeComponentContainer">
            <div class="sourceCodeMenuComponentContainer">
                <ul class="sourceCodeMenuComponent">
                    $${o.translatedSourceVertex?this.htmlTemplate`<li><a class="${!o.fragment&&o.translated?"active":""}" href="#" role="button" commandName="onTranslatedVertexSourceClicked">Translated Vertex</a></li>`:""}
                    $${o.translatedSourceFragment?this.htmlTemplate`<li><a class="${o.fragment&&o.translated?"active":""}" href="#" role="button" commandName="onTranslatedFragmentSourceClicked">Translated Fragment</a></li>`:""}
                    <li><a class="${o.fragment||o.translated?"":"active"}" href="#" role="button" commandName="onVertexSourceClicked">Vertex</a></li>
                    <li><a class="${o.fragment&&!o.translated?"active":""}" href="#" role="button" commandName="onFragmentSourceClicked">Fragment</a></li>
                    <li><a href="#" role="button" commandName="onSourceCodeCloseClicked">Close</a></li>
                </ul>
            </div>
            $${this.htmlTemplate`<div class="sourceCodeComponent">${J}</div>`}
            <div class="sourceCodeMenuComponentFooter">
                <p>
                    <label><input type="checkbox" commandName="onBeautifyChanged" ${o.beautify?"checked":""} /> Beautify</label>
                    <label><input type="checkbox" commandName="onPreprocessChanged" ${o.preprocessed?"checked":""} /> Preprocess</label>
                </p>
            </div>
        </div>`,_e=this.renderElementFromTemplate(ae.replace(/<br>/g,`
`),o,b);this.editor=ace.edit(_e.querySelector(".sourceCodeComponent")),this.editor.setTheme("ace/theme/monokai"),this.editor.getSession().setMode("ace/mode/glsl"),this.editor.setShowPrintMargin(!1);let Ae=-1;return this.editor.setReadOnly(!o.editable&&!o.translated),this.editor.getSession().on("change",Ie=>{Ae!==-1&&clearTimeout(Ae),Ae=setTimeout(()=>{this._triggerCompilation(this.editor,o,_e,b)},1500)}),_e}_triggerCompilation(o,b,N,F){b.fragment?b.sourceFragment=o.getValue():b.sourceVertex=o.getValue(),this.triggerEvent("onSourceCodeChanged",N,b,F)}_beautify(o,b=0){let N="";for(let Ae=0;Ae<b;Ae++)N+="    ";const F=o;if((o=o.trim())[0]==="#"){const Ae=F.indexOf("#"),Ie=F.indexOf(`
`);let Fe="";Ie!==-1&&Ie<Ae&&(Fe=N+`
`);const ve=o.indexOf(`
`),je=ve!==-1?ve:o.length,St=o.substr(0,je),vt=o.substr(je+1);return Fe+N+St+`
`+this._beautify(vt,b)}o=this._adaptComments(o);const $=this._getBracket(o),J=$.firstIteration,ae=$.lastIteration;let _e;if(J===-1)_e=o=(o=(o=(o=(o=(o=(o=(o=N+o).replace(/;(?![^\(]*\))\s*(\/\/.*)?/g,Ae=>Ae.trim()+`
`)).replace(/\s*([*+-/=><\s]*=)\s*/g,Ae=>" "+Ae.trim()+" ")).replace(/\s*(,)\s*/g,Ae=>Ae.trim()+" ")).replace(/\n[ \t]+/g,`
`)).replace(/\n/g,`
`+N)).replace(/\s+$/g,"")).replace(/\n+$/g,"");else{const Ae=o.substr(0,J).trim(),Ie=o.substr(ae+1,o.length).trim(),Fe=o.substr(J+1,ae-J-1).trim();_e=(Ae===""?N+"{":this._beautify(Ae,b)+` {
`)+this._beautify(Fe,b+1)+`
`+N+`}
`+this._beautify(Ie,b),_e=_e.replace(/\s*\n+\s*;/g,";")}return _e=_e.replace(rn.semicolonReplacementKeyRegex,";"),_e=_e.replace(rn.openCurlyReplacementKeyRegex,"{"),_e=_e.replace(rn.closeCurlyReplacementKeyRegex,"}"),_e}_adaptComments(o){let b=!1,N=!1;for(let F=0;F<o.length;F++){const $=o[F];$==="/"?o[F-1]==="*"?N=!1:o[F+1]==="*"?b||(N=!0,F++):o[F+1]==="/"&&(N||(b=!0,F++)):$===`
`?b=!1:$===";"?(b||N)&&(o=o.substr(0,F)+rn.semicolonReplacementKey+o.substr(F+1)):$==="{"?(b||N)&&(o=o.substr(0,F)+rn.openCurlyReplacementKey+o.substr(F+1)):$==="}"&&(b||N)&&(o=o.substr(0,F)+rn.closeCurlyReplacementKey+o.substr(F+1))}return o}_getBracket(o,b=-1){const N=o.indexOf("{",b),F=o.substr(N+1).split("");let $=1,J=N,ae=0;for(const _e of F)if(J++,_e==="{"&&$++,_e==="}"&&$--,$===0){ae=J;break}return N>-1&&ae===0?this._getBracket(o,N+1):{firstIteration:N,lastIteration:ae}}_indentIfdef(o){let b=0;const N=o.split(`
`);for(let F=0;F<N.length;F++){const $=N[F];$.indexOf("#endif")!==-1&&b--,$.indexOf("#else")!==-1&&b--;let J="";for(let ae=0;ae<b;ae++)J+="    ";N[F]=J+$,$.indexOf("#if")===-1&&$.indexOf("#else")===-1||b++}return N.join(`
`)}}rn.semicolonReplacementKey="[[[semicolonReplacementKey]]]",rn.semicolonReplacementKeyRegex=new RegExp("\\[\\[\\[semicolonReplacementKey\\]\\]\\]","g"),rn.openCurlyReplacementKey="[[[openCurlyReplacementKey]]]",rn.openCurlyReplacementKeyRegex=new RegExp("\\[\\[\\[openCurlyReplacementKey\\]\\]\\]","g"),rn.closeCurlyReplacementKey="[[[closeCurlyReplacementKey]]]",rn.closeCurlyReplacementKeyRegex=new RegExp("\\[\\[\\[closeCurlyReplacementKey\\]\\]\\]","g");class nr extends Wt{render(o,b){const N=this.htmlTemplate`
                <div childrenContainer="true" class="${o?"informationColumnLeftComponent":"informationColumnRightComponent"}"></div>`;return this.renderElementFromTemplate(N,o,b)}}class Kt{static getMDNLink(o){const b=Kt.WebGL2Functions[o];if(b)return Kt.WebGL2RootUrl+b;const N=Kt.WebGLFunctions[o];if(N)return Kt.WebGLRootUrl+N;const F=Kt.AngleInstancedArraysExtFunctions[o];return F?Kt.AngleInstancedArraysExtRootUrl+F:Kt.WebGLRootUrl+o}}Kt.WebGL2RootUrl="https://developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/",Kt.WebGLRootUrl="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/",Kt.AngleInstancedArraysExtRootUrl="https://developer.mozilla.org/en-US/docs/Web/API/ANGLE_instanced_arrays/",Kt.WebGL2Functions={beginQuery:"beginQuery",beginTransformFeedback:"beginTransformFeedback",bindBufferBase:"bindBufferBase",bindBufferRange:"bindBufferRange",bindSampler:"bindSampler",bindTransformFeedback:"bindTransformFeedback",bindVertexArray:"bindVertexArray",blitFramebuffer:"blitFramebuffer",clearBufferfv:"clearBuffer",clearBufferiv:"clearBuffer",clearBufferuiv:"clearBuffer",clearBufferfi:"clearBuffer",clientWaitSync:"clientWaitSync",compressedTexImage3D:"compressedTexImage3D",compressedTexSubImage3D:"compressedTexSubImage3D",copyBufferSubData:"copyBufferSubData",copyTexSubImage3D:"copyTexSubImage3D",createQuery:"createQuery",createSampler:"createSampler",createTransformFeedback:"createTransformFeedback",createVertexArray:"createVertexArray",deleteQuery:"deleteQuery",deleteSampler:"deleteSampler",deleteSync:"deleteSync",deleteTransformFeedback:"deleteTransformFeedback",deleteVertexArray:"deleteVertexArray",drawArraysInstanced:"drawArraysInstanced",drawBuffers:"drawBuffers",drawElementsInstanced:"drawElementsInstanced",drawRangeElements:"drawRangeElements",endQuery:"endQuery",endTransformFeedback:"endTransformFeedback",fenceSync:"fenceSync",framebufferTextureLayer:"framebufferTextureLayer",getActiveUniformBlockName:"getActiveUniformBlockName",getActiveUniformBlockParameter:"getActiveUniformBlockParameter",getActiveUniforms:"getActiveUniforms",getBufferSubData:"getBufferSubData",getFragDataLocation:"getFragDataLocation",getIndexedParameter:"getIndexedParameter",getInternalformatParameter:"getInternalformatParameter",getQuery:"getQuery",getQueryParameter:"getQueryParameter",getSamplerParameter:"getSamplerParameter",getSyncParameter:"getSyncParameter",getTransformFeedbackVarying:"getTransformFeedbackVarying",getUniformBlockIndex:"getUniformBlockIndex",getUniformIndices:"getUniformIndices",invalidateFramebuffer:"invalidateFramebuffer",invalidateSubFramebuffer:"invalidateSubFramebuffer",isQuery:"isQuery",isSampler:"isSampler",isSync:"isSync",isTransformFeedback:"isTransformFeedback",isVertexArray:"isVertexArray",pauseTransformFeedback:"pauseTransformFeedback",readBuffer:"readBuffer",renderbufferStorageMultisample:"renderbufferStorageMultisample",resumeTransformFeedback:"resumeTransformFeedback",samplerParameteri:"samplerParameter",samplerParameterf:"samplerParameter",texImage3D:"texImage3D",texStorage2D:"texStorage2D",texStorage3D:"texStorage3D",texSubImage3D:"texSubImage3D",transformFeedbackVaryings:"transformFeedbackVaryings",uniform1ui:"uniform",uniform2ui:"uniform",uniform3ui:"uniform",uniform4ui:"uniform",uniform1fv:"uniform",uniform2fv:"uniform",uniform3fv:"uniform",uniform4fv:"uniform",uniform1iv:"uniform",uniform2iv:"uniform",uniform3iv:"uniform",uniform4iv:"uniform",uniform1uiv:"uniform",uniform2uiv:"uniform",uniform3uiv:"uniform",uniform4uiv:"uniform",uniformBlockBinding:"uniformBlockBinding",uniformMatrix2fv:"uniformMatrix",uniformMatrix3x2fv:"uniformMatrix",uniformMatrix4x2fv:"uniformMatrix",uniformMatrix2x3fv:"uniformMatrix",uniformMatrix3fv:"uniformMatrix",uniformMatrix4x3fv:"uniformMatrix",uniformMatrix2x4fv:"uniformMatrix",uniformMatrix3x4fv:"uniformMatrix",uniformMatrix4fv:"uniformMatrix",vertexAttribDivisor:"vertexAttribDivisor",vertexAttribI4i:"vertexAttribI",vertexAttribI4ui:"vertexAttribI",vertexAttribI4iv:"vertexAttribI",vertexAttribI4uiv:"vertexAttribI",vertexAttribIPointer:"vertexAttribIPointer",waitSync:"waitSync"},Kt.WebGLFunctions={uniform1f:"uniform",uniform1fv:"uniform",uniform1i:"uniform",uniform1iv:"uniform",uniform2f:"uniform",uniform2fv:"uniform",uniform2i:"uniform",uniform2iv:"uniform",uniform3f:"uniform",uniform3i:"uniform",uniform3iv:"uniform",uniform4f:"uniform",uniform4fv:"uniform",uniform4i:"uniform",uniform4iv:"uniform",uniformMatrix2fv:"uniformMatrix",uniformMatrix3fv:"uniformMatrix",uniformMatrix4fv:"uniformMatrix",vertexAttrib1f:"vertexAttrib",vertexAttrib2f:"vertexAttrib",vertexAttrib3f:"vertexAttrib",vertexAttrib4f:"vertexAttrib",vertexAttrib1fv:"vertexAttrib",vertexAttrib2fv:"vertexAttrib",vertexAttrib3fv:"vertexAttrib",vertexAttrib4fv:"vertexAttrib"},Kt.AngleInstancedArraysExtFunctions={drawArraysInstancedANGLE:"drawArraysInstancedANGLE",drawElementsInstancedANGLE:"drawElementsInstancedANGLE",vertexAttribDivisorANGLE:"vertexAttribDivisorANGLE"};class yi{constructor(o=null){this.rootPlaceHolder=o,this.onSourceCodeChanged=new a,this.rootPlaceHolder=this.rootPlaceHolder||document.body,this.mvx=new Gt(this.rootPlaceHolder),this.searchText="",this.currentCommandId=-1,this.visible=!1,this.commandCount=0,this.commandListStateId=-1,this.commandDetailStateId=-1,this.currentCaptureStateId=-1,this.currentCommandStateId=-1,this.currentVisualStateId=-1,this.visualStateListStateId=-1,this.initVisualStateId=-1,this.sourceCodeComponentStateId=-1,this.captureListComponent=new Mr,this.captureListItemComponent=new Lr,this.visualStateListComponent=new Ir,this.visualStateListItemComponent=new Qs,this.commandListComponent=new Fr,this.commandListItemComponent=new er,this.commandDetailComponent=new tr,this.jsonContentComponent=new Nr,this.jsonGroupComponent=new Pr,this.jsonItemComponent=new Dr,this.jsonImageItemComponent=new Or,this.jsonHelpItemComponent=new Br,this.jsonVisualStateItemComponent=new kr,this.resultViewMenuComponent=new Ur,this.resultViewContentComponent=new $r,this.resultViewComponent=new Gr,this.sourceCodeComponent=new rn,this.informationColumnComponent=new nr,this.rootStateId=this.mvx.addRootState(null,this.resultViewComponent),this.menuStateId=this.mvx.addChildState(this.rootStateId,null,this.resultViewMenuComponent),this.contentStateId=this.mvx.addChildState(this.rootStateId,null,this.resultViewContentComponent),this.captureListStateId=this.mvx.addChildState(this.rootStateId,!1,this.captureListComponent),this.initKeyboardEvents(),this.initMenuComponent(),this.captureListComponent.onCaptureLoaded.add(b=>{this.addCapture(b)}),this.captureListItemComponent.onCaptureSelected.add(b=>{this.selectCapture(b.stateId)}),this.captureListItemComponent.onSaveRequested.add(b=>{this.saveCapture(b.state.capture)}),this.visualStateListItemComponent.onVisualStateSelected.add(b=>{this.selectVisualState(b.stateId)}),this.commandListItemComponent.onCommandSelected.add(b=>{this.selectCommand(b.stateId)}),this.commandListItemComponent.onVertexSelected.add(b=>{this.selectCommand(b.stateId),this.openShader(!1)}),this.commandListItemComponent.onFragmentSelected.add(b=>{this.selectCommand(b.stateId),this.openShader(!0)}),this.sourceCodeComponent.onSourceCodeCloseClicked.add(()=>{this.displayCurrentCapture()}),this.sourceCodeComponent.onTranslatedVertexSourceClicked.add(b=>{const N=this.mvx.getGenericState(this.sourceCodeComponentStateId);N.fragment=!1,N.translated=!0,this.mvx.updateState(this.sourceCodeComponentStateId,N)}),this.sourceCodeComponent.onTranslatedFragmentSourceClicked.add(b=>{const N=this.mvx.getGenericState(this.sourceCodeComponentStateId);N.fragment=!0,N.translated=!0,this.mvx.updateState(this.sourceCodeComponentStateId,N)}),this.sourceCodeComponent.onVertexSourceClicked.add(b=>{const N=this.mvx.getGenericState(this.sourceCodeComponentStateId);N.fragment=!1,N.translated=!1,this.mvx.updateState(this.sourceCodeComponentStateId,N)}),this.sourceCodeComponent.onFragmentSourceClicked.add(b=>{const N=this.mvx.getGenericState(this.sourceCodeComponentStateId);N.fragment=!0,N.translated=!1,this.mvx.updateState(this.sourceCodeComponentStateId,N)}),this.sourceCodeComponent.onSourceCodeChanged.add(b=>{this.onSourceCodeChanged.trigger({programId:b.state.programId,sourceFragment:b.state.sourceFragment,sourceVertex:b.state.sourceVertex,translatedSourceFragment:b.state.translatedSourceFragment,translatedSourceVertex:b.state.translatedSourceVertex})}),this.sourceCodeComponent.onBeautifyChanged.add(b=>{const N=this.mvx.getGenericState(this.sourceCodeComponentStateId);N.beautify=b.sender.checked,this.mvx.updateState(this.sourceCodeComponentStateId,N)}),this.sourceCodeComponent.onPreprocessChanged.add(b=>{const N=this.mvx.getGenericState(this.sourceCodeComponentStateId);N.preprocessed=b.sender.checked,this.mvx.updateState(this.sourceCodeComponentStateId,N)}),this.updateViewState()}saveCapture(o){const b=JSON.stringify(o,null,4),N=new Blob([b],{type:"octet/stream"}),F="capture "+new Date(o.startTime).toTimeString().split(" ")[0]+".json";if(navigator.msSaveBlob)navigator.msSaveBlob(N,F);else{const $=document.createElement("a"),J=window.URL.createObjectURL(N);$.setAttribute("href",J),$.setAttribute("download",F),$.click()}}selectCapture(o){this.currentCommandId=-1,this.currentCaptureStateId=o,this.displayCurrentCapture()}selectCommand(o){this.currentCommandStateId=o,this.currentVisualStateId=this.displayCurrentCommand(),this.displayCurrentVisualState()}selectVisualState(o){this.currentVisualStateId=o,this.currentCommandStateId=this.displayCurrentVisualState(),this.displayCurrentCommand()}display(){this.visible=!0,this.updateViewState()}hide(){this.visible=!1,this.updateViewState()}addCapture(o){const b=this.mvx.insertChildState(this.captureListStateId,{capture:o,active:!1},0,this.captureListItemComponent);return this.selectCapture(b),b}showSourceCodeError(o){this.sourceCodeComponent.showError(o)}initKeyboardEvents(){this.rootPlaceHolder.addEventListener("keydown",o=>{this.mvx.getGenericState(this.menuStateId).status===40&&(o.keyCode===38?(o.preventDefault(),o.stopPropagation(),this.selectPreviousCommand()):o.keyCode===40?(o.preventDefault(),o.stopPropagation(),this.selectNextCommand()):o.keyCode===33?(o.preventDefault(),o.stopPropagation(),this.selectPreviousVisualState()):o.keyCode===34&&(o.preventDefault(),o.stopPropagation(),this.selectNextVisualState()))})}openShader(o){this.mvx.removeChildrenStates(this.contentStateId);const b=this.mvx.getGenericState(this.currentCommandStateId);this.sourceCodeComponentStateId=this.mvx.addChildState(this.contentStateId,{programId:b.capture.DrawCall.programStatus.program.__SPECTOR_Object_TAG.id,nameVertex:b.capture.DrawCall.shaders[0].name,nameFragment:b.capture.DrawCall.shaders[1].name,sourceVertex:b.capture.DrawCall.shaders[0].source,sourceFragment:b.capture.DrawCall.shaders[1].source,translatedSourceVertex:b.capture.DrawCall.shaders[0].translatedSource,translatedSourceFragment:b.capture.DrawCall.shaders[1].translatedSource,fragment:o,translated:!1,editable:b.capture.DrawCall.programStatus.RECOMPILABLE,beautify:!0},this.sourceCodeComponent),this.commandDetailStateId=this.mvx.addChildState(this.contentStateId,null,this.commandDetailComponent),this.displayCurrentCommandDetail(b)}selectPreviousCommand(){const o=this.mvx.getGenericState(this.currentCommandStateId);o.previousCommandStateId<0||this.selectCommand(o.previousCommandStateId)}selectNextCommand(){const o=this.mvx.getGenericState(this.currentCommandStateId);o.nextCommandStateId<0||this.selectCommand(o.nextCommandStateId)}selectPreviousVisualState(){const o=this.mvx.getGenericState(this.currentVisualStateId);o.previousVisualStateId<0||this.selectVisualState(o.previousVisualStateId)}selectNextVisualState(){const o=this.mvx.getGenericState(this.currentVisualStateId);o.nextVisualStateId<0||this.selectVisualState(o.nextVisualStateId)}initMenuComponent(){this.mvx.updateState(this.menuStateId,{status:0,searchText:this.searchText,commandCount:0}),this.resultViewMenuComponent.onCloseClicked.add(o=>{this.hide()}),this.resultViewMenuComponent.onCapturesClicked.add(o=>{this.displayCaptures()}),this.resultViewMenuComponent.onCommandsClicked.add(o=>{this.displayCurrentCapture()}),this.resultViewMenuComponent.onInformationClicked.add(o=>{this.displayInformation()}),this.resultViewMenuComponent.onInitStateClicked.add(o=>{this.displayInitState()}),this.resultViewMenuComponent.onEndStateClicked.add(o=>{this.displayEndState()}),this.resultViewMenuComponent.onSearchTextChanged.add(o=>{this.search(o.sender.value)}),this.resultViewMenuComponent.onSearchTextCleared.add(o=>{this.mvx.updateState(this.menuStateId,{status:o.state.status,searchText:"",commandCount:o.state.commandCount}),this.search("")})}onCaptureRelatedAction(o){const b=this.mvx.getGenericState(this.currentCaptureStateId);return this.commandCount=b.capture.commands.length,this.mvx.removeChildrenStates(this.contentStateId),this.mvx.updateState(this.menuStateId,{status:o,searchText:this.searchText,commandCount:this.commandCount}),this.mvx.getGenericState(this.captureListStateId)&&this.mvx.updateState(this.captureListStateId,!1),b.capture}displayCaptures(){this.mvx.updateState(this.menuStateId,{status:0,searchText:this.searchText,commandCount:this.commandCount}),this.mvx.updateState(this.captureListStateId,!0)}displayInformation(){const o=this.onCaptureRelatedAction(10),b=this.mvx.addChildState(this.contentStateId,!0,this.informationColumnComponent),N=this.mvx.addChildState(this.contentStateId,!1,this.informationColumnComponent),F=this.mvx.addChildState(b,null,this.jsonContentComponent);this.displayJSONGroup(F,"Canvas",o.canvas),this.displayJSONGroup(F,"Context",o.context);const $=this.mvx.addChildState(N,null,this.jsonContentComponent);for(const J of o.analyses)J.analyserName==="Primitives"?this.displayJSONGroup($,"Vertices count",J):this.displayJSONGroup($,J.analyserName,J);this.displayJSONGroup($,"Frame Memory Changes",o.frameMemory),this.displayJSONGroup($,"Total Memory (seconds since application start: bytes)",o.memory)}displayJSON(o,b){b.VisualState&&this.mvx.addChildState(o,b.VisualState,this.jsonVisualStateItemComponent);for(const N in b){if(N==="VisualState"||N==="analyserName"||N==="source"||N==="translatedSource")continue;const F=b[N];if(N==="visual")for(const $ in F)F.hasOwnProperty($)&&F[$]&&this.mvx.addChildState(o,{key:$,value:F[$],pixelated:b.samplerMagFilter==="NEAREST"||b.magFilter==="NEAREST"},this.jsonImageItemComponent);else{const $=this.getJSONAsString(o,N,F);if($==null||this.toFilter(N)&&this.toFilter(F))continue;this.mvx.addChildState(o,{key:N,value:$},this.jsonItemComponent)}F&&F.__SPECTOR_Metadata&&this.displayJSONGroup(o,"Metadata",F.__SPECTOR_Metadata)}}getJSONAsString(o,b,N){if(N===null)return"null";if(N===void 0)return"undefined";if(typeof N=="number")return Math.floor(N)===N?N.toFixed(0):N.toFixed(4);if(typeof N=="string")return N;if(typeof N=="boolean")return N?"true":"false";if(N.length===0)return"Empty Array";if(N.length){const F=[];for(let $=0;$<N.length;$++){const J=this.getJSONAsString(o,`${b}(${$.toFixed(0)})`,N[$]);J!==null&&F.push(J)}return F.length===0?null:F.join(", ")}return N.help?(this.mvx.addChildState(o,{key:b,value:N.name,help:N.help},this.jsonHelpItemComponent),null):N.__SPECTOR_Object_TAG?N.__SPECTOR_Object_TAG.displayText:N.displayText?N.displayText:(typeof N=="object"&&this.displayJSONGroup(o,b,N),null)}displayJSONGroup(o,b,N){if(!N)return;const F=this.mvx.addChildState(o,b,this.jsonGroupComponent);this.displayJSON(F,N),this.mvx.hasChildren(F)||this.mvx.removeState(F)}displayInitState(){const o=this.onCaptureRelatedAction(20),b=this.mvx.addChildState(this.contentStateId,null,this.jsonContentComponent);this.displayJSON(b,o.initState)}displayEndState(){const o=this.onCaptureRelatedAction(30),b=this.mvx.addChildState(this.contentStateId,null,this.jsonContentComponent);this.displayJSON(b,o.endState)}displayCurrentCapture(){const o=this.onCaptureRelatedAction(40);this.mvx.updateAllChildrenGenericState(this.captureListStateId,b=>(b.active=!1,b)),this.mvx.updateState(this.currentCaptureStateId,{capture:o,active:!0}),this.createVisualStates(o),this.commandListStateId=this.mvx.addChildState(this.contentStateId,null,this.commandListComponent),this.commandDetailStateId=this.mvx.addChildState(this.contentStateId,null,this.commandDetailComponent),this.createCommands(o)}displayCurrentCommand(){if(this.mvx.getGenericState(this.menuStateId).status!==40)return-1;const o=this.mvx.getGenericState(this.currentCommandStateId),b=o.capture;return this.currentCommandId=b.id,this.mvx.updateAllChildrenGenericState(this.commandListStateId,N=>(N.active=!1,N)),this.mvx.updateState(this.currentCommandStateId,{capture:b,visualStateId:o.visualStateId,previousCommandStateId:o.previousCommandStateId,nextCommandStateId:o.nextCommandStateId,active:!0}),this.displayCurrentCommandDetail(o)}displayCurrentCommandDetail(o){const b=o.capture;this.mvx.removeChildrenStates(this.commandDetailStateId);const N=this.mvx.getGenericState(o.visualStateId);this.mvx.addChildState(this.commandDetailStateId,N.VisualState,this.jsonVisualStateItemComponent);let F="Unknown";switch(b.status){case 50:F="Deprecated";break;case 10:F="Unused";break;case 20:F="Disabled";break;case 30:F="Redundant";break;case 40:F="Valid"}const $=Kt.getMDNLink(b.name);b.result?this.displayJSONGroup(this.commandDetailStateId,"Global",{name:{help:$,name:b.name},duration:b.commandEndTime-b.startTime,result:b.result,status:F}):b.name!=="LOG"&&this.displayJSONGroup(this.commandDetailStateId,"Global",{name:{help:$,name:b.name},duration:b.commandEndTime-b.startTime,status:F});for(const J in b)J!=="VisualState"&&J!=="result"&&typeof b[J]=="object"&&this.displayJSONGroup(this.commandDetailStateId,J,b[J]);return o.visualStateId}displayCurrentVisualState(){if(this.mvx.getGenericState(this.menuStateId).status!==40)return null;const o=this.mvx.getGenericState(this.currentVisualStateId);return o.commandStateId===Number.MIN_VALUE?this.displayInitState():o.commandStateId===Number.MAX_VALUE&&this.displayEndState(),this.mvx.updateAllChildrenGenericState(this.visualStateListStateId,b=>(b.active=!1,b)),o.active=!0,this.mvx.updateState(this.currentVisualStateId,o),o.commandStateId}createVisualStates(o){this.visualStateListStateId=this.mvx.addChildState(this.contentStateId,null,this.visualStateListComponent),this.mvx.removeChildrenStates(this.visualStateListStateId),this.initVisualStateId=this.mvx.addChildState(this.visualStateListStateId,{VisualState:o.initState.VisualState,time:o.startTime,commandStateId:Number.MIN_VALUE,active:!1},this.visualStateListItemComponent)}createCommands(o){this.mvx.removeChildrenStates(this.commandListStateId);let b=this.initVisualStateId,N=!1,F=null,$=-1,J=null,ae=-1;for(let _e=0;_e<o.commands.length;_e++){const Ae=o.commands[_e];if(this.toFilter(Ae.marker)&&this.toFilter(Ae.name)&&Ae.id!==this.currentCommandId&&(Ae.name!=="LOG"||this.toFilter(Ae.text)))continue;const Ie={capture:Ae,previousCommandStateId:$,nextCommandStateId:-1,visualStateId:void 0,active:!1},Fe=this.mvx.addChildState(this.commandListStateId,Ie,this.commandListItemComponent);if(F&&(F=this.mvx.getGenericState($),F.nextCommandStateId=Fe,this.mvx.updateState($,F)),$=Fe,F=Ie,Ae.VisualState){const ve={VisualState:Ae.VisualState,time:Ae.endTime,commandStateId:Fe,active:!1,previousVisualStateId:ae,nextVisualStateId:-1};b=this.mvx.addChildState(this.visualStateListStateId,ve,this.visualStateListItemComponent),J&&(J=this.mvx.getGenericState(ae),J.nextVisualStateId=b,this.mvx.updateState(ae,J)),J=ve,ae=b,N=!0}else if(!N){const ve=this.mvx.getGenericState(this.initVisualStateId);ve.commandStateId=Fe,ve.previousVisualStateId=-1,ve.nextVisualStateId=-1,this.mvx.updateState(this.initVisualStateId,ve),J=ve,ae=b,N=!0}Ie.visualStateId=b,this.mvx.updateState(Fe,Ie),(this.currentCommandId===-1&&_e===0||this.currentCommandId===Ae.id)&&(this.currentCommandStateId=Fe,this.displayCurrentCommand(),this.currentVisualStateId=b,this.displayCurrentVisualState())}}updateViewState(){this.mvx.updateState(this.rootStateId,this.visible)}toFilter(o){return o=(o+="").toLowerCase(),!!(this.searchText&&this.searchText.length>2&&o.indexOf(this.searchText.toLowerCase())===-1)}search(o){switch(this.searchText=o,this.mvx.getGenericState(this.menuStateId).status){case 0:case 40:this.displayCurrentCapture();break;case 30:this.displayEndState();break;case 10:this.displayInformation();break;case 20:this.displayInitState()}this.searchText=""}}class Vr{constructor(o){this.timeSpy=o,this.init()}spyXRSession(o){this.currentXRSession&&this.unspyXRSession();for(const b of xt.getRequestAnimationFrameFunctionNames())A.resetOriginFunction(this.timeSpy.getSpiedScope(),b);this.timeSpy.spyRequestAnimationFrame("requestAnimationFrame",o),this.currentXRSession=o}unspyXRSession(){if(this.currentXRSession){A.resetOriginFunction(this.currentXRSession,"requestAnimationFrame"),this.currentXRSession=void 0;for(const o of xt.getRequestAnimationFrameFunctionNames())this.timeSpy.spyRequestAnimationFrame(o,this.timeSpy.getSpiedScope())}}init(){if(!navigator.xr)return;class o extends XRWebGLLayer{constructor($,J,ae){super($,J,ae),this.glContext=J}getContext(){return this.glContext}}class b extends XRWebGLBinding{constructor($,J){super($,J),this.glContext=J}createProjectionLayer($){const J=super.createProjectionLayer($);return J.glContext=this.glContext,J}}window.XRWebGLLayer=o,window.XRWebGLBinding=b;const N=navigator.xr.requestSession;Object.defineProperty(navigator.xr,"requestSessionInternal",{writable:!0}),navigator.xr.requestSessionInternal=N,Object.defineProperty(navigator.xr,"requestSession",{writable:!0}),navigator.xr.requestSession=(F,$)=>((J,ae)=>navigator.xr.requestSessionInternal(J,ae).then(_e=>{const Ae=_e;return Ae._updateRenderState=_e.updateRenderState,Ae.updateRenderState=Ie=>{return Fe=this,ve=void 0,St=function*(){if(Ie.baseLayer){const vt=Ie.baseLayer;Ae.glContext=vt.getContext()}if(Ie.layers)for(const vt of Ie.layers){const jt=vt;jt.glContext&&(Ae.glContext=jt.glContext)}return Ae._updateRenderState(Ie)},new((je=void 0)||(je=Promise))(function(vt,jt){function ir(kn){try{Hi(St.next(kn))}catch(Un){jt(Un)}}function Ao(kn){try{Hi(St.throw(kn))}catch(Un){jt(Un)}}function Hi(kn){var Un;kn.done?vt(kn.value):(Un=kn.value,Un instanceof je?Un:new je(function(V){V(Un)})).then(ir,Ao)}Hi((St=St.apply(Fe,ve||[])).next())});var Fe,ve,je,St},this.spyXRSession(Ae),_e.addEventListener("end",()=>{this.unspyXRSession()}),Promise.resolve(_e)}))(F,$)}}const wi={CaptureMenu:ln,ResultView:yi};class Ti{constructor(o={}){this.noFrameTimeout=-1,this.options=Object.assign({enableXRCapture:!1},o),this.captureNextFrames=0,this.captureNextCommands=0,this.quickCapture=!1,this.fullCapture=!1,this.retry=0,this.contexts=[],this.timeSpy=new xt,this.onCaptureStarted=new a,this.onCapture=new a,this.onError=new a,this.timeSpy.onFrameStart.add(this.onFrameStart,this),this.timeSpy.onFrameEnd.add(this.onFrameEnd,this),this.timeSpy.onError.add(this.onErrorInternal,this),this.options.enableXRCapture&&(this.xrSpy=new Vr(this.timeSpy))}static getFirstAvailable3dContext(o){return this.tryGetContextFromHelperField(o)||this.tryGetContextFromCanvas(o,"webgl")||this.tryGetContextFromCanvas(o,"experimental-webgl")||this.tryGetContextFromCanvas(o,"webgl2")||this.tryGetContextFromCanvas(o,"experimental-webgl2")}static tryGetContextFromHelperField(o){const b=o instanceof HTMLCanvasElement?o.getAttribute("__spector_context_type"):o.__spector_context_type;if(b)return this.tryGetContextFromCanvas(o,b)}static tryGetContextFromCanvas(o,b){let N;try{N=o.getContext(b)}catch{}return N}displayUI(o=!1){this.captureMenu||(this.getCaptureUI(),this.captureMenu.onPauseRequested.add(this.pause,this),this.captureMenu.onPlayRequested.add(this.play,this),this.captureMenu.onPlayNextFrameRequested.add(this.playNextFrame,this),this.captureMenu.onCaptureRequested.add(b=>{b&&this.captureCanvas(b.ref)},this),setInterval(()=>{this.captureMenu.setFPS(this.getFps())},1e3),o||this.captureMenu.trackPageCanvases(),this.captureMenu.display()),this.resultView||(this.getResultUI(),this.onCapture.add(b=>{this.resultView.display(),this.resultView.addCapture(b)}))}getResultUI(){return this.resultView||(this.resultView=new yi,this.resultView.onSourceCodeChanged.add(o=>{this.rebuildProgramFromProgramId(o.programId,o.sourceVertex,o.sourceFragment,b=>{this.referenceNewProgram(o.programId,b),this.resultView.showSourceCodeError(null)},b=>{this.resultView.showSourceCodeError(b)})})),this.resultView}getCaptureUI(){return this.captureMenu||(this.captureMenu=new ln),this.captureMenu}rebuildProgramFromProgramId(o,b,N,F,$){const J=li.getFromGlobalStore(o);this.rebuildProgram(J,b,N,F,$)}rebuildProgram(o,b,N,F,$){u.rebuildProgram(o,b,N,F,$)}referenceNewProgram(o,b){li.updateInGlobalStore(o,b)}pause(){this.timeSpy.changeSpeedRatio(0)}play(){this.timeSpy.changeSpeedRatio(1)}playNextFrame(){this.timeSpy.playNextFrame()}drawOnlyEveryXFrame(o){this.timeSpy.changeSpeedRatio(o)}getFps(){return this.timeSpy.getFps()}spyCanvases(){this.canvasSpy?this.onErrorInternal("Already spying canvas."):(this.canvasSpy=new Zt,this.canvasSpy.onContextRequested.add(this.spyContext,this))}spyCanvas(o){this.canvasSpy?this.onErrorInternal("Already spying canvas."):(this.canvasSpy=new Zt(o),this.canvasSpy.onContextRequested.add(this.spyContext,this))}getAvailableContexts(){return this.getAvailableContexts()}captureCanvas(o,b=0,N=!1,F=!1){const $=this.getAvailableContextSpyByCanvas(o);if($)this.captureContextSpy($,b,N,F);else{const J=Ti.getFirstAvailable3dContext(o);J?this.captureContext(J,b,N,F):M.error("No webgl context available on the chosen canvas.")}}captureContext(o,b=0,N=!1,F=!1){let $=this.getAvailableContextSpyByCanvas(o.canvas);$||($=o.getIndexedParameter?new fn({context:o,version:2,recordAlways:!1}):new fn({context:o,version:1,recordAlways:!1}),$.onMaxCommand.add(this.stopCapture,this),this.contexts.push({canvas:$.context.canvas,contextSpy:$})),$&&this.captureContextSpy($,b,N,F)}captureXRContext(o=0,b=!1,N=!1){this.captureContext(this.getXRContext(),o,b,N)}captureContextSpy(o,b=0,N=!1,F=!1){this.quickCapture=N,this.fullCapture=F,this.capturingContext?this.onErrorInternal("Already capturing a context."):(this.retry=0,this.capturingContext=o,this.capturingContext.setMarker(this.marker),(b=Math.min(b,1e4))>0?this.captureCommands(b):this.captureFrames(1),this.noFrameTimeout=setTimeout(()=>{b>0?this.stopCapture():this.capturingContext&&this.retry>1?this.onErrorInternal("No frames with gl commands detected. Try moving the camera."):this.onErrorInternal("No frames detected. Try moving the camera or implementing requestAnimationFrame.")},1e4))}captureNextFrame(o,b=!1,N=!1){o instanceof HTMLCanvasElement||self.OffscreenCanvas&&o instanceof OffscreenCanvas?this.captureCanvas(o,0,b,N):this.captureContext(o,0,b,N)}startCapture(o,b,N=!1,F=!1){o instanceof HTMLCanvasElement||self.OffscreenCanvas&&o instanceof OffscreenCanvas?this.captureCanvas(o,b,N,F):this.captureContext(o,b,N,F)}stopCapture(){if(this.capturingContext){const o=this.capturingContext.stopCapture();if(o.commands.length>0)return this.noFrameTimeout>-1&&clearTimeout(this.noFrameTimeout),this.triggerCapture(o),this.capturingContext=void 0,this.captureNextFrames=0,this.captureNextCommands=0,o;this.captureNextCommands===0&&(this.retry++,this.captureFrames(1))}}setMarker(o){this.marker=o,this.capturingContext&&this.capturingContext.setMarker(o)}clearMarker(){this.marker=null,this.capturingContext&&this.capturingContext.clearMarker()}addRequestAnimationFrameFunctionName(o){this.timeSpy.addRequestAnimationFrameFunctionName(o)}setSpiedScope(o){this.timeSpy.setSpiedScope(o)}log(o){this.capturingContext&&this.capturingContext.log(o)}captureFrames(o){this.captureNextFrames=o,this.captureNextCommands=0,this.playNextFrame()}captureCommands(o){this.captureNextFrames=0,this.captureNextCommands=o,this.play(),this.capturingContext?(this.onCaptureStarted.trigger(void 0),this.capturingContext.startCapture(o,this.quickCapture,this.fullCapture)):(this.onErrorInternal("No context to capture from."),this.captureNextCommands=0)}spyContext(o){let b=this.getAvailableContextSpyByCanvas(o.context.canvas);b||(b=new fn({context:o.context,version:o.contextVersion,recordAlways:!0}),b.onMaxCommand.add(this.stopCapture,this),this.contexts.push({canvas:b.context.canvas,contextSpy:b})),b.spy()}getAvailableContextSpyByCanvas(o){for(const b of this.contexts)if(b.canvas===o)return b.contextSpy}getXRContext(){return this.options.enableXRCapture||M.error("Cannot retrieve WebXR context if capturing WebXR is disabled."),this.xrSpy.currentXRSession||M.error("No currently active WebXR session."),this.xrSpy.currentXRSession.glContext}onFrameStart(){this.captureNextCommands>0||(this.captureNextFrames>0?(this.capturingContext&&(this.onCaptureStarted.trigger(void 0),this.capturingContext.startCapture(0,this.quickCapture,this.fullCapture)),this.captureNextFrames--):this.capturingContext=void 0)}onFrameEnd(){this.captureNextCommands>0||this.captureNextFrames===0&&this.stopCapture()}triggerCapture(o){this.captureMenu&&this.captureMenu.captureComplete(null),this.onCapture.trigger(o)}onErrorInternal(o){if(M.error(o),this.noFrameTimeout>-1&&clearTimeout(this.noFrameTimeout),!this.capturingContext)throw o;this.capturingContext=void 0,this.captureNextFrames=0,this.captureNextCommands=0,this.retry=0,this.captureMenu&&this.captureMenu.captureComplete(o),this.onError.trigger(o)}}},18:(h,_,g)=>{h=g.nmd(h),ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/keyboard/hash_handler","ace/lib/keys"],function(u,f,M){var a=u("../lib/dom"),E=u("../lib/lang"),p=u("../lib/event"),d='.ace_search {background-color: #ddd;color: #666;border: 1px solid #cbcbcb;border-top: 0 none;overflow: hidden;margin: 0;padding: 4px 6px 0 4px;position: absolute;top: 0;z-index: 99;white-space: normal;}.ace_search.left {border-left: 0 none;border-radius: 0px 0px 5px 0px;left: 0;}.ace_search.right {border-radius: 0px 0px 0px 5px;border-right: 0 none;right: 0;}.ace_search_form, .ace_replace_form {margin: 0 20px 4px 0;overflow: hidden;line-height: 1.9;}.ace_replace_form {margin-right: 0;}.ace_search_form.ace_nomatch {outline: 1px solid red;}.ace_search_field {border-radius: 3px 0 0 3px;background-color: white;color: black;border: 1px solid #cbcbcb;border-right: 0 none;outline: 0;padding: 0;font-size: inherit;margin: 0;line-height: inherit;padding: 0 6px;min-width: 17em;vertical-align: top;min-height: 1.8em;box-sizing: content-box;}.ace_searchbtn {border: 1px solid #cbcbcb;line-height: inherit;display: inline-block;padding: 0 6px;background: #fff;border-right: 0 none;border-left: 1px solid #dcdcdc;cursor: pointer;margin: 0;position: relative;color: #666;}.ace_searchbtn:last-child {border-radius: 0 3px 3px 0;border-right: 1px solid #cbcbcb;}.ace_searchbtn:disabled {background: none;cursor: default;}.ace_searchbtn:hover {background-color: #eef1f6;}.ace_searchbtn.prev, .ace_searchbtn.next {padding: 0px 0.7em}.ace_searchbtn.prev:after, .ace_searchbtn.next:after {content: "";border: solid 2px #888;width: 0.5em;height: 0.5em;border-width:  2px 0 0 2px;display:inline-block;transform: rotate(-45deg);}.ace_searchbtn.next:after {border-width: 0 2px 2px 0 ;}.ace_searchbtn_close {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;border-radius: 50%;border: 0 none;color: #656565;cursor: pointer;font: 16px/16px Arial;padding: 0;height: 14px;width: 14px;top: 9px;right: 7px;position: absolute;}.ace_searchbtn_close:hover {background-color: #656565;background-position: 50% 100%;color: white;}.ace_button {margin-left: 2px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;overflow: hidden;opacity: 0.7;border: 1px solid rgba(100,100,100,0.23);padding: 1px;box-sizing:    border-box!important;color: black;}.ace_button:hover {background-color: #eee;opacity:1;}.ace_button:active {background-color: #ddd;}.ace_button.checked {border-color: #3399ff;opacity:1;}.ace_search_options{margin-bottom: 3px;text-align: right;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;clear: both;}.ace_search_counter {float: left;font-family: arial;padding: 0 8px;}',s=u("../keyboard/hash_handler").HashHandler,r=u("../lib/keys");a.importCssString(d,"ace_searchbox");var t=function(c,m,v){var x=a.createElement("div");a.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:"Search for",spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"\u200B"],["span",{action:"findNext",class:"ace_searchbtn next"},"\u200B"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},"All"]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:"Replace with",spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},"Replace"],["span",{action:"replaceAll",class:"ace_searchbtn"},"All"]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:"Toggle Replace mode",style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:"RegExp Search"},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:"CaseSensitive Search"},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:"Whole Word Search"},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:"Search In Selection"},"S"]]],x),this.element=x.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(c),a.importCssString(d,"ace_searchbox",c.container)};(function(){this.setEditor=function(c){c.searchBox=this,c.renderer.scroller.appendChild(this.element),this.editor=c},this.setSession=function(c){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(c){this.searchBox=c.querySelector(".ace_search_form"),this.replaceBox=c.querySelector(".ace_replace_form"),this.searchOption=c.querySelector("[action=searchInSelection]"),this.replaceOption=c.querySelector("[action=toggleReplace]"),this.regExpOption=c.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=c.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=c.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=c.querySelector(".ace_search_counter")},this.$init=function(){var c=this.element;this.$initElements(c);var m=this;p.addListener(c,"mousedown",function(v){setTimeout(function(){m.activeInput.focus()},0),p.stopPropagation(v)}),p.addListener(c,"click",function(v){var x=(v.target||v.srcElement).getAttribute("action");x&&m[x]?m[x]():m.$searchBarKb.commands[x]&&m.$searchBarKb.commands[x].exec(m),p.stopPropagation(v)}),p.addCommandKeyListener(c,function(v,x,w){var R=r.keyCodeToString(w),S=m.$searchBarKb.findKeyCommand(x,R);S&&S.exec&&(S.exec(m),p.stopEvent(v))}),this.$onChange=E.delayedCall(function(){m.find(!1,!1)}),p.addListener(this.searchInput,"input",function(){m.$onChange.schedule(20)}),p.addListener(this.searchInput,"focus",function(){m.activeInput=m.searchInput,m.searchInput.value&&m.highlight()}),p.addListener(this.replaceInput,"focus",function(){m.activeInput=m.replaceInput,m.searchInput.value&&m.highlight()})},this.$closeSearchBarKb=new s([{bindKey:"Esc",name:"closeSearchBar",exec:function(c){c.searchBox.hide()}}]),this.$searchBarKb=new s,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(c){var m=c.isReplace=!c.isReplace;c.replaceBox.style.display=m?"":"none",c.replaceOption.checked=!1,c.$syncOptions(),c.searchInput.focus()},"Ctrl-H|Command-Option-F":function(c){c.editor.getReadOnly()||(c.replaceOption.checked=!0,c.$syncOptions(),c.replaceInput.focus())},"Ctrl-G|Command-G":function(c){c.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(c){c.findPrev()},esc:function(c){setTimeout(function(){c.hide()})},Return:function(c){c.activeInput==c.replaceInput&&c.replace(),c.findNext()},"Shift-Return":function(c){c.activeInput==c.replaceInput&&c.replace(),c.findPrev()},"Alt-Return":function(c){c.activeInput==c.replaceInput&&c.replaceAll(),c.findAll()},Tab:function(c){(c.activeInput==c.replaceInput?c.searchInput:c.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(c){c.regExpOption.checked=!c.regExpOption.checked,c.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(c){c.caseSensitiveOption.checked=!c.caseSensitiveOption.checked,c.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(c){c.wholeWordOption.checked=!c.wholeWordOption.checked,c.$syncOptions()}},{name:"toggleReplace",exec:function(c){c.replaceOption.checked=!c.replaceOption.checked,c.$syncOptions()}},{name:"searchInSelection",exec:function(c){c.searchOption.checked=!c.searchRange,c.setSearchRange(c.searchOption.checked&&c.editor.getSelectionRange()),c.$syncOptions()}}]),this.setSearchRange=function(c){this.searchRange=c,c?this.searchRangeMarker=this.editor.session.addMarker(c,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(c){a.setCssClass(this.replaceOption,"checked",this.searchRange),a.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",a.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),a.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),a.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var m=this.editor.getReadOnly();this.replaceOption.style.display=m?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!m?"":"none",this.find(!1,!1,c)},this.highlight=function(c){this.editor.session.highlight(c||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(c,m,v){var x=!this.editor.find(this.searchInput.value,{skipCurrent:c,backwards:m,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:v,range:this.searchRange})&&this.searchInput.value;a.setCssClass(this.searchBox,"ace_nomatch",x),this.editor._emit("findSearchBox",{match:!x}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var c=this.editor,m=c.$search.$options.re,v=0,x=0;if(m){var w=this.searchRange?c.session.getTextRange(this.searchRange):c.getValue(),R=c.session.doc.positionToIndex(c.selection.anchor);this.searchRange&&(R-=c.session.doc.positionToIndex(this.searchRange.start));for(var S,L=m.lastIndex=0;(S=m.exec(w))&&(v++,(L=S.index)<=R&&x++,!(v>999))&&(S[0]||(m.lastIndex=L+=1,!(L>=w.length))););}this.searchCounter.textContent=x+" of "+(v>999?"999+":v)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var c=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;a.setCssClass(this.searchBox,"ace_nomatch",c),this.editor._emit("findSearchBox",{match:!c}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(c,m){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=m,c&&(this.searchInput.value=c),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var c=document.activeElement;return c==this.searchInput||c==this.replaceInput}}).call(t.prototype),f.SearchBox=t,f.Search=function(c,m){(c.searchBox||new t(c)).show(c.session.getTextRange(),m)}}),ace.require(["ace/ext/searchbox"],function(u){h&&(h.exports=u)})},176:(h,_,g)=>{h=g.nmd(h),ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(u,f,M){var a=u("../lib/oop"),E=u("./text_highlight_rules").TextHighlightRules,p=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},p.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};a.inherits(p,E),p.getTagRule=function(d){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},p.getStartRule=function(d){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:d}},p.getEndRule=function(d){return{token:"comment.doc",regex:"\\*\\/",next:d}},f.DocCommentHighlightRules=p}),ace.define("ace/mode/c_cpp_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(u,f,M){var a=u("../lib/oop"),E=u("./doc_comment_highlight_rules").DocCommentHighlightRules,p=u("./text_highlight_rules").TextHighlightRules,d=f.cFunctions="\\b(?:hypot(?:f|l)?|s(?:scanf|ystem|nprintf|ca(?:nf|lb(?:n(?:f|l)?|ln(?:f|l)?))|i(?:n(?:h(?:f|l)?|f|l)?|gn(?:al|bit))|tr(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?)|error|pbrk|ftime|len|rchr|xfrm)|printf|et(?:jmp|vbuf|locale|buf)|qrt(?:f|l)?|w(?:scanf|printf)|rand)|n(?:e(?:arbyint(?:f|l)?|xt(?:toward(?:f|l)?|after(?:f|l)?))|an(?:f|l)?)|c(?:s(?:in(?:h(?:f|l)?|f|l)?|qrt(?:f|l)?)|cos(?:h(?:f)?|f|l)?|imag(?:f|l)?|t(?:ime|an(?:h(?:f|l)?|f|l)?)|o(?:s(?:h(?:f|l)?|f|l)?|nj(?:f|l)?|pysign(?:f|l)?)|p(?:ow(?:f|l)?|roj(?:f|l)?)|e(?:il(?:f|l)?|xp(?:f|l)?)|l(?:o(?:ck|g(?:f|l)?)|earerr)|a(?:sin(?:h(?:f|l)?|f|l)?|cos(?:h(?:f|l)?|f|l)?|tan(?:h(?:f|l)?|f|l)?|lloc|rg(?:f|l)?|bs(?:f|l)?)|real(?:f|l)?|brt(?:f|l)?)|t(?:ime|o(?:upper|lower)|an(?:h(?:f|l)?|f|l)?|runc(?:f|l)?|gamma(?:f|l)?|mp(?:nam|file))|i(?:s(?:space|n(?:ormal|an)|cntrl|inf|digit|u(?:nordered|pper)|p(?:unct|rint)|finite|w(?:space|c(?:ntrl|type)|digit|upper|p(?:unct|rint)|lower|al(?:num|pha)|graph|xdigit|blank)|l(?:ower|ess(?:equal|greater)?)|al(?:num|pha)|gr(?:eater(?:equal)?|aph)|xdigit|blank)|logb(?:f|l)?|max(?:div|abs))|di(?:v|fftime)|_Exit|unget(?:c|wc)|p(?:ow(?:f|l)?|ut(?:s|c(?:har)?|wc(?:har)?)|error|rintf)|e(?:rf(?:c(?:f|l)?|f|l)?|x(?:it|p(?:2(?:f|l)?|f|l|m1(?:f|l)?)?))|v(?:s(?:scanf|nprintf|canf|printf|w(?:scanf|printf))|printf|f(?:scanf|printf|w(?:scanf|printf))|w(?:scanf|printf)|a_(?:start|copy|end|arg))|qsort|f(?:s(?:canf|e(?:tpos|ek))|close|tell|open|dim(?:f|l)?|p(?:classify|ut(?:s|c|w(?:s|c))|rintf)|e(?:holdexcept|set(?:e(?:nv|xceptflag)|round)|clearexcept|testexcept|of|updateenv|r(?:aiseexcept|ror)|get(?:e(?:nv|xceptflag)|round))|flush|w(?:scanf|ide|printf|rite)|loor(?:f|l)?|abs(?:f|l)?|get(?:s|c|pos|w(?:s|c))|re(?:open|e|ad|xp(?:f|l)?)|m(?:in(?:f|l)?|od(?:f|l)?|a(?:f|l|x(?:f|l)?)?))|l(?:d(?:iv|exp(?:f|l)?)|o(?:ngjmp|cal(?:time|econv)|g(?:1(?:p(?:f|l)?|0(?:f|l)?)|2(?:f|l)?|f|l|b(?:f|l)?)?)|abs|l(?:div|abs|r(?:int(?:f|l)?|ound(?:f|l)?))|r(?:int(?:f|l)?|ound(?:f|l)?)|gamma(?:f|l)?)|w(?:scanf|c(?:s(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?|mbs)|pbrk|ftime|len|r(?:chr|tombs)|xfrm)|to(?:b|mb)|rtomb)|printf|mem(?:set|c(?:hr|py|mp)|move))|a(?:s(?:sert|ctime|in(?:h(?:f|l)?|f|l)?)|cos(?:h(?:f|l)?|f|l)?|t(?:o(?:i|f|l(?:l)?)|exit|an(?:h(?:f|l)?|2(?:f|l)?|f|l)?)|b(?:s|ort))|g(?:et(?:s|c(?:har)?|env|wc(?:har)?)|mtime)|r(?:int(?:f|l)?|ound(?:f|l)?|e(?:name|alloc|wind|m(?:ove|quo(?:f|l)?|ainder(?:f|l)?))|a(?:nd|ise))|b(?:search|towc)|m(?:odf(?:f|l)?|em(?:set|c(?:hr|py|mp)|move)|ktime|alloc|b(?:s(?:init|towcs|rtowcs)|towc|len|r(?:towc|len))))\\b",s=function(){var r=this.$keywords=this.createKeywordMapper({"keyword.control":"break|case|continue|default|do|else|for|goto|if|_Pragma|return|switch|while|catch|operator|try|throw|using","storage.type":"asm|__asm__|auto|bool|_Bool|char|_Complex|double|enum|float|_Imaginary|int|long|short|signed|struct|typedef|union|unsigned|void|class|wchar_t|template|char16_t|char32_t","storage.modifier":"const|extern|register|restrict|static|volatile|inline|private|protected|public|friend|explicit|virtual|export|mutable|typename|constexpr|new|delete|alignas|alignof|decltype|noexcept|thread_local","keyword.operator":"and|and_eq|bitand|bitor|compl|not|not_eq|or|or_eq|typeid|xor|xor_eq|const_cast|dynamic_cast|reinterpret_cast|static_cast|sizeof|namespace","variable.language":"this","constant.language":"NULL|true|false|TRUE|FALSE|nullptr"},"identifier"),t=/\\(?:['"?\\abfnrtv]|[0-7]{1,3}|x[a-fA-F\d]{2}|u[a-fA-F\d]{4}U[a-fA-F\d]{8}|.)/.source,c="%"+/(\d+\$)?/.source+/[#0\- +']*/.source+/[,;:_]?/.source+/((-?\d+)|\*(-?\d+\$)?)?/.source+/(\.((-?\d+)|\*(-?\d+\$)?)?)?/.source+/(hh|h|ll|l|j|t|z|q|L|vh|vl|v|hv|hl)?/.source+/(\[[^"\]]+\]|[diouxXDOUeEfFgGaACcSspn%])/.source;this.$rules={start:[{token:"comment",regex:"//$",next:"start"},{token:"comment",regex:"//",next:"singleLineComment"},E.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment"},{token:"string",regex:"'(?:"+t+"|.)?'"},{token:"string.start",regex:'"',stateName:"qqstring",next:[{token:"string",regex:/\\\s*$/,next:"qqstring"},{token:"constant.language.escape",regex:t},{token:"constant.language.escape",regex:c},{token:"string.end",regex:'"|$',next:"start"},{defaultToken:"string"}]},{token:"string.start",regex:'R"\\(',stateName:"rawString",next:[{token:"string.end",regex:'\\)"',next:"start"},{defaultToken:"string"}]},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b"},{token:"keyword",regex:"#\\s*(?:include|import|pragma|line|define|undef|version)\\b",next:"directive"},{token:"keyword",regex:"#\\s*(?:endif|if|ifdef|else|elif|ifndef)\\b"},{token:"support.function.C99.c",regex:d},{token:r,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*"},{token:"keyword.operator",regex:/--|\+\+|<<=|>>=|>>>=|<>|&&|\|\||\?:|[*%\/+\-&\^|~!<>=]=?/},{token:"punctuation.operator",regex:"\\?|\\:|\\,|\\;|\\."},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}],singleLineComment:[{token:"comment",regex:/\\$/,next:"singleLineComment"},{token:"comment",regex:/$/,next:"start"},{defaultToken:"comment"}],directive:[{token:"constant.other.multiline",regex:/\\/},{token:"constant.other.multiline",regex:/.*\\/},{token:"constant.other",regex:"\\s*<.+?>",next:"start"},{token:"constant.other",regex:'\\s*["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]',next:"start"},{token:"constant.other",regex:"\\s*['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']",next:"start"},{token:"constant.other",regex:/[^\\\/]+/,next:"start"}]},this.embedRules(E,"doc-",[E.getEndRule("start")]),this.normalizeRules()};a.inherits(s,p),f.c_cppHighlightRules=s}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(u,f,M){var a=u("../range").Range,E=function(){};(function(){this.checkOutdent=function(p,d){return!!/^\s+$/.test(p)&&/^\s*\}/.test(d)},this.autoOutdent=function(p,d){var s=p.getLine(d).match(/^(\s*\})/);if(!s)return 0;var r=s[1].length,t=p.findMatchingBracket({row:d,column:r});if(!t||t.row==d)return 0;var c=this.$getIndent(p.getLine(t.row));p.replace(new a(d,0,d,r-1),c)},this.$getIndent=function(p){return p.match(/^\s*/)[0]}}).call(E.prototype),f.MatchingBraceOutdent=E}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(u,f,M){var a=u("../../lib/oop"),E=u("../../range").Range,p=u("./fold_mode").FoldMode,d=f.FoldMode=function(s){s&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+s.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+s.end)))};a.inherits(d,p),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(s,r,t){var c=s.getLine(t);if(this.singleLineBlockCommentRe.test(c)&&!this.startRegionRe.test(c)&&!this.tripleStarBlockCommentRe.test(c))return"";var m=this._getFoldWidgetBase(s,r,t);return!m&&this.startRegionRe.test(c)?"start":m},this.getFoldWidgetRange=function(s,r,t,c){var m,v=s.getLine(t);if(this.startRegionRe.test(v))return this.getCommentRegionBlock(s,v,t);if(m=v.match(this.foldingStartMarker)){var x=m.index;if(m[1])return this.openingBracketBlock(s,m[1],t,x);var w=s.getCommentFoldRange(t,x+m[0].length,1);return w&&!w.isMultiLine()&&(c?w=this.getSectionRange(s,t):r!="all"&&(w=null)),w}return r!=="markbegin"&&(m=v.match(this.foldingStopMarker))?(x=m.index+m[0].length,m[1]?this.closingBracketBlock(s,m[1],t,x):s.getCommentFoldRange(t,x,-1)):void 0},this.getSectionRange=function(s,r){for(var t=s.getLine(r),c=t.search(/\S/),m=r,v=t.length,x=r+=1,w=s.getLength();++r<w;){var R=(t=s.getLine(r)).search(/\S/);if(R!==-1){if(c>R)break;var S=this.getFoldWidgetRange(s,"all",r);if(S){if(S.start.row<=m)break;if(S.isMultiLine())r=S.end.row;else if(c==R)break}x=r}}return new E(m,v,x,s.getLine(x).length)},this.getCommentRegionBlock=function(s,r,t){for(var c=r.search(/\s*$/),m=s.getLength(),v=t,x=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,w=1;++t<m;){r=s.getLine(t);var R=x.exec(r);if(R&&(R[1]?w--:w++,!w))break}if(t>v)return new E(v,c,t,r.length)}}.call(d.prototype)}),ace.define("ace/mode/c_cpp",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/c_cpp_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(u,f,M){var a=u("../lib/oop"),E=u("./text").Mode,p=u("./c_cpp_highlight_rules").c_cppHighlightRules,d=u("./matching_brace_outdent").MatchingBraceOutdent,s=(u("../range").Range,u("./behaviour/cstyle").CstyleBehaviour),r=u("./folding/cstyle").FoldMode,t=function(){this.HighlightRules=p,this.$outdent=new d,this.$behaviour=new s,this.foldingRules=new r};a.inherits(t,E),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(c,m,v){var x=this.$getIndent(m),w=this.getTokenizer().getLineTokens(m,c),R=w.tokens,S=w.state;if(R.length&&R[R.length-1].type=="comment")return x;if(c=="start")(L=m.match(/^.*[\{\(\[]\s*$/))&&(x+=v);else if(c=="doc-start"){if(S=="start")return"";var L;(L=m.match(/^\s*(\/?)\*/))&&(L[1]&&(x+=" "),x+="* ")}return x},this.checkOutdent=function(c,m,v){return this.$outdent.checkOutdent(m,v)},this.autoOutdent=function(c,m,v){this.$outdent.autoOutdent(m,v)},this.$id="ace/mode/c_cpp"}.call(t.prototype),f.Mode=t}),ace.define("ace/mode/glsl_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/c_cpp_highlight_rules"],function(u,f,M){var a=u("../lib/oop"),E=u("./c_cpp_highlight_rules").c_cppHighlightRules,p=function(){var d=this.createKeywordMapper({"variable.language":"this",keyword:"layout|attribute|const|uniform|varying|break|continue|do|for|while|if|else|in|out|inout|float|int|void|bool|true|false|lowp|mediump|highp|precision|invariant|discard|return|mat2|mat3|mat4|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|sampler2D|samplerCube|struct","constant.language":"radians|degrees|sin|cos|tan|asin|acos|atan|pow|exp|log|exp2|log2|sqrt|inversesqrt|abs|sign|floor|ceil|fract|mod|min|max|clamp|mix|step|smoothstep|length|distance|dot|cross|normalize|faceforward|reflect|refract|matrixCompMult|lessThan|lessThanEqual|greaterThan|greaterThanEqual|equal|notEqual|any|all|not|dFdx|dFdy|fwidth|texture2D|texture2DProj|texture2DLod|texture2DProjLod|textureCube|textureCubeLod|gl_MaxVertexAttribs|gl_MaxVertexUniformVectors|gl_MaxVaryingVectors|gl_MaxVertexTextureImageUnits|gl_MaxCombinedTextureImageUnits|gl_MaxTextureImageUnits|gl_MaxFragmentUniformVectors|gl_MaxDrawBuffers|gl_DepthRangeParameters|gl_DepthRange|gl_Position|gl_PointSize|gl_FragCoord|gl_FrontFacing|gl_PointCoord|gl_FragColor|gl_FragData"},"identifier");this.$rules=new E().$rules,this.$rules.start.forEach(function(s){typeof s.token=="function"&&(s.token=d)})};a.inherits(p,E),f.glslHighlightRules=p}),ace.define("ace/mode/glsl",["require","exports","module","ace/lib/oop","ace/mode/c_cpp","ace/mode/glsl_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(u,f,M){var a=u("../lib/oop"),E=u("./c_cpp").Mode,p=u("./glsl_highlight_rules").glslHighlightRules,d=u("./matching_brace_outdent").MatchingBraceOutdent,s=(u("../range").Range,u("./behaviour/cstyle").CstyleBehaviour),r=u("./folding/cstyle").FoldMode,t=function(){this.HighlightRules=p,this.$outdent=new d,this.$behaviour=new s,this.foldingRules=new r};a.inherits(t,E),function(){this.$id="ace/mode/glsl"}.call(t.prototype),f.Mode=t}),ace.require(["ace/mode/glsl"],function(u){h&&(h.exports=u)})},793:(h,_,g)=>{h=g.nmd(h),ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],function(u,f,M){f.isDark=!0,f.cssClass="ace-monokai",f.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",u("../lib/dom").importCssString(f.cssText,f.cssClass)}),ace.require(["ace/theme/monokai"],function(u){h&&(h.exports=u)})}},i={};function l(h){var _=i[h];if(_!==void 0)return _.exports;var g=i[h]={id:h,loaded:!1,exports:{}};return n[h].call(g.exports,g,g.exports,l),g.loaded=!0,g.exports}return l.amdD=function(){throw new Error("define cannot be used indirect")},l.n=h=>{var _=h&&h.__esModule?()=>h.default:()=>h;return l.d(_,{a:_}),_},l.d=(h,_)=>{for(var g in _)l.o(_,g)&&!l.o(h,g)&&Object.defineProperty(h,g,{enumerable:!0,get:_[g]})},l.o=(h,_)=>Object.prototype.hasOwnProperty.call(h,_),l.r=h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},l.nmd=h=>(h.paths=[],h.children||(h.children=[]),h),l.nc=void 0,l(819),l(176),l(793),l(655),l(18),l(986)})())})(w_);const bc={type:"change"},oa={type:"start"},Ac={type:"end"};class T_ extends cs{constructor(e,n){super(),n===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),n===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ce,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ps.ROTATE,MIDDLE:ps.DOLLY,RIGHT:ps.PAN},this.touches={ONE:gs.ROTATE,TWO:gs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return g.phi},this.getAzimuthalAngle=function(){return g.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(j){j.addEventListener("keydown",Xe),this._domElementKeyEvents=j},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(bc),i.update(),h=l.NONE},this.update=function(){const j=new ce,xe=new Si().setFromUnitVectors(e.up,new ce(0,1,0)),Pe=xe.clone().invert(),We=new ce,$e=new Si,Qe=2*Math.PI;return function(){const Ft=i.object.position;j.copy(Ft).sub(i.target),j.applyQuaternion(xe),g.setFromVector3(j),i.autoRotate&&h===l.NONE&&L(R()),i.enableDamping?(g.theta+=u.theta*i.dampingFactor,g.phi+=u.phi*i.dampingFactor):(g.theta+=u.theta,g.phi+=u.phi);let le=i.minAzimuthAngle,Oe=i.maxAzimuthAngle;return isFinite(le)&&isFinite(Oe)&&(le<-Math.PI?le+=Qe:le>Math.PI&&(le-=Qe),Oe<-Math.PI?Oe+=Qe:Oe>Math.PI&&(Oe-=Qe),le<=Oe?g.theta=Math.max(le,Math.min(Oe,g.theta)):g.theta=g.theta>(le+Oe)/2?Math.max(le,g.theta):Math.min(Oe,g.theta)),g.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=f,g.radius=Math.max(i.minDistance,Math.min(i.maxDistance,g.radius)),i.enableDamping===!0?i.target.addScaledVector(M,i.dampingFactor):i.target.add(M),j.setFromSpherical(g),j.applyQuaternion(Pe),Ft.copy(i.target).add(j),i.object.lookAt(i.target),i.enableDamping===!0?(u.theta*=1-i.dampingFactor,u.phi*=1-i.dampingFactor,M.multiplyScalar(1-i.dampingFactor)):(u.set(0,0,0),M.set(0,0,0)),f=1,a||We.distanceToSquared(i.object.position)>_||8*(1-$e.dot(i.object.quaternion))>_?(i.dispatchEvent(bc),We.copy(i.object.position),$e.copy(i.object.quaternion),a=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",he),i.domElement.removeEventListener("pointerdown",_t),i.domElement.removeEventListener("pointercancel",Vt),i.domElement.removeEventListener("wheel",Le),i.domElement.removeEventListener("pointermove",wt),i.domElement.removeEventListener("pointerup",it),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Xe)};const i=this,l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=l.NONE;const _=1e-6,g=new Sc,u=new Sc;let f=1;const M=new ce;let a=!1;const E=new ct,p=new ct,d=new ct,s=new ct,r=new ct,t=new ct,c=new ct,m=new ct,v=new ct,x=[],w={};function R(){return 2*Math.PI/60/60*i.autoRotateSpeed}function S(){return Math.pow(.95,i.zoomSpeed)}function L(j){u.theta-=j}function A(j){u.phi-=j}const y=function(){const j=new ce;return function(Pe,We){j.setFromMatrixColumn(We,0),j.multiplyScalar(-Pe),M.add(j)}}(),P=function(){const j=new ce;return function(Pe,We){i.screenSpacePanning===!0?j.setFromMatrixColumn(We,1):(j.setFromMatrixColumn(We,0),j.crossVectors(i.object.up,j)),j.multiplyScalar(Pe),M.add(j)}}(),B=function(){const j=new ce;return function(Pe,We){const $e=i.domElement;if(i.object.isPerspectiveCamera){const Qe=i.object.position;j.copy(Qe).sub(i.target);let ft=j.length();ft*=Math.tan(i.object.fov/2*Math.PI/180),y(2*Pe*ft/$e.clientHeight,i.object.matrix),P(2*We*ft/$e.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(y(Pe*(i.object.right-i.object.left)/i.object.zoom/$e.clientWidth,i.object.matrix),P(We*(i.object.top-i.object.bottom)/i.object.zoom/$e.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function T(j){i.object.isPerspectiveCamera?f/=j:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*j)),i.object.updateProjectionMatrix(),a=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function I(j){i.object.isPerspectiveCamera?f*=j:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/j)),i.object.updateProjectionMatrix(),a=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function D(j){E.set(j.clientX,j.clientY)}function k(j){c.set(j.clientX,j.clientY)}function U(j){s.set(j.clientX,j.clientY)}function G(j){p.set(j.clientX,j.clientY),d.subVectors(p,E).multiplyScalar(i.rotateSpeed);const xe=i.domElement;L(2*Math.PI*d.x/xe.clientHeight),A(2*Math.PI*d.y/xe.clientHeight),E.copy(p),i.update()}function H(j){m.set(j.clientX,j.clientY),v.subVectors(m,c),v.y>0?T(S()):v.y<0&&I(S()),c.copy(m),i.update()}function se(j){r.set(j.clientX,j.clientY),t.subVectors(r,s).multiplyScalar(i.panSpeed),B(t.x,t.y),s.copy(r),i.update()}function ee(j){j.deltaY<0?I(S()):j.deltaY>0&&T(S()),i.update()}function Z(j){let xe=!1;switch(j.code){case i.keys.UP:B(0,i.keyPanSpeed),xe=!0;break;case i.keys.BOTTOM:B(0,-i.keyPanSpeed),xe=!0;break;case i.keys.LEFT:B(i.keyPanSpeed,0),xe=!0;break;case i.keys.RIGHT:B(-i.keyPanSpeed,0),xe=!0;break}xe&&(j.preventDefault(),i.update())}function ne(){if(x.length===1)E.set(x[0].pageX,x[0].pageY);else{const j=.5*(x[0].pageX+x[1].pageX),xe=.5*(x[0].pageY+x[1].pageY);E.set(j,xe)}}function W(){if(x.length===1)s.set(x[0].pageX,x[0].pageY);else{const j=.5*(x[0].pageX+x[1].pageX),xe=.5*(x[0].pageY+x[1].pageY);s.set(j,xe)}}function K(){const j=x[0].pageX-x[1].pageX,xe=x[0].pageY-x[1].pageY,Pe=Math.sqrt(j*j+xe*xe);c.set(0,Pe)}function re(){i.enableZoom&&K(),i.enablePan&&W()}function oe(){i.enableZoom&&K(),i.enableRotate&&ne()}function de(j){if(x.length==1)p.set(j.pageX,j.pageY);else{const Pe=Ue(j),We=.5*(j.pageX+Pe.x),$e=.5*(j.pageY+Pe.y);p.set(We,$e)}d.subVectors(p,E).multiplyScalar(i.rotateSpeed);const xe=i.domElement;L(2*Math.PI*d.x/xe.clientHeight),A(2*Math.PI*d.y/xe.clientHeight),E.copy(p)}function ue(j){if(x.length===1)r.set(j.pageX,j.pageY);else{const xe=Ue(j),Pe=.5*(j.pageX+xe.x),We=.5*(j.pageY+xe.y);r.set(Pe,We)}t.subVectors(r,s).multiplyScalar(i.panSpeed),B(t.x,t.y),s.copy(r)}function Be(j){const xe=Ue(j),Pe=j.pageX-xe.x,We=j.pageY-xe.y,$e=Math.sqrt(Pe*Pe+We*We);m.set(0,$e),v.set(0,Math.pow(m.y/c.y,i.zoomSpeed)),T(v.y),c.copy(m)}function Ge(j){i.enableZoom&&Be(j),i.enablePan&&ue(j)}function ke(j){i.enableZoom&&Be(j),i.enableRotate&&de(j)}function _t(j){i.enabled!==!1&&(x.length===0&&(i.domElement.setPointerCapture(j.pointerId),i.domElement.addEventListener("pointermove",wt),i.domElement.addEventListener("pointerup",it)),be(j),j.pointerType==="touch"?q(j):Lt(j))}function wt(j){i.enabled!==!1&&(j.pointerType==="touch"?X(j):mt(j))}function it(j){Te(j),x.length===0&&(i.domElement.releasePointerCapture(j.pointerId),i.domElement.removeEventListener("pointermove",wt),i.domElement.removeEventListener("pointerup",it)),i.dispatchEvent(Ac),h=l.NONE}function Vt(j){Te(j)}function Lt(j){let xe;switch(j.button){case 0:xe=i.mouseButtons.LEFT;break;case 1:xe=i.mouseButtons.MIDDLE;break;case 2:xe=i.mouseButtons.RIGHT;break;default:xe=-1}switch(xe){case ps.DOLLY:if(i.enableZoom===!1)return;k(j),h=l.DOLLY;break;case ps.ROTATE:if(j.ctrlKey||j.metaKey||j.shiftKey){if(i.enablePan===!1)return;U(j),h=l.PAN}else{if(i.enableRotate===!1)return;D(j),h=l.ROTATE}break;case ps.PAN:if(j.ctrlKey||j.metaKey||j.shiftKey){if(i.enableRotate===!1)return;D(j),h=l.ROTATE}else{if(i.enablePan===!1)return;U(j),h=l.PAN}break;default:h=l.NONE}h!==l.NONE&&i.dispatchEvent(oa)}function mt(j){switch(h){case l.ROTATE:if(i.enableRotate===!1)return;G(j);break;case l.DOLLY:if(i.enableZoom===!1)return;H(j);break;case l.PAN:if(i.enablePan===!1)return;se(j);break}}function Le(j){i.enabled===!1||i.enableZoom===!1||h!==l.NONE||(j.preventDefault(),i.dispatchEvent(oa),ee(j),i.dispatchEvent(Ac))}function Xe(j){i.enabled===!1||i.enablePan===!1||Z(j)}function q(j){switch(Re(j),x.length){case 1:switch(i.touches.ONE){case gs.ROTATE:if(i.enableRotate===!1)return;ne(),h=l.TOUCH_ROTATE;break;case gs.PAN:if(i.enablePan===!1)return;W(),h=l.TOUCH_PAN;break;default:h=l.NONE}break;case 2:switch(i.touches.TWO){case gs.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;re(),h=l.TOUCH_DOLLY_PAN;break;case gs.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;oe(),h=l.TOUCH_DOLLY_ROTATE;break;default:h=l.NONE}break;default:h=l.NONE}h!==l.NONE&&i.dispatchEvent(oa)}function X(j){switch(Re(j),h){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;de(j),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;ue(j),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ge(j),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ke(j),i.update();break;default:h=l.NONE}}function he(j){i.enabled!==!1&&j.preventDefault()}function be(j){x.push(j)}function Te(j){delete w[j.pointerId];for(let xe=0;xe<x.length;xe++)if(x[xe].pointerId==j.pointerId){x.splice(xe,1);return}}function Re(j){let xe=w[j.pointerId];xe===void 0&&(xe=new ct,w[j.pointerId]=xe),xe.set(j.pageX,j.pageY)}function Ue(j){const xe=j.pointerId===x[0].pointerId?x[1]:x[0];return w[xe.pointerId]}i.domElement.addEventListener("contextmenu",he),i.domElement.addEventListener("pointerdown",_t),i.domElement.addEventListener("pointercancel",Vt),i.domElement.addEventListener("wheel",Le,{passive:!1}),this.update()}}class R_ extends Ys{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new N_(n)}),this.register(function(n){return new $_(n)}),this.register(function(n){return new G_(n)}),this.register(function(n){return new D_(n)}),this.register(function(n){return new O_(n)}),this.register(function(n){return new B_(n)}),this.register(function(n){return new k_(n)}),this.register(function(n){return new F_(n)}),this.register(function(n){return new U_(n)}),this.register(function(n){return new P_(n)}),this.register(function(n){return new L_(n)}),this.register(function(n){return new W_(n)})}load(e,n,i,l){const h=this;let _;this.resourcePath!==""?_=this.resourcePath:this.path!==""?_=this.path:_=is.extractUrlBase(e),this.manager.itemStart(e);const g=function(f){l?l(f):console.error(f),h.manager.itemError(e),h.manager.itemEnd(e)},u=new Eo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(f){try{h.parse(f,_,function(M){n(M),h.manager.itemEnd(e)},g)}catch(M){g(M)}},i,g)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,l){let h;const _={},g={};if(typeof e=="string")h=e;else if(is.decodeText(new Uint8Array(e,0,4))===hu){try{_[Ct.KHR_BINARY_GLTF]=new V_(e)}catch(a){l&&l(a);return}h=_[Ct.KHR_BINARY_GLTF].content}else h=is.decodeText(new Uint8Array(e));const u=JSON.parse(h);if(u.asset===void 0||u.asset.version[0]<2){l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const f=new nv(u,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(let M=0;M<this.pluginCallbacks.length;M++){const a=this.pluginCallbacks[M](f);g[a.name]=a,_[a.name]=!0}if(u.extensionsUsed)for(let M=0;M<u.extensionsUsed.length;++M){const a=u.extensionsUsed[M],E=u.extensionsRequired||[];switch(a){case Ct.KHR_MATERIALS_UNLIT:_[a]=new I_;break;case Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:_[a]=new X_;break;case Ct.KHR_DRACO_MESH_COMPRESSION:_[a]=new H_(u,this.dracoLoader);break;case Ct.KHR_TEXTURE_TRANSFORM:_[a]=new z_;break;case Ct.KHR_MESH_QUANTIZATION:_[a]=new K_;break;default:E.indexOf(a)>=0&&g[a]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+a+'".')}}f.setExtensions(_),f.setPlugins(g),f.parse(i,l)}parseAsync(e,n){const i=this;return new Promise(function(l,h){i.parse(e,n,l,h)})}}function M_(){let C={};return{get:function(e){return C[e]},add:function(e,n){C[e]=n},remove:function(e){delete C[e]},removeAll:function(){C={}}}}const Ct={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class L_{constructor(e){this.parser=e,this.name=Ct.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,l=n.length;i<l;i++){const h=n[i];h.extensions&&h.extensions[this.name]&&h.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,h.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let l=n.cache.get(i);if(l)return l;const h=n.json,u=((h.extensions&&h.extensions[this.name]||{}).lights||[])[e];let f;const M=new dt(16777215);u.color!==void 0&&M.fromArray(u.color);const a=u.range!==void 0?u.range:0;switch(u.type){case"directional":f=new m_(M),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new d_(M),f.distance=a;break;case"spot":f=new u_(M),f.distance=a,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,f.angle=u.spot.outerConeAngle,f.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return f.position.set(0,0,0),f.decay=2,u.intensity!==void 0&&(f.intensity=u.intensity),f.name=n.createUniqueName(u.name||"light_"+e),l=Promise.resolve(f),n.cache.add(i,l),l}createNodeAttachment(e){const n=this,i=this.parser,h=i.json.nodes[e],g=(h.extensions&&h.extensions[this.name]||{}).light;return g===void 0?null:this._loadLight(g).then(function(u){return i._getNodeRef(n.cache,g,u)})}}class I_{constructor(){this.name=Ct.KHR_MATERIALS_UNLIT}getMaterialType(){return ii}extendParams(e,n,i){const l=[];e.color=new dt(1,1,1),e.opacity=1;const h=n.pbrMetallicRoughness;if(h){if(Array.isArray(h.baseColorFactor)){const _=h.baseColorFactor;e.color.fromArray(_),e.opacity=_[3]}h.baseColorTexture!==void 0&&l.push(i.assignTexture(e,"map",h.baseColorTexture,Bt))}return Promise.all(l)}}class F_{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const l=this.parser.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const h=l.extensions[this.name].emissiveStrength;return h!==void 0&&(n.emissiveIntensity=h),Promise.resolve()}}class N_{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:us}extendMaterialParams(e,n){const i=this.parser,l=i.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const h=[],_=l.extensions[this.name];if(_.clearcoatFactor!==void 0&&(n.clearcoat=_.clearcoatFactor),_.clearcoatTexture!==void 0&&h.push(i.assignTexture(n,"clearcoatMap",_.clearcoatTexture)),_.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=_.clearcoatRoughnessFactor),_.clearcoatRoughnessTexture!==void 0&&h.push(i.assignTexture(n,"clearcoatRoughnessMap",_.clearcoatRoughnessTexture)),_.clearcoatNormalTexture!==void 0&&(h.push(i.assignTexture(n,"clearcoatNormalMap",_.clearcoatNormalTexture)),_.clearcoatNormalTexture.scale!==void 0)){const g=_.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new ct(g,g)}return Promise.all(h)}}class P_{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:us}extendMaterialParams(e,n){const i=this.parser,l=i.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const h=[],_=l.extensions[this.name];return _.iridescenceFactor!==void 0&&(n.iridescence=_.iridescenceFactor),_.iridescenceTexture!==void 0&&h.push(i.assignTexture(n,"iridescenceMap",_.iridescenceTexture)),_.iridescenceIor!==void 0&&(n.iridescenceIOR=_.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),_.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=_.iridescenceThicknessMinimum),_.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=_.iridescenceThicknessMaximum),_.iridescenceThicknessTexture!==void 0&&h.push(i.assignTexture(n,"iridescenceThicknessMap",_.iridescenceThicknessTexture)),Promise.all(h)}}class D_{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:us}extendMaterialParams(e,n){const i=this.parser,l=i.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const h=[];n.sheenColor=new dt(0,0,0),n.sheenRoughness=0,n.sheen=1;const _=l.extensions[this.name];return _.sheenColorFactor!==void 0&&n.sheenColor.fromArray(_.sheenColorFactor),_.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=_.sheenRoughnessFactor),_.sheenColorTexture!==void 0&&h.push(i.assignTexture(n,"sheenColorMap",_.sheenColorTexture,Bt)),_.sheenRoughnessTexture!==void 0&&h.push(i.assignTexture(n,"sheenRoughnessMap",_.sheenRoughnessTexture)),Promise.all(h)}}class O_{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:us}extendMaterialParams(e,n){const i=this.parser,l=i.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const h=[],_=l.extensions[this.name];return _.transmissionFactor!==void 0&&(n.transmission=_.transmissionFactor),_.transmissionTexture!==void 0&&h.push(i.assignTexture(n,"transmissionMap",_.transmissionTexture)),Promise.all(h)}}class B_{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:us}extendMaterialParams(e,n){const i=this.parser,l=i.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const h=[],_=l.extensions[this.name];n.thickness=_.thicknessFactor!==void 0?_.thicknessFactor:0,_.thicknessTexture!==void 0&&h.push(i.assignTexture(n,"thicknessMap",_.thicknessTexture)),n.attenuationDistance=_.attenuationDistance||0;const g=_.attenuationColor||[1,1,1];return n.attenuationColor=new dt(g[0],g[1],g[2]),Promise.all(h)}}class k_{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:us}extendMaterialParams(e,n){const l=this.parser.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const h=l.extensions[this.name];return n.ior=h.ior!==void 0?h.ior:1.5,Promise.resolve()}}class U_{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:us}extendMaterialParams(e,n){const i=this.parser,l=i.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const h=[],_=l.extensions[this.name];n.specularIntensity=_.specularFactor!==void 0?_.specularFactor:1,_.specularTexture!==void 0&&h.push(i.assignTexture(n,"specularIntensityMap",_.specularTexture));const g=_.specularColorFactor||[1,1,1];return n.specularColor=new dt(g[0],g[1],g[2]),_.specularColorTexture!==void 0&&h.push(i.assignTexture(n,"specularColorMap",_.specularColorTexture,Bt)),Promise.all(h)}}class $_{constructor(e){this.parser=e,this.name=Ct.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,l=i.textures[e];if(!l.extensions||!l.extensions[this.name])return null;const h=l.extensions[this.name],_=n.options.ktx2Loader;if(!_){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,h.source,_)}}class G_{constructor(e){this.parser=e,this.name=Ct.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,l=i.json,h=l.textures[e];if(!h.extensions||!h.extensions[n])return null;const _=h.extensions[n],g=l.images[_.source];let u=i.textureLoader;if(g.uri){const f=i.options.manager.getHandler(g.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return i.loadTextureImage(e,_.source,u);if(l.extensionsRequired&&l.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class W_{constructor(e){this.name=Ct.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const l=i.extensions[this.name],h=this.parser.getDependency("buffer",l.buffer),_=this.parser.options.meshoptDecoder;if(!_||!_.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([h,_.ready]).then(function(g){const u=l.byteOffset||0,f=l.byteLength||0,M=l.count,a=l.byteStride,E=new ArrayBuffer(M*a),p=new Uint8Array(g[0],u,f);return _.decodeGltfBuffer(new Uint8Array(E),M,a,p,l.mode,l.filter),E})}else return null}}const hu="glTF",lr=12,Cc={JSON:1313821514,BIN:5130562};class V_{constructor(e){this.name=Ct.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,lr);if(this.header={magic:is.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==hu)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-lr,l=new DataView(e,lr);let h=0;for(;h<i;){const _=l.getUint32(h,!0);h+=4;const g=l.getUint32(h,!0);if(h+=4,g===Cc.JSON){const u=new Uint8Array(e,lr+h,_);this.content=is.decodeText(u)}else if(g===Cc.BIN){const u=lr+h;this.body=e.slice(u,u+_)}h+=_}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class H_{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ct.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,l=this.dracoLoader,h=e.extensions[this.name].bufferView,_=e.extensions[this.name].attributes,g={},u={},f={};for(const M in _){const a=Sa[M]||M.toLowerCase();g[a]=_[M]}for(const M in e.attributes){const a=Sa[M]||M.toLowerCase();if(_[M]!==void 0){const E=i.accessors[e.attributes[M]],p=Sr[E.componentType];f[a]=p,u[a]=E.normalized===!0}}return n.getDependency("bufferView",h).then(function(M){return new Promise(function(a){l.decodeDracoFile(M,function(E){for(const p in E.attributes){const d=E.attributes[p],s=u[p];s!==void 0&&(d.normalized=s)}a(E)},g,f)})})}}class z_{constructor(){this.name=Ct.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return n.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class xa extends bo{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const n=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),h=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),_=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),g={specular:{value:new dt().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=g,this.onBeforeCompile=function(u){for(const f in g)u.uniforms[f]=g[f];u.fragmentShader=u.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",n).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",h).replace("#include <lights_physical_fragment>",_)},Object.defineProperties(this,{specular:{get:function(){return g.specular.value},set:function(u){g.specular.value=u}},specularMap:{get:function(){return g.specularMap.value},set:function(u){g.specularMap.value=u,u?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return g.glossiness.value},set:function(u){g.glossiness.value=u}},glossinessMap:{get:function(){return g.glossinessMap.value},set:function(u){g.glossinessMap.value=u,u?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class X_{constructor(){this.name=Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return xa}extendParams(e,n,i){const l=n.extensions[this.name];e.color=new dt(1,1,1),e.opacity=1;const h=[];if(Array.isArray(l.diffuseFactor)){const _=l.diffuseFactor;e.color.fromArray(_),e.opacity=_[3]}if(l.diffuseTexture!==void 0&&h.push(i.assignTexture(e,"map",l.diffuseTexture,Bt)),e.emissive=new dt(0,0,0),e.glossiness=l.glossinessFactor!==void 0?l.glossinessFactor:1,e.specular=new dt(1,1,1),Array.isArray(l.specularFactor)&&e.specular.fromArray(l.specularFactor),l.specularGlossinessTexture!==void 0){const _=l.specularGlossinessTexture;h.push(i.assignTexture(e,"glossinessMap",_)),h.push(i.assignTexture(e,"specularMap",_,Bt))}return Promise.all(h)}createMaterial(e){const n=new xa(e);return n.fog=!0,n.color=e.color,n.map=e.map===void 0?null:e.map,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=e.aoMap===void 0?null:e.aoMap,n.aoMapIntensity=1,n.emissive=e.emissive,n.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,n.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,n.bumpMap=e.bumpMap===void 0?null:e.bumpMap,n.bumpScale=1,n.normalMap=e.normalMap===void 0?null:e.normalMap,n.normalMapType=ya,e.normalScale&&(n.normalScale=e.normalScale),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=e.specularMap===void 0?null:e.specularMap,n.specular=e.specular,n.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,n.glossiness=e.glossiness,n.alphaMap=null,n.envMap=e.envMap===void 0?null:e.envMap,n.envMapIntensity=1,n}}class K_{constructor(){this.name=Ct.KHR_MESH_QUANTIZATION}}class du extends Cr{constructor(e,n,i,l){super(e,n,i,l)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,l=this.valueSize,h=e*l*3+l;for(let _=0;_!==l;_++)n[_]=i[h+_];return n}interpolate_(e,n,i,l){const h=this.resultBuffer,_=this.sampleValues,g=this.valueSize,u=g*2,f=g*3,M=l-n,a=(i-n)/M,E=a*a,p=E*a,d=e*f,s=d-f,r=-2*p+3*E,t=p-E,c=1-r,m=t-E+a;for(let v=0;v!==g;v++){const x=_[s+v+g],w=_[s+v+u]*M,R=_[d+v+g],S=_[d+v]*M;h[v]=c*x+m*w+r*R+t*S}return h}}const j_=new Si;class q_ extends du{interpolate_(e,n,i,l){const h=super.interpolate_(e,n,i,l);return j_.fromArray(h).normalize().toArray(h),h}}const _i={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Sr={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},yc={9728:on,9729:yn,9984:fa,9985:Bc,9986:ma,9987:Hs},wc={33071:Dn,33648:_o,10497:ks},Tc={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Sa={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ki={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Y_={CUBICSPLINE:void 0,LINEAR:$s,STEP:gr},aa={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Z_(C){return C.DefaultMaterial===void 0&&(C.DefaultMaterial=new bo({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ds})),C.DefaultMaterial}function cr(C,e,n){for(const i in n.extensions)C[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function Yi(C,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(C.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function J_(C,e,n){let i=!1,l=!1,h=!1;for(let f=0,M=e.length;f<M;f++){const a=e[f];if(a.POSITION!==void 0&&(i=!0),a.NORMAL!==void 0&&(l=!0),a.COLOR_0!==void 0&&(h=!0),i&&l&&h)break}if(!i&&!l&&!h)return Promise.resolve(C);const _=[],g=[],u=[];for(let f=0,M=e.length;f<M;f++){const a=e[f];if(i){const E=a.POSITION!==void 0?n.getDependency("accessor",a.POSITION):C.attributes.position;_.push(E)}if(l){const E=a.NORMAL!==void 0?n.getDependency("accessor",a.NORMAL):C.attributes.normal;g.push(E)}if(h){const E=a.COLOR_0!==void 0?n.getDependency("accessor",a.COLOR_0):C.attributes.color;u.push(E)}}return Promise.all([Promise.all(_),Promise.all(g),Promise.all(u)]).then(function(f){const M=f[0],a=f[1],E=f[2];return i&&(C.morphAttributes.position=M),l&&(C.morphAttributes.normal=a),h&&(C.morphAttributes.color=E),C.morphTargetsRelative=!0,C})}function Q_(C,e){if(C.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)C.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(C.morphTargetInfluences.length===n.length){C.morphTargetDictionary={};for(let i=0,l=n.length;i<l;i++)C.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ev(C){const e=C.extensions&&C.extensions[Ct.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+Rc(e.attributes):n=C.indices+":"+Rc(C.attributes)+":"+C.mode,n}function Rc(C){let e="";const n=Object.keys(C).sort();for(let i=0,l=n.length;i<l;i++)e+=n[i]+":"+C[n[i]]+";";return e}function ba(C){switch(C){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function tv(C){return C.search(/\.jpe?g($|\?)/i)>0||C.search(/^data\:image\/jpeg/)===0?"image/jpeg":C.search(/\.webp($|\?)/i)>0||C.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class nv{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new M_,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,l=navigator.userAgent.indexOf("Firefox")>-1,h=l?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||i||l&&h<98?this.textureLoader=new uu(this.options.manager):this.textureLoader=new p_(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Eo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,l=this.json,h=this.extensions;this.cache.removeAll(),this._invokeAll(function(_){return _._markDefs&&_._markDefs()}),Promise.all(this._invokeAll(function(_){return _.beforeRoot&&_.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(_){const g={scene:_[0][l.scene||0],scenes:_[0],animations:_[1],cameras:_[2],asset:l.asset,parser:i,userData:{}};cr(h,g,l),Yi(g,l),Promise.all(i._invokeAll(function(u){return u.afterRoot&&u.afterRoot(g)})).then(function(){e(g)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let l=0,h=n.length;l<h;l++){const _=n[l].joints;for(let g=0,u=_.length;g<u;g++)e[_[g]].isBone=!0}for(let l=0,h=e.length;l<h;l++){const _=e[l];_.mesh!==void 0&&(this._addNodeRef(this.meshCache,_.mesh),_.skin!==void 0&&(i[_.mesh].isSkinnedMesh=!0)),_.camera!==void 0&&this._addNodeRef(this.cameraCache,_.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const l=i.clone(),h=(_,g)=>{const u=this.associations.get(_);u!=null&&this.associations.set(g,u);for(const[f,M]of _.children.entries())h(M,g.children[f])};return h(i,l),l.name+="_instance_"+e.uses[n]++,l}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const l=e(n[i]);if(l)return l}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let l=0;l<n.length;l++){const h=e(n[l]);h&&i.push(h)}return i}getDependency(e,n){const i=e+":"+n;let l=this.cache.get(i);if(!l){switch(e){case"scene":l=this.loadScene(n);break;case"node":l=this.loadNode(n);break;case"mesh":l=this._invokeOne(function(h){return h.loadMesh&&h.loadMesh(n)});break;case"accessor":l=this.loadAccessor(n);break;case"bufferView":l=this._invokeOne(function(h){return h.loadBufferView&&h.loadBufferView(n)});break;case"buffer":l=this.loadBuffer(n);break;case"material":l=this._invokeOne(function(h){return h.loadMaterial&&h.loadMaterial(n)});break;case"texture":l=this._invokeOne(function(h){return h.loadTexture&&h.loadTexture(n)});break;case"skin":l=this.loadSkin(n);break;case"animation":l=this._invokeOne(function(h){return h.loadAnimation&&h.loadAnimation(n)});break;case"camera":l=this.loadCamera(n);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,l)}return l}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,l=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(l.map(function(h,_){return i.getDependency(e,_)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ct.KHR_BINARY_GLTF].body);const l=this.options;return new Promise(function(h,_){i.load(is.resolveURL(n.uri,l.path),h,void 0,function(){_(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const l=n.byteLength||0,h=n.byteOffset||0;return i.slice(h,h+l)})}loadAccessor(e){const n=this,i=this.json,l=this.json.accessors[e];if(l.bufferView===void 0&&l.sparse===void 0)return Promise.resolve(null);const h=[];return l.bufferView!==void 0?h.push(this.getDependency("bufferView",l.bufferView)):h.push(null),l.sparse!==void 0&&(h.push(this.getDependency("bufferView",l.sparse.indices.bufferView)),h.push(this.getDependency("bufferView",l.sparse.values.bufferView))),Promise.all(h).then(function(_){const g=_[0],u=Tc[l.type],f=Sr[l.componentType],M=f.BYTES_PER_ELEMENT,a=M*u,E=l.byteOffset||0,p=l.bufferView!==void 0?i.bufferViews[l.bufferView].byteStride:void 0,d=l.normalized===!0;let s,r;if(p&&p!==a){const t=Math.floor(E/p),c="InterleavedBuffer:"+l.bufferView+":"+l.componentType+":"+t+":"+l.count;let m=n.cache.get(c);m||(s=new f(g,t*p,l.count*p/M),m=new Vg(s,p/M),n.cache.add(c,m)),r=new Fa(m,u,E%p/M,d)}else g===null?s=new f(l.count*u):s=new f(g,E,l.count*u),r=new _n(s,u,d);if(l.sparse!==void 0){const t=Tc.SCALAR,c=Sr[l.sparse.indices.componentType],m=l.sparse.indices.byteOffset||0,v=l.sparse.values.byteOffset||0,x=new c(_[1],m,l.sparse.count*t),w=new f(_[2],v,l.sparse.count*u);g!==null&&(r=new _n(r.array.slice(),r.itemSize,r.normalized));for(let R=0,S=x.length;R<S;R++){const L=x[R];if(r.setX(L,w[R*u]),u>=2&&r.setY(L,w[R*u+1]),u>=3&&r.setZ(L,w[R*u+2]),u>=4&&r.setW(L,w[R*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return r})}loadTexture(e){const n=this.json,i=this.options,h=n.textures[e].source,_=n.images[h];let g=this.textureLoader;if(_.uri){const u=i.manager.getHandler(_.uri);u!==null&&(g=u)}return this.loadTextureImage(e,h,g)}loadTextureImage(e,n,i){const l=this,h=this.json,_=h.textures[e],g=h.images[n],u=(g.uri||g.bufferView)+":"+_.sampler;if(this.textureCache[u])return this.textureCache[u];const f=this.loadImageSource(n,i).then(function(M){M.flipY=!1,_.name&&(M.name=_.name);const E=(h.samplers||{})[_.sampler]||{};return M.magFilter=yc[E.magFilter]||yn,M.minFilter=yc[E.minFilter]||Hs,M.wrapS=wc[E.wrapS]||ks,M.wrapT=wc[E.wrapT]||ks,l.associations.set(M,{textures:e}),M}).catch(function(){return null});return this.textureCache[u]=f,f}loadImageSource(e,n){const i=this,l=this.json,h=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(a=>a.clone());const _=l.images[e],g=self.URL||self.webkitURL;let u=_.uri||"",f=!1;if(_.bufferView!==void 0)u=i.getDependency("bufferView",_.bufferView).then(function(a){f=!0;const E=new Blob([a],{type:_.mimeType});return u=g.createObjectURL(E),u});else if(_.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const M=Promise.resolve(u).then(function(a){return new Promise(function(E,p){let d=E;n.isImageBitmapLoader===!0&&(d=function(s){const r=new vn(s);r.needsUpdate=!0,E(r)}),n.load(is.resolveURL(a,h.path),d,void 0,p)})}).then(function(a){return f===!0&&g.revokeObjectURL(u),a.userData.mimeType=_.mimeType||tv(_.uri),a}).catch(function(a){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),a});return this.sourceCache[e]=M,M}assignTexture(e,n,i,l){const h=this;return this.getDependency("texture",i.index).then(function(_){if(i.texCoord!==void 0&&i.texCoord!=0&&!(n==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+n+" not yet supported."),h.extensions[Ct.KHR_TEXTURE_TRANSFORM]){const g=i.extensions!==void 0?i.extensions[Ct.KHR_TEXTURE_TRANSFORM]:void 0;if(g){const u=h.associations.get(_);_=h.extensions[Ct.KHR_TEXTURE_TRANSFORM].extendTexture(_,g),h.associations.set(_,u)}}return l!==void 0&&(_.encoding=l),e[n]=_,_})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const l=n.attributes.tangent===void 0,h=n.attributes.color!==void 0,_=n.attributes.normal===void 0;if(e.isPoints){const g="PointsMaterial:"+i.uuid;let u=this.cache.get(g);u||(u=new ou,oi.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(g,u)),i=u}else if(e.isLine){const g="LineBasicMaterial:"+i.uuid;let u=this.cache.get(g);u||(u=new ru,oi.prototype.copy.call(u,i),u.color.copy(i.color),this.cache.add(g,u)),i=u}if(l||h||_){let g="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(g+="specular-glossiness:"),l&&(g+="derivative-tangents:"),h&&(g+="vertex-colors:"),_&&(g+="flat-shading:");let u=this.cache.get(g);u||(u=i.clone(),h&&(u.vertexColors=!0),_&&(u.flatShading=!0),l&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(g,u),this.associations.set(u,this.associations.get(i))),i=u}i.aoMap&&n.attributes.uv2===void 0&&n.attributes.uv!==void 0&&n.setAttribute("uv2",n.attributes.uv),e.material=i}getMaterialType(){return bo}loadMaterial(e){const n=this,i=this.json,l=this.extensions,h=i.materials[e];let _;const g={},u=h.extensions||{},f=[];if(u[Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const a=l[Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];_=a.getMaterialType(),f.push(a.extendParams(g,h,n))}else if(u[Ct.KHR_MATERIALS_UNLIT]){const a=l[Ct.KHR_MATERIALS_UNLIT];_=a.getMaterialType(),f.push(a.extendParams(g,h,n))}else{const a=h.pbrMetallicRoughness||{};if(g.color=new dt(1,1,1),g.opacity=1,Array.isArray(a.baseColorFactor)){const E=a.baseColorFactor;g.color.fromArray(E),g.opacity=E[3]}a.baseColorTexture!==void 0&&f.push(n.assignTexture(g,"map",a.baseColorTexture,Bt)),g.metalness=a.metallicFactor!==void 0?a.metallicFactor:1,g.roughness=a.roughnessFactor!==void 0?a.roughnessFactor:1,a.metallicRoughnessTexture!==void 0&&(f.push(n.assignTexture(g,"metalnessMap",a.metallicRoughnessTexture)),f.push(n.assignTexture(g,"roughnessMap",a.metallicRoughnessTexture))),_=this._invokeOne(function(E){return E.getMaterialType&&E.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(E){return E.extendMaterialParams&&E.extendMaterialParams(e,g)})))}h.doubleSided===!0&&(g.side=Gi);const M=h.alphaMode||aa.OPAQUE;if(M===aa.BLEND?(g.transparent=!0,g.depthWrite=!1):(g.transparent=!1,M===aa.MASK&&(g.alphaTest=h.alphaCutoff!==void 0?h.alphaCutoff:.5)),h.normalTexture!==void 0&&_!==ii&&(f.push(n.assignTexture(g,"normalMap",h.normalTexture)),g.normalScale=new ct(1,1),h.normalTexture.scale!==void 0)){const a=h.normalTexture.scale;g.normalScale.set(a,a)}return h.occlusionTexture!==void 0&&_!==ii&&(f.push(n.assignTexture(g,"aoMap",h.occlusionTexture)),h.occlusionTexture.strength!==void 0&&(g.aoMapIntensity=h.occlusionTexture.strength)),h.emissiveFactor!==void 0&&_!==ii&&(g.emissive=new dt().fromArray(h.emissiveFactor)),h.emissiveTexture!==void 0&&_!==ii&&f.push(n.assignTexture(g,"emissiveMap",h.emissiveTexture,Bt)),Promise.all(f).then(function(){let a;return _===xa?a=l[Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(g):a=new _(g),h.name&&(a.name=h.name),Yi(a,h),n.associations.set(a,{materials:e}),h.extensions&&cr(l,a,h),a})}createUniqueName(e){const n=kt.sanitizeNodeName(e||"");let i=n;for(let l=1;this.nodeNamesUsed[i];++l)i=n+"_"+l;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const n=this,i=this.extensions,l=this.primitiveCache;function h(g){return i[Ct.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(g,n).then(function(u){return Mc(u,g,n)})}const _=[];for(let g=0,u=e.length;g<u;g++){const f=e[g],M=ev(f),a=l[M];if(a)_.push(a.promise);else{let E;f.extensions&&f.extensions[Ct.KHR_DRACO_MESH_COMPRESSION]?E=h(f):E=Mc(new qn,f,n),l[M]={primitive:f,promise:E},_.push(E)}}return Promise.all(_)}loadMesh(e){const n=this,i=this.json,l=this.extensions,h=i.meshes[e],_=h.primitives,g=[];for(let u=0,f=_.length;u<f;u++){const M=_[u].material===void 0?Z_(this.cache):this.getDependency("material",_[u].material);g.push(M)}return g.push(n.loadGeometries(_)),Promise.all(g).then(function(u){const f=u.slice(0,u.length-1),M=u[u.length-1],a=[];for(let p=0,d=M.length;p<d;p++){const s=M[p],r=_[p];let t;const c=f[p];if(r.mode===_i.TRIANGLES||r.mode===_i.TRIANGLE_STRIP||r.mode===_i.TRIANGLE_FAN||r.mode===void 0)t=h.isSkinnedMesh===!0?new zg(s,c):new si(s,c),t.isSkinnedMesh===!0&&!t.geometry.attributes.skinWeight.normalized&&t.normalizeSkinWeights(),r.mode===_i.TRIANGLE_STRIP?t.geometry=Lc(t.geometry,Ah):r.mode===_i.TRIANGLE_FAN&&(t.geometry=Lc(t.geometry,Uc));else if(r.mode===_i.LINES)t=new jg(s,c);else if(r.mode===_i.LINE_STRIP)t=new Pa(s,c);else if(r.mode===_i.LINE_LOOP)t=new qg(s,c);else if(r.mode===_i.POINTS)t=new Yg(s,c);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+r.mode);Object.keys(t.geometry.morphAttributes).length>0&&Q_(t,h),t.name=n.createUniqueName(h.name||"mesh_"+e),Yi(t,h),r.extensions&&cr(l,t,r),n.assignFinalMaterial(t),a.push(t)}for(let p=0,d=a.length;p<d;p++)n.associations.set(a[p],{meshes:e,primitives:p});if(a.length===1)return a[0];const E=new es;n.associations.set(E,{meshes:e});for(let p=0,d=a.length;p<d;p++)E.add(a[p]);return E})}loadCamera(e){let n;const i=this.json.cameras[e],l=i[i.type];if(!l){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new gn(Vh.radToDeg(l.yfov),l.aspectRatio||1,l.znear||1,l.zfar||2e6):i.type==="orthographic"&&(n=new La(-l.xmag,l.xmag,l.ymag,-l.ymag,l.znear,l.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),Yi(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i={joints:n.joints};return n.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",n.inverseBindMatrices).then(function(l){return i.inverseBindMatrices=l,i})}loadAnimation(e){const i=this.json.animations[e],l=[],h=[],_=[],g=[],u=[];for(let f=0,M=i.channels.length;f<M;f++){const a=i.channels[f],E=i.samplers[a.sampler],p=a.target,d=p.node!==void 0?p.node:p.id,s=i.parameters!==void 0?i.parameters[E.input]:E.input,r=i.parameters!==void 0?i.parameters[E.output]:E.output;l.push(this.getDependency("node",d)),h.push(this.getDependency("accessor",s)),_.push(this.getDependency("accessor",r)),g.push(E),u.push(p)}return Promise.all([Promise.all(l),Promise.all(h),Promise.all(_),Promise.all(g),Promise.all(u)]).then(function(f){const M=f[0],a=f[1],E=f[2],p=f[3],d=f[4],s=[];for(let t=0,c=M.length;t<c;t++){const m=M[t],v=a[t],x=E[t],w=p[t],R=d[t];if(m===void 0)continue;m.updateMatrix();let S;switch(ki[R.path]){case ki.weights:S=Er;break;case ki.rotation:S=ls;break;case ki.position:case ki.scale:default:S=xr;break}const L=m.name?m.name:m.uuid,A=w.interpolation!==void 0?Y_[w.interpolation]:$s,y=[];ki[R.path]===ki.weights?m.traverse(function(B){B.morphTargetInfluences&&y.push(B.name?B.name:B.uuid)}):y.push(L);let P=x.array;if(x.normalized){const B=ba(P.constructor),T=new Float32Array(P.length);for(let I=0,D=P.length;I<D;I++)T[I]=P[I]*B;P=T}for(let B=0,T=y.length;B<T;B++){const I=new S(y[B]+"."+ki[R.path],v.array,P,A);w.interpolation==="CUBICSPLINE"&&(I.createInterpolant=function(k){const U=this instanceof ls?q_:du;return new U(this.times,this.values,this.getValueSize()/3,k)},I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),s.push(I)}}const r=i.name?i.name:"animation_"+e;return new n_(r,void 0,s)})}createNodeMesh(e){const n=this.json,i=this,l=n.nodes[e];return l.mesh===void 0?null:i.getDependency("mesh",l.mesh).then(function(h){const _=i._getNodeRef(i.meshCache,l.mesh,h);return l.weights!==void 0&&_.traverse(function(g){if(!!g.isMesh)for(let u=0,f=l.weights.length;u<f;u++)g.morphTargetInfluences[u]=l.weights[u]}),_})}loadNode(e){const n=this.json,i=this.extensions,l=this,h=n.nodes[e],_=h.name?l.createUniqueName(h.name):"";return function(){const g=[],u=l._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return u&&g.push(u),h.camera!==void 0&&g.push(l.getDependency("camera",h.camera).then(function(f){return l._getNodeRef(l.cameraCache,h.camera,f)})),l._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){g.push(f)}),Promise.all(g)}().then(function(g){let u;if(h.isBone===!0?u=new su:g.length>1?u=new es:g.length===1?u=g[0]:u=new Yt,u!==g[0])for(let f=0,M=g.length;f<M;f++)u.add(g[f]);if(h.name&&(u.userData.name=h.name,u.name=_),Yi(u,h),h.extensions&&cr(i,u,h),h.matrix!==void 0){const f=new It;f.fromArray(h.matrix),u.applyMatrix4(f)}else h.translation!==void 0&&u.position.fromArray(h.translation),h.rotation!==void 0&&u.quaternion.fromArray(h.rotation),h.scale!==void 0&&u.scale.fromArray(h.scale);return l.associations.has(u)||l.associations.set(u,{}),l.associations.get(u).nodes=e,u})}loadScene(e){const n=this.json,i=this.extensions,l=this.json.scenes[e],h=this,_=new es;l.name&&(_.name=h.createUniqueName(l.name)),Yi(_,l),l.extensions&&cr(i,_,l);const g=l.nodes||[],u=[];for(let f=0,M=g.length;f<M;f++)u.push(fu(g[f],_,n,h));return Promise.all(u).then(function(){const f=M=>{const a=new Map;for(const[E,p]of h.associations)(E instanceof oi||E instanceof vn)&&a.set(E,p);return M.traverse(E=>{const p=h.associations.get(E);p!=null&&a.set(E,p)}),a};return h.associations=f(_),_})}}function fu(C,e,n,i){const l=n.nodes[C];return i.getDependency("node",C).then(function(h){if(l.skin===void 0)return h;let _;return i.getDependency("skin",l.skin).then(function(g){_=g;const u=[];for(let f=0,M=_.joints.length;f<M;f++)u.push(i.getDependency("node",_.joints[f]));return Promise.all(u)}).then(function(g){return h.traverse(function(u){if(!u.isMesh)return;const f=[],M=[];for(let a=0,E=g.length;a<E;a++){const p=g[a];if(p){f.push(p);const d=new It;_.inverseBindMatrices!==void 0&&d.fromArray(_.inverseBindMatrices.array,a*16),M.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',_.joints[a])}u.bind(new Na(f,M),u.matrixWorld)}),h})}).then(function(h){e.add(h);const _=[];if(l.children){const g=l.children;for(let u=0,f=g.length;u<f;u++){const M=g[u];_.push(fu(M,h,n,i))}}return Promise.all(_)})}function iv(C,e,n){const i=e.attributes,l=new zs;if(i.POSITION!==void 0){const g=n.json.accessors[i.POSITION],u=g.min,f=g.max;if(u!==void 0&&f!==void 0){if(l.set(new ce(u[0],u[1],u[2]),new ce(f[0],f[1],f[2])),g.normalized){const M=ba(Sr[g.componentType]);l.min.multiplyScalar(M),l.max.multiplyScalar(M)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const h=e.targets;if(h!==void 0){const g=new ce,u=new ce;for(let f=0,M=h.length;f<M;f++){const a=h[f];if(a.POSITION!==void 0){const E=n.json.accessors[a.POSITION],p=E.min,d=E.max;if(p!==void 0&&d!==void 0){if(u.setX(Math.max(Math.abs(p[0]),Math.abs(d[0]))),u.setY(Math.max(Math.abs(p[1]),Math.abs(d[1]))),u.setZ(Math.max(Math.abs(p[2]),Math.abs(d[2]))),E.normalized){const s=ba(Sr[E.componentType]);u.multiplyScalar(s)}g.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}l.expandByVector(g)}C.boundingBox=l;const _=new Xs;l.getCenter(_.center),_.radius=l.min.distanceTo(l.max)/2,C.boundingSphere=_}function Mc(C,e,n){const i=e.attributes,l=[];function h(_,g){return n.getDependency("accessor",_).then(function(u){C.setAttribute(g,u)})}for(const _ in i){const g=Sa[_]||_.toLowerCase();g in C.attributes||l.push(h(i[_],g))}if(e.indices!==void 0&&!C.index){const _=n.getDependency("accessor",e.indices).then(function(g){C.setIndex(g)});l.push(_)}return Yi(C,e),iv(C,e,n),Promise.all(l).then(function(){return e.targets!==void 0?J_(C,e.targets,n):C})}function Lc(C,e){let n=C.getIndex();if(n===null){const _=[],g=C.getAttribute("position");if(g!==void 0){for(let u=0;u<g.count;u++)_.push(u);C.setIndex(_),n=C.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),C}const i=n.count-2,l=[];if(e===Uc)for(let _=1;_<=i;_++)l.push(n.getX(0)),l.push(n.getX(_)),l.push(n.getX(_+1));else for(let _=0;_<i;_++)_%2===0?(l.push(n.getX(_)),l.push(n.getX(_+1)),l.push(n.getX(_+2))):(l.push(n.getX(_+2)),l.push(n.getX(_+1)),l.push(n.getX(_)));l.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const h=C.clone();return h.setIndex(l),h}const la=new WeakMap;class sv extends Ys{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,l){const h=new Eo(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,_=>{const g={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(_,g).then(n).catch(l)},i,l)}decodeDracoFile(e,n,i,l){const h={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:l||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,h).then(n)}decodeGeometry(e,n){for(const u in n.attributeTypes){const f=n.attributeTypes[u];f.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[u]=f.name)}const i=JSON.stringify(n);if(la.has(e)){const u=la.get(e);if(u.key===i)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let l;const h=this.workerNextTaskID++,_=e.byteLength,g=this._getWorker(h,_).then(u=>(l=u,new Promise((f,M)=>{l._callbacks[h]={resolve:f,reject:M},l.postMessage({type:"decode",id:h,taskConfig:n,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return g.catch(()=>!0).then(()=>{l&&h&&this._releaseTask(l,h)}),la.set(e,{key:i,promise:g}),g}_createGeometry(e){const n=new qn;e.index&&n.setIndex(new _n(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const l=e.attributes[i],h=l.name,_=l.array,g=l.itemSize;n.setAttribute(h,new _n(_,g))}return n}_loadLibrary(e,n){const i=new Eo(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((l,h)=>{i.load(e,l,void 0,h)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const l=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const h=rv.toString(),_=["/* draco decoder */",l,"","/* worker */",h.substring(h.indexOf("{")+1,h.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([_]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const l=new Worker(this.workerSourceURL);l._callbacks={},l._taskCosts={},l._taskLoad=0,l.postMessage({type:"init",decoderConfig:this.decoderConfig}),l.onmessage=function(h){const _=h.data;switch(_.type){case"decode":l._callbacks[_.id].resolve(_);break;case"error":l._callbacks[_.id].reject(_);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+_.type+'"')}},this.workerPool.push(l)}else this.workerPool.sort(function(l,h){return l._taskLoad>h._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function rv(){let C,e;onmessage=function(_){const g=_.data;switch(g.type){case"init":C=g.decoderConfig,e=new Promise(function(M){C.onModuleLoaded=function(a){M({draco:a})},DracoDecoderModule(C)});break;case"decode":const u=g.buffer,f=g.taskConfig;e.then(M=>{const a=M.draco,E=new a.Decoder,p=new a.DecoderBuffer;p.Init(new Int8Array(u),u.byteLength);try{const d=n(a,E,p,f),s=d.attributes.map(r=>r.array.buffer);d.index&&s.push(d.index.array.buffer),self.postMessage({type:"decode",id:g.id,geometry:d},s)}catch(d){console.error(d),self.postMessage({type:"error",id:g.id,error:d.message})}finally{a.destroy(p),a.destroy(E)}});break}};function n(_,g,u,f){const M=f.attributeIDs,a=f.attributeTypes;let E,p;const d=g.GetEncodedGeometryType(u);if(d===_.TRIANGULAR_MESH)E=new _.Mesh,p=g.DecodeBufferToMesh(u,E);else if(d===_.POINT_CLOUD)E=new _.PointCloud,p=g.DecodeBufferToPointCloud(u,E);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||E.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const s={index:null,attributes:[]};for(const r in M){const t=self[a[r]];let c,m;if(f.useUniqueIDs)m=M[r],c=g.GetAttributeByUniqueId(E,m);else{if(m=g.GetAttributeId(E,_[M[r]]),m===-1)continue;c=g.GetAttribute(E,m)}s.attributes.push(l(_,g,E,r,t,c))}return d===_.TRIANGULAR_MESH&&(s.index=i(_,g,E)),_.destroy(E),s}function i(_,g,u){const M=u.num_faces()*3,a=M*4,E=_._malloc(a);g.GetTrianglesUInt32Array(u,a,E);const p=new Uint32Array(_.HEAPF32.buffer,E,M).slice();return _._free(E),{array:p,itemSize:1}}function l(_,g,u,f,M,a){const E=a.num_components(),d=u.num_points()*E,s=d*M.BYTES_PER_ELEMENT,r=h(_,M),t=_._malloc(s);g.GetAttributeDataArrayForAllPoints(u,a,r,s,t);const c=new M(_.HEAPF32.buffer,t,d).slice();return _._free(t),{name:f,array:c,itemSize:E}}function h(_,g){switch(g){case Float32Array:return _.DT_FLOAT32;case Int8Array:return _.DT_INT8;case Int16Array:return _.DT_INT16;case Int32Array:return _.DT_INT32;case Uint8Array:return _.DT_UINT8;case Uint16Array:return _.DT_UINT16;case Uint32Array:return _.DT_UINT32}}}new Aa({width:400});const mu=document.querySelector("canvas.webgl"),Ua=new Wg,ov=new uu,pu=new sv;pu.setDecoderPath("./draco/");const gu=new R_;gu.setDRACOLoader(pu);const Ic=new ii({color:16777189}),av=new ii({color:16777215,side:Gi}),$a=ov.load("./resources/portal_baked.jpg");$a.flipY=!1;$a.colorSpace=zn;const lv=new ii({map:$a});gu.load("./resources/portal.glb",C=>{const e=C.scene.children.find(h=>h.name==="baked"),n=C.scene.children.find(h=>h.name==="portalLight"),i=C.scene.children.find(h=>h.name==="poleLightA"),l=C.scene.children.find(h=>h.name==="poleLightB");i.material=Ic,l.material=Ic,n.material=av,e.material=lv,Ua.add(C.scene)});const ni={width:window.innerWidth,height:window.innerHeight};window.addEventListener("resize",()=>{ni.width=window.innerWidth,ni.height=window.innerHeight,Wi.aspect=ni.width/ni.height,Wi.updateProjectionMatrix(),Vs.setSize(ni.width,ni.height),Vs.setPixelRatio(Math.min(window.devicePixelRatio,2))});const Wi=new gn(45,ni.width/ni.height,.1,100);Wi.position.x=4;Wi.position.y=2;Wi.position.z=4;Ua.add(Wi);const _u=new T_(Wi,mu);_u.enableDamping=!0;const Vs=new iu({canvas:mu,antialias:!0});Vs.setSize(ni.width,ni.height);Vs.setPixelRatio(Math.min(window.devicePixelRatio,2));Vs.outputColorSpace=zn;const cv=new g_,vu=()=>{cv.getElapsedTime(),_u.update(),Vs.render(Ua,Wi),window.requestAnimationFrame(vu)};vu();
